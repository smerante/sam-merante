function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _construct(e,t,n){return(_construct=isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(i,n.prototype),i}).apply(null,arguments)}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+7AZ":function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return h})),n.d(t,"__exportStar",(function(){return d})),n.d(t,"__values",(function(){return f})),n.d(t,"__read",(function(){return p})),n.d(t,"__spread",(function(){return g})),n.d(t,"__await",(function(){return m})),n.d(t,"__asyncGenerator",(function(){return v})),n.d(t,"__asyncDelegator",(function(){return y})),n.d(t,"__asyncValues",(function(){return b})),n.d(t,"__makeTemplateObject",(function(){return _})),n.d(t,"__importStar",(function(){return w})),n.d(t,"__importDefault",(function(){return C}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof m?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function y(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:m(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}},0:function(e,t,n){e.exports=n("zUnb")},"4ftG":function(e,t,n){var r=n("rSCU"),i=n("GMxU").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(t){return a.slice()}}(e):i(r(e))}},"61rj":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"6CFf":function(e,t,n){var r=n("L97z");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},"6Joi":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("q/0M"),a=n("os0x"),s=n("x7I3"),u=n("zVF4"),c=i.SDK_VERSION,l=new o.Logger("@firebase/firestore"),h=function(e){return e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT",e}({});function d(){return l.logLevel===o.LogLevel.DEBUG?h.DEBUG:l.logLevel===o.LogLevel.SILENT?h.SILENT:h.ERROR}function f(e){switch(e){case h.DEBUG:l.logLevel=o.LogLevel.DEBUG;break;case h.ERROR:l.logLevel=o.LogLevel.ERROR;break;case h.SILENT:l.logLevel=o.LogLevel.SILENT;break;default:l.error("Firestore ("+c+"): Invalid value passed to `setLogLevel`")}}function p(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(l.logLevel<=o.LogLevel.DEBUG){var i=n.map(m);l.debug.apply(l,["Firestore ("+c+") ["+e+"]: "+t].concat(i))}}function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(l.logLevel<=o.LogLevel.ERROR){var r=t.map(m);l.error.apply(l,["Firestore ("+c+"): "+e].concat(r))}}function m(e){if("string"==typeof e)return e;var t=b.getPlatform();try{return t.formatJSON(e)}catch(n){return e}}function v(e){var t="FIRESTORE ("+c+") INTERNAL ASSERTION FAILED: "+e;throw g(t),new Error(t)}function y(e,t){e||v(t)}var b=function(){function e(){}return e.setPlatform=function(t){e.platform&&v("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||v("Platform not set"),e.platform},e}();function _(){return b.getPlatform().emptyByteString}var w=function(e){function t(t,n){var r=e.call(this,n)||this;return r.code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return a.__extends(t,e),t}(Error);function C(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new w("invalid-argument",e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function S(e,t){return void 0!==e?e:t}function E(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function T(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function x(e){for(var t in y(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function I(e,t){if(0!==t.length)throw new w("invalid-argument","Function "+e+"() does not support arguments, but was called with "+H(t.length,"argument")+".")}function P(e,t,n){if(t.length!==n)throw new w("invalid-argument","Function "+e+"() requires "+H(n,"argument")+", but was called with "+H(t.length,"argument")+".")}function O(e,t,n){if(t.length<n)throw new w("invalid-argument","Function "+e+"() requires at least "+H(n,"argument")+", but was called with "+H(t.length,"argument")+".")}function D(e,t,n,r){if(t.length<n||t.length>r)throw new w("invalid-argument","Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+H(t.length,"argument")+".")}function A(e,t,n,r){if(!(t instanceof Array)||t.length<r)throw new w("invalid-argument","Function "+e+"() requires its "+n+" argument to be an array with at least "+H(r,"element")+".")}function R(e,t,n,r){V(e,t,z(n)+" argument",r)}function N(e,t,n,r){void 0!==r&&R(e,t,n,r)}function M(e,t,n,r){V(e,t,n+" option",r)}function F(e,t,n,r){void 0!==r&&M(e,t,n,r)}function L(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(j(u))}var c=j(r);throw new w("invalid-argument","Invalid value "+c+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function V(e,t,n,r){if(!("object"===t?U(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=j(r);throw new w("invalid-argument","Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function U(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function j(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":v("Unknown wrong type: "+typeof e)}function q(e,t,n){if(void 0===n)throw new w("invalid-argument","Function "+e+"() requires a valid "+z(t)+" argument, but it was undefined.")}function B(e,t,n){T(t,(function(t,r){if(n.indexOf(t)<0)throw new w("invalid-argument","Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function W(e,t,n,r){var i=j(r);return new w("invalid-argument","Function "+e+"() requires its "+z(n)+" argument to be a "+t+", but it was: "+i)}function z(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function H(e,t){return e+" "+t+(1===e?"":"s")}var G=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return y(20===t.length,"Invalid auto ID: "+t),t},e}();function Q(e,t){return e<t?-1:e>t?1:0}function K(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function Y(e){return e+"\0"}function X(){if("undefined"==typeof Uint8Array)throw new w("unimplemented","Uint8Arrays are not available in this environment.")}function J(){if(!b.getPlatform().base64Available)throw new w("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Z=function(){function e(e){J(),this._binaryString=e}return e.fromBase64String=function(t){P("Blob.fromBase64String",arguments,1),R("Blob.fromBase64String","string",1,t),J();try{var n=b.getPlatform().atob(t);return new e(n)}catch(r){throw new w("invalid-argument","Failed to construct Blob from Base64 string: "+r)}},e.fromUint8Array=function(t){if(P("Blob.fromUint8Array",arguments,1),X(),!(t instanceof Uint8Array))throw W("Blob.fromUint8Array","Uint8Array",1,t);var n=Array.prototype.map.call(t,(function(e){return String.fromCharCode(e)})).join("");return new e(n)},e.prototype.toBase64=function(){return P("Blob.toBase64",arguments,0),J(),b.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){P("Blob.toUint8Array",arguments,0),X();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return Q(this._binaryString,e._binaryString)},e}(),$=C(Z,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),ee=function(){function e(e,t){if(P("GeoPoint",arguments,2),R("GeoPoint","number",1,e),R("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new w("invalid-argument","Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new w("invalid-argument","Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return Q(this._lat,e._lat)||Q(this._long,e._long)},e}(),te=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new w("invalid-argument","Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new w("invalid-argument","Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new w("invalid-argument","Timestamp seconds out of range: "+e);if(e>=253402300800)throw new w("invalid-argument","Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?Q(this.nanoseconds,e.nanoseconds):Q(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),ne=function(e,t,n,r){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r},re=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return Q(this.projectId,e.projectId)||Q(this.database,e.database)},e}(),ie=function(){function e(e,t,n){this.init(e,t,n)}return e.prototype.init=function(e,t,n){void 0===t?t=0:t>e.length&&v("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&v("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n},e.prototype.construct=function(e,t,n){var r=Object.create(Object.getPrototypeOf(this));return r.init(e,t,n),r},Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):"string"==typeof t?n.push(t):v("Unknown parameter type for Path.child(): "+t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return y(this.length>=(e=void 0===e?1:e),"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return y(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return y(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return y(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(e.indexOf("//")>=0)throw new w("invalid-argument","Invalid path ("+e+"). Paths must not contain // in them.");return new t(e.split("/").filter((function(e){return e.length>0})))},t.EMPTY_PATH=new t([]),t}(ie),ae=/^[_a-zA-Z][_a-zA-Z0-9]*$/,se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.isValidIdentifier=function(e){return ae.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new w("invalid-argument","Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new w("invalid-argument","Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new w("invalid-argument","Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new w("invalid-argument","Unterminated ` in path: "+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(ie),ue=function(){function e(t){this.path=t,y(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===oe.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return oe.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new oe(t.slice()))},e.fromPathString=function(t){return new e(oe.fromString(t))},e.EMPTY=new e(new oe([])),e}(),ce=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return ue.comparator(e.key,t.key)},e}(),le=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n)||this;return a.data=r,a.proto=o,a.hasLocalMutations=!!i.hasLocalMutations,a.hasCommittedMutations=!!i.hasCommittedMutations,a}return a.__extends(t,e),t.prototype.field=function(e){return this.data.field(e)},t.prototype.fieldValue=function(e){var t=this.field(e);return t?t.value():void 0},t.prototype.value=function(){return this.data.value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.data.isEqual(e.data)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return void 0!==r&&void 0!==i?r.compareTo(i):v("Trying to compare documents on fields that don't exist")},t}(ce),he=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return a.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(ce),de=function(e){function t(t,n){return e.call(this,t,n)||this}return a.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(ce),fe=function(){function e(e,t){this.comparator=e,this.root=t||ge.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ge.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ge.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new pe(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new pe(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new pe(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new pe(this.root,e,this.comparator,!0)},e}(),pe=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){y(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),ge=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw v("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw v("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw v("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),me=function(){function e(){this.size=0}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new ge(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();ge.EMPTY=new me;var ve=function(e){return e[e.NullValue=0]="NullValue",e[e.BooleanValue=1]="BooleanValue",e[e.NumberValue=2]="NumberValue",e[e.TimestampValue=3]="TimestampValue",e[e.StringValue=4]="StringValue",e[e.BlobValue=5]="BlobValue",e[e.RefValue=6]="RefValue",e[e.GeoPointValue=7]="GeoPointValue",e[e.ArrayValue=8]="ArrayValue",e[e.ObjectValue=9]="ObjectValue",e}({}),ye=function(e){return e[e.Default=0]="Default",e[e.Estimate=1]="Estimate",e[e.Previous=2]="Previous",e}({}),be=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(ye.Estimate,n);case"previous":return new e(ye.Previous,n);case"none":case void 0:return new e(ye.Default,n);default:return v("fromSnapshotOptions() called with invalid options.")}},e}(),_e=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return y(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),Q(this.typeOrder,e.typeOrder)},e}(),we=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=ve.NullValue,t.internalValue=null,t}return a.__extends(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(_e),Ce=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=ve.BooleanValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?Q(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(_e),ke=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=ve.NumberValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?(n=this.internalValue)<(r=e.internalValue)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.defaultCompareTo(e);var n,r},t}(_e);function Se(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var Ee=function(e){function t(t){return e.call(this,t)||this}return a.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Se(this.internalValue,e.internalValue)},t}(ke),Te=function(e){function t(t){var n=e.call(this,t)||this;return n.internalValue=t,n}return a.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Se(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(ke),xe=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=ve.StringValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?Q(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(_e),Ie=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=ve.TimestampValue,n}return a.__extends(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof Pe?-1:this.defaultCompareTo(e)},t}(_e),Pe=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=ve.TimestampValue,r}return a.__extends(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===ye.Estimate?new Ie(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===ye.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof Ie?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(_e),Oe=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=ve.BlobValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(_e),De=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=ve.RefValue,r}return a.__extends(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId)},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:ue.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(_e),Ae=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=ve.GeoPointValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(_e),Re=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=ve.ObjectValue,n}return a.__extends(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal((function(n,r){t[n]=r.value(e)})),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=Q(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return Q(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(y(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),n);var r=this.child(e.firstSegment());r instanceof t||(r=t.EMPTY);var i=r.set(e.popFirst(),n);return this.setChild(e.firstSegment(),i)},t.prototype.delete=function(e){if(y(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var r=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),r))}return this},t.prototype.contains=function(e){return void 0!==this.field(e)},t.prototype.field=function(e){y(!e.isEmpty(),"Can't get field of empty path");var n=this;return e.forEach((function(e){n=n instanceof t&&n.internalValue.get(e)||void 0})),n},t.prototype.toString=function(){return this.internalValue.toString()},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new fe(Q)),t}(_e),Ne=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=ve.ArrayValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue.map((function(t){return t.value(e)}))},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(e.internalValue[r]);if(i)return i}return Q(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){return"["+this.internalValue.map((function(e){return e.toString()})).join(",")+"]"},t}(_e),Me=Number,Fe=Me.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Le=Me.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Ve=Me.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function Ue(e){return null==e}function je(e){return Ve(e)&&e<=Le&&e>=Fe}var qe=function(){function e(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)this.memoizedOrderBy=e.isKeyField()?[Xe]:[new Ye(e),Xe];else{y(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}n||this.memoizedOrderBy.push((this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Qe.ASCENDING)===Qe.ASCENDING?Xe:Je)}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){y(null==this.getInequalityFilterField()||!(t instanceof ze)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),y(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([t]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){y(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.withLimit=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(t){return new e(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();this.isCollectionGroupQuery()&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++)e+=n[t].canonicalId(),e+=",";e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)e+=i[r].canonicalId(),e+=",";Ue(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(e+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),Ue(this.limit)||(e+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(e+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&!!this.path.isEqual(e.path)&&!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return y(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimit=function(){return!Ue(this.limit)},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof ze&&n.isInequality())return n.field}return null},e.prototype.hasArrayContainsFilter=function(){return void 0!==this.filters.find((function(e){return e instanceof ze&&e.op===We.ARRAY_CONTAINS}))},e.prototype.isDocumentQuery=function(){return ue.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):ue.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&void 0===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++)if(!n[t].matches(e))return!1;return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){y(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),Be=function(){function e(){}return e.create=function(e,t,n){if(n.isEqual(we.INSTANCE)){if(t!==We.EQUAL)throw new w("invalid-argument","Invalid query. You can only perform equals comparisons on null.");return new He(e)}if(n.isEqual(Te.NAN)){if(t!==We.EQUAL)throw new w("invalid-argument","Invalid query. You can only perform equals comparisons on NaN.");return new Ge(e)}return new ze(e,t,n)},e}(),We=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;default:return v("Unknown relation: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e}(),ze=function(e){function t(t,n,r){var i=e.call(this)||this;return i.field=t,i.op=n,i.value=r,i}return a.__extends(t,e),t.prototype.matches=function(e){if(this.field.isKeyField()){y(this.value instanceof De,"Comparing on key, but filter value not a RefValue"),y(this.op!==We.ARRAY_CONTAINS,"array-contains queries don't make sense on document keys.");var t=ue.comparator(e.key,this.value.key);return this.matchesComparison(t)}var n=e.field(this.field);return void 0!==n&&this.matchesValue(n)},t.prototype.matchesValue=function(e){var t=this;return this.op===We.ARRAY_CONTAINS?e instanceof Ne&&void 0!==e.internalValue.find((function(e){return e.isEqual(t.value)})):this.value.typeOrder===e.typeOrder&&this.matchesComparison(e.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case We.LESS_THAN:return e<0;case We.LESS_THAN_OR_EQUAL:return e<=0;case We.EQUAL:return 0===e;case We.GREATER_THAN:return e>0;case We.GREATER_THAN_OR_EQUAL:return e>=0;default:return v("Unknown relation op"+this.op)}},t.prototype.isInequality=function(){return this.op!==We.EQUAL&&this.op!==We.ARRAY_CONTAINS},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(Be),He=function(e){function t(t){var n=e.call(this)||this;return n.field=t,n}return a.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return void 0!==t&&null===t.value()},t.prototype.canonicalId=function(){return this.field.canonicalString()+" IS null"},t.prototype.toString=function(){return this.field.canonicalString()+" IS null"},t.prototype.isEqual=function(e){return e instanceof t&&this.field.isEqual(e.field)},t}(Be),Ge=function(e){function t(t){var n=e.call(this)||this;return n.field=t,n}return a.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field),n=t&&t.value();return"number"==typeof n&&isNaN(n)},t.prototype.canonicalId=function(){return this.field.canonicalString()+" IS NaN"},t.prototype.toString=function(){return this.field.canonicalString()+" IS NaN"},t.prototype.isEqual=function(e){return e instanceof t&&this.field.isEqual(e.field)},t}(Be),Qe=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),Ke=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++)e+=n[t].toString();return e},e.prototype.sortsBeforeDocument=function(e,t){y(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())y(o instanceof De,"Bound has a non-key value where the key path is being used."),n=ue.comparator(o.key,t.key);else{var a=t.field(i.field);y(void 0!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===Qe.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++)return this.position[t].isEqual(e.position[t]);return!0},e}(),Ye=function(){function e(e,t){this.field=e,void 0===t&&(t=Qe.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?le.compareByKey(e,t):le.compareByField(this.field,e,t);switch(this.dir){case Qe.ASCENDING:return n;case Qe.DESCENDING:return-1*n;default:return v("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),Xe=new Ye(se.keyField(),Qe.ASCENDING),Je=new Ye(se.keyField(),Qe.DESCENDING),Ze=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new te(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new te(0,0)),e}(),$e=function(e){return e[e.Listen=0]="Listen",e[e.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",e[e.LimboResolution=2]="LimboResolution",e}({}),et=function(){function e(e,t,n,r,i,o){void 0===i&&(i=Ze.MIN),void 0===o&&(o=_()),this.query=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.resumeToken=o}return e.prototype.copy=function(t){return new e(this.query,this.targetId,this.purpose,void 0===t.sequenceNumber?this.sequenceNumber:t.sequenceNumber,void 0===t.snapshotVersion?this.snapshotVersion:t.snapshotVersion,void 0===t.resumeToken?this.resumeToken:t.resumeToken)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.resumeToken===e.resumeToken&&this.query.isEqual(e.query)},e}(),tt=function(){function e(e){this.comparator=e,this.data=new fe(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach((function(e){n=n.add(e)})),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new nt(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new nt(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),nt=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),rt=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new tt(se.comparator);return t.forEach((function(e){return n=n.add(e)})),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach((function(n){n.isPrefixOf(e)&&(t=!0)})),t},e.prototype.applyTo=function(e){var t=Re.EMPTY;return this.fields.forEach((function(n){if(n.isEmpty())return e;var r=e.field(n);void 0!==r&&(t=t.set(n,r))})),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),it=function(){function e(e,t){this.field=e,this.transform=t}return Object.defineProperty(e.prototype,"isIdempotent",{get:function(){return this.transform.isIdempotent},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),ot=function(e,t){this.version=e,this.transformResults=t},at=function(e){return e[e.Set=0]="Set",e[e.Patch=1]="Patch",e[e.Transform=2]="Transform",e[e.Delete=3]="Delete",e}({}),st=function(){function e(e,t){this.updateTime=e,this.exists=t,y(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof le&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof le:(y(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return n=e.updateTime,(null!=(t=this.updateTime)?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},e.NONE=new e,e}(),ut=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&y(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof le?e.version:Ze.MIN},e}(),ct=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.value=n,i.precondition=r,i.type=at.Set,i}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),y(null==t.transformResults,"Transform results received by SetMutation."),new le(this.key,t.version,this.value,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=ut.getPostMutationVersion(e);return new le(this.key,r,this.value,{hasLocalMutations:!0})},Object.defineProperty(t.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fieldMask",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(ut),lt=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.key=t,o.data=n,o.fieldMask=r,o.precondition=i,o.type=at.Patch,o}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),y(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new de(this.key,t.version);var n=this.patchDocument(e);return new le(this.key,t.version,n,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=ut.getPostMutationVersion(e),i=this.patchDocument(e);return new le(this.key,r,i,{hasLocalMutations:!0})},Object.defineProperty(t.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){return this.patchObject(e instanceof le?e.data:Re.EMPTY)},t.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e=void 0!==r?e.set(n,r):e.delete(n)}})),e},t}(ut),ht=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=at.Transform,r.precondition=st.exists(!0),r}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),y(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new de(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data,r);return new le(this.key,i,o,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,t),o=this.transformObject(r.data,i);return new le(this.key,r.version,o,{hasLocalMutations:!0})},Object.defineProperty(t.prototype,"isIdempotent",{get:function(){for(var e=0,t=this.fieldTransforms;e<t.length;e++)if(!t[e].isIdempotent)return!1;return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fieldMask",{get:function(){var e=new tt(se.comparator);return this.fieldTransforms.forEach((function(t){return e=e.add(t.field)})),new rt(e)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&K(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){y(e instanceof le,"Unknown MaybeDocument type "+e);var t=e;return y(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},t.prototype.serverTransformResults=function(e,t){var n=[];y(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof le&&(a=e.field(i.field)||null),n.push(o.applyToRemoteDocument(a,t[r]))}return n},t.prototype.localTransformResults=function(e,t){for(var n=[],r=0,i=this.fieldTransforms;r<i.length;r++){var o=i[r],a=o.transform,s=null;t instanceof le&&(s=t.field(o.field)||null),n.push(a.applyToLocalView(s,e))}return n},t.prototype.transformObject=function(e,t){y(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++)e=e.set(this.fieldTransforms[n].field,t[n]);return e},t}(ut),dt=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=at.Delete,r}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),y(null==t.transformResults,"Transform results received by DeleteMutation."),new he(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&y(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new he(this.key,Ze.forDeletedDoc())):e},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},Object.defineProperty(t.prototype,"isIdempotent",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fieldMask",{get:function(){return null},enumerable:!0,configurable:!0}),t}(ut),ft=function(){function e(){this.isIdempotent=!0}return e.prototype.applyToLocalView=function(e,t){return new Pe(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),pt=function(){function e(e){this.elements=e,this.isIdempotent=!0}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=vt(e),n=function(e){t.find((function(t){return t.isEqual(e)}))||t.push(e)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Ne(t)},e.prototype.isEqual=function(t){return t instanceof e&&K(t.elements,this.elements)},e}(),gt=function(){function e(e){this.elements=e,this.isIdempotent=!0}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=vt(e),n=function(e){t=t.filter((function(t){return!t.isEqual(e)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Ne(t)},e.prototype.isEqual=function(t){return t instanceof e&&K(t.elements,this.elements)},e}(),mt=function(){function e(e){this.operand=e,this.isIdempotent=!1}return e.prototype.applyToLocalView=function(e,t){return e instanceof Ee&&this.operand instanceof Ee?new Ee(e.internalValue+this.operand.internalValue):e instanceof ke?new Te(e.internalValue+this.operand.internalValue):this.operand},e.prototype.applyToRemoteDocument=function(e,t){return y(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}();function vt(e){return e instanceof Ne?e.internalValue.slice():[]}var yt=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}(),bt=function(e){return e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e}({});function _t(e){switch(e){case"ok":return v("Treated status OK as error");case"cancelled":case"unknown":case"deadline-exceeded":case"resource-exhausted":case"internal":case"unavailable":case"unauthenticated":return!1;case"invalid-argument":case"not-found":case"already-exists":case"permission-denied":case"failed-precondition":case"aborted":case"out-of-range":case"unimplemented":case"data-loss":return!0;default:return v("Unknown status code: "+e)}}function wt(e){if(void 0===e)return g("GRPC error has no .code"),"unknown";switch(e){case bt.OK:return"ok";case bt.CANCELLED:return"cancelled";case bt.UNKNOWN:return"unknown";case bt.DEADLINE_EXCEEDED:return"deadline-exceeded";case bt.RESOURCE_EXHAUSTED:return"resource-exhausted";case bt.INTERNAL:return"internal";case bt.UNAVAILABLE:return"unavailable";case bt.UNAUTHENTICATED:return"unauthenticated";case bt.INVALID_ARGUMENT:return"invalid-argument";case bt.NOT_FOUND:return"not-found";case bt.ALREADY_EXISTS:return"already-exists";case bt.PERMISSION_DENIED:return"permission-denied";case bt.FAILED_PRECONDITION:return"failed-precondition";case bt.ABORTED:return"aborted";case bt.OUT_OF_RANGE:return"out-of-range";case bt.UNIMPLEMENTED:return"unimplemented";case bt.DATA_LOSS:return"data-loss";default:return v("Unknown status code: "+e)}}function Ct(e){if(void 0===e)return bt.OK;switch(e){case"ok":return bt.OK;case"cancelled":return bt.CANCELLED;case"unknown":return bt.UNKNOWN;case"deadline-exceeded":return bt.DEADLINE_EXCEEDED;case"resource-exhausted":return bt.RESOURCE_EXHAUSTED;case"internal":return bt.INTERNAL;case"unavailable":return bt.UNAVAILABLE;case"unauthenticated":return bt.UNAUTHENTICATED;case"invalid-argument":return bt.INVALID_ARGUMENT;case"not-found":return bt.NOT_FOUND;case"already-exists":return bt.ALREADY_EXISTS;case"permission-denied":return bt.PERMISSION_DENIED;case"failed-precondition":return bt.FAILED_PRECONDITION;case"aborted":return bt.ABORTED;case"out-of-range":return bt.OUT_OF_RANGE;case"unimplemented":return bt.UNIMPLEMENTED;case"data-loss":return bt.DATA_LOSS;default:return v("Unknown status code: "+e)}}var kt=new fe(ue.comparator);function St(){return kt}function Et(){return St()}var Tt=new fe(ue.comparator);function xt(){return Tt}var It=new fe(ue.comparator);function Pt(){return It}var Ot=new tt(ue.comparator);function Dt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Ot,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var At=new tt(Q);function Rt(){return At}var Nt=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||ue.comparator(t.key,n.key)}:function(e,t){return ue.comparator(e.key,t.key)},this.keyedMap=xt(),this.sortedSet=new fe(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),Mt=function(e){return e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.Modified=2]="Modified",e[e.Metadata=3]="Metadata",e}({}),Ft=function(e){return e[e.Local=0]="Local",e[e.Synced=1]="Synced",e}({}),Lt=function(){function e(){this.changeMap=new fe(ue.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==Mt.Added&&n.type===Mt.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===Mt.Metadata&&n.type!==Mt.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===Mt.Modified&&n.type===Mt.Modified?this.changeMap=this.changeMap.insert(t,{type:Mt.Modified,doc:e.doc}):e.type===Mt.Modified&&n.type===Mt.Added?this.changeMap=this.changeMap.insert(t,{type:Mt.Added,doc:e.doc}):e.type===Mt.Removed&&n.type===Mt.Added?this.changeMap=this.changeMap.remove(t):e.type===Mt.Removed&&n.type===Mt.Modified?this.changeMap=this.changeMap.insert(t,{type:Mt.Removed,doc:n.doc}):e.type===Mt.Added&&n.type===Mt.Removed?this.changeMap=this.changeMap.insert(t,{type:Mt.Modified,doc:e.doc}):v("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal((function(t,n){e.push(n)})),e},e}(),Vt=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:Mt.Added,doc:e})})),new e(t,n,Nt.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Ut=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,i=((r={})[t]=jt.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(Ze.MIN,i,Rt(),St(),Dt())},e}(),jt=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(_(),n,Dt(),Dt(),Dt())},e}(),qt=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},Bt=function(e,t){this.targetId=e,this.existenceFilter=t},Wt=function(e){return e[e.NoChange=0]="NoChange",e[e.Added=1]="Added",e[e.Removed=2]="Removed",e[e.Current=3]="Current",e[e.Reset=4]="Reset",e}({}),zt=function(e,t,n,r){void 0===n&&(n=_()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},Ht=function(){function e(){this.pendingResponses=0,this.documentChanges=Kt(),this._resumeToken=_(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){e.length>0&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=Dt(),t=Dt(),n=Dt();return this.documentChanges.forEach((function(r,i){switch(i){case Mt.Added:e=e.add(r);break;case Mt.Modified:t=t.add(r);break;case Mt.Removed:n=n.add(r);break;default:v("Encountered invalid change type: "+i)}})),new jt(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=Kt()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),Gt=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=St(),this.pendingDocumentTargetMapping=Qt(),this.pendingTargetResets=new tt(Q)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof le?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof he&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)this.removeDocumentFromTarget(r=o[i],e.key,e.newDoc)},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ensureTargetState(n);switch(e.state){case Wt.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case Wt.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case Wt.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),y(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case Wt.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case Wt.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:v("Unknown target watch change state: "+e.state)}}))},e.prototype.forEachTarget=function(e,t){e.targetIds.length>0?e.targetIds.forEach(t):E(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.queryDataForActiveTarget(t);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new ue(i.path);this.removeDocumentFromTarget(t,o,new he(o,Ze.forDeletedDoc()))}else y(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},e.prototype.createRemoteEvent=function(e){var t=this,n={};E(this.targetStates,(function(r,i){var o=t.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var a=new ue(o.query.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new he(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}}));var r=Dt();this.pendingDocumentTargetMapping.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.queryDataForActiveTarget(e);return!n||n.purpose===$e.LimboResolution||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Ut(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=St(),this.pendingDocumentTargetMapping=Qt(),this.pendingTargetResets=new tt(Q),i},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?Mt.Modified:Mt.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,Mt.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new Ht),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new tt(Q),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){return null!==this.queryDataForActiveTarget(e)},e.prototype.queryDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getQueryDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;y(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new Ht,this.metadataProvider.getRemoteKeysForTarget(e).forEach((function(n){t.removeDocumentFromTarget(e,n,null)}))},e.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},e}();function Qt(){return new fe(ue.comparator)}function Kt(){return new fe(ue.comparator)}var Yt,Xt,Jt=((Yt={})[Qe.ASCENDING.name]="ASCENDING",Yt[Qe.DESCENDING.name]="DESCENDING",Yt),Zt=((Xt={})[We.LESS_THAN.name]="LESS_THAN",Xt[We.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Xt[We.GREATER_THAN.name]="GREATER_THAN",Xt[We.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Xt[We.EQUAL.name]="EQUAL",Xt[We.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",Xt),$t=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function en(e,t){y(!Ue(e),t+" is missing")}function tn(e){return"number"==typeof e?e:"string"==typeof e?Number(e):v("can't parse "+e)}var nn=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?"unknown":wt(e.code);return new w(t,e.message||"")},e.prototype.toInt32Value=function(e){return Ue(e)?void 0:{value:e}},e.prototype.fromInt32Value=function(e){var t;return Ue(t="object"==typeof e?e.value:e)?null:t},e.prototype.toTimestamp=function(e){return{seconds:e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);y(!!e,"Cannot deserialize null or undefined timestamp.");var t=tn(e.seconds||"0");return new te(t,e.nanos||0)},e.prototype.fromIso8601String=function(e){var t=0,n=$t.exec(e);if(y(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new te(o,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"==typeof e?(y(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Z.fromBase64String(e)):(y(!this.options.useProto3Json,"Expected bytes to be passed in as string, but got something else instead."),Z.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return y(!!e,"Trying to deserialize version that isn't set"),Ze.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},e.prototype.fromResourceName=function(e){var t=oe.fromString(e);return y(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return y(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),y(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new ue(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?oe.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new oe(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new oe(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return y(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof we)return{nullValue:"NULL_VALUE"};if(e instanceof Ce)return{booleanValue:e.value()};if(e instanceof Ee)return{integerValue:""+e.value()};if(e instanceof Te){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof xe?{stringValue:e.value()}:e instanceof Re?{mapValue:this.toMapValue(e)}:e instanceof Ne?{arrayValue:this.toArrayValue(e)}:e instanceof Ie?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof Ae?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Oe?{bytesValue:this.toBytes(e.value())}:e instanceof De?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:v("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this,n=e.value_type;if(rn(e,n,"nullValue"))return we.INSTANCE;if(rn(e,n,"booleanValue"))return Ce.of(e.booleanValue);if(rn(e,n,"integerValue"))return new Ee(tn(e.integerValue));if(rn(e,n,"doubleValue")){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Te.NAN;if("Infinity"===e.doubleValue)return Te.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Te.NEGATIVE_INFINITY}return new Te(e.doubleValue)}if(rn(e,n,"stringValue"))return new xe(e.stringValue);if(rn(e,n,"mapValue"))return this.fromFields(e.mapValue.fields||{});if(rn(e,n,"arrayValue"))return en(e.arrayValue,"arrayValue"),new Ne((e.arrayValue.values||[]).map((function(e){return t.fromValue(e)})));if(rn(e,n,"timestampValue"))return en(e.timestampValue,"timestampValue"),new Ie(this.fromTimestamp(e.timestampValue));if(rn(e,n,"geoPointValue"))return en(e.geoPointValue,"geoPointValue"),new Ae(new ee(e.geoPointValue.latitude||0,e.geoPointValue.longitude||0));if(rn(e,n,"bytesValue")){en(e.bytesValue,"bytesValue");var r=this.fromBlob(e.bytesValue);return new Oe(r)}if(rn(e,n,"referenceValue")){en(e.referenceValue,"referenceValue");var i=this.fromResourceName(e.referenceValue),o=new re(i.get(1),i.get(3)),a=new ue(this.extractLocalPathFromResourceName(i));return new De(o,a)}return v("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return y(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){return new le(this.fromName(e.name),this.fromVersion(e.updateTime),this.fromFields(e.fields||{}),{hasCommittedMutations:!!t})},e.prototype.toFields=function(e){var t=this,n={};return e.forEach((function(e,r){n[e]=t.toValue(r)})),n},e.prototype.fromFields=function(e){var t=this,n=Re.EMPTY;return T(e,(function(e,r){n=n.set(new se([e]),t.fromValue(r))})),n},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach((function(e){n.push(t.toValue(e))})),{values:n}},e.prototype.fromFound=function(e){y(!!e.found,"Tried to deserialize a found document from a missing document."),en(e.found.name,"doc.found.name"),en(e.found.updateTime,"doc.found.updateTime");var t=this.fromName(e.found.name),n=this.fromVersion(e.found.updateTime),r=this.fromFields(e.found.fields||{});return new le(t,n,r,{},e.found)},e.prototype.fromMissing=function(e){y(!!e.missing,"Tried to deserialize a missing document from a found document."),y(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new he(t,n)},e.prototype.fromMaybeDocument=function(e){var t=e.result;return rn(e,t,"found")?this.fromFound(e):rn(e,t,"missing")?this.fromMissing(e):v("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case Wt.Added:return"ADD";case Wt.Current:return"CURRENT";case Wt.NoChange:return"NO_CHANGE";case Wt.Removed:return"REMOVE";case Wt.Reset:return"RESET";default:return v("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof Bt)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof qt){var t;if(e.newDoc instanceof le)return{documentChange:{document:{name:this.toName((t=e.newDoc).key),fields:this.toFields(t.data),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}};if(e.newDoc instanceof he)return{documentDelete:{document:this.toName((t=e.newDoc).key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}};if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof zt){var n=void 0;return e.cause&&(n={code:Ct(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return v("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t,n=e.response_type;if(rn(e,n,"targetChange")){en(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),a=e.targetChange.cause,s=a&&this.fromRpcStatus(a);t=new zt(r,i,o,s||null)}else if(rn(e,n,"documentChange")){en(e.documentChange,"documentChange"),en(e.documentChange.document,"documentChange.name"),en(e.documentChange.document.name,"documentChange.document.name"),en(e.documentChange.document.updateTime,"documentChange.document.updateTime");var u=e.documentChange,c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=this.fromFields(u.document.fields||{}),d=new le(c,l,h,{},u.document);t=new qt(u.targetIds||[],u.removedTargetIds||[],d.key,d)}else if(rn(e,n,"documentDelete")){en(e.documentDelete,"documentDelete"),en(e.documentDelete.document,"documentDelete.document");var f=e.documentDelete;c=this.fromName(f.document),l=f.readTime?this.fromVersion(f.readTime):Ze.forDeletedDoc(),d=new he(c,l),t=new qt([],f.removedTargetIds||[],d.key,d)}else if(rn(e,n,"documentRemove")){en(e.documentRemove,"documentRemove"),en(e.documentRemove.document,"documentRemove");var p=e.documentRemove;c=this.fromName(p.document),t=new qt([],p.removedTargetIds||[],c,null)}else{if(!rn(e,n,"filter"))return v("Unknown change type "+JSON.stringify(e));en(e.filter,"filter"),en(e.filter.targetId,"filter.targetId");var g=e.filter,m=new yt(g.count||0);t=new Bt(g.targetId,m)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?Wt.NoChange:"ADD"===e?Wt.Added:"REMOVE"===e?Wt.Removed:"CURRENT"===e?Wt.Current:"RESET"===e?Wt.Reset:v("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!rn(e,e.response_type,"targetChange"))return Ze.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ze.MIN:t.readTime?this.fromVersion(t.readTime):Ze.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof ct)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof dt)t={delete:this.toName(e.key)};else if(e instanceof lt)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof ht))return v("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map((function(e){return n.toFieldTransform(e)}))}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):st.NONE;if(e.update){en(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new lt(r,i,o,n)}return new ct(r,i,n)}if(e.delete)return r=this.fromName(e.delete),new dt(r,n);if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map((function(e){return t.fromFieldTransform(e)}));return y(!0===n.exists,'Transforms only support precondition "exists == true"'),new ht(r,a)}return v("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return y(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:v("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?st.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?st.exists(e.exists):st.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=this.fromVersion(e.updateTime?e.updateTime:t),i=null;return e.transformResults&&e.transformResults.length>0&&(i=e.transformResults.map((function(e){return n.fromValue(e)}))),new ot(r,i)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&e.length>0?(y(void 0!==t,"Received a write result without a commit time"),e.map((function(e){return n.fromWriteResult(e,t)}))):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof ft)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof pt)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof gt)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof mt)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw v("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=e.transform_type,r=null;if(rn(e,n,"setToServerValue"))y("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),r=ft.instance;else if(rn(e,n,"appendMissingElements"))r=new pt((e.appendMissingElements.values||[]).map((function(e){return t.fromValue(e)})));else if(rn(e,n,"removeAllFromArray"))r=new gt((e.removeAllFromArray.values||[]).map((function(e){return t.fromValue(e)})));else if(rn(e,n,"increment")){var i=this.fromValue(e.increment);y(i instanceof ke,"NUMERIC_ADD transform requires a NumberValue"),r=new mt(i)}else v("Unknown transform proto: "+JSON.stringify(e));var o=se.fromServerFormat(e.fieldPath);return new it(o,r)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;return y(1===t,"DocumentsTarget contained other than 1 document: "+t),qe.atPath(this.fromQueryPath(e.documents[0]))},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(y(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(y(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return void 0!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){y(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new qe(t,i,s,a,u,c,l)},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case $e.Listen:return null;case $e.ExistenceFilterMismatch:return"existence-filter-mismatch";case $e.LimboResolution:return"limbo-document";default:return v("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.query;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map((function(e){return e instanceof ze?t.toRelationFilter(e):t.toUnaryFilter(e)}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromRelationFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t.fromFilter(e)})).reduce((function(e,t){return e.concat(t)})):v("Unknown filter: "+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map((function(e){return t.toPropertyOrder(e)}))},e.prototype.fromOrder=function(e){var t=this;return e.map((function(e){return t.fromPropertyOrder(e)}))},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map((function(e){return t.toValue(e)}))}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map((function(e){return t.fromValue(e)}));return new Ke(r,n)},e.prototype.toDirection=function(e){return Jt[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return Qe.ASCENDING;case"DESCENDING":return Qe.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return Zt[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return We.EQUAL;case"GREATER_THAN":return We.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return We.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return We.LESS_THAN;case"LESS_THAN_OR_EQUAL":return We.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return We.ARRAY_CONTAINS;case"OPERATOR_UNSPECIFIED":return v("Unspecified relation");default:return v("Unknown relation")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return se.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new Ye(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.toRelationFilter=function(e){return e instanceof ze?{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}:v("Unrecognized filter: "+JSON.stringify(e))},e.prototype.fromRelationFilter=function(e){return new ze(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryFilter=function(e){return e instanceof Ge?{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}}:e instanceof He?{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}:v("Unrecognized filter: "+JSON.stringify(e))},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return new Ge(t);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return new He(n);case"OPERATOR_UNSPECIFIED":return v("Unspecified filter");default:return v("Unknown filter")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map((function(e){return se.fromServerFormat(e)}));return rt.fromArray(t)},e}();function rn(e,t,n){return t===n||!t&&n in e}var on=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){y(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){y(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){y(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){y(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){y(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){y(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),an="Connection",sn={BatchGetDocuments:"batchGet",Commit:"commit"},un="gl-js/ fire/"+c,cn=function(){function e(e){this.databaseId=e.databaseId,this.baseUrl=(e.ssl?"https":"http")+"://"+e.host}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=un},e.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise((function(o,a){var u=new s.XhrIo;u.listenOnce(s.EventType.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case s.ErrorCode.NO_ERROR:var t=u.getResponseJson();p(an,"XHR received:",JSON.stringify(t)),o(t);break;case s.ErrorCode.TIMEOUT:p(an,'RPC "'+e+'" timed out'),a(new w("deadline-exceeded","Request time out"));break;case s.ErrorCode.HTTP_ERROR:var n=u.getStatus();p(an,'RPC "'+e+'" failed with status:',n,"response text:",u.getResponseText()),n>0?a(new w(function(e){switch(e){case 200:return"ok";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 416:return"out-of-range";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"unknown";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded";default:return e>=200&&e<300?"ok":e>=400&&e<500?"failed-precondition":e>=500&&e<600?"internal":"unknown"}}(n),"Server responded with status "+u.getStatusText())):(p(an,'RPC "'+e+'" failed'),a(new w("unavailable","Connection failed.")));break;default:v('RPC "'+e+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{p(an,'RPC "'+e+'" completed.')}}));var c=JSON.stringify(t);p(an,"XHR sending: ",i+" "+c);var l={"Content-Type":"text/plain"};r.modifyHeadersForRequest(l,n),u.send(i,"POST",c,l,15)}))},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=s.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5}};this.modifyHeadersForRequest(i.initMessageHeaders,t),u.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");p(an,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),c=!1,l=!1,h=new on({sendFn:function(e){l?p(an,"Not sending because WebChannel is closed:",e):(c||(p(an,"Opening WebChannel transport."),a.open(),c=!0),p(an,"WebChannel sending:",e),a.send(e))},closeFn:function(){return a.close()}}),d=function(e,t){a.listen(e,(function(e){try{t(e)}catch(n){setTimeout((function(){throw n}),0)}}))};return d(s.WebChannel.EventType.OPEN,(function(){l||p(an,"WebChannel transport opened.")})),d(s.WebChannel.EventType.CLOSE,(function(){l||(l=!0,p(an,"WebChannel transport closed"),h.callOnClose())})),d(s.WebChannel.EventType.ERROR,(function(e){l||(l=!0,p(an,"WebChannel transport errored:",e),h.callOnClose(new w("unavailable","The operation could not be completed")))})),d(s.WebChannel.EventType.MESSAGE,(function(e){if(!l){var t=e.data[0];y(!!t,"Got a webchannel message without data.");var n=t.error||t[0]&&t[0].error;if(n){p(an,"WebChannel received error:",n);var r=n.status,i=function(e){var t=bt[e];if(void 0!==t)return wt(t)}(r),o=n.message;void 0===i&&(i="internal",o="Unknown error status: "+r+" with message "+n.message),l=!0,h.callOnClose(new w(i,o)),a.close()}else p(an,"WebChannel received:",t),h.callOnMessage(t)}})),setTimeout((function(){h.callOnOpen()}),0),h},e.prototype.makeUrl=function(e){var t=sn[e];y(void 0!==t,"Unknown REST mapping for: "+e);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(t),n.join("")},e}();b.setPlatform(new(function(){function e(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new cn(e))},e.prototype.newSerializer=function(e){return new nn(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}()));var ln=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),hn=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},dn=function(e){return e.All="all",e.ListenStreamIdle="listen_stream_idle",e.ListenStreamConnectionBackoff="listen_stream_connection_backoff",e.WriteStreamIdle="write_stream_idle",e.WriteStreamConnectionBackoff="write_stream_connection_backoff",e.OnlineStateTimeout="online_state_timeout",e.ClientMetadataRefresh="client_metadata_refresh",e.LruGarbageCollection="lru_garbage_collection",e}({}),fn=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new hn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new w("cancelled","Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),pn=function(){function e(){this.tail=Promise.resolve(),this.delayedOperations=[],this.operationInProgress=!1}return e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueue=function(e){var t=this;this.verifyNotFailed();var n=this.tail.then((function(){return t.operationInProgress=!0,e().catch((function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw g("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw e}),0),e})).then((function(e){return t.operationInProgress=!1,e}))}));return this.tail=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),y(t>=0,"Attempted to schedule an operation with a negative delay of "+t),y(!this.containsDelayedOperation(e),"Attempted to schedule multiple operations with timer id "+e+".");var i=fn.createAndSchedule(this,e,t,n,(function(e){return r.removeDelayedOperation(e)}));return this.delayedOperations.push(i),i},e.prototype.verifyNotFailed=function(){this.failure&&v("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){y(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueue((function(){return Promise.resolve()}))},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then((function(){y(e===dn.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==dn.All&&i.timerId===e)break}return t.drain()}))},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);y(t>=0,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}();function gn(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=vn(t)),t=mn(e.get(n),t);return vn(t)}function mn(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function vn(e){return e+"\x01\x01"}function yn(e){var t=e.length;if(y(t>=2,"Invalid path "+e),2===t)return y("\x01"===e.charAt(0)&&"\x01"===e.charAt(1),"Non-empty path "+e+" had length 2"),oe.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("\x01",o);switch((a<0||a>n)&&v('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case"\x01":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(o,a),i+="\0";break;case"\x11":i+=e.substring(o,a+1);break;default:v('Invalid encoded resource path: "'+e+'"')}o=a+2}return new oe(r)}var bn=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r,y(r.length>0,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&y(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;y(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(e)&&(t=o.applyToRemoteDocument(t,r[i]))}return t},e.prototype.applyToLocalView=function(e,t){t&&y(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(e)&&(t=s.applyToLocalView(t,t,this.localWriteTime));for(var i=t,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(e)&&(t=s.applyToLocalView(t,i,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))})),n},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Dt())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&K(this.mutations,e.mutations)&&K(this.baseMutations,e.baseMutations)},e}(),_n=function(){function e(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return e.from=function(t,n,r,i){y(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var o=Pt(),a=t.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new e(t,n,r,i,o)},e}(),wn=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&v("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),Cn=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r,i){return y(""!==t.uid,"UserID must not be an empty string."),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Tn(e).iterate({index:ir.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next((function(t){return t.lastStreamToken=En(n),In(e).put(t)}))},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next((function(e){return e.lastStreamToken}))},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next((function(n){return n.lastStreamToken=En(t),In(e).put(n)}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=xn(e),a=Tn(e);return a.add({}).next((function(s){y("number"==typeof s,"Auto-generated key is not a number");var u=new bn(s,t,n,r),c=i.serializer.toDbMutationBatch(i.userId,u);i.documentKeysByBatchId[s]=u.keys();for(var l=[],h=0,d=r;h<d.length;h++){var f=d[h],p=or.key(i.userId,f.key.path,s);l.push(a.put(c)),l.push(o.put(p,or.PLACEHOLDER)),l.push(i.indexManager.addToCollectionParentIndex(e,f.key.path.popLast()))}return wn.waitFor(l).next((function(){return u}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return Tn(e).get(t).next((function(e){return e?(y(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null}))},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?wn.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this;return this.getMutationQueueMetadata(e).next((function(r){var i=t+1,o=IDBKeyRange.lowerBound([n.userId,i]),a=null;return Tn(e).iterate({index:ir.userMutationsIndex,range:o},(function(e,t,r){t.userId===n.userId&&(y(t.batchId>=i,"Should have found mutation after "+i),a=n.serializer.fromDbMutationBatch(t)),r.done()})).next((function(){return a}))}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Tn(e).loadAll(ir.userMutationsIndex,n).next((function(e){return e.map((function(e){return t.serializer.fromDbMutationBatch(e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=or.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return xn(e).iterate({range:i},(function(r,i,a){var s=r[0],u=r[2],c=yn(r[1]);if(s===n.userId&&t.path.isEqual(c))return Tn(e).get(u).next((function(e){if(!e)throw v("Dangling document-mutation reference found: "+r+" which points to "+u);y(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+u),o.push(n.serializer.fromDbMutationBatch(e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new tt(Q),i=[];return t.forEach((function(t){var o=or.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=xn(e).iterate({range:a},(function(e,i,o){var a=e[0],s=e[2],u=yn(e[1]);a===n.userId&&t.path.isEqual(u)?r=r.add(s):o.done()}));i.push(s)})),wn.waitFor(i).next((function(){return n.lookupMutationBatches(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;y(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),y(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=or.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new tt(Q);return xn(e).iterate({range:a},(function(e,t,o){var a=e[0],u=e[2],c=yn(e[1]);a===n.userId&&r.isPrefixOf(c)?c.length===i&&(s=s.add(u)):o.done()})).next((function(){return n.lookupMutationBatches(e,s)}))},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Tn(e).get(t).next((function(e){if(null===e)throw v("Dangling document-mutation reference found, which points to "+t);y(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))})))})),wn.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return Sn(e.simpleDbTransaction,this.userId,t).next((function(r){return n.removeCachedMutationKeys(t.batchId),wn.forEach(r,(function(t){return n.referenceDelegate.removeMutationReference(e,t)}))}))},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return wn.resolve();var r=IDBKeyRange.lowerBound(or.prefixForUser(t.userId)),i=[];return xn(e).iterate({range:r},(function(e,n,r){if(e[0]===t.userId){var o=yn(e[1]);i.push(o)}else r.done()})).next((function(){y(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(e){return e.canonicalString()})))}))}))},e.prototype.containsKey=function(e,t){return kn(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return In(e).get(this.userId).next((function(e){return e||new rr(t.userId,-1,"")}))},e}();function kn(e,t,n){var r=or.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return xn(e).iterate({range:o,keysOnly:!0},(function(e,n,r){e[0]===t&&e[1]===i&&(a=!0),r.done()})).next((function(){return a}))}function Sn(e,t,n){var r=e.store(ir.store),i=e.store(or.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){y(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=or.key(t,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return wn.waitFor(o).next((function(){return c}))}function En(e){return e instanceof Uint8Array?(y("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function Tn(e){return Dr.getStore(e,ir.store)}function xn(e){return Dr.getStore(e,or.store)}function In(e){return Dr.getStore(e,rr.store)}var Pn=function(e){return e[e.QueryCache=0]="QueryCache",e[e.SyncEngine=1]="SyncEngine",e}({}),On=function(){function e(e,t){this.generatorId=e,y((1&e)===e,"Generator ID "+e+" contains more than 1 reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=2,e},e.prototype.after=function(e){return this.seek(e+2),this.next()},e.prototype.seek=function(e){y((1&e)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forQueryCache=function(){return new e(Pn.QueryCache,2)},e.forSyncEngine=function(){return new e(Pn.SyncEngine)},e}(),Dn=function(){function e(e){this.db=e}return e.openOrCreate=function(t,n,r){return y(e.isAvailable(),"IndexedDB not supported in current environment."),p("SimpleDb","Opening database:",t),new wn((function(i,o){var a=window.indexedDB.open(t,n);a.onsuccess=function(t){i(new e(t.target.result))},a.onblocked=function(){o(new w("failed-precondition","Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(e){var t=e.target.error;o("VersionError"===t.name?new w("failed-precondition","A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):t)},a.onupgradeneeded=function(e){p("SimpleDb",'Database "'+t+'" requires upgrade from version:',e.oldVersion);var n=e.target.result,i=new Rn(a.transaction);r.createOrUpgrade(n,i,e.oldVersion,$n).next((function(){p("SimpleDb","Database upgrade to version "+$n+" complete")}))}})).toPromise()},e.delete=function(e){return p("SimpleDb","Removing database:",e),Mn(window.indexedDB.deleteDatabase(e)).toPromise()},e.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===process.env.USE_MOCK_PERSISTENCE;var e=window.navigator.userAgent;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0)},e.getStore=function(e,t){return e.store(t)},e.prototype.runTransaction=function(e,t,n){var r=Rn.open(this.db,e,t),i=n(r).catch((function(e){return r.abort(e),wn.reject(e)})).toPromise();return i.catch((function(){})),r.completionPromise.then((function(){return i}))},e.prototype.close=function(){this.db.close()},e}(),An=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return Mn(this.dbCursor.delete())},e}(),Rn=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new hn,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){t.completionDeferred.reject(e.target.error)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(p("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return y(!!t,"Object store not part of transaction: "+e),new Nn(t)},e}(),Nn=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(p("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(p("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Mn(n)},e.prototype.add=function(e){return p("SimpleDb","ADD",this.store.name,e,e),Mn(this.store.add(e))},e.prototype.get=function(e){var t=this;return Mn(this.store.get(e)).next((function(n){return void 0===n&&(n=null),p("SimpleDb","GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return p("SimpleDb","DELETE",this.store.name,e),Mn(this.store.delete(e))},e.prototype.count=function(){return p("SimpleDb","COUNT",this.store.name),Mn(this.store.count())},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.deleteAll=function(e,t){p("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(e,t,n){return n.delete()}))},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new wn((function(n,r){t.onerror=function(e){r(e.target.error)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.iterateCursor=function(e,t){var n=[];return new wn((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new An(i),a=t(i.primaryKey,i.value,o);if(a instanceof wn){var s=a.catch((function(e){return o.done(),wn.reject(e)}));n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return wn.waitFor(n)}))},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(y(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function Mn(e){return new wn((function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=function(e){n(e.target.error)}}))}var Fn=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=On.forQueryCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next((function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next((function(e){return Ze.fromTimestamp(new te(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return Un(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)}))},e.prototype.addQueryData=function(e,t){var n=this;return this.saveQueryData(e,t).next((function(){return n.retrieveMetadata(e).next((function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(t,r),n.saveMetadata(e,r)}))}))},e.prototype.updateQueryData=function(e,t){return this.saveQueryData(e,t)},e.prototype.removeQueryData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Ln(e).delete(t.targetId)})).next((function(){return n.retrieveMetadata(e)})).next((function(t){return y(t.targetCount>0,"Removing from an empty query cache"),t.targetCount-=1,n.saveMetadata(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return Ln(e).iterate((function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&void 0===n[u.targetId]&&(i++,o.push(r.removeQueryData(e,u)))})).next((function(){return wn.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){var n=this;return Ln(e).iterate((function(e,r){var i=n.serializer.fromDbTarget(r);t(i)}))},e.prototype.retrieveMetadata=function(e){return Vn(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return(n=e,Dr.getStore(n,dr.store)).put(dr.key,t);var n},e.prototype.saveQueryData=function(e,t){return Ln(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromQueryData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getQueryCount=function(e){return this.retrieveMetadata(e).next((function(e){return e.targetCount}))},e.prototype.getQueryData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Ln(e).iterate({range:i,index:lr.queryTargetsIndexName},(function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.query)&&(o=a,i.done())})).next((function(){return o}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=jn(e);return t.forEach((function(t){var a=gn(t.path);i.push(o.put(new hr(n,a))),i.push(r.referenceDelegate.addReference(e,t))})),wn.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=jn(e);return wn.forEach(t,(function(t){var o=gn(t.path);return wn.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=jn(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=jn(e),i=Dt();return r.iterate({range:n,keysOnly:!0},(function(e,t,n){var r=yn(e[1]),o=new ue(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=gn(t.path),r=IDBKeyRange.bound([n],[Y(n)],!1,!0),i=0;return jn(e).iterate({index:hr.documentTargetsIndex,keysOnly:!0,range:r},(function(e,t,n){0!==e[0]&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.getQueryDataForTarget=function(e,t){var n=this;return Ln(e).get(t).next((function(e){return e?n.serializer.fromDbTarget(e):null}))},e}();function Ln(e){return Dr.getStore(e,lr.store)}function Vn(e){return Dn.getStore(e,dr.store).get(dr.key).next((function(e){return y(null!==e,"Missing metadata row."),e}))}function Un(e){return Vn(e).next((function(e){return e.highestListenSequenceNumber}))}function jn(e){return Dr.getStore(e,hr.store)}var qn=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[1];if(o[0].isEqual(e))return a}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){T(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];e(o[0],o[1])}}))},e.prototype.isEmpty=function(){return x(this.inner)},e}(),Bn=function(){function e(){this.changes=St(),this.documentSizes=new qn((function(e){return e.toString()}))}return e.prototype.addEntry=function(e){var t=this.assertChanges();this.changes=t.insert(e.key,e)},e.prototype.getEntry=function(e,t){var n=this,r=this.assertChanges().get(t);return r?wn.resolve(r):this.getFromCache(e,t).next((function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)}))},e.prototype.getEntries=function(e,t){var n=this;return this.getAllFromCache(e,t).next((function(e){var t=e.maybeDocuments;return e.sizeMap.forEach((function(e,t){n.documentSizes.set(e,t)})),t}))},e.prototype.apply=function(e){var t=this.applyChanges(e);return this.changes=null,t},e.prototype.assertChanges=function(){return y(null!==this.changes,"Changes have already been applied."),this.changes},e}(),Wn="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",zn=function(){function e(e,t,n){this.serializer=e,this.indexManager=t,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(e.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),e.prototype.start=function(e){var t=Dn.getStore(e,gr.store);return this.synchronizeLastDocumentChangeId(t)},e.prototype.addEntries=function(e,t,n){var r=[];if(t.length>0){for(var i=Qn(e),o=Dt(),a=0,s=t;a<s.length;a++){var u=s[a],c=u.key,l=u.doc;r.push(i.put(Yn(c),l)),o=o.add(c),r.push(this.indexManager.addToCollectionParentIndex(e,c.path.popLast()))}this.keepDocumentChangeLog&&r.push(Kn(e).put({changes:this.serializer.toDbResourcePaths(o)})),r.push(this.updateSize(e,n))}return wn.waitFor(r)},e.prototype.removeEntry=function(e,t){var n=Qn(e),r=Yn(t);return n.get(r).next((function(e){return e?n.delete(r).next((function(){return Xn(e)})):wn.resolve(0)}))},e.prototype.getEntry=function(e,t){var n=this;return Qn(e).get(Yn(t)).next((function(e){return e?n.serializer.fromDbRemoteDocument(e):null}))},e.prototype.getSizedEntry=function(e,t){var n=this;return Qn(e).get(Yn(t)).next((function(e){return e?{maybeDocument:n.serializer.fromDbRemoteDocument(e),size:Xn(e)}:null}))},e.prototype.getEntries=function(e,t){var n=this,r=Et();return this.forEachDbEntry(e,t,(function(e,t){r=r.insert(e,t?n.serializer.fromDbRemoteDocument(t):null)})).next((function(){return r}))},e.prototype.getSizedEntries=function(e,t){var n=this,r=Et(),i=new fe(ue.comparator);return this.forEachDbEntry(e,t,(function(e,t){t?(r=r.insert(e,n.serializer.fromDbRemoteDocument(t)),i=i.insert(e,Xn(t))):(r=r.insert(e,null),i=i.insert(e,0))})).next((function(){return{maybeDocuments:r,sizeMap:i}}))},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return wn.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return Qn(e).iterate({range:r},(function(e,t,r){for(var a=ue.fromSegments(e);o&&ue.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t){var n=this;y(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=xt(),i=t.path.length+1,o=t.path.toArray(),a=IDBKeyRange.lowerBound(o);return Qn(e).iterate({range:a},(function(e,o,a){if(e.length===i){var s=n.serializer.fromDbRemoteDocument(o);t.path.isPrefixOf(s.key.path)?s instanceof le&&t.matches(s)&&(r=r.insert(s.key,s)):a.done()}})).next((function(){return r}))},e.prototype.getNewDocumentChanges=function(e){var t=this;y(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=Dt(),r=St(),i=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),o=!0,a=Kn(e);return a.iterate({range:i},(function(e,r){if(o&&(o=!1,t._lastProcessedDocumentChangeId+1!==r.id))return t.synchronizeLastDocumentChangeId(a).next((function(){return wn.reject(new w("data-loss",Wn))}));n=n.unionWith(t.serializer.fromDbResourcePaths(r.changes)),t._lastProcessedDocumentChangeId=r.id})).next((function(){var i=[];return n.forEach((function(n){i.push(t.getEntry(e,n).next((function(e){var t=e||new he(n,Ze.forDeletedDoc());r=r.insert(n,t)})))})),wn.waitFor(i)})).next((function(){return r}))},e.prototype.removeDocumentChangesThroughChangeId=function(e,t){var n=IDBKeyRange.upperBound(t);return Kn(e).delete(n)},e.prototype.synchronizeLastDocumentChangeId=function(e){var t=this;return this._lastProcessedDocumentChangeId=0,e.iterate({keysOnly:!0,reverse:!0},(function(e,n,r){t._lastProcessedDocumentChangeId=e,r.done()}))},e.prototype.newChangeBuffer=function(){return new Gn(this)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return Hn(e).get(cr.key).next((function(e){return y(!!e,"Missing document cache metadata"),e}))},e.prototype.setMetadata=function(e,t){return Hn(e).put(cr.key,t)},e.prototype.updateSize=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.setMetadata(e,r)}))},e}();function Hn(e){return Dr.getStore(e,cr.store)}var Gn=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return a.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=this.assertChanges(),r=0,i=[];return n.forEach((function(e,n){var o=t.documentCache.serializer.toDbRemoteDocument(n),a=t.documentSizes.get(e);y(void 0!==a,"Attempting to change document "+e.toString()+" without having read it first");var s=Xn(o);r+=s-a,i.push({key:e,doc:o})})),this.documentCache.addEntries(e,i,r)},t.prototype.getFromCache=function(e,t){return this.documentCache.getSizedEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getSizedEntries(e,t)},t}(Bn);function Qn(e){return Dr.getStore(e,ur.store)}function Kn(e){return Dr.getStore(e,gr.store)}function Yn(e){return e.path.toArray()}function Xn(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw v("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var Jn=function(){function e(){this.collectionParentIndex=new Zn}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),wn.resolve()},e.prototype.getCollectionParents=function(e,t){return wn.resolve(this.collectionParentIndex.getEntries(t))},e}(),Zn=function(){function e(){this.index={}}return e.prototype.add=function(e){y(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new tt(oe.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.getEntries=function(e){return(this.index[e]||new tt(oe.comparator)).toArray()},e}(),$n=8,er=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i=this;y(n<r&&n>=0&&r<=$n,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&r>=1&&(function(e){e.createObjectStore(nr.store)}(e),function(e){e.createObjectStore(rr.store,{keyPath:rr.keyPath}),e.createObjectStore(ir.store,{keyPath:ir.keyPath,autoIncrement:!0}).createIndex(ir.userMutationsIndex,ir.userMutationsKeyPath,{unique:!0}),e.createObjectStore(or.store)}(e),pr(e),function(e){e.createObjectStore(ur.store)}(e));var o=wn.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(hr.store),e.deleteObjectStore(lr.store),e.deleteObjectStore(dr.store)}(e),pr(e)),o=o.next((function(){return function(e){var t=e.store(dr.store),n=new dr(0,0,Ze.MIN.toTimestamp(),0);return t.put(dr.key,n)}(t)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(ir.store).loadAll().next((function(n){e.deleteObjectStore(ir.store),e.createObjectStore(ir.store,{keyPath:ir.keyPath,autoIncrement:!0}).createIndex(ir.userMutationsIndex,ir.userMutationsKeyPath,{unique:!0});var r=t.store(ir.store),i=n.map((function(e){return r.put(e)}));return wn.waitFor(i)}))}(e,t)}))),o=o.next((function(){!function(e){e.createObjectStore(mr.store,{keyPath:mr.keyPath})}(e),function(e){e.createObjectStore(gr.store,{keyPath:"id",autoIncrement:!0})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.removeAcknowledgedMutations(t)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(cr.store)}(e),i.addDocumentGlobal(t)}))),n<7&&r>=7&&(o=o.next((function(){return i.ensureSequenceNumbers(t)}))),n<8&&r>=8&&(o=o.next((function(){return i.createCollectionParentIndex(e,t)}))),o},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(ur.store).iterate((function(e,n){t+=Xn(n)})).next((function(){var n=new cr(t);return e.store(cr.store).put(cr.key,n)}))},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(rr.store),r=e.store(ir.store);return n.loadAll().next((function(n){return wn.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(ir.userMutationsIndex,i).next((function(r){return wn.forEach(r,(function(r){y(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return Sn(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(hr.store),n=e.store(ur.store);return Un(e).next((function(e){var r=[];return n.iterate((function(n,i){var o=new oe(n),a=function(e){return[0,gn(e)]}(o);r.push(t.get(a).next((function(n){return n?wn.resolve():function(n){return t.put(new hr(0,gn(n),e))}(o)})))})).next((function(){return wn.waitFor(r)}))}))},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(fr.store,{keyPath:fr.keyPath});var n=t.store(fr.store),r=new Zn,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:gn(i)})}};return t.store(ur.store).iterate({keysOnly:!0},(function(e,t){var n=new oe(e);return i(n.popLast())})).next((function(){return t.store(or.store).iterate({keysOnly:!0},(function(e,t){var n=yn(e[1]);return i(n.popLast())}))}))},e}(),tr=function(e,t){this.seconds=e,this.nanoseconds=t},nr=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}(),rr=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),ir=function(){function e(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}(),or=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,gn(t)]},e.key=function(e,t,n){return[e,gn(t),n]},e.store="documentMutations",e.PLACEHOLDER=new e,e}(),ar=function(e,t){this.path=e,this.readTime=t},sr=function(e,t){this.path=e,this.version=t},ur=function(){function e(e,t,n,r){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r}return e.store="remoteDocuments",e}(),cr=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}(),lr=function(){function e(e,t,n,r,i,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.query=o}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),hr=function(){function e(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n,y(0===e==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),dr=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),fr=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}();function pr(e){e.createObjectStore(hr.store,{keyPath:hr.keyPath}).createIndex(hr.documentTargetsIndex,hr.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(lr.store,{keyPath:lr.keyPath}).createIndex(lr.queryTargetsIndexName,lr.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(dr.store)}var gr=function(){function e(e){this.changes=e}return e.store="remoteDocumentChanges",e.keyPath="id",e}(),mr=function(){function e(e,t,n,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=i}return e.store="clientMetadata",e.keyPath="clientId",e}(),vr=[rr.store,ir.store,or.store,ur.store,lr.store,nr.store,dr.store,hr.store].concat([mr.store,gr.store]).concat([cr.store]).concat([fr.store]),yr=function(){function e(){this.collectionParentsCache=new Zn}return e.prototype.addToCollectionParentIndex=function(e,t){if(y(t.length%2==1,"Expected a collection path."),this.collectionParentsCache.add(t)){y(t.length>=1,"Invalid collection path.");var n=t.lastSegment(),r=t.popLast();return br(e).put({collectionId:n,parent:gn(r)})}return wn.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Y(t),""],!1,!0);return br(e).loadAll(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(yn(o.parent))}return n}))},e}();function br(e){return Dr.getStore(e,fr.store)}var _r=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=ue.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new he(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(t=ue.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version),new de(t,n)):v("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e){if(e instanceof le){var t=e.proto?e.proto:this.remoteSerializer.toDocument(e);return new ur(null,null,t,i=e.hasCommittedMutations)}if(e instanceof he){var n=e.key.path.toArray(),r=this.toDbTimestamp(e.version),i=e.hasCommittedMutations;return new ur(null,new ar(n,r),null,i)}return e instanceof de?(n=e.key.path.toArray(),r=this.toDbTimestamp(e.version),new ur(new sr(n,r),null,null,!0)):v("Unexpected MaybeDocumment")},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new tr(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new te(e.seconds,e.nanoseconds);return Ze.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map((function(e){return n.remoteSerializer.toMutation(e)})),i=t.mutations.map((function(e){return n.remoteSerializer.toMutation(e)}));return new ir(e,t.batchId,t.localWriteTime.toMillis(),r,i)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map((function(e){return t.remoteSerializer.fromMutation(e)})),r=e.mutations.map((function(e){return t.remoteSerializer.fromMutation(e)})),i=te.fromMillis(e.localWriteTimeMs);return new bn(e.batchId,i,n,r)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach((function(e){t.push(gn(e.path))})),t},e.prototype.fromDbResourcePaths=function(e){for(var t=Dt(),n=0,r=e;n<r.length;n++)t=t.add(new ue(yn(r[n])));return t},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime);return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new et(t,e.targetId,$e.Listen,e.lastListenSequenceNumber,n,e.resumeToken)},e.prototype.toDbTarget=function(e){y($e.Listen===e.purpose,"Only queries with purpose "+$e.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion);return t=e.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.query):this.remoteSerializer.toQueryTarget(e.query),e.resumeToken instanceof Uint8Array?(y("YES"===process.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),n=e.resumeToken.toString()):n=e.resumeToken,new lr(e.targetId,e.query.canonicalId(),r,n,e.sequenceNumber,t)},e}();function wr(e,t){var n=e[1],r=t[1],i=Q(e[0],t[0]);return 0===i?Q(n,r):i}var Cr=function(){function e(e){this.maxElements=e,this.buffer=new tt(wr),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();wr(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),kr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sr=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),Er=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.gcTask=null}return e.prototype.start=function(){y(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Sr.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;y(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;p("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(dn.LruGarbageCollection,t,(function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then((function(){return e.scheduleGC()})).catch(Ar)}))},e}(),Tr=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return wn.resolve(ln.INVALID);var r=new Cr(t);return this.delegate.forEachTarget(e,(function(e){return r.addElement(e.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,(function(e){return r.addElement(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===Sr.COLLECTION_DISABLED?(p("LruGarbageCollector","Garbage collection skipped; disabled"),wn.resolve(kr)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(p("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),kr):n.runGarbageCollection(e,t)}))},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,r,i,o,a,s,u,c,l=this;return o=Date.now(),this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>l.params.maximumSequenceNumbersToCollect?(p("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),r=l.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),l.nthSequenceNumber(e,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),l.removeOrphanedDocuments(e,n)})).next((function(e){return c=Date.now(),d()<=h.DEBUG&&p("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-o)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+e+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-o)+"ms"),wn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},e}(),xr="IndexedDbPersistence",Ir="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pr="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `experimentalTabSynchronization:true` in all tabs.",Or=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return a.__extends(t,e),t}((function(){})),Dr=function(){function e(t,n,r,i,o,a,s){if(this.persistenceKey=t,this.clientId=n,this.queue=i,this.multiClientParams=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.inForeground=!1,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},!e.isAvailable())throw new w("unimplemented","This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");if(this.referenceDelegate=new Mr(this,a),this.dbName=t+e.MAIN_DATABASE,this.serializer=new _r(o),this.document=r.document,this.allowTabSynchronization=void 0!==s,this.queryCache=new Fn(this.referenceDelegate,this.serializer),this.indexManager=new yr,this.remoteDocumentCache=new zn(this.serializer,this.indexManager,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new w("unimplemented","IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof Or)return Dn.getStore(e.simpleDbTransaction,t);throw v("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t,n,r,i,o,s){return a.__awaiter(this,void 0,void 0,(function(){var u;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,(u=new e(t,n,r,i,o,s)).start()];case 1:return a.sent(),[2,u]}}))}))},e.createMultiClientIndexedDbPersistence=function(t,n,r,i,o,s,u){return a.__awaiter(this,void 0,void 0,(function(){var c;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,(c=new e(t,n,r,i,o,s,u)).start()];case 1:return a.sent(),[2,c]}}))}))},e.prototype.start=function(){var e=this;return y(!this.started,"IndexedDbPersistence double-started!"),y(null!==this.window,"Expected 'window' to be defined"),Dn.openOrCreate(this.dbName,$n,new er(this.serializer)).then((function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()})).then((function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.startRemoteDocumentCache()})).then((function(){return e.simpleDb.runTransaction("readonly",[dr.store],(function(t){return Un(t).next((function(t){e.listenSequence=new ln(t,e.multiClientParams?e.multiClientParams.sequenceNumberSyncer:void 0)}))}))})).then((function(){e._started=!0})).catch((function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)}))},e.prototype.startRemoteDocumentCache=function(){var e=this;return this.simpleDb.runTransaction("readonly",vr,(function(t){return e.remoteDocumentCache.start(t)}))},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget((function(){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite",vr,(function(t){return Nr(t).put(new mr(e.clientId,Date.now(),e.networkEnabled,e.inForeground,e.remoteDocumentCache.lastProcessedDocumentChangeId)).next((function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next((function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget((function(){return e.primaryStateListener(!1)})))}))})).next((function(){return e.canActAsPrimary(t)})).next((function(n){var r=e.isPrimary;return e.isPrimary=n,r!==e.isPrimary&&e.queue.enqueueAndForget((function(){return e.primaryStateListener(e.isPrimary)})),r&&!e.isPrimary?e.releasePrimaryLeaseIfHeld(t):e.isPrimary?e.acquireOrExtendPrimaryLease(t):void 0}))}))},e.prototype.verifyPrimaryLease=function(e){var t=this;return Rr(e).get(nr.key).next((function(e){return wn.resolve(t.isLocalClient(e))}))},e.prototype.removeClientMetadata=function(e){return Nr(e).delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r=this;return a.__generator(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(i){var o=e.getStore(i,mr.store);return o.loadAll().next((function(e){t=r.filterActiveClients(e,18e5),n=e.filter((function(e){return-1===t.indexOf(e)}))})).next((function(){return wn.forEach(n,(function(e){return o.delete(e.clientId)}))})).next((function(){if((t=t.filter((function(e){return e.clientId!==r.clientId}))).length>0){var e=t.map((function(e){return e.lastProcessedDocumentChangeId||0})),n=Math.min.apply(Math,e);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(i,n)}}))}))]);case 1:i.sent(),n.forEach((function(e){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(e.clientId))})),i.label=2;case 2:return[2]}}))}))},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(dn.ClientMetadataRefresh,4e3,(function(){return e.updateClientMetadataAndTryBecomePrimary().then((function(){return e.maybeGarbageCollectMultiClientState()})).then((function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this;return Rr(e).get(nr.key).next((function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new w("failed-precondition",Pr);return!1}}return!(!t.networkEnabled||!t.inForeground)||Nr(e).loadAll().next((function(e){return void 0===t.filterActiveClients(e,5e3).find((function(e){return!(t.clientId===e.clientId||!(!t.networkEnabled&&e.networkEnabled||!t.inForeground&&e.inForeground&&t.networkEnabled===e.networkEnabled))}))}))})).next((function(e){return t.isPrimary!==e&&p(xr,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t=this;return a.__generator(this,(function(n){switch(n.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&this.clientMetadataRefresher.cancel(),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[nr.store,mr.store],(function(e){return t.releasePrimaryLeaseIfHeld(e).next((function(){return t.removeClientMetadata(e)}))}))];case 1:return n.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),e?[4,Dn.delete(this.dbName)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter((function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)}))},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly",[mr.store],(function(t){return Nr(t).loadAll().next((function(t){return e.filterActiveClients(t,18e5).map((function(e){return e.clientId}))}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return y(this.started,"Cannot initialize MutationQueue before persistence is started."),Cn.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getQueryCache=function(){return y(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},e.prototype.getRemoteDocumentCache=function(){return y(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return y(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},e.prototype.runTransaction=function(e,t,n){var r=this;return p(xr,"Starting transaction:",e),this.simpleDb.runTransaction("readonly"===t?"readonly":"readwrite",vr,(function(i){return"readwrite-primary"===t?r.verifyPrimaryLease(i).next((function(t){if(!t)throw g("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new w("failed-precondition",Ir);return n(new Or(i,r.listenSequence.next()))})).next((function(e){return r.acquireOrExtendPrimaryLease(i).next((function(){return e}))})):r.verifyAllowTabSynchronization(i).next((function(){return n(new Or(i,r.listenSequence.next()))}))}))},e.prototype.verifyAllowTabSynchronization=function(e){var t=this;return Rr(e).get(nr.key).next((function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new w("failed-precondition",Pr)}))},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new nr(this.clientId,this.allowTabSynchronization,Date.now());return Rr(e).put(nr.key,t)},e.isAvailable=function(){return Dn.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=Rr(e);return n.get(nr.key).next((function(e){return t.isLocalClient(e)?(p(xr,"Releasing primary lease."),n.delete(nr.key)):wn.resolve()}))},e.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(g("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(y(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(y("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return p(xr,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(n){return g(xr,"Failed to get zombied client id.",n),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){g("Failed to set zombie client id.",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}();function Ar(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){if(!function(e){return"failed-precondition"===e.code&&e.message===Ir}(e))throw e;return p(xr,"Unexpectedly lost primary lease"),[2]}))}))}function Rr(e){return e.store(nr.store)}function Nr(e){return e.store(mr.store)}var Mr=function(){function e(e,t){this.db=e,this.garbageCollector=new Tr(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getQueryCache().getQueryCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getQueryCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,(function(e,n){return t(n)}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return Fr(e,t)},e.prototype.removeReference=function(e,t){return Fr(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getQueryCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return Fr(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?wn.resolve(!0):function(e,t){var n=!1;return In(e).iterateSerial((function(r){return kn(e,r,t).next((function(e){return e&&(n=!0),wn.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=0,o=[];return this.forEachOrphanedDocument(e,(function(a,s){if(s<=t){var u=n.isPinned(e,a).next((function(t){if(!t)return r++,n.removeOrphanedDocument(e,a).next((function(e){i+=e}))}));o.push(u)}})).next((function(){return wn.waitFor(o)})).next((function(){return n.db.getRemoteDocumentCache().updateSize(e,-i)})).next((function(){return r}))},e.prototype.removeOrphanedDocument=function(e,t){var n,r=0,i=this.db.getRemoteDocumentCache();return wn.waitFor([jn(e).delete((n=t,[0,gn(n.path)])),i.removeEntry(e,t).next((function(e){r+=e}))]).next((function(){return r}))},e.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(e,n)},e.prototype.updateLimboDocument=function(e,t){return Fr(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=jn(e),i=ln.INVALID;return r.iterate({index:hr.documentTargetsIndex},(function(e,r){var o=r.path,a=r.sequenceNumber;0===e[0]?(i!==ln.INVALID&&t(new ue(yn(n)),i),i=a,n=o):i=ln.INVALID})).next((function(){i!==ln.INVALID&&t(new ue(yn(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function Fr(e,t){return jn(e).put(function(e,t){return new hr(0,gn(e.path),t)}(t,e.currentSequenceNumber))}var Lr=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.getDocumentInternal(e,t,r)}))},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++)e=i[r].applyToLocalView(t,e);return e}))},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=Et();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++)t=o[i].applyToLocalView(e,t);r=r.insert(e,t)})),r},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t)}))},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=St();return i.forEach((function(e,t){t||(t=new he(e,Ze.forDeletedDoc())),o=o.insert(e,t)})),o}))},e.prototype.getDocumentsMatchingQuery=function(e,t){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t):this.getDocumentsMatchingCollectionQuery(e,t)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new ue(t)).next((function(e){var t=xt();return e instanceof le&&(t=t.insert(e.key,e)),t}))},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t){var n=this;y(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var r=t.collectionGroup,i=xt();return this.indexManager.getCollectionParents(e,r).next((function(o){return wn.forEach(o,(function(o){var a=t.asCollectionQueryAtPath(o.child(r));return n.getDocumentsMatchingCollectionQuery(e,a).next((function(e){e.forEach((function(e,t){i=i.insert(e,t)}))}))})).next((function(){return i}))}))},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t){var n,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t).next((function(i){return n=i,r.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){for(var r=0,i=e;r<i.length;r++)for(var o=i[r],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key;if(t.path.isImmediateParentOf(c.path)){var l=n.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);n=h instanceof le?n.insert(c,h):n.remove(c)}}})).next((function(){return n.forEach((function(e,r){t.matches(r)||(n=n.remove(e))})),n}))},e}(),Vr=function(){function e(){this.refsByKey=new tt(Ur.compareByKey),this.refsByTarget=new tt(Ur.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new Ur(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.removeRef(new Ur(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.removeReferencesForId=function(e){var t=this,n=ue.EMPTY,r=new Ur(n,e),i=new Ur(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],(function(e){t.removeRef(e),o.push(e.key)})),o},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach((function(t){return e.removeRef(t)}))},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=ue.EMPTY,n=new Ur(t,e),r=new Ur(t,e+1),i=Dt();return this.refsByTarget.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new Ur(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),Ur=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return ue.comparator(e.key,t.key)||Q(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return Q(e.targetOrBatchId,t.targetOrBatchId)||ue.comparator(e.key,t.key)},e}(),jr=function(){function e(e,t){this.persistence=e,this.localViewReferences=new Vr,this.queryDataByTarget={},y(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(t),this.remoteDocuments=e.getRemoteDocumentCache(),this.queryCache=e.getQueryCache(),this.localDocuments=new Lr(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}return e.prototype.handleUserChange=function(e){var t=this;return this.persistence.runTransaction("Handle user change","readonly",(function(n){var r;return t.mutationQueue.getAllMutationBatches(n).next((function(i){return r=i,t.mutationQueue=t.persistence.getMutationQueue(e),t.localDocuments=new Lr(t.remoteDocuments,t.mutationQueue,t.persistence.getIndexManager()),t.mutationQueue.getAllMutationBatches(n)})).next((function(e){for(var i=[],o=[],a=Dt(),s=0,u=r;s<u.length;s++){i.push((f=u[s]).batchId);for(var c=0,l=f.mutations;c<l.length;c++)a=a.add(l[c].key)}for(var h=0,d=e;h<d.length;h++){var f;o.push((f=d[h]).batchId);for(var p=0,g=f.mutations;p<g.length;p++)a=a.add(g[p].key)}return t.localDocuments.getDocuments(n,a).next((function(e){return{affectedDocuments:e,removedBatchIds:i,addedBatchIds:o}}))}))}))},e.prototype.localWrite=function(e){var t=this,n=te.now(),r=e.reduce((function(e,t){return e.add(t.key)}),Dt());return this.persistence.runTransaction("Locally write mutations","readwrite",(function(i){return t.localDocuments.getDocuments(i,r).next((function(r){for(var o=[],a=0,s=e;a<s.length;a++){var u=s[a],c=r.get(u.key);if(!u.isIdempotent){var l=u.fieldMask;if(l){var h=c instanceof le?l.applyTo(c.data):Re.EMPTY;o.push(new lt(u.key,h,l,st.exists(!0)))}}}return t.mutationQueue.addMutationBatch(i,n,o,e).next((function(e){var t=e.applyToLocalDocumentSet(r);return{batchId:e.batchId,changes:t}}))}))}))},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",(function(n){return t.mutationQueue.lookupMutationKeys(n,e).next((function(e){return e?t.localDocuments.getDocuments(n,e):wn.resolve(null)}))}))},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer();return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next((function(){return t.applyWriteToRemoteDocuments(n,e,i)})).next((function(){return i.apply(n)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",(function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next((function(e){return y(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly",(function(t){return e.mutationQueue.getLastStreamToken(t)}))},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",(function(n){return t.mutationQueue.setLastStreamToken(n,e)}))},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.queryCache.getLastRemoteSnapshotVersion(t)}))},e.prototype.applyRemoteEvent=function(t){var n=this,r=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction("Apply remote event","readwrite-primary",(function(i){var o=[],a=Dt();E(t.targetChanges,(function(r,s){var u=n.queryDataByTarget[r];if(u){s.addedDocuments.forEach((function(e){a=a.add(e)})),s.modifiedDocuments.forEach((function(e){a=a.add(e)})),o.push(n.queryCache.removeMatchingKeys(i,s.removedDocuments,r).next((function(){return n.queryCache.addMatchingKeys(i,s.addedDocuments,r)})));var c=s.resumeToken;if(c.length>0){var l=u;u=u.copy({resumeToken:c,snapshotVersion:t.snapshotVersion}),n.queryDataByTarget[r]=u,e.shouldPersistQueryData(l,u,s)&&o.push(n.queryCache.updateQueryData(i,u))}}}));var s=St(),u=Dt();t.documentUpdates.forEach((function(e,t){u=u.add(e)})),o.push(r.getEntries(i,u).next((function(e){t.documentUpdates.forEach((function(u,c){var l=e.get(u);null==l||c.version.isEqual(Ze.MIN)||a.has(c.key)&&!l.hasPendingWrites||c.version.compareTo(l.version)>=0?(r.addEntry(c),s=s.insert(u,c)):p("LocalStore","Ignoring outdated watch update for ",u,". Current version:",l.version," Watch version:",c.version),t.resolvedLimboDocuments.has(u)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}))})));var c=t.snapshotVersion;if(!c.isEqual(Ze.MIN)){var l=n.queryCache.getLastRemoteSnapshotVersion(i).next((function(e){return y(c.compareTo(e)>=0,"Watch stream reverted to previous snapshot?? "+c+" < "+e),n.queryCache.setTargetsMetadata(i,i.currentSequenceNumber,c)}));o.push(l)}return wn.waitFor(o).next((function(){return r.apply(i)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(i,s)}))}))},e.shouldPersistQueryData=function(e,t,n){return 0!==t.resumeToken.length&&(0===e.resumeToken.length||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)},e.prototype.notifyLocalViewChanges=function(e){var t=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(n){return wn.forEach(e,(function(e){return t.localViewReferences.addReferences(e.addedKeys,e.targetId),t.localViewReferences.removeReferences(e.removedKeys,e.targetId),wn.forEach(e.removedKeys,(function(e){return t.persistence.referenceDelegate.removeReference(n,e)}))}))}))},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly",(function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)}))},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly",(function(n){return t.localDocuments.getDocument(n,e)}))},e.prototype.allocateQuery=function(e){var t=this;return this.persistence.runTransaction("Allocate query","readwrite",(function(n){var r;return t.queryCache.getQueryData(n,e).next((function(i){return i?(r=i,wn.resolve()):t.queryCache.allocateTargetId(n).next((function(i){return r=new et(e,i,$e.Listen,n.currentSequenceNumber),t.queryCache.addQueryData(n,r)}))})).next((function(){return y(!t.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+e),t.queryDataByTarget[r.targetId]=r,r}))}))},e.prototype.releaseQuery=function(e,t){var n=this;return this.persistence.runTransaction("Release query",t?"readwrite":"readwrite-primary",(function(r){return n.queryCache.getQueryData(r,e).next((function(i){y(null!=i,"Tried to release nonexistent query: "+e);var o=i.targetId,a=n.queryDataByTarget[o],s=n.localViewReferences.removeReferencesForId(o);return delete n.queryDataByTarget[o],t?wn.resolve():wn.forEach(s,(function(e){return n.persistence.referenceDelegate.removeReference(r,e)})).next((function(){return n.persistence.referenceDelegate.removeTarget(r,a)}))}))}))},e.prototype.executeQuery=function(e){var t=this;return this.persistence.runTransaction("Execute query","readonly",(function(n){return t.localDocuments.getDocumentsMatchingQuery(n,e)}))},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly",(function(n){return t.queryCache.getMatchingKeysForTargetId(n,e)}))},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=wn.resolve();return o.forEach((function(r){a=a.next((function(){return n.getEntry(e,r)})).next((function(e){var o=e,a=t.docVersions.get(r);y(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o):y(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))}))})),a.next((function(){return r.mutationQueue.removeMutationBatch(e,i)}))},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.queryDataByTarget)}))},e.prototype.getQueryForTarget=function(e){var t=this;return this.queryDataByTarget[e]?Promise.resolve(this.queryDataByTarget[e].query):this.persistence.runTransaction("Get query data","readonly",(function(n){return t.queryCache.getQueryDataForTarget(n,e).next((function(e){return e?e.query:null}))}))},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly",(function(t){return e.remoteDocuments.getNewDocumentChanges(t)}))},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}(),qr=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=_(),this.batchesByDocumentKey=new tt(Ur.compareByKey)}return e.prototype.checkEmpty=function(e){return wn.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");y(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return y(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,wn.resolve()},e.prototype.getLastStreamToken=function(e){return wn.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,wn.resolve()},e.prototype.addMutationBatch=function(e,t,n,r){y(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&y(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new bn(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Ur(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return wn.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return wn.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return y(null!=n,"Failed to find local mutation batch."),wn.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this.indexOfBatchId(t+1),r=n<0?0:n;return wn.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)},e.prototype.getAllMutationBatches=function(e){return wn.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new Ur(t,0),i=new Ur(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(e){y(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);y(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),wn.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new tt(Q);return t.forEach((function(e){var t=new Ur(e,0),i=new Ur(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],(function(t){y(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)}))})),wn.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){y(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;ue.isDocumentKey(i)||(i=i.child(""));var o=new Ur(new ue(i),0),a=new tt(Q);return this.batchesByDocumentKey.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)}),o),wn.resolve(this.findMutationBatches(a))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;y(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return wn.forEach(t.mutations,(function(i){var o=new Ur(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)})).next((function(){n.batchesByDocumentKey=r}))},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new Ur(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return wn.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&y(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),wn.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return y(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return y(n.batchId===e,"If found batch must match"),n},e}(),Br=function(){function e(e){this.persistence=e,this.queries=new qn((function(e){return e.canonicalId()})),this.lastRemoteSnapshotVersion=Ze.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Vr,this.targetCount=0,this.targetIdGenerator=On.forQueryCache()}return e.prototype.getTargetCount=function(e){return wn.resolve(this.targetCount)},e.prototype.forEachTarget=function(e,t){return this.queries.forEach((function(e,n){return t(n)})),wn.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return wn.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return wn.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,wn.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),wn.resolve()},e.prototype.saveQueryData=function(e){this.queries.set(e.query,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addQueryData=function(e,t){return y(!this.queries.has(t.query),"Adding a query that already exists"),this.saveQueryData(t),this.targetCount+=1,wn.resolve()},e.prototype.updateQueryData=function(e,t){return y(this.queries.has(t.query),"Updating a non-existent query"),this.saveQueryData(t),wn.resolve()},e.prototype.removeQueryData=function(e,t){return y(this.targetCount>0,"Removing a target from an empty cache"),y(this.queries.has(t.query),"Removing a non-existent target from the cache"),this.queries.delete(t.query),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,wn.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.queries.forEach((function(a,s){s.sequenceNumber<=t&&!n[s.targetId]&&(r.queries.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),wn.waitFor(o).next((function(){return i}))},e.prototype.getQueryCount=function(e){return wn.resolve(this.targetCount)},e.prototype.getQueryData=function(e,t){var n=this.queries.get(t)||null;return wn.resolve(n)},e.prototype.getQueryDataForTarget=function(e,t){return v("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.addReference(e,t))})),wn.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.removeReference(e,t))})),wn.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),wn.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return wn.resolve(n)},e.prototype.containsKey=function(e,t){return wn.resolve(this.references.containsKey(t))},e}(),Wr=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=new fe(ue.comparator),this.newDocumentChanges=Dt(),this.size=0}return e.prototype.addEntries=function(e,t,n){for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i],s=a.maybeDocument.key;this.docs=this.docs.insert(s,a),this.newDocumentChanges=this.newDocumentChanges.add(s),r.push(this.indexManager.addToCollectionParentIndex(e,s.path.popLast()))}return this.size+=n,wn.waitFor(r)},e.prototype.removeEntry=function(e,t){var n=this.docs.get(t);return n?(this.docs=this.docs.remove(t),this.size-=n.size,wn.resolve(n.size)):wn.resolve(0)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return wn.resolve(n?n.maybeDocument:null)},e.prototype.getSizedEntry=function(e,t){return wn.resolve(this.docs.get(t))},e.prototype.getEntries=function(e,t){var n=this,r=Et();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)})),wn.resolve(r)},e.prototype.getSizedEntries=function(e,t){var n=this,r=Et(),i=new fe(ue.comparator);return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null),i=i.insert(e,t?t.size:0)})),wn.resolve({maybeDocuments:r,sizeMap:i})},e.prototype.getDocumentsMatchingQuery=function(e,t){y(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=xt(),r=new ue(t.path.child("")),i=this.docs.getIteratorFrom(r);i.hasNext();){var o=i.getNext(),a=o.value.maybeDocument;if(!t.path.isPrefixOf(o.key.path))break;a instanceof le&&t.matches(a)&&(n=n.insert(a.key,a))}return wn.resolve(n)},e.prototype.forEachDocumentKey=function(e,t){return wn.forEach(this.docs,(function(e){return t(e)}))},e.prototype.getNewDocumentChanges=function(e){var t=this,n=St();return this.newDocumentChanges.forEach((function(e){var r=t.docs.get(e),i=r?r.maybeDocument:new he(e,Ze.forDeletedDoc());n=n.insert(e,i)})),this.newDocumentChanges=Dt(),wn.resolve(n)},e.prototype.newChangeBuffer=function(){return new zr(this.sizer,this)},e.prototype.getSize=function(e){return wn.resolve(this.size)},e}(),zr=function(e){function t(t,n){var r=e.call(this)||this;return r.sizer=t,r.documentCache=n,r}return a.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=this.assertChanges(),r=0,i=[];return n.forEach((function(e,n){var o=t.documentSizes.get(e);y(void 0!==o,"Attempting to change document "+e.toString()+" without having read it first");var a=t.sizer(n);r+=a-o,i.push({maybeDocument:n,size:a})})),this.documentCache.addEntries(e,i,r)},t.prototype.getFromCache=function(e,t){return this.documentCache.getSizedEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getSizedEntries(e,t)},t}(Bn),Hr=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new ln(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.queryCache=new Br(this),this.indexManager=new Jn,this.remoteDocumentCache=new Wr(this.indexManager,(function(e){return n.referenceDelegate.documentSize(e)}))}return e.createLruPersistence=function(t,n,r){return new e(t,(function(e){return new Kr(e,new _r(n),r)}))},e.createEagerPersistence=function(t){return new e(t,(function(e){return new Qr(e)}))},e.prototype.shutdown=function(e){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return[2,[this.clientId]]}))}))},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new qr(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getQueryCache=function(){return this.queryCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;p("MemoryPersistence","Starting transaction:",e);var i=new Gr(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next((function(e){return r.referenceDelegate.onTransactionCommitted(i).next((function(){return e}))})).toPromise()},e.prototype.mutationQueuesContainKey=function(e,t){return wn.or((n=this.mutationQueues,r=[],T(n,(function(e,t){return r.push(t)})),r).map((function(n){return function(){return n.containsKey(e,t)}})));var n,r},e}(),Gr=function(e){this.currentSequenceNumber=e},Qr=function(){function e(e){this.persistence=e}return e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),wn.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),wn.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),wn.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.orphanedDocuments.add(e)}))})).next((function(){return r.removeQueryData(e,t)}))},e.prototype.onTransactionStarted=function(){this.orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache();return wn.forEach(this.orphanedDocuments,(function(r){return t.isReferenced(e,r).next((function(t){return t?wn.resolve():n.removeEntry(e,r).next((function(){}))}))}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next((function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)}))},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return wn.or([function(){return n.persistence.getQueryCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return wn.resolve(n.inMemoryPins.containsKey(t))}])},e}(),Kr=function(){function e(e,t,n){this.persistence=e,this.serializer=t,this.orphanedSequenceNumbers=new qn((function(e){return gn(e.path)})),this.garbageCollector=new Tr(this,n)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return wn.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getQueryCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getQueryCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return wn.forEach(this.orphanedSequenceNumbers,(function(r,i){return n.isPinned(e,r,i).next((function(e){return e?wn.resolve():t(i)}))}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getQueryCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache();return i.forEachDocumentKey(e,(function(o){return n.isPinned(e,o,t).next((function(t){return t?wn.resolve():(r++,i.removeEntry(e,o).next())}))})).next((function(){return r}))},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wn.resolve()},e.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wn.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wn.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),wn.resolve()},e.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw v("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},e.prototype.isPinned=function(e,t,n){var r=this;return wn.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return wn.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getQueryCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return wn.resolve(void 0!==e&&e>n)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),Yr=function(){function e(e,t,n,r,i){this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&p("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,(function(){return t.lastAttemptTime=Date.now(),e()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}(),Xr=function(e){return e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.Open=2]="Open",e[e.Error=3]="Error",e[e.Backoff=4]="Backoff",e}({}),Jr=function(){function e(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=Xr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new Yr(e,t,1e3,1.5,6e4)}return e.prototype.isStarted=function(){return this.state===Xr.Starting||this.state===Xr.Open||this.state===Xr.Backoff},e.prototype.isOpen=function(){return this.state===Xr.Open},e.prototype.start=function(){this.state!==Xr.Error?(y(this.state===Xr.Initial,"Already started"),this.auth()):this.performBackoff()},e.prototype.stop=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(Xr.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.inhibitBackoff=function(){y(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Xr.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return e.handleIdleCloseTimer()})))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.isOpen()?[2,this.close(Xr.Initial)]:[2]}))}))},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(n){switch(n.label){case 0:return y(this.isStarted(),"Only started streams should be closed."),y(e===Xr.Error||Ue(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==Xr.Error?this.backoff.reset():t&&"resource-exhausted"===t.code?(g(t.toString()),g("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&"unauthenticated"===t.code&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;y(this.state===Xr.Initial,"Must be in initial state to auth"),this.state=Xr.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(t){e.closeCount===n&&e.startStream(t)}),(function(n){t((function(){var t=new w("unknown","Fetching auth token failed: "+n.message);return e.handleStreamClose(t)}))}))},e.prototype.startStream=function(e){var t=this;y(this.state===Xr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen((function(){n((function(){return y(t.state===Xr.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=Xr.Open,t.listener.onOpen()}))})),this.stream.onClose((function(e){n((function(){return t.handleStreamClose(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.performBackoff=function(){var e=this;y(this.state===Xr.Error,"Should only perform backoff when in Error state"),this.state=Xr.Backoff,this.backoff.backoffAndRun((function(){return a.__awaiter(e,void 0,void 0,(function(){return a.__generator(this,(function(e){return y(this.state===Xr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Xr.Initial,this.start(),y(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},e.prototype.handleStreamClose=function(e){return y(this.isStarted(),"Can't handle server close on non-started stream"),p("PersistentStream","close with error: "+e),this.stream=null,this.close(Xr.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget((function(){return t.closeCount===e?n():(p("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),Zr=function(e){function t(t,n,r,i,o){var a=e.call(this,t,dn.ListenStreamConnectionBackoff,dn.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return a.__extends(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(Jr),$r=function(e){function t(t,n,r,i,o){var a=e.call(this,t,dn.WriteStreamConnectionBackoff,dn.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a}return a.__extends(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(y(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return y(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){y(this.isOpen(),"Writing handshake requires an opened stream"),y(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;y(this.isOpen(),"Writing mutations requires an opened stream"),y(this.handshakeComplete_,"Handshake must be complete before writing mutations"),y(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map((function(e){return t.serializer.toMutation(e)}))};this.sendRequest(n)},t}(Jr),ei=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new $r(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new Zr(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map((function(e){return t.serializer.toMutation(e)}))};return this.invokeRPC("Commit",n).then((function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)}))},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map((function(e){return t.serializer.toName(e)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=St();n.forEach((function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)}));var i=[];return e.forEach((function(e){var t=r.get(e);y(!!t,"Missing entity in write response for "+e),i.push(t)})),i}))},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(e,t,r)})).catch((function(e){throw"unauthenticated"===e.code&&n.credentials.invalidateToken(),e}))},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(e,t,r)})).catch((function(e){throw"unauthenticated"===e.code&&n.credentials.invalidateToken(),e}))},e}(),ti=function(){function e(e){this.datastore=e,this.readVersions=Pt(),this.mutations=[],this.committed=!1}return e.prototype.recordVersion=function(e){var t;if(e instanceof le)t=e.version;else{if(!(e instanceof he))throw v("Document in a transaction was a "+e.constructor.name);t=Ze.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new w("aborted","Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.lookup=function(e){var t=this;return this.committed?Promise.reject("Transaction has already completed."):this.mutations.length>0?Promise.reject("Transactions lookups are invalid after writes."):this.datastore.lookup(e).then((function(e){return e.forEach((function(e){e instanceof he||e instanceof le?t.recordVersion(e):v("Document in a transaction was a "+e.constructor.name)})),e}))},e.prototype.write=function(e){if(this.committed)throw new w("failed-precondition","Transaction has already completed.");this.mutations=this.mutations.concat(e)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return t?st.updateTime(t):st.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(t&&t.isEqual(Ze.forDeletedDoc()))throw new w("failed-precondition","Can't update a document that doesn't exist.");return t?st.updateTime(t):st.exists(!0)},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e)))},e.prototype.update=function(e,t){this.write(t.toMutations(e,this.preconditionForUpdate(e)))},e.prototype.delete=function(e){this.write([new dt(e,this.precondition(e))]),this.readVersions=this.readVersions.insert(e,Ze.forDeletedDoc())},e.prototype.commit=function(){var e=this,t=this.readVersions;return this.mutations.forEach((function(e){t=t.remove(e.key)})),t.isEmpty()?this.datastore.commit(this.mutations).then((function(){e.committed=!0})):Promise.reject(Error("Every document read in a transaction must also be written."))},e}(),ni=function(e){return e[e.Unknown=0]="Unknown",e[e.Online=1]="Online",e[e.Offline=2]="Offline",e}({}),ri=function(e){return e[e.RemoteStore=0]="RemoteStore",e[e.SharedClientState=1]="SharedClientState",e}({}),ii=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=ni.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(ni.Unknown),y(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(dn.OnlineStateTimeout,1e4,(function(){return e.onlineStateTimer=null,y(e.state===ni.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(ni.Offline),Promise.resolve()})))},e.prototype.handleWatchStreamFailure=function(e){this.state===ni.Online?(this.setAndBroadcast(ni.Unknown),y(0===this.watchStreamFailures,"watchStreamFailures must be 0"),y(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(ni.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===ni.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(g(t),this.shouldWarnClientIsOffline=!1):p("OnlineStateTracker",t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}(),oi=function(){function e(e,t,n,r){this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.onlineStateTracker=new ii(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){var e;return a.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(ni.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},e.prototype.disableNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(ni.Offline),[2]}}))}))},e.prototype.disableNetworkInternal=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),this.writePipeline.length>0&&(p("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},e.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return p("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(ni.Unknown),[2]}}))}))},e.prototype.listen=function(e){y(!k(this.listenTargets,e.targetId),"listen called with duplicate targetId!"),this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e)},e.prototype.unlisten=function(e){y(k(this.listenTargets,e),"unlisten called without assigned target ID!"),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),x(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(ni.Unknown))},e.prototype.getQueryDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){y(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Gt(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!x(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return a.__awaiter(this,void 0,void 0,(function(){var e=this;return a.__generator(this,(function(t){return E(this.listenTargets,(function(t,n){e.sendWatchRequest(n)})),[2]}))}))},e.prototype.onWatchStreamClose=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return void 0===e&&y(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(ni.Unknown),[2]}))}))},e.prototype.onWatchStreamChange=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(ni.Online),e instanceof zt&&e.state===Wt.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof qt?this.watchChangeAggregator.handleDocumentChange(e):e instanceof Bt?this.watchChangeAggregator.handleExistenceFilter(e):(y(e instanceof zt,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(Ze.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),t.compareTo(n)>=0?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},e.prototype.raiseWatchSnapshot=function(e){var t=this;y(!e.isEqual(Ze.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return E(n.targetChanges,(function(n,r){if(r.resumeToken.length>0){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.copy({resumeToken:r.resumeToken,snapshotVersion:e}))}})),n.targetMismatches.forEach((function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.copy({resumeToken:_()}),t.sendUnwatchRequest(e);var r=new et(n.query,e,$e.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;y(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach((function(e){r=r.then((function(){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){return k(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]}))}))}))})),r},e.prototype.fillWritePipeline=function(){return a.__awaiter(this,void 0,void 0,(function(){var e;return a.__generator(this,(function(t){switch(t.label){case 0:return this.canAddToWritePipeline()?[4,this.localStore.nextMutationBatch(this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1)]:[3,4];case 1:return null!==(e=t.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(e),[4,this.fillWritePipeline()];case 3:t.sent(),t.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){y(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},e.prototype.startWriteStream=function(){y(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.writeStream.writeHandshake(),[2]}))}))},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var t=0,n=e.writePipeline;t<n.length;t++)e.writeStream.writeMutations(n[t].mutations)})).catch(Ar)},e.prototype.onMutationResult=function(e,t){var n=this;y(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=_n.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},e.prototype.onWriteStreamClose=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t=this;return a.__generator(this,(function(n){return void 0===e&&y(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&this.writePipeline.length>0?[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then((function(){t.shouldStartWriteStream()&&t.startWriteStream()}))]:[2]}))}))},e.prototype.handleHandshakeError=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return _t(e.code)?(p("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=_(),[2,this.localStore.setLastStreamToken(_()).catch(Ar)]):[2]}))}))},e.prototype.handleWriteError=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n=this;return a.__generator(this,(function(r){return _t(i=e.code)&&"aborted"!==i?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then((function(){return n.fillWritePipeline()}))]):[2];var i}))}))},e.prototype.createTransaction=function(){return new ti(this.datastore)},e.prototype.handleCredentialChange=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(p("RemoteStore","RemoteStore restarting streams for new credential"),this.networkEnabled=!1,[4,this.disableNetworkInternal()]):[3,3];case 1:return e.sent(),this.onlineStateTracker.set(ni.Unknown),[4,this.enableNetwork()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},e.prototype.applyPrimaryState=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(ni.Unknown),t.label=4;case 4:return[2]}}))}))},e}(),ai=function(){this.listeners=[]},si=function(){function e(e){this.syncEngine=e,this.queries=new qn((function(e){return e.canonicalId()})),this.onlineState=ni.Unknown,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new ai,this.queries.set(t,r)),r.listeners.push(e),e.applyOnlineStateChange(this.onlineState),r.viewSnap&&e.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(t).then((function(e){return r.targetId=e,e})):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i;return a.__generator(this,(function(o){return n=!1,(r=this.queries.get(t=e.query))&&(i=r.listeners.indexOf(e))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]}))}))},e.prototype.onWatchChange=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t],i=this.queries.get(r.query);if(i){for(var o=0,a=i.listeners;o<a.length;o++)a[o].onViewSnapshot(r);i.viewSnap=r}}},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(t);this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e,this.queries.forEach((function(t,n){for(var r=0,i=n.listeners;r<i.length;r++)i[r].applyOnlineStateChange(e)}))},e}(),ui=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.onlineState=ni.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(y(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==Mt.Metadata&&t.push(i)}e=new Vt(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(e)&&this.queryObserver.next(e):this.shouldRaiseInitialEvent(e,this.onlineState)&&this.raiseInitialEvent(e),this.snap=e},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&this.raiseInitialEvent(this.snap)},e.prototype.shouldRaiseInitialEvent=function(e,t){return y(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache||(this.options.waitForSyncWhenOnline&&t!==ni.Offline?(y(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===ni.Offline)},e.prototype.shouldRaiseEvent=function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){y(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=Vt.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),ci=function(){function e(e,t,n){this.targetId=e,this.addedKeys=t,this.removedKeys=n}return e.fromSnapshot=function(t,n){for(var r=Dt(),i=Dt(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case Mt.Added:r=r.add(s.doc.key);break;case Mt.Removed:i=i.add(s.doc.key)}}return new e(t,r,i)},e}(),li=function(e){this.key=e},hi=function(e){this.key=e},di=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=Dt(),this.mutatedKeys=Dt(),this.documentSet=new Nt(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new Lt,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),l=t instanceof le?t:null;l&&(y(e.isEqual(l.key),"Mismatching keys found in document changes: "+e+" != "+l.key),l=n.query.matches(l)?l:null);var h=!!c&&n.mutatedKeys.has(c.key),d=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),f=!1;c&&l?c.data.isEqual(l.data)?h!==d&&(r.track({type:Mt.Metadata,doc:l}),f=!0):n.shouldWaitForSyncedDocument(c,l)||(r.track({type:Mt.Modified,doc:l}),f=!0,u&&n.query.docComparator(l,u)>0&&(s=!0)):!c&&l?(r.track({type:Mt.Added,doc:l}),f=!0):c&&!l&&(r.track({type:Mt.Removed,doc:c}),f=!0,u&&(s=!0)),f&&(l?(a=a.add(l),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),this.query.hasLimit())for(;a.size>this.query.limit;){var c=a.last();a=a.delete(c.key),o=o.delete(c.key),r.track({type:Mt.Removed,doc:c})}return y(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;y(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case Mt.Added:return 1;case Mt.Modified:case Mt.Metadata:return 2;case Mt.Removed:return 0;default:return v("Unknown ChangeType: "+e)}};return n(e)-n(t)}(e.type,t.type)||r.query.docComparator(e.doc,t.doc)})),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Ft.Synced:Ft.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new Vt(this.query,e.documentSet,i,o,e.mutatedKeys,s===Ft.Local,u,!1),limboChanges:a}:{limboChanges:a}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===ni.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Lt,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.add(e)})),e.modifiedDocuments.forEach((function(e){return y(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")})),e.removedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)})),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=Dt(),this.documentSet.forEach((function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))}));var n=[];return t.forEach((function(t){e.limboDocuments.has(t)||n.push(new hi(t))})),this.limboDocuments.forEach((function(e){t.has(e)||n.push(new li(e))})),n},e.prototype.synchronizeWithPersistedState=function(e,t){this._syncedDocuments=t,this.limboDocuments=Dt();var n=this.computeDocChanges(e);return this.applyChanges(n,!0)},e.prototype.computeInitialSnapshot=function(){return Vt.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Ft.Local)},e}(),fi=function(e,t,n){this.query=e,this.targetId=t,this.view=n},pi=function(e){this.key=e},gi=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new qn((function(e){return e.canonicalId()})),this.queryViewsByTarget={},this.limboTargetsByKey=new fe(ue.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Vr,this.mutationUserCallbacks={},this.limboTargetIdGenerator=On.forSyncEngine(),this.isPrimary=void 0,this.onlineState=ni.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){y(null!==e,"SyncEngine listener cannot be null"),y(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,o;return a.__generator(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(this.sharedClientState.addLocalQueryTarget(t=r.targetId),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(e)];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}}))}))},e.prototype.initializeViewAndComputeSnapshot=function(e,t){var n=this,r=e.query;return this.localStore.executeQuery(r).then((function(i){return n.localStore.remoteDocumentKeys(e.targetId).then((function(o){var a=new di(r,o),s=a.computeDocChanges(i),u=jt.createSynthesizedTargetChangeForCurrentChange(e.targetId,t&&n.onlineState!==ni.Offline),c=a.applyChanges(s,!0===n.isPrimary,u);y(0===c.limboChanges.length,"View returned limbo docs before target ack from the server."),y(!!c.snapshot,"applyChanges for new view should always return a snapshot");var l=new fi(r,e.targetId,a);return n.queryViewsByQuery.set(r,l),n.queryViewsByTarget[e.targetId]=l,c.snapshot}))}))},e.prototype.synchronizeViewAndComputeSnapshot=function(e){var t=this;return this.localStore.executeQuery(e.query).then((function(n){return t.localStore.remoteDocumentKeys(e.targetId).then((function(r){return a.__awaiter(t,void 0,void 0,(function(){var t;return a.__generator(this,(function(i){return t=e.view.synchronizeWithPersistedState(n,r),this.isPrimary&&this.updateTrackedLimbos(e.targetId,t.limboChanges),[2,t]}))}))}))}))},e.prototype.unlisten=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),y(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseQuery(e,!1).then((function(){n.sharedClientState.clearQueryState(t.targetId),n.remoteStore.unlisten(t.targetId),n.removeAndCleanupQuery(t)})).catch(Ar)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(t),[4,this.localStore.releaseQuery(e,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))},e.prototype.write=function(e,t){var n=this;return this.assertSubscribed("write()"),this.localStore.localWrite(e).then((function(e){return n.sharedClientState.addPendingMutation(e.batchId),n.addMutationCallback(e.batchId,t),n.emitNewSnapsAndNotifyLocalStore(e.changes)})).then((function(){return n.remoteStore.fillWritePipeline()}))},e.prototype.wrapUpdateFunctionError=function(e){return e},e.prototype.runTransaction=function(e,t){var n=this;void 0===t&&(t=5),y(t>=0,"Got negative number of retries for transaction.");var r=this.remoteStore.createTransaction();return function(){try{var t=e(r);return!Ue(t)&&t.catch&&t.then?t.catch((function(e){return Promise.reject(n.wrapUpdateFunctionError(e))})):Promise.reject(Error("Transaction callback must return a Promise"))}catch(i){return Promise.reject(n.wrapUpdateFunctionError(i))}}().then((function(i){return r.commit().then((function(){return i})).catch((function(r){return 0===t?Promise.reject(r):n.runTransaction(e,t-1)}))}))},e.prototype.applyRemoteEvent=function(e){var t=this;return this.assertSubscribed("applyRemoteEvent()"),this.localStore.applyRemoteEvent(e).then((function(n){return T(e.targetChanges,(function(e,n){var r=t.limboResolutionsByTarget[e];r&&(y(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),n.addedDocuments.size>0?r.receivedDocument=!0:n.modifiedDocuments.size>0?y(r.receivedDocument,"Received change for limbo target document without add."):n.removedDocuments.size>0&&(y(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),t.emitNewSnapsAndNotifyLocalStore(n,e)})).catch(Ar)},e.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===ri.RemoteStore||!this.isPrimary&&t===ri.SharedClientState){var n=[];this.queryViewsByQuery.forEach((function(t,r){var i=r.view.applyOnlineStateChange(e);y(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,s,u,c=this;return a.__generator(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),(r=(n=this.limboResolutionsByTarget[e])&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new fe(ue.comparator)).insert(r,new he(r,Ze.forDeletedDoc())),o=Dt().add(r),s=new Ut(Ze.MIN,{},new tt(Q),i,o),[2,this.applyRemoteEvent(s)]):[3,1];case 1:return y(!!(u=this.queryViewsByTarget[e]),"Unknown targetId: "+e),[4,this.localStore.releaseQuery(u.query,!1).then((function(){return c.removeAndCleanupQuery(u)})).catch(Ar)];case 2:a.sent(),this.syncEngineListener.onWatchError(u.query,t),a.label=3;case 3:return[2]}}))}))},e.prototype.applyBatchState=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r;return a.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(p("SyncEngine","Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):v("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}}))}))},e.prototype.applySuccessfulWrite=function(e){var t=this;this.assertSubscribed("applySuccessfulWrite()");var n=e.batch.batchId;return this.processUserCallback(n,null),this.localStore.acknowledgeBatch(e).then((function(e){return t.sharedClientState.updateMutationState(n,"acknowledged"),t.emitNewSnapsAndNotifyLocalStore(e)})).catch(Ar)},e.prototype.rejectFailedWrite=function(e,t){var n=this;return this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.localStore.rejectBatch(e).then((function(r){return n.sharedClientState.updateMutationState(e,"rejected",t),n.emitNewSnapsAndNotifyLocalStore(r)})).catch(Ar)},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new fe(Q)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(y(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupQuery=function(e){var t=this;if(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.queryViewsByQuery.delete(e.query),delete this.queryViewsByTarget[e.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(e.targetId);this.limboDocumentRefs.removeReferencesForId(e.targetId),n.forEach((function(e){t.limboDocumentRefs.containsKey(e)||t.removeLimboTarget(e)}))}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i instanceof li?(this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i)):i instanceof hi?(p("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):v("Unknown limbo change: "+JSON.stringify(i))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){p("SyncEngine","New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=qe.atPath(t.path);this.limboResolutionsByTarget[n]=new pi(t),this.remoteStore.listen(new et(r,n,$e.LimboResolution,ln.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o=this;return a.__generator(this,(function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach((function(a,s){i.push(Promise.resolve().then((function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query).then((function(e){return s.view.computeDocChanges(e,t)})):t})).then((function(e){var i=s.view.applyChanges(e,!0===o.isPrimary,t&&t.targetChanges[s.targetId]);if(o.updateTrackedLimbos(s.targetId,i.limboChanges),i.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,i.snapshot.fromCache?"not-current":"current"),n.push(i.snapshot);var a=ci.fromSnapshot(s.targetId,i.snapshot);r.push(a)}})))})),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}}))}))},e.prototype.assertSubscribed=function(e){y(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?[4,this.localStore.handleUserChange(e)]:[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},e.prototype.applyPrimaryState=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,o,s,u=this;return a.__generator(this,(function(a){switch(a.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return a.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=a.sent(),r=0,i=n;r<i.length;r++)this.remoteStore.listen(i[r]);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,o=[],s=Promise.resolve(),E(this.queryViewsByTarget,(function(e,t){u.sharedClientState.isLocalQueryTarget(e)?o.push(e):s=s.then((function(){return u.unlisten(t.query)})),u.remoteStore.unlisten(t.targetId)})),[4,s]);case 4:return a.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(o)];case 5:return a.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))},e.prototype.resetLimboDocuments=function(){var e=this;E(this.limboResolutionsByTarget,(function(t){e.remoteStore.unlisten(t)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new fe(ue.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){for(var t=this,n=Promise.resolve(),r=[],i=[],o=function(e){n=n.then((function(){return a.__awaiter(t,void 0,void 0,(function(){var t,n,o,s;return a.__generator(this,(function(a){switch(a.label){case 0:return(n=this.queryViewsByTarget[e])?[4,this.localStore.releaseQuery(n.query,!0)]:[3,4];case 1:return a.sent(),[4,this.localStore.allocateQuery(n.query)];case 2:return t=a.sent(),[4,this.synchronizeViewAndComputeSnapshot(n)];case 3:return(o=a.sent()).snapshot&&i.push(o.snapshot),[3,8];case 4:return y(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(e)];case 5:return y(!!(s=a.sent()),"Query data for target "+e+" not found"),[4,this.localStore.allocateQuery(s)];case 6:return t=a.sent(),[4,this.initializeViewAndComputeSnapshot(t,!1)];case 7:a.sent(),a.label=8;case 8:return r.push(t),[2]}}))}))}))},s=0,u=e;s<u.length;s++)o(u[s]);return n.then((function(){return t.syncEngineListener.onWatchChange(i),r}))},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i=this;return a.__generator(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return p("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[e])return[3,5];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,2]}return[3,4];case 1:return[2,this.localStore.getNewDocumentChanges().then((function(n){return a.__awaiter(i,void 0,void 0,(function(){var r;return a.__generator(this,(function(i){switch(i.label){case 0:return r=Ut.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(n,r)];case 1:return i.sent(),[2]}}))}))}),(function(e){return a.__awaiter(i,void 0,void 0,(function(){var t;return a.__generator(this,(function(n){switch(n.label){case 0:return function(e){return"data-loss"===e.code&&e.message===Wn}(e)?(t=[],E(this.queryViewsByTarget,(function(e){return t.push(e)})),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t)]):[3,2];case 1:return n.sent(),[3,3];case 2:throw e;case 3:return[2]}}))}))}))];case 2:return this.removeAndCleanupQuery(r=this.queryViewsByTarget[e]),[4,this.localStore.releaseQuery(r.query,!0)];case 3:return o.sent(),this.syncEngineListener.onWatchError(r.query,n),[3,5];case 4:v("Unexpected target state: "+t),o.label=5;case 5:return[2]}}))}))},e.prototype.applyActiveTargetsChange=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l,h,d=this;return a.__generator(this,(function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,f.label=1;case 1:return n<r.length?(y(!this.queryViewsByTarget[h=r[n]],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(h)]):[3,6];case 2:return y(!!(i=f.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateQuery(i)];case 3:return o=f.sent(),[4,this.initializeViewAndComputeSnapshot(o,!1)];case 4:f.sent(),this.remoteStore.listen(o),f.label=5;case 5:return n++,[3,1];case 6:s=function(e){var t;return a.__generator(this,(function(n){switch(n.label){case 0:return(t=u.queryViewsByTarget[e])?[4,u.localStore.releaseQuery(t.query,!1).then((function(){d.remoteStore.unlisten(e),d.removeAndCleanupQuery(t)})).catch(Ar)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))},u=this,c=0,l=t,f.label=7;case 7:return c<l.length?[5,s(h=l[c])]:[3,10];case 8:f.sent(),f.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];return t&&t.receivedDocument?Dt().add(t.key):this.queryViewsByTarget[e]?this.queryViewsByTarget[e].view.syncedDocuments:Dt()},e}(),mi=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}(),vi="SharedClientState",yi=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r,y(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new w(i.error.code,i.error.message)),o?new e(t,n,i.state,a):(g(vi,"Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),bi=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n,y(void 0!==n==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new w(r.error.code,r.error.message)),i?new e(t,r.state,o):(g(vi,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),_i=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Rt(),a=0;i&&a<r.activeTargetIds.length;++a)i=je(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(g(vi,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),wi=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t);return"object"==typeof n&&void 0!==ni[n.onlineState]&&"string"==typeof n.clientId?new e(n.clientId,ni[n.onlineState]):(g(vi,"Failed to parse online state: "+t),null)},e}(),Ci=function(){function e(){this.activeTargetIds=Rt()}return e.prototype.addQueryTarget=function(e){y(!this.activeTargetIds.has(e),"Target with ID '"+e+"' already active."),this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),ki=function(){function e(t,n,r,i,o){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new w("unimplemented","LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey="firestore_sequence_number_"+r,this.activeClients[this.localClientId]=new Ci,this.clientStateKeyRe=new RegExp("^firestore_clients_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^firestore_mutations_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^firestore_targets_"+a+"_(\\d+)$"),this.onlineStateKey="firestore_online_state_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return a.__awaiter(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,u,c,l,h=this;return a.__generator(this,(function(a){switch(a.label){case 0:return y(!this.started,"WebStorageSharedClientState already started"),y(null!==this.syncEngine,"syncEngine property must be set before calling start()"),y(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=a.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=_i.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(s=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(s))&&this.handleOnlineStateEvent(u),c=0,l=this.earlyEvents;c<l.length;c++)this.handleWebStorageEvent(l[c]);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=Rt();return T(this.activeClients,(function(t,n){e=e.unionWith(n.activeTargetIds)})),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(e));if(n){var r=bi.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(this.toWebStorageQueryTargetMetadataKey(e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.removeMutationState(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return p(vi,"READ",e,t),t},e.prototype.setItem=function(e,t){p(vi,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){p(vi,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(p(vi,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void g("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return a.__awaiter(t,void 0,void 0,(function(){var t,n,r,i,o,s;return a.__generator(this,(function(a){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(y(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(s=function(e){var t=ln.INVALID;if(null!=e)try{var n=JSON.parse(e);y("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(r){g(vi,"Failed to read sequence number from WebStorage",r)}return t}(e.newValue))!==ln.INVALID&&this.sequenceNumberHandler(s));return[2]}))}))}))}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new yi(this.currentUser,e,t,n),i=this.toWebStorageMutationBatchKey(e);this.setItem(i,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=this.toWebStorageMutationBatchKey(e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){this.storage.setItem(this.onlineStateKey,JSON.stringify({clientId:this.localClientId,onlineState:ni[e]}))},e.prototype.persistQueryTargetState=function(e,t,n){var r=this.toWebStorageQueryTargetMetadataKey(e),i=new bi(e,t,n);this.setItem(r,i.toWebStorageJSON())},e.prototype.toWebStorageClientStateKey=function(e){return y(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),"firestore_clients_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageQueryTargetMetadataKey=function(e){return"firestore_targets_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageMutationBatchKey=function(e){var t="firestore_mutations_"+this.persistenceKey+"_"+e;return this.currentUser.isAuthenticated()&&(t+="_"+this.currentUser.uid),t},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return y(null!==n,"Cannot parse client state key '"+e+"'"),_i.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);y(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]);return yi.fromWebStorageEntry(new mi(void 0!==n[2]?n[2]:null),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);y(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return bi.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return wi.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return e.user.uid!==this.currentUser.uid?(p(vi,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]}))}))},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],s=[];return i.forEach((function(e){return a.__awaiter(n,void 0,void 0,(function(){return a.__generator(this,(function(t){return r.has(e)||o.push(e),[2]}))}))})),r.forEach((function(e){return a.__awaiter(n,void 0,void 0,(function(){return a.__generator(this,(function(t){return i.has(e)||s.push(e),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(o,s)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}(),Si=function(){function e(){this.localState=new Ci,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new Ci,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),Ei=function(){function e(e,t){this.cacheSizeBytes=e,this.experimentalTabSynchronization=t}return e.prototype.lruParams=function(){return Sr.withCacheSize(this.cacheSizeBytes)},e}(),Ti=function(){},xi=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=G.newId()}return e.prototype.start=function(e){var t=this,n=new hn,r=new hn,i=!1;return this.credentials.setChangeListener((function(o){i?t.asyncQueue.enqueueAndForget((function(){return t.handleCredentialChange(o)})):(i=!0,t.initializePersistence(e,r,o).then((function(e){return t.initializeRest(o,e)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.asyncQueue.enqueue((function(){return e.syncEngine.enableNetwork()}))},e.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof Ei?this.startIndexedDbPersistence(n,e).then((function(e){return t.resolve(),e})).catch((function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline storage. Falling back to storage disabled: "+e),r.startMemoryPersistence()})):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof w?"failed-precondition"===e.code||"unimplemented"===e.code:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=Dr.buildStoragePrefix(this.databaseInfo),i=new nn(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return a.__awaiter(n,void 0,void 0,(function(){var n,o;return a.__generator(this,(function(a){switch(a.label){case 0:if(t.experimentalTabSynchronization&&!ki.isAvailable(this.platform))throw new w("unimplemented","IndexedDB persistence is only available on platforms that support LocalStorage.");return o=t.lruParams(),t.experimentalTabSynchronization?(this.sharedClientState=new ki(this.asyncQueue,this.platform,r,this.clientId,e),[4,Dr.createMultiClientIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n=a.sent(),[3,4];case 2:return this.sharedClientState=new Si,[4,Dr.createIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,i,o)];case 3:n=a.sent(),a.label=4;case 4:return this.persistence=n,[2,n.referenceDelegate.garbageCollector]}}))}))}))},e.prototype.startMemoryPersistence=function(){return this.persistence=Hr.createEagerPersistence(this.clientId),this.sharedClientState=new Si,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return p("FirestoreClient","Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return a.__awaiter(n,void 0,void 0,(function(){var n,i,o,s=this;return a.__generator(this,(function(u){switch(u.label){case 0:return this.localStore=new jr(this.persistence,e),t&&(this.lruScheduler=new Er(t,this.asyncQueue,this.localStore)),n=this.platform.newSerializer(this.databaseInfo.databaseId),i=new ei(this.asyncQueue,r,this.credentials,n),o=function(e){return s.syncEngine.applyOnlineStateChange(e,ri.SharedClientState)},this.remoteStore=new oi(this.localStore,i,this.asyncQueue,(function(e){return s.syncEngine.applyOnlineStateChange(e,ri.RemoteStore)})),this.syncEngine=new gi(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=o,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new si(this.syncEngine),[4,this.sharedClientState.start()];case 1:return u.sent(),[4,this.remoteStore.start()];case 2:return u.sent(),[4,this.persistence.setPrimaryStateListener((function(e){return a.__awaiter(s,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}}))}))}))];case 3:return u.sent(),[2]}}))}))}))},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),p("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.asyncQueue.enqueue((function(){return e.syncEngine.disableNetwork()}))},e.prototype.shutdown=function(e){var t=this;return this.asyncQueue.enqueue((function(){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown(e&&e.purgePersistenceWithDataLoss)];case 3:return t.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},e.prototype.listen=function(e,t,n){var r=this,i=new ui(e,t,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(i)})),i},e.prototype.unlisten=function(e){var t=this;this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.unlisten(e)}))},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.asyncQueue.enqueue((function(){return t.localStore.readDocument(e)})).then((function(e){if(e instanceof le)return e;if(e instanceof he)return null;throw new w("unavailable","Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.asyncQueue.enqueue((function(){return t.localStore.executeQuery(e)})).then((function(t){var n=Dt(),r=new di(e,n),i=r.computeDocChanges(t);return r.applyChanges(i,!1).snapshot}))},e.prototype.write=function(e){var t=this,n=new hn;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.write(e,n)})),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},e.prototype.transaction=function(e){var t=this;return this.asyncQueue.enqueue((function(){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(e){return[2]}))}))})).then((function(){return t.syncEngine.runTransaction(e)}))},e}(),Ii=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),Pi=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];A("FieldPath",e,"fieldNames",1);for(var n=0;n<e.length;++n)if(R("FieldPath","string",n,e[n]),0===e[n].length)throw new w("invalid-argument","Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new se(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw W("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(se.keyField().canonicalString()),e}(),Oi=new RegExp("[~\\*/\\[\\]]"),Di=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+e}},Ai=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){y(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(mi.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){y(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),Ri=function(){function e(e){var t=this;this.app=e,this.tokenListener=null,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return e.prototype.getToken=function(){var e=this;y(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then((function(n){if(e.tokenCounter!==t)throw new w("aborted","getToken aborted due to token change.");return n?(y("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Di(n.accessToken,e.currentUser)):null}))},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){y(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.currentUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){y(null!=this.tokenListener,"removeChangeListener() called twice"),y(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.app.INTERNAL.getUid();return y(null===e||"string"==typeof e,"Received invalid UID: "+e),new mi(e)},e}(),Ni=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=mi.FIRST_PARTY,y(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){return{Authorization:this.gapi.auth.getAuthHeaderValueForFirstParty([]),"X-Goog-AuthUser":this.sessionIndex}},enumerable:!0,configurable:!0}),e}(),Mi=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,y(this.gapi&&this.gapi.auth&&this.gapi.auth.getAuthHeaderValueForFirstParty,"unexpected gapi interface")}return e.prototype.getToken=function(){return Promise.resolve(new Ni(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(mi.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function Fi(e){if(!e)return new Ai;switch(e.type){case"gapi":return new Mi(e.client,e.sessionIndex||"0");case"provider":return e.client;default:throw new w("invalid-argument","makeCredentialsProvider failed due to invalid credential type")}}function Li(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var Vi=function(){function e(e){this._methodName=e}return e.delete=function(){return I("FieldValue.delete",arguments),Ui.instance},e.serverTimestamp=function(){return I("FieldValue.serverTimestamp",arguments),ji.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return O("FieldValue.arrayUnion",arguments,1),new qi(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return O("FieldValue.arrayRemove",arguments,1),new Bi(e)},e.increment=function(e){return R("FieldValue.increment","number",1,e),P("FieldValue.increment",arguments,1),new Wi(e)},e.prototype.isEqual=function(e){return this===e},e}(),Ui=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return a.__extends(t,e),t.instance=new t,t}(Vi),ji=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return a.__extends(t,e),t.instance=new t,t}(Vi),qi=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return a.__extends(t,e),t}(Vi),Bi=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return a.__extends(t,e),t}(Vi),Wi=function(e){function t(t){var n=e.call(this,"FieldValue.increment")||this;return n._operand=t,n}return a.__extends(t,e),t}(Vi),zi=C(Vi,"Use FieldValue.<field>() instead."),Hi=/^__.*__$/,Gi=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return n.push(null!==this.fieldMask?new lt(e,this.data,this.fieldMask,t):new ct(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new ht(e,this.fieldTransforms)),n},e}(),Qi=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new lt(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new ht(e,this.fieldTransforms)),n},e}(),Ki=function(e){return e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.MergeSet=2]="MergeSet",e[e.Argument=3]="Argument",e}({});function Yi(e){switch(e){case Ki.Set:case Ki.MergeSet:case Ki.Update:return!0;case Ki.Argument:return!1;default:throw v("Unexpected case for UserDataSource: "+e)}}var Xi=function(){function e(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new w("invalid-argument","Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(Yi(this.dataSource)&&Hi.test(e))throw this.createError("Document fields cannot begin and end with __")},e}(),Ji=function(e,t){this.databaseId=e,this.key=t},Zi=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new Xi(Ki.Set,e,se.EMPTY_PATH);eo("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new Gi(r,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t,n){var r=new Xi(Ki.MergeSet,e,se.EMPTY_PATH);eo("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new tt(se.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof Pi)h=l._internalPath;else{if("string"!=typeof l)throw v("Expected stringOrFieldPath to be a string or a FieldPath");h=no(e,l)}if(!r.contains(h))throw new w("invalid-argument","Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=rt.fromSet(s),o=r.fieldTransforms.filter((function(e){return i.covers(e.field)}))}else i=rt.fromArray(r.fieldMask),o=r.fieldTransforms;return new Gi(a,i,o)},e.prototype.parseUpdateData=function(e,t){var n=this,r=new Xi(Ki.Update,e,se.EMPTY_PATH);eo("Data must be an object, but it was:",r,t);var i=new tt(se.comparator),o=Re.EMPTY;T(t,(function(t,a){var s=no(e,t),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof Ui)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}}));var a=rt.fromSet(i);return new Qi(o,a,r.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new Xi(Ki.Update,e,se.EMPTY_PATH),o=[to(e,t)],a=[n];if(r.length%2!=0)throw new w("invalid-argument","Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(to(e,r[s])),a.push(r[s+1]);var u=new tt(se.comparator),c=Re.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),d=this.runPreConverter(a[s],h);if(d instanceof Ui)u=u.add(l);else{var f=this.parseData(d,h);null!=f&&(u=u.add(l),c=c.set(l,f))}}var p=rt.fromSet(u);return new Qi(c,p,i.fieldTransforms)},e.prototype.parseQueryValue=function(e,t){var n=new Xi(Ki.Argument,e,se.EMPTY_PATH),r=this.parseData(t,n);return y(null!=r,"Parsed data should not be null."),y(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(r){var n=ro(r);throw t.createError(n)}},e.prototype.parseData=function(e,t){if($i(e=this.runPreConverter(e,t)))return eo("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof Vi)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},e.prototype.parseObject=function(e,t){var n=this,r=new fe(Q);return x(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):T(e,(function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))})),new Re(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=this.parseData(o[i],t.childContextForArray(r));null==a&&(a=we.INSTANCE),n.push(a),r++}return new Ne(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!Yi(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof Ui){if(t.dataSource!==Ki.MergeSet)throw t.dataSource===Ki.Update?(y(t.path.length>0,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof ji)t.fieldTransforms.push(new it(t.path,ft.instance));else if(e instanceof qi){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new pt(n);t.fieldTransforms.push(new it(t.path,r))}else if(e instanceof Bi){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new gt(n);t.fieldTransforms.push(new it(t.path,i))}else if(e instanceof Wi){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new mt(o);t.fieldTransforms.push(new it(t.path,a))}else v("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return we.INSTANCE;if("number"==typeof e)return je(e)?new Ee(e):new Te(e);if("boolean"==typeof e)return Ce.of(e);if("string"==typeof e)return new xe(e);if(e instanceof Date)return new Ie(te.fromDate(e));if(e instanceof te)return new Ie(new te(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof ee)return new Ae(e);if(e instanceof Z)return new Oe(e);if(e instanceof Ji)return new De(e.databaseId,e.key);throw t.createError("Unsupported field value: "+j(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map((function(t,r){var i=new Xi(Ki.Argument,e,se.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))}))},e}();function $i(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof te||e instanceof ee||e instanceof Z||e instanceof Ji||e instanceof Vi)}function eo(e,t,n){if(!$i(n)||!U(n)){var r=j(n);throw t.createError("an object"===r?e+" a custom object":e+" "+r)}}function to(e,t){if(t instanceof Pi)return t._internalPath;if("string"==typeof t)return no(e,t);throw new w("invalid-argument","Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function no(e,t){try{return function(e){if(e.search(Oi)>=0)throw new w("invalid-argument","Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Pi.bind.apply(Pi,[void 0].concat(e.split("."))))}catch(t){throw new w("invalid-argument","Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(r){var n=ro(r);throw new w("invalid-argument","Function "+e+"() called with invalid data. "+n)}}function ro(e){return e instanceof Error?e.message:e.toString()}var io=Sr.COLLECTION_DISABLED,oo=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new w("invalid-argument","Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else M("settings","non-empty string","host",e.host),this.host=e.host,F("settings","boolean","ssl",e.ssl),this.ssl=S(e.ssl,!0);if(B("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes"]),F("settings","object","credentials",e.credentials),this.credentials=e.credentials,F("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?g("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&g("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=S(e.timestampsInSnapshots,!0),F("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=Sr.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==io&&e.cacheSizeBytes<Sr.MINIMUM_CACHE_SIZE_BYTES)throw new w("invalid-argument","cacheSizeBytes must be at least "+Sr.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes},e}(),ao=function(){},so=function(){function e(t){var n=this;this._queue=new pn,this.INTERNAL={delete:function(e){return a.__awaiter(n,void 0,void 0,(function(){return a.__generator(this,(function(t){return this._firestoreClient?[2,this._firestoreClient.shutdown(e)]:[2]}))}))}};var r=new ao;if("object"==typeof t.options){var i=t;r.firebaseApp=i,r.databaseId=e.databaseIdFromApp(i),r.persistenceKey=r.firebaseApp.name,r.credentials=new Ri(i)}else{var o=t;if(!o.projectId)throw new w("invalid-argument","Must provide projectId");r.databaseId=new re(o.projectId,o.database),r.persistenceKey="[DEFAULT]",r.credentials=new Ai}r.settings=new oo({}),this._config=r,this._databaseId=r.databaseId}return e.prototype.settings=function(e){if(P("Firestore.settings",arguments,1),R("Firestore.settings","object",1,e),k(e,"persistence"))throw new w("invalid-argument",'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new oo(e);if(this._firestoreClient&&!this._config.settings.isEqual(t))throw new w("failed-precondition","Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._config.settings=t,void 0!==t.credentials&&(this._config.credentials=Fi(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new w("failed-precondition","Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");return this.configureClient(new Ei(this._config.settings.cacheSizeBytes,void 0!==e&&S(e.experimentalTabSynchronization,!1)))},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Ti),this._firestoreClient},e.prototype.configureClient=function(e){var t=this;y(!!this._config.settings.host,"FirestoreSettings.host cannot be falsey"),y(!this._firestoreClient,"configureClient() called multiple times");var n=new ne(this._config.databaseId,this._config.persistenceKey,this._config.settings.host,this._config.settings.ssl);return this._dataConverter=new Zi((function(e){if(e instanceof lo){var n=t._config.databaseId,r=e.firestore._config.databaseId;if(!r.isEqual(n))throw new w("invalid-argument","Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new Ji(t._config.databaseId,e._key)}return e})),this._firestoreClient=new xi(b.getPlatform(),n,this._config.credentials,this._queue),this._firestoreClient.start(e)},e.databaseIdFromApp=function(e){var t=e.options;if(!k(t,"projectId"))throw new w("invalid-argument",'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new w("invalid-argument","projectId must be a string in FirebaseApp.options");return new re(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._config.firebaseApp)throw new w("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._config.firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return P("Firestore.collection",arguments,1),R("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new vo(oe.fromString(e),this)},e.prototype.doc=function(e){return P("Firestore.doc",arguments,1),R("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),lo.forPath(oe.fromString(e),this)},e.prototype._collectionGroup=function(e){if(P("Firestore.collectionGroup",arguments,1),R("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new w("invalid-argument","Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new go(new qe(oe.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return P("Firestore.runTransaction",arguments,1),R("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction((function(n){return e(new uo(t,n))}))},e.prototype.batch=function(){return this.ensureClientConfigured(),new co(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(d()){case h.DEBUG:return"debug";case h.ERROR:return"error";case h.SILENT:return"silent";default:return v("Unknown log level: "+d())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(P("Firestore.setLogLevel",arguments,1),R("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":f(h.DEBUG);break;case"error":f(h.ERROR);break;case"silent":f(h.SILENT);break;default:throw new w("invalid-argument","Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._config.settings.timestampsInSnapshots},e}(),uo=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;P("Transaction.get",arguments,1);var n=wo("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return v("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof he)return new fo(t._firestore,n._key,null,!1,!1);if(r instanceof le)return new fo(t._firestore,n._key,r,!1,!1);throw v("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},e.prototype.set=function(e,t,n){D("Transaction.set",arguments,2,3);var r=wo("Transaction.set",e,this._firestore),i=(n=yo("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",t);return this._transaction.set(r._key,i),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof t||t instanceof Pi?(O("Transaction.update",arguments,3),r=wo("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(P("Transaction.update",arguments,2),r=wo("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},e.prototype.delete=function(e){P("Transaction.delete",arguments,1);var t=wo("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),co=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){D("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=wo("WriteBatch.set",e,this._firestore),i=(n=yo("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",t);return this._mutations=this._mutations.concat(i.toMutations(r._key,st.NONE)),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),"string"==typeof t||t instanceof Pi?(O("WriteBatch.update",arguments,3),r=wo("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(P("WriteBatch.update",arguments,2),r=wo("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,st.exists(!0))),this},e.prototype.delete=function(e){P("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=wo("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new dt(t._key,st.NONE)),this},e.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new w("failed-precondition","A write batch can no longer be used after commit() has been called.")},e}(),lo=function(){function e(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n){if(t.length%2!=0)throw new w("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(new ue(t),n)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new vo(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(P("DocumentReference.collection",arguments,1),R("DocumentReference.collection","non-empty string",1,e),!e)throw new w("invalid-argument","Must provide a non-empty collection name to collection()");var t=oe.fromString(e);return new vo(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw W("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)},e.prototype.set=function(e,t){D("DocumentReference.set",arguments,1,2);var n=(t=yo("DocumentReference.set",t)).merge||t.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",e,t.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",e);return this._firestoreClient.write(n.toMutations(this._key,st.NONE))},e.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof e||e instanceof Pi?(O("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(P("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,st.exists(!0)))},e.prototype.delete=function(){return P("DocumentReference.delete",arguments,0),this._firestoreClient.write([new dt(this._key,st.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];D("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||Li(e[i])||(B("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),F("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return Li(e[i])?n=e[i]:(R("DocumentReference.onSnapshot","function",i,e[i]),N("DocumentReference.onSnapshot","function",i+1,e[i+1]),N("DocumentReference.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Ii({next:function(e){if(t.next){y(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new fo(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(qe.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},e.prototype.get=function(e){var t=this;return D("DocumentReference.get",arguments,0,1),_o("DocumentReference.get",e),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then((function(e){n(new fo(t.firestore,t._key,e,!0,e instanceof le&&e.hasLocalMutations))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new w("unavailable","Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new w("unavailable",'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},e}(),ho=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),fo=function(){function e(e,t,n,r,i){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return e.prototype.data=function(e){return D("DocumentSnapshot.data",arguments,0,1),e=bo("DocumentSnapshot.data",e),this._document?this.convertObject(this._document.data,be.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},e.prototype.get=function(e,t){if(D("DocumentSnapshot.get",arguments,1,2),t=bo("DocumentSnapshot.get",t),this._document){var n=this._document.data.field(to("DocumentSnapshot.get",e));if(void 0!==n)return this.convertValue(n,be.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new lo(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new ho(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw W("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))},e.prototype.convertObject=function(e,t){var n=this,r={};return e.forEach((function(e,i){r[e]=n.convertValue(i,t)})),r},e.prototype.convertValue=function(e,t){if(e instanceof Re)return this.convertObject(e,t);if(e instanceof Ne)return this.convertArray(e,t);if(e instanceof De){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||g("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new lo(n,this._firestore)}return e.value(t)},e.prototype.convertArray=function(e,t){var n=this;return e.internalValue.map((function(e){return n.convertValue(e,t)}))},e}(),po=function(e){function t(t,n,r,i,o){return e.call(this,t,n,r,i,o)||this}return a.__extends(t,e),t.prototype.data=function(t){var n=e.prototype.data.call(this,t);return y("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},t}(fo),go=function(){function e(e,t){this._query=e,this.firestore=t}return e.prototype.where=function(t,n,r){var i;P("Query.where",arguments,3),R("Query.where","non-empty string",2,n),q("Query.where",3,r);var o=to("Query.where",t),a=We.fromString(n);if(o.isKeyField()){if(a===We.ARRAY_CONTAINS)throw new w("invalid-argument","Invalid Query. You can't perform array-contains queries on FieldPath.documentId() since document IDs are not arrays.");if("string"==typeof r){if(""===r)throw new w("invalid-argument","Function Query.where() requires its third parameter to be a valid document ID if the first parameter is FieldPath.documentId(), but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==r.indexOf("/"))throw new w("invalid-argument","Invalid third parameter to Query.where(). When querying a collection by FieldPath.documentId(), the value provided must be a plain document ID, but '"+r+"' contains a slash.");var s=this._query.path.child(oe.fromString(r));if(!ue.isDocumentKey(s))throw new w("invalid-argument","Invalid third parameter to Query.where(). When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+s+"' is not because it has an odd number of segments ("+s.length+").");i=new De(this.firestore._databaseId,new ue(s))}else{if(!(r instanceof lo))throw new w("invalid-argument","Function Query.where() requires its third parameter to be a string or a DocumentReference if the first parameter is FieldPath.documentId(), but it was: "+j(r)+".");var u=r;i=new De(this.firestore._databaseId,u._key)}}else i=this.firestore._dataConverter.parseQueryValue("Query.where",r);var c=Be.create(o,a,i);return this.validateNewFilter(c),new e(this._query.addFilter(c),this.firestore)},e.prototype.orderBy=function(t,n){var r;if(D("Query.orderBy",arguments,1,2),N("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=Qe.ASCENDING;else{if("desc"!==n)throw new w("invalid-argument","Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Qe.DESCENDING}if(null!==this._query.startAt)throw new w("invalid-argument","Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new w("invalid-argument","Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=to("Query.orderBy",t),o=new Ye(i,r);return this.validateNewOrderBy(o),new e(this._query.addOrderBy(o),this.firestore)},e.prototype.limit=function(t){if(P("Query.limit",arguments,1),R("Query.limit","number",1,t),t<=0)throw new w("invalid-argument","Invalid Query. Query limit ("+t+") is invalid. Limit must be positive.");return new e(this._query.withLimit(t),this.firestore)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];O("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];O("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(i),this.firestore)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];O("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];O("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(i),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw W("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(q(e,1,t),t instanceof fo){if(n.length>0)throw new w("invalid-argument","Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new w("not-found","Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new De(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof Pe)throw new w("invalid-argument",'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(void 0===s){var u=a.field.canonicalString();throw new w("invalid-argument","Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Ke(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new w("invalid-argument","Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new w("invalid-argument","Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new w("invalid-argument","Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(oe.fromString(a));if(!ue.isDocumentKey(s))throw new w("invalid-argument","Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new ue(s);i.push(new De(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);i.push(c)}}return new Ke(i,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];D("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||Li(e[i])||(B("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),F("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),Li(e[i])?n=e[i]:(R("Query.onSnapshot","function",i,e[i]),N("Query.onSnapshot","function",i+1,e[i+1]),N("Query.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Ii({next:function(e){t.next&&t.next(new mo(n.firestore,n._query,e))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},e.prototype.get=function(e){var t=this;return D("Query.get",arguments,0,1),_o("Query.get",e),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then((function(e){n(new mo(t.firestore,t._query,e))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new w("unavailable",'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},e.prototype.validateNewFilter=function(e){if(e instanceof ze)if(e.isInequality()){var t=this._query.getInequalityFilterField();if(null!==t&&!t.isEqual(e.field))throw new w("invalid-argument","Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+t.toString()+"' and '"+e.field.toString()+"'");var n=this._query.getFirstOrderByField();null!==n&&this.validateOrderByAndInequalityMatch(e.field,n)}else if(e.op===We.ARRAY_CONTAINS&&this._query.hasArrayContainsFilter())throw new w("invalid-argument","Invalid query. Queries only support a single array-contains filter.")},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new w("invalid-argument","Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),mo=function(){function e(e,t,n){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new ho(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;D("QuerySnapshot.forEach",arguments,1,2),R("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach((function(r){e.call(t,n.convertToDocumentImpl(r))}))},Object.defineProperty(e.prototype,"query",{get:function(){return new go(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(B("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),F("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new w("invalid-argument","To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map((function(t){var o=new po(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key));return y(t.type===Mt.Added,"Invalid event type for first snapshot"),y(!r||n.query.docComparator(r,t.doc)<0,"Got added events in wrong order"),r=t.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}}))}var o=n.oldDocs;return n.docChanges.filter((function(e){return t||e.type!==Mt.Metadata})).map((function(t){var r=new po(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key)),i=-1,a=-1;return t.type!==Mt.Added&&(y((i=o.indexOf(t.doc.key))>=0,"Index for document not found"),o=o.delete(t.doc.key)),t.type!==Mt.Removed&&(a=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:Co(t.type),doc:r,oldIndex:i,newIndex:a}}))}(this._firestore,t,this._snapshot),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw W("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)},e.prototype.convertToDocumentImpl=function(e){return new po(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key))},e}();["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(e){try{Object.defineProperty(mo.prototype.docChanges,e,{get:function(){return function(){throw new w("invalid-argument",'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}}));var vo=function(e){function t(t,n){var r=e.call(this,qe.atPath(t),n)||this;if(t.length%2!=1)throw new w("invalid-argument","Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return r}return a.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new lo(new ue(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(D("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=G.newId()),R("CollectionReference.doc","non-empty string",1,e),""===e)throw new w("invalid-argument","Document path must be a non-empty string");var t=oe.fromString(e);return lo.forPath(this._query.path.child(t),this.firestore)},t.prototype.add=function(e){P("CollectionReference.add",arguments,1),R("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then((function(){return t}))},t}(go);function yo(e,t){if(void 0===t)return{merge:!1};if(B(e,t,["merge","mergeFields"]),F(e,"boolean","merge",t.merge),void 0!==(n=t.mergeFields)&&function(e,t,n,r,i){if(!(r instanceof Array))throw new w("invalid-argument","Function "+e+"() requires its mergeFields option to be an array, but it was: "+j(r));for(var o=0;o<r.length;++o)if(!("string"==typeof(a=r[o])||a instanceof Pi))throw new w("invalid-argument","Function "+e+"() requires all mergeFields elements to be a string or a FieldPath, but the value at index "+o+" was: "+j(r[o]));var a}(e,0,0,n),void 0!==t.mergeFields&&void 0!==t.merge)throw new w("invalid-argument","Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');var n;return t}function bo(e,t){return void 0===t?{}:(B(e,t,["serverTimestamps"]),L(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function _o(e,t){N(e,"object",1,t),t&&(B(e,t,["source"]),L(e,0,"source",t.source,["default","server","cache"]))}function wo(e,t,n){if(t instanceof lo){if(t.firestore!==n)throw new w("invalid-argument","Provided document reference is from a different Firestore instance.");return t}throw W(e,"DocumentReference",1,t)}function Co(e){switch(e){case Mt.Added:return"added";case Mt.Modified:case Mt.Metadata:return"modified";case Mt.Removed:return"removed";default:return v("Unknown change type: "+e)}}var ko=C(so,"Use firebase.firestore() instead."),So=C(uo,"Use firebase.firestore().runTransaction() instead."),Eo=C(co,"Use firebase.firestore().batch() instead."),To=C(lo,"Use firebase.firestore().doc() instead."),xo=C(fo),Io=C(po),Po=C(go),Oo=C(mo),Do=C(vo,"Use firebase.firestore().collection() instead."),Ao={Firestore:ko,GeoPoint:ee,Timestamp:te,Blob:$,Transaction:So,WriteBatch:Eo,DocumentReference:To,DocumentSnapshot:xo,Query:Po,QueryDocumentSnapshot:Io,QuerySnapshot:Oo,CollectionReference:Do,FieldPath:Pi,FieldValue:zi,setLogLevel:so.setLogLevel,CACHE_SIZE_UNLIMITED:io};function Ro(e){!function(e){e.INTERNAL.registerService("firestore",(function(e){return new so(e)}),function(e){y(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(Ao))}(e)}Ro(i),t.registerFirestore=Ro},"6d8W":function(e,t,n){"use strict";var r=n("I1rR"),i=n("mY8+")(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n("dNFx")(o)},"74FJ":function(e,t,n){"use strict";var r=n("9Aud"),i=n("lv+R"),o=n("UOZm"),a=n("j/6h"),s=n("H1Af"),u=Object.assign;e.exports=!u||n("61rj")((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r}))?function(e,t){for(var n=a(e),u=arguments.length,c=1,l=i.f,h=o.f;u>c;)for(var d,f=s(arguments[c++]),p=l?r(f).concat(l(f)):r(f),g=p.length,m=0;g>m;)h.call(f,d=p[m++])&&(n[d]=f[d]);return n}:u},"8L4g":function(e,t){e.exports=!1},"8i1V":function(e,t,n){"use strict";var r=n("qtiw"),i=n("g0Mr"),o=n("lIov"),a=n("I1rR"),s=n("TDVo"),u=n("Oyqw").KEY,c=n("61rj"),l=n("ezrC"),h=n("A+3H"),d=n("U/+K"),f=n("jZgK"),p=n("eKN1"),g=n("u00B"),m=n("GShy"),v=n("oxOc"),y=n("UFGs"),b=n("Zp05"),_=n("rSCU"),w=n("IiNp"),C=n("xGvh"),k=n("xrBK"),S=n("4ftG"),E=n("bKVB"),T=n("ytDL"),x=n("9Aud"),I=E.f,P=T.f,O=S.f,D=r.Symbol,A=r.JSON,R=A&&A.stringify,N=f("_hidden"),M=f("toPrimitive"),F={}.propertyIsEnumerable,L=l("symbol-registry"),V=l("symbols"),U=l("op-symbols"),j=Object.prototype,q="function"==typeof D,B=r.QObject,W=!B||!B.prototype||!B.prototype.findChild,z=o&&c((function(){return 7!=k(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=I(j,t);r&&delete j[t],P(e,t,n),r&&e!==j&&P(j,t,r)}:P,H=function(e){var t=V[e]=k(D.prototype);return t._k=e,t},G=q&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},Q=function e(t,n,r){return t===j&&e(U,n,r),y(t),n=w(n,!0),y(r),i(V,n)?(r.enumerable?(i(t,N)&&t[N][n]&&(t[N][n]=!1),r=k(r,{enumerable:C(0,!1)})):(i(t,N)||P(t,N,C(1,{})),t[N][n]=!0),z(t,n,r)):P(t,n,r)},K=function(e,t){y(e);for(var n,r=m(t=_(t)),i=0,o=r.length;o>i;)Q(e,n=r[i++],t[n]);return e},Y=function(e){var t=F.call(this,e=w(e,!0));return!(this===j&&i(V,e)&&!i(U,e))&&(!(t||!i(this,e)||!i(V,e)||i(this,N)&&this[N][e])||t)},X=function(e,t){if(e=_(e),t=w(t,!0),e!==j||!i(V,t)||i(U,t)){var n=I(e,t);return!n||!i(V,t)||i(e,N)&&e[N][t]||(n.enumerable=!0),n}},J=function(e){for(var t,n=O(_(e)),r=[],o=0;n.length>o;)i(V,t=n[o++])||t==N||t==u||r.push(t);return r},Z=function(e){for(var t,n=e===j,r=O(n?U:_(e)),o=[],a=0;r.length>a;)!i(V,t=r[a++])||n&&!i(j,t)||o.push(V[t]);return o};q||(s((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function t(n){this===j&&t.call(U,n),i(this,N)&&i(this[N],e)&&(this[N][e]=!1),z(this,e,C(1,n))};return o&&W&&z(j,e,{configurable:!0,set:t}),H(e)}).prototype,"toString",(function(){return this._k})),E.f=X,T.f=Q,n("GMxU").f=S.f=J,n("UOZm").f=Y,n("lv+R").f=Z,o&&!n("8L4g")&&s(j,"propertyIsEnumerable",Y,!0),p.f=function(e){return H(f(e))}),a(a.G+a.W+a.F*!q,{Symbol:D});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;$.length>ee;)f($[ee++]);for(var te=x(f.store),ne=0;te.length>ne;)g(te[ne++]);a(a.S+a.F*!q,"Symbol",{for:function(e){return i(L,e+="")?L[e]:L[e]=D(e)},keyFor:function(e){if(!G(e))throw TypeError(e+" is not a symbol!");for(var t in L)if(L[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!q,"Object",{create:function(e,t){return void 0===t?k(e):K(k(e),t)},defineProperty:Q,defineProperties:K,getOwnPropertyDescriptor:X,getOwnPropertyNames:J,getOwnPropertySymbols:Z}),A&&a(a.S+a.F*(!q||c((function(){var e=D();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!G(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!G(t))return t}),r[1]=t,R.apply(A,r)}}),D.prototype[M]||n("GYIZ")(D.prototype,M,D.prototype.valueOf),h(D,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},"8ouO":function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},"9Aud":function(e,t,n){var r=n("Iy4/"),i=n("kSm0");e.exports=Object.keys||function(e){return r(e,i)}},"A+3H":function(e,t,n){var r=n("ytDL").f,i=n("g0Mr"),o=n("jZgK")("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},ABqa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("t7fG"),a={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},s=function(e){function t(n,r,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=i,o}return o.__extends(t,e),t}(Error),u=function(){function e(e){this.app=e}return e.prototype.getAuthToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.app.INTERNAL.getToken()];case 1:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 2:return t.sent(),[2,void 0];case 3:return[2]}}))}))},e.prototype.getInstanceIdToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.app.messaging?[4,this.app.messaging().getToken()]:[2,void 0];case 1:return(e=t.sent())?[2,e]:[2,void 0];case 2:return t.sent(),[2,void 0];case 3:return[2]}}))}))},e.prototype.getContext=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,t;return o.__generator(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}}))}))},e}();function c(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var l=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e))return e.map((function(e){return t.encode(e)}));if("function"==typeof e||"object"==typeof e)return c(e,(function(e){return t.encode(e)}));throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null===e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=parseFloat(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((function(e){return t.decode(e)})):"function"==typeof e||"object"==typeof e?c(e,(function(e){return t.decode(e)})):e},e}(),h=function(){function e(e,t){void 0===t&&(t="us-central1"),this.app_=e,this.region_=t,this.serializer=new l,this.emulatorOrigin=null,this.contextProvider=new u(e)}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId,n=this.region_;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+t+"/"+n+"/"+e:"https://"+n+"-"+t+".cloudfunctions.net/"+e},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},e.prototype.postJSON=function(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i;return o.__generator(this,(function(o){switch(o.label){case 0:n.append("Content-Type","application/json"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},e.prototype.call=function(e,t,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i,u,c,l,h,d,f;return o.__generator(this,(function(o){switch(o.label){case 0:return r=this._url(e),t=this.serializer.encode(t),i={data:t},u=new Headers,[4,this.contextProvider.getContext()];case 1:return(c=o.sent()).authToken&&u.append("Authorization","Bearer "+c.authToken),c.instanceIdToken&&u.append("Firebase-Instance-ID-Token",c.instanceIdToken),l=n.timeout||7e4,[4,Promise.race([this.postJSON(r,i,u),(p=l,new Promise((function(e,t){setTimeout((function(){t(new s("deadline-exceeded","deadline-exceeded"))}),p)})))])];case 2:if(h=o.sent(),d=function(e,t,n){var r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r,o=void 0;try{var u=t.error;if(u){var c=u.status;if("string"==typeof c){if(!a[c])return new s("internal","internal");r=a[c]}i=c;var l=u.message;"string"==typeof l&&(i=l),void 0!==(o=u.details)&&(o=n.decode(o))}}catch(h){}return"ok"===r?null:new s(r,i,o)}(h.status,h.json,this.serializer))throw d;if(!h.json)throw new s("internal","Response is not valid JSON object.");if(void 0===(f=h.json.data)&&(f=h.json.result),void 0===f)throw new s("internal","Response is missing data field.");return[2,{data:this.serializer.decode(f)}]}var p}))}))},e}();function d(e,t,n){return new h(e,n)}function f(e){e.INTERNAL.registerService("functions",d,{Functions:h},void 0,!0)}f(i),t.registerFunctions=f},AR9Z:function(e,t,n){n("8i1V"),n("CNRE"),n("yLjp"),n("ZhmJ"),e.exports=n("Autd").Symbol},Autd:function(e,t){var n=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},CNRE:function(e,t,n){"use strict";var r=n("QEVv"),i={};i[n("jZgK")("toStringTag")]="z",i+""!="[object z]"&&n("TDVo")(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},FTyF:function(e,t,n){var r=n("I1rR");r(r.S+r.F,"Object",{assign:n("74FJ")})},GMxU:function(e,t,n){var r=n("Iy4/"),i=n("kSm0").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},GShy:function(e,t,n){var r=n("9Aud"),i=n("lv+R"),o=n("UOZm");e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},GYIZ:function(e,t,n){var r=n("ytDL"),i=n("xGvh");e.exports=n("lIov")?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},H1Af:function(e,t,n){var r=n("gYfK");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},I1rR:function(e,t,n){var r=n("qtiw"),i=n("Autd"),o=n("GYIZ"),a=n("TDVo"),s=n("6CFf"),u=function e(t,n,u){var c,l,h,d,f=t&e.F,p=t&e.G,g=t&e.P,m=t&e.B,v=p?r:t&e.S?r[n]||(r[n]={}):(r[n]||{}).prototype,y=p?i:i[n]||(i[n]={}),b=y.prototype||(y.prototype={});for(c in p&&(u=n),u)h=((l=!f&&v&&void 0!==v[c])?v:u)[c],d=m&&l?s(h,r):g&&"function"==typeof h?s(Function.call,h):h,v&&a(v,c,h,t&e.U),y[c]!=h&&o(y,c,d),g&&b[c]!=h&&(b[c]=h)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},IiNp:function(e,t,n){var r=n("Zp05");e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},"Iy4/":function(e,t,n){var r=n("g0Mr"),i=n("rSCU"),o=n("b/Kf")(!1),a=n("ifzb")("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},JiIP:function(e,t,n){"use strict";var r=n("xrBK"),i=n("xGvh"),o=n("A+3H"),a={};n("GYIZ")(a,n("jZgK")("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},JilW:function(e,t,n){n("KxBS"),e.exports=n("Autd").String.repeat},KBN1:function(e,t,n){"use strict";var r=n("I1rR"),i=n("c0bx"),o=n("flRy"),a="".startsWith;r(r.P+r.F*n("tLdg")("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},KxBS:function(e,t,n){var r=n("I1rR");r(r.P,"String",{repeat:n("gRXz")})},L97z:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},LmZi:function(e,t,n){"use strict";n.r(t),n.d(t,"registerStorage",(function(){return Le}));var r=n("wj3C"),i=n.n(r),o=function(){function e(e,t){this.code_=a(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}return e.prototype.codeProp=function(){return this.code},e.prototype.codeEquals=function(e){return a(e)===this.codeProp()},e.prototype.serverResponseProp=function(){return this.serverResponse_},e.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(e.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),e}();function a(e){return"storage/"+e}function s(){return new o("unknown","An unknown error occurred, please check the error payload for server response.")}function u(){return new o("canceled","User canceled the upload/download.")}function c(){return new o("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function l(){return new o("no-download-url","The given file does not have any download URLs.")}function h(e,t,n){return new o("invalid-argument","Invalid argument in `"+t+"` at index "+e+": "+n)}function d(){return new o("app-deleted","The Firebase app was deleted.")}function f(e,t){return new o("invalid-format","String does not match format '"+e+"': "+t)}function p(e){throw new o("internal-error","Internal error: "+e)}var g={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function m(e){switch(e){case g.RAW:case g.BASE64:case g.BASE64URL:case g.DATA_URL:return;default:throw"Expected one of the event types: ["+g.RAW+", "+g.BASE64+", "+g.BASE64URL+", "+g.DATA_URL+"]."}}var v=function(e,t){this.data=e,this.contentType=t||null};function y(e,t){switch(e){case g.RAW:return new v(b(t));case g.BASE64:case g.BASE64URL:return new v(_(e,t));case g.DATA_URL:return new v(function(e){var t=new w(e);return t.base64?_(g.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw f(g.DATA_URL,"Malformed data URL.")}return b(t)}(t.rest)}(t),function(e){return new w(e).contentType}(t))}throw s()}function b(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1))){var i=r,o=e.charCodeAt(++n);t.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189);else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function _(e,t){switch(e){case g.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw f(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case g.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw f(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(c){throw f(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var w=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw f(g.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=t[1]||null;null!=r&&(this.base64=(n=r).length>=";base64".length&&";base64"===n.substring(n.length-";base64".length),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)},C={STATE_CHANGED:"state_changed"},k={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function S(e){switch(e){case"running":case"pausing":case"canceling":return k.RUNNING;case"paused":return k.PAUSED;case"success":return k.SUCCESS;case"canceled":return k.CANCELED;case"error":default:return k.ERROR}}function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function T(e,t){for(var n in e)E(e,n)&&t(n,e[n])}function x(e){if(null==e)return{};var t={};return T(e,(function(e,n){t[e]=n})),t}function I(e){return new Promise(e)}function P(e){return Promise.resolve(e)}function O(e){return null!=e}function D(e){return void 0!==e}function A(e){return"function"==typeof e}function R(e){return"object"==typeof e}function N(e){return R(e)&&null!==e}function M(e){return"string"==typeof e||e instanceof String}function F(e){return L()&&e instanceof Blob}function L(){return"undefined"!=typeof Blob}var V=function(e){return e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT",e}({}),U=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=V.NO_ERROR,this.sendPromise_=I((function(t,n){e.xhr_.addEventListener("abort",(function(n){e.errorCode_=V.ABORT,t(e)})),e.xhr_.addEventListener("error",(function(n){e.errorCode_=V.NETWORK_ERROR,t(e)})),e.xhr_.addEventListener("load",(function(n){t(e)}))}))}return e.prototype.send=function(e,t,n,r){var i=this;if(this.sent_)throw p("cannot .send() more than once");return this.sent_=!0,this.xhr_.open(t,e,!0),O(r)&&T(r,(function(e,t){i.xhr_.setRequestHeader(e,t.toString())})),O(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw p("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw p("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw p("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){O(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){O(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},e}(),j=function(){function e(){}return e.prototype.createXhrIo=function(){return new U},e}();function q(e){var t,n;try{t=JSON.parse(e)}catch(r){return null}return R(n=t)&&!Array.isArray(n)?t:null}var B=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var n;try{n=e.makeFromUrl(t)}catch(r){return new e(t,"")}if(""===n.path)return n;throw new o("invalid-default-bucket","Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t){for(var n=null,r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i"),i="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+i+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(e){e.path_=decodeURIComponent(e.path)}}],s=0;s<a.length;s++){var u=a[s],c=u.regex.exec(t);if(c){var l=c[u.indices.path];l||(l=""),n=new e(c[u.indices.bucket],l),u.postModify(n);break}}if(null==n)throw function(e){return new o("invalid-url","Invalid URL '"+e+"'.")}(t);return n},e}();function W(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}function z(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function H(e){return"https://firebasestorage.googleapis.com/v0"+e}function G(e){var t=encodeURIComponent,n="?";return T(e,(function(e,r){var i=t(e)+"="+t(r);n=n+i+"&"})),n=n.slice(0,-1)}function Q(e,t){return t}var K=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Q},Y=null;function X(e,t,n){var r=q(t);return null===r?null:function(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=new B(e.bucket,e.fullPath);return t.makeStorageReference(n)}})}(r,e),r}(e,r,n)}function J(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}function Z(e){if(!e||!R(e))throw"Expected Metadata object.";for(var t in e){var n=e[t];if("customMetadata"===t){if(!R(n))throw"Expected object for 'customMetadata' mapping."}else if(N(n))throw"Mapping for '"+t+"' cannot be an object."}}function $(e,t,n){for(var r=t.length,i=t.length,a=0;a<t.length;a++)if(t[a].optional){r=a;break}var s,u,c,l;if(!(r<=n.length&&n.length<=i))throw(s=r)===(u=i)?(c=s,l=1===s?"argument":"arguments"):(c="between "+s+" and "+u,l="arguments"),new o("invalid-argument-count","Invalid argument count in `"+e+"`: Expected "+c+" "+l+", received "+n.length+".");for(a=0;a<n.length;a++)try{t[a].validator(n[a])}catch(d){throw d instanceof Error?h(a,e,d.message):h(a,e,d)}}var ee=function(e,t){var n=this;this.validator=function(t){n.optional&&!D(t)||e(t)},this.optional=!!t};function te(e,t){function n(e){if(!M(e))throw"Expected string."}var r,i,o;return e?(i=n,o=e,r=function(e){i(e),o(e)}):r=n,new ee(r,t)}function ne(){return new ee((function(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||L()&&e instanceof Blob))throw"Expected Blob or File."}))}function re(e){return new ee(Z,e)}function ie(){return new ee((function(e){if(!(function(e){return"number"==typeof e||e instanceof Number}(e)&&e>=0))throw"Expected a number 0 or greater."}))}function oe(e,t){return new ee((function(t){if(!(null===t||O(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)}),t)}function ae(e){return new ee((function(e){if(null!==e&&!A(e))throw"Expected a Function."}),e)}function se(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ue(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=se();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(L())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}var ce=function(){function e(e,t){var n=0,r="";F(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(F(this.data_)){var r=(o=t,a=n,(i=this.data_).webkitSlice?i.webkitSlice(o,a):i.mozSlice?i.mozSlice(o,a):i.slice?i.slice(o,a):null);return null===r?null:new e(r)}var i,o,a;return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(L()){var r=t.map((function(t){return t instanceof e?t.data_:t}));return new e(ue.apply(null,r))}var i=t.map((function(e){return M(e)?y(g.RAW,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]})),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();function le(e,t){return-1!==e.indexOf(t)}var he=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function de(e){if(!e)throw s()}function fe(e,t){return function(n,r){var i=X(e,r,t);return de(null!==i),i}}function pe(e){return function(t,n){var r;return(r=401===t.getStatus()?new o("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?new o("quota-exceeded","Quota for bucket '"+e.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===t.getStatus()?new o("unauthorized","User does not have permission to access '"+e.path+"'."):n).setServerResponseProp(n.serverResponseProp()),r}}function ge(e){var t=pe(e);return function(n,r){var i=t(n,r);return 404===n.getStatus()&&(i=new o("object-not-found","Object '"+e.path+"' does not exist.")),i.setServerResponseProp(r.serverResponseProp()),i}}function me(e,t,n){var r=H(t.fullServerUrl()),i=e.maxOperationRetryTime(),o=new he(r,"GET",fe(e,n),i);return o.errorHandler=ge(t),o}function ve(e,t,n){var r=H(t.fullServerUrl()),i=e.maxOperationRetryTime(),o=new he(r,"GET",function(e,t){return function(n,r){var i=X(e,r,t);return de(null!==i),function(e,t){var n=q(t);if(null===n)return null;if(!M(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(t){var n=e.fullPath;return H("/b/"+i(e.bucket)+"/o/"+i(n))+G({alt:"media",token:t})}))[0]}(i,r)}}(e,n),i);return o.errorHandler=ge(t),o}function ye(e,t,n,r){var i=H(t.fullServerUrl()),o=J(n,r),a=e.maxOperationRetryTime(),s=new he(i,"PATCH",fe(e,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=ge(t),s}function be(e,t){var n=H(t.fullServerUrl()),r=e.maxOperationRetryTime(),i=new he(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=ge(t),i}function _e(e,t,n){var r=x(n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}var we=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function Ce(e,t){var n;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){de(!1)}return de(le(t||["active"],n)),n}var ke=function(e,t,n){if(A(e)||O(t)||O(n))this.next=e,this.error=t||null,this.complete=n||null;else{var r=e;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},Se=function(e,t,n,r,i,o){this.bytesTransferred=e,this.totalBytes=t,this.state=n,this.metadata=r,this.task=i,this.ref=o};function Ee(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];P(!0).then((function(){e.apply(null,t)}))}}var Te=function(){function e(e,t,n,r,i,o){void 0===o&&(o=null);var a=this;this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=t,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_="running",this.errorHandler_=function(e){a.request_=null,a.chunkMultiplier_=1,e.codeEquals("canceled")?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=e,a.transition_("error"))},this.metadataErrorHandler_=function(e){a.request_=null,e.codeEquals("canceled")?a.completeTransitions_():(a.error_=e,a.transition_("error"))},this.promise_=I((function(e,t){a.resolve_=e,a.reject_=t,a.start_()})),this.promise_.then(null,(function(){}))}return e.prototype.makeProgressCallback_=function(){var e=this,t=this.transferred_;return function(n,r){e.updateProgress_(t+n)}},e.prototype.shouldDoResumable_=function(e){return e.size()>262144},e.prototype.start_=function(){"running"===this.state_&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},e.prototype.resolveToken_=function(e){var t=this;this.authWrapper_.getAuthToken().then((function(n){switch(t.state_){case"running":e(n);break;case"canceling":t.transition_("canceled");break;case"pausing":t.transition_("paused")}}))},e.prototype.createResumable_=function(){var e=this;this.resolveToken_((function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=_e(t,r,i),s={name:a.fullPath},u=H(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=J(a,n),h=e.maxUploadRetryTime(),d=new he(u,"POST",(function(e,t){var n;Ce(e);try{n=e.getResponseHeader("X-Goog-Upload-URL")}catch(r){de(!1)}return de(M(n)),n}),h);return d.urlParams=s,d.headers=c,d.body=l,d.errorHandler=pe(t),d}(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then((function(t){e.request_=null,e.uploadUrl_=t,e.needToFetchStatus_=!1,e.completeTransitions_()}),e.errorHandler_)}))},e.prototype.fetchStatus_=function(){var e=this,t=this.uploadUrl_;this.resolveToken_((function(n){var r=function(e,t,n,r){var i=e.maxUploadRetryTime(),o=new he(n,"POST",(function(e,t){var n,i=Ce(e,["active","final"]);try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){de(!1)}var o=parseInt(n,10);return de(!isNaN(o)),new we(o,r.size(),"final"===i)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=pe(t),o}(e.authWrapper_,e.location_,t,e.blob_),i=e.authWrapper_.makeRequest(r,n);e.request_=i,i.getPromise().then((function(t){t=t,e.request_=null,e.updateProgress_(t.current),e.needToFetchStatus_=!1,t.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()}),e.errorHandler_)}))},e.prototype.continueUpload_=function(){var e=this,t=262144*this.chunkMultiplier_,n=new we(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(i){var a;try{a=function(e,t,n,r,i,a,s,u){var l=new we(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new o("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var h=l.total-l.current,d=h;i>0&&(d=Math.min(d,i));var f=l.current,p={"X-Goog-Upload-Command":d===h?"upload, finalize":"upload","X-Goog-Upload-Offset":l.current},g=r.slice(f,f+d);if(null===g)throw c();var m=t.maxUploadRetryTime(),v=new he(n,"POST",(function(e,n){var i,o=Ce(e,["active","final"]),s=l.current+d,u=r.size();return i="final"===o?fe(t,a)(e,n):null,new we(s,u,"final"===o,i)}),m);return v.headers=p,v.body=g.uploadData(),v.progressCallback=u||null,v.errorHandler=pe(e),v}(e.location_,e.authWrapper_,r,e.blob_,t,e.mappings_,n,e.makeProgressCallback_())}catch(u){return e.error_=u,void e.transition_("error")}var s=e.authWrapper_.makeRequest(a,i);e.request_=s,s.getPromise().then((function(t){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(t.current),t.finalized?(e.metadata_=t.metadata,e.transition_("success")):e.completeTransitions_()}),e.errorHandler_)}))},e.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},e.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_((function(t){var n=me(e.authWrapper_,e.location_,e.mappings_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then((function(t){e.request_=null,e.metadata_=t,e.transition_("success")}),e.metadataErrorHandler_)}))},e.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_((function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=_e(t,r,i),l=J(u,n),h=ce.getBlob("--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+s+"--");if(null===h)throw c();var d={name:u.fullPath},f=H(o),p=e.maxUploadRetryTime(),g=new he(f,"POST",fe(e,n),p);return g.urlParams=d,g.headers=a,g.body=h.uploadData(),g.errorHandler=pe(t),g}(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),r=e.authWrapper_.makeRequest(n,t);e.request_=r,r.getPromise().then((function(t){e.request_=null,e.metadata_=t,e.updateProgress_(e.blob_.size()),e.transition_("success")}),e.errorHandler_)}))},e.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},e.prototype.transition_=function(e){if(this.state_!==e)switch(e){case"canceling":case"pausing":this.state_=e,null!==this.request_&&this.request_.cancel();break;case"running":var t="paused"===this.state_;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case"paused":this.state_=e,this.notifyObservers_();break;case"canceled":this.error_=u(),this.state_=e,this.notifyObservers_();break;case"error":case"success":this.state_=e,this.notifyObservers_()}},e.prototype.completeTransitions_=function(){switch(this.state_){case"pausing":this.transition_("paused");break;case"canceling":this.transition_("canceled");break;case"running":this.start_()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=S(this.state_);return new Se(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),e.prototype.on=function(e,t,n,r){function i(t){if(e!==C.STATE_CHANGED)throw"Expected one of the event types: ["+C.STATE_CHANGED+"]."}void 0===t&&(t=void 0),void 0===n&&(n=void 0),void 0===r&&(r=void 0);var o="Expected a function or an Object with one of `next`, `error`, `complete` properties.",a=ae(!0).validator,s=oe(null,!0).validator;function u(e){try{return void a(e)}catch(t){}try{if(s(e),!(D(e.next)||D(e.error)||D(e.complete)))throw"";return}catch(t){throw o}}var c=[te(i),oe(u,!0),ae(!0),ae(!0)];$("on",c,arguments);var l=this;function h(e){return function(t,n,i){null!==e&&$("on",e,arguments);var o=new ke(t,n,r);return l.addObserver_(o),function(){l.removeObserver_(o)}}}function d(e){if(null===e)throw o;u(e)}var f=[oe(d),ae(!0),ae(!0)],p=!(D(t)||D(n)||D(r));return p?h(f):h(null)(t,n,r)},e.prototype.then=function(e,t){return this.promise_.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},e.prototype.removeObserver_=function(e){var t,n;-1!==(n=(t=this.observers_).indexOf(e))&&t.splice(n,1)},e.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),Array.prototype.slice.call(this.observers_).forEach((function(t){e.notifyObserver_(t)}))},e.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(S(this.state_)){case k.SUCCESS:Ee(this.resolve_.bind(null,this.snapshot))();break;case k.CANCELED:case k.ERROR:Ee(this.reject_.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},e.prototype.notifyObserver_=function(e){switch(S(this.state_)){case k.RUNNING:case k.PAUSED:null!==e.next&&Ee(e.next.bind(e,this.snapshot))();break;case k.SUCCESS:null!==e.complete&&Ee(e.complete.bind(e))();break;case k.CANCELED:case k.ERROR:null!==e.error&&Ee(e.error.bind(e,this.error_))();break;default:null!==e.error&&Ee(e.error.bind(e,this.error_))()}},e.prototype.resume=function(){$("resume",[],arguments);var e="paused"===this.state_||"pausing"===this.state_;return e&&this.transition_("running"),e},e.prototype.pause=function(){$("pause",[],arguments);var e="running"===this.state_;return e&&this.transition_("pausing"),e},e.prototype.cancel=function(){$("cancel",[],arguments);var e="running"===this.state_||"pausing"===this.state_;return e&&this.transition_("canceling"),e},e}(),xe=function(){function e(e,t){this.authWrapper=e,this.location=t instanceof B?t:B.makeFromUrl(t)}return e.prototype.toString=function(){return $("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},e.prototype.newRef=function(t,n){return new e(t,n)},e.prototype.mappings=function(){return function(){if(Y)return Y;var e=[];e.push(new K("bucket")),e.push(new K("generation")),e.push(new K("metageneration")),e.push(new K("name","fullPath",!0));var t=new K("name");t.xform=function(e,t){return function(e){return!M(e)||e.length<2?e:z(e=e)}(t)},e.push(t);var n=new K("size");return n.xform=function(e,t){return O(t)?+t:t},e.push(n),e.push(new K("timeCreated")),e.push(new K("updated")),e.push(new K("md5Hash",null,!0)),e.push(new K("cacheControl",null,!0)),e.push(new K("contentDisposition",null,!0)),e.push(new K("contentEncoding",null,!0)),e.push(new K("contentLanguage",null,!0)),e.push(new K("contentType",null,!0)),e.push(new K("metadata","customMetadata",!0)),Y=e}()},e.prototype.child=function(e){$("child",[te()],arguments);var t=W(this.location.path,e),n=new B(this.location.bucket,t);return this.newRef(this.authWrapper,n)},Object.defineProperty(e.prototype,"parent",{get:function(){var e=function(e){if(0==e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this.location.path);if(null===e)return null;var t=new B(this.location.bucket,e);return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var e=new B(this.location.bucket,"");return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return z(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),e.prototype.put=function(e,t){return void 0===t&&(t=null),$("put",[ne(),re(!0)],arguments),this.throwIfRoot_("put"),new Te(this,this.authWrapper,this.location,this.mappings(),new ce(e),t)},e.prototype.putString=function(e,t,n){void 0===t&&(t=g.RAW),$("putString",[te(),te(m,!0),re(!0)],arguments),this.throwIfRoot_("putString");var r=y(t,e),i=x(n);return!O(i.contentType)&&O(r.contentType)&&(i.contentType=r.contentType),new Te(this,this.authWrapper,this.location,this.mappings(),new ce(r.data,!0),i)},e.prototype.delete=function(){$("delete",[],arguments),this.throwIfRoot_("delete");var e=this;return this.authWrapper.getAuthToken().then((function(t){var n=be(e.authWrapper,e.location);return e.authWrapper.makeRequest(n,t).getPromise()}))},e.prototype.getMetadata=function(){$("getMetadata",[],arguments),this.throwIfRoot_("getMetadata");var e=this;return this.authWrapper.getAuthToken().then((function(t){var n=me(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise()}))},e.prototype.updateMetadata=function(e){$("updateMetadata",[re()],arguments),this.throwIfRoot_("updateMetadata");var t=this;return this.authWrapper.getAuthToken().then((function(n){var r=ye(t.authWrapper,t.location,e,t.mappings());return t.authWrapper.makeRequest(r,n).getPromise()}))},e.prototype.getDownloadURL=function(){$("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL");var e=this;return this.authWrapper.getAuthToken().then((function(t){var n=ve(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(n,t).getPromise().then((function(e){if(null===e)throw l();return e}))}))},e.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw function(e){return new o("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)},e}(),Ie=function(){function e(e){this.promise_=function(e){return Promise.reject(e)}(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){void 0===e&&(e=!1)},e}(),Pe=function(){function e(){this.map_={},this.id_=-9007199254740991}return e.prototype.addRequest=function(e){var t=this.id_;this.id_++,this.map_[t]=e;var n=this;function r(){delete n.map_[t]}e.getPromise().then(r,r)},e.prototype.clear=function(){T(this.map_,(function(e,t){t&&t.cancel(!0)})),this.map_={}},e}(),Oe=function(){function e(t,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var a=this.app_.options;O(a)&&(this.bucket_=e.extractBucket_(a))}this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e4,this.requestMap_=new Pe}return e.extractBucket_=function(e){var t=e.storageBucket||null;return null==t?null:B.makeFromBucketSpec(t).bucket},e.prototype.getAuthToken=function(){return null!==this.app_&&O(this.app_.INTERNAL)&&O(this.app_.INTERNAL.getToken)?this.app_.INTERNAL.getToken().then((function(e){return null!==e?e.accessToken:null}),(function(e){return null})):P(null)},e.prototype.bucket=function(){if(this.deleted_)throw d();return this.bucket_},e.prototype.service=function(){return this.service_},e.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},e.prototype.makeRequest=function(e,t){if(this.deleted_)return new Ie(d());var n=this.requestMaker_(e,t,this.pool_);return this.requestMap_.addRequest(n),n},e.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},e.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},e.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},e.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},e.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},e}(),De=function(){function e(e,t,n,r,i,o,a,s,u,c,l){this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l;var h=this;this.promise_=I((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){var r,i=e.resolve_,a=e.reject_,c=n.xhr;if(n.wasSuccessCode)try{var l=e.callback_(c,c.getResponseText());D(l)?i(l):i()}catch(h){a(h)}else null!==c?((r=s()).setServerResponseProp(c.getResponseText()),a(e.errorCallback_?e.errorCallback_(c,r):r)):a(r=n.canceled?e.appDelete_?d():u():new o("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new Ae(!1,null,!0)):this.backoffId_=function(t,n,r){var i=1,o=null,a=!1,s=0;function u(){return 2===s}var c=!1;function l(){c||(c=!0,n.apply(null,arguments))}function h(t){o=setTimeout((function(){o=null,function(t,n){if(n)t(!1,new Ae(!1,null,!0));else{var r=e.pool_.createXhrIo();e.pendingXhr_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(n){null!==e.progressCallback_&&n.removeUploadProgressListener(i),e.pendingXhr_=null;var r=(n=n).getErrorCode()===V.NO_ERROR,o=n.getStatus();if(r&&!e.isRetryStatusCode_(o)){var a=le(e.successCodes_,o);t(!0,new Ae(a,n))}else{var s=n.getErrorCode()===V.ABORT;t(!1,new Ae(!1,null,s))}}))}function i(t){null!==e.progressCallback_&&e.progressCallback_(t.loaded,t.lengthComputable?t.total:-1)}}(d,u())}),t)}function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!c)if(e)l.apply(null,arguments);else{var r,o=u()||a;o?l.apply(null,arguments):(i<64&&(i*=2),1===s?(s=2,r=0):r=1e3*(i+Math.random()),h(r))}}var f=!1;function p(e){f||(f=!0,c||(null!==o?(e||(s=2),clearTimeout(o),h(0)):e||(s=1)))}return h(0),setTimeout((function(){a=!0,p(!0)}),r),p}(0,t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=le([408,429],e),r=le(this.additionalRetryCodes_,e);return t||n||r},e}(),Ae=function(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n};function Re(e,t,n){var r=G(e.urlParams),o=e.url+r,a=x(e.headers);return function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(a,t),function(e){e["X-Firebase-Storage-Version"]="webjs/"+(void 0!==i.a?i.a.SDK_VERSION:"AppManager")}(a),new De(o,e.method,a,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n)}var Ne=function(){function e(e,t,n){if(this.bucket_=null,this.authWrapper_=new Oe(e,(function(e,t){return new xe(e,t)}),Re,this,t),this.app_=e,null!=n)this.bucket_=B.makeFromBucketSpec(n);else{var r=this.authWrapper_.bucket();null!=r&&(this.bucket_=new B(r,""))}this.internals_=new Me(this)}return e.prototype.ref=function(e){function t(e){if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."}if($("ref",[te(t,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new xe(this.authWrapper_,this.bucket_);return null!=e?n.child(e):n},e.prototype.refFromURL=function(e){function t(e){if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{B.makeFromUrl(e)}catch(t){throw"Expected valid full URL but got an invalid one."}}return $("refFromURL",[te(t,!1)],arguments),new xe(this.authWrapper_,e)},Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),e.prototype.setMaxUploadRetryTime=function(e){$("setMaxUploadRetryTime",[ie()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},e.prototype.setMaxOperationRetryTime=function(e){$("setMaxOperationRetryTime",[ie()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),e}(),Me=function(){function e(e){this.service_=e}return e.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),P(void 0)},e}();function Fe(e,t,n){return new Ne(e,new j,n)}function Le(e){e.INTERNAL.registerService("storage",Fe,{TaskState:k,TaskEvent:C,StringFormat:g,Storage:Ne,Reference:xe},void 0,!0)}Le(i.a)},M1gn:function(e,t,n){var r=n("Zp05"),i=n("oxOc"),o=n("jZgK")("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},NPZs:function(e,t,n){n("s6PA"),e.exports=n("Autd").Array.find},NSPt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o,a,s,u,c,l,h,d,f,p,g=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,m=n("mAIw"),v=n("zVF4"),y=n("q/0M"),b=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),v.stringify(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:v.jsonEval(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),_=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return v.contains(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),w=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new b(t)}}catch(n){}return new _},C=w("localStorage"),k=w("sessionStorage"),S=new y.Logger("@firebase/database"),E=(i=1,function(){return i++}),T=function(e){var t=v.stringToByteArray(e),n=new v.Sha1;n.update(t);var r=n.digest();return v.base64.encodeByteArray(r)},x=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r="",i=0;i<t.length;i++)Array.isArray(t[i])||t[i]&&"object"==typeof t[i]&&"number"==typeof t[i].length?r+=e.apply(null,t[i]):r+="object"==typeof t[i]?v.stringify(t[i]):t[i],r+=" ";return r},I=null,P=!0,O=function(e,t){v.assert(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(S.logLevel=y.LogLevel.VERBOSE,I=S.log.bind(S),t&&k.set("logging_enabled",!0)):"function"==typeof e?I=e:(I=null,k.remove("logging_enabled"))},D=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===P&&(P=!1,null===I&&!0===k.get("logging_enabled")&&O(!0)),I){var n=x.apply(null,e);I(n)}},A=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];D.apply(void 0,[e].concat(t))}},R=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+x.apply(void 0,e);S.error(n)},N=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+x.apply(void 0,e);throw S.error(n),new Error(n)},M=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+x.apply(void 0,e);S.warn(n)},F=function(e){return"number"==typeof e&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)},L="[MIN_NAME]",V="[MAX_NAME]",U=function(e,t){if(e===t)return 0;if(e===L||t===V)return-1;if(t===L||e===V)return 1;var n=Q(e),r=Q(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},j=function(e,t){return e===t?0:e<t?-1:1},q=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+v.stringify(t))},B=function e(t){if("object"!=typeof t||null===t)return v.stringify(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=v.stringify(n[o]),i+=":",i+=e(t[n[o]]);return i+"}"},W=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)r.push(e.substring(i,i+t>n?n:i+t));return r},z=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;++n)t(n,e[n]);else v.forEach(e,(function(e,n){return t(n,e)}))},H=function(e){var t,n,r,i,o,a,s;for(v.assert(!F(e),"Invalid JSON number"),0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074)))),a=[],o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(t?1:0),a.reverse(),s=a.join("");var u="";for(o=0;o<64;o+=8){var c=parseInt(s.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()},G=new RegExp("^-?\\d{1,10}$"),Q=function(e){if(G.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},K=function(e){try{e()}catch(t){setTimeout((function(){throw M("Exception was thrown by user callback.",t.stack||""),t}),Math.floor(0))}},Y=function(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n},X=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return Object.defineProperty(e,"Empty",{get:function(){return new e("")},enumerable:!0,configurable:!0}),e.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},e.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},e.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new e(this.pieces_,t)},e.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"},e.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},e.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)t.push(this.pieces_[n]);return new e(t,0)},e.prototype.child=function(t){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(t instanceof e)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new e(n,0)},e.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},e.relativePath=function(t,n){var r=t.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return e.relativePath(t.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")")},e.comparePaths=function(e,t){for(var n=e.slice(),r=t.slice(),i=0;i<n.length&&i<r.length;i++){var o=U(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},e.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0},e.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0},e}(),J=function(){function e(e,t){this.errorPrefix_=t,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=v.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),e.prototype.push=function(e){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=v.stringLength(e),this.checkValid_()},e.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=v.stringLength(e),this.parts_.length>0&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},e}(),Z=function(){function e(e,t,n,r,i){void 0===i&&(i=""),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=C.get("host:"+e)||this.host}return e.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()},e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},e.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&C.set("host:"+this.host,this.internalHost))},e.prototype.connectionURL=function(e,t){var n;if(v.assert("string"==typeof e,"typeof type must == string"),v.assert("object"==typeof t,"typeof params must == object"),"websocket"===e)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==e)throw new Error("Unknown connection type: "+e);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace);var r=[];return v.forEach(t,(function(e,t){r.push(e+"="+t)})),n+r.join("&")},e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},e}(),$=function(e){var t=ee(e),n=t.subdomain;return"firebase"===t.domain&&N(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===t.domain||N("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&M("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Z(t.host,t.secure,n,"ws"===t.scheme||"wss"===t.scheme),path:new X(t.pathString)}},ee=function(e){var t="",n="",r="",i="",o=!0,a="https",s=443;if("string"==typeof e){var u=e.indexOf("//");u>=0&&(a=e.substring(0,u-1),e=e.substring(u+2));var c=e.indexOf("/");-1===c&&(c=e.length);var l=e.indexOf("?");-1===l&&(l=e.length),t=e.substring(0,Math.min(c,l)),c<l&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}t+="/"+i}return t}(e.substring(c,l)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));for(var n=0,r=e.split("&");n<r.length;n++){var i=r[n];if(0!==i.length){var o=i.split("=");2===o.length?t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):M("Invalid query segment '"+i+"' in query '"+e+"'")}}return t}(e.substring(Math.min(e.length,l)));(u=t.indexOf(":"))>=0?(o="https"===a||"wss"===a,s=parseInt(t.substring(u+1),10)):u=e.length;var d=t.split(".");3===d.length?(n=d[1],r=d[0].toLowerCase()):2===d.length?n=d[0]:"localhost"===d[0].slice(0,u).toLowerCase()&&(n="localhost"),""===r&&"ns"in h&&(r=h.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:a,pathString:i}},te=/[\[\].#$\/\u0000-\u001F\u007F]/,ne=/[\[\].#$\u0000-\u001F\u007F]/,re=function(e){return"string"==typeof e&&0!==e.length&&!te.test(e)},ie=function(e){return"string"==typeof e&&0!==e.length&&!ne.test(e)},oe=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!F(e)||e&&"object"==typeof e&&v.contains(e,".sv")},ae=function(e,t,n,r,i){i&&void 0===n||se(v.errorPrefix(e,t,i),n,r)},se=function e(t,n,r){var i=r instanceof X?new J(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+i.toErrorString());if("function"==typeof n)throw new Error(t+"contains a function "+i.toErrorString()+" with contents = "+n.toString());if(F(n))throw new Error(t+"contains "+n.toString()+" "+i.toErrorString());if("string"==typeof n&&n.length>10485760/3&&v.stringLength(n)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+i.toErrorString()+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var o=!1,a=!1;if(v.forEach(n,(function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!re(n)))throw new Error(t+" contains an invalid key ("+n+") "+i.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');i.push(n),e(t,r,i),i.pop()})),o&&a)throw new Error(t+' contains ".value" child '+i.toErrorString()+" in addition to actual children.")}},ue=function(e,t,n,r,i){if(!i||void 0!==n){var o=v.errorPrefix(e,t,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];v.forEach(n,(function(e,t){var n=new X(e);if(se(o,t,r.child(n)),".priority"===n.getBack()&&!oe(t))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=(r=t[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!re(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(X.comparePaths);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&a.contains(r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}},ce=function(e,t,n,r){if(!r||void 0!==n){if(F(n))throw new Error(v.errorPrefix(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!oe(n))throw new Error(v.errorPrefix(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},le=function(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(v.errorPrefix(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},he=function(e,t,n,r){if(!(r&&void 0===n||re(n)))throw new Error(v.errorPrefix(e,t,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},de=function(e,t,n,r){if(!(r&&void 0===n||ie(n)))throw new Error(v.errorPrefix(e,t,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},fe=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),de(e,t,n,r)},pe=function(e,t){if(".info"===t.getFront())throw new Error(e+" failed = Can't modify data under /.info/")},ge=function(e,t,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!re(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),ie(e)}(r))throw new Error(v.errorPrefix(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},me=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(v.errorPrefix(e,t,r)+"must be a boolean.")},ve=function(){function e(e,t){this.repo_=e,this.path_=t}return e.prototype.cancel=function(e){v.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),v.validateCallback("OnDisconnect.cancel",1,e,!0);var t=new v.Deferred;return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},e.prototype.remove=function(e){v.validateArgCount("OnDisconnect.remove",0,1,arguments.length),pe("OnDisconnect.remove",this.path_),v.validateCallback("OnDisconnect.remove",1,e,!0);var t=new v.Deferred;return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},e.prototype.set=function(e,t){v.validateArgCount("OnDisconnect.set",1,2,arguments.length),pe("OnDisconnect.set",this.path_),ae("OnDisconnect.set",1,e,this.path_,!1),v.validateCallback("OnDisconnect.set",2,t,!0);var n=new v.Deferred;return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},e.prototype.setWithPriority=function(e,t,n){v.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),pe("OnDisconnect.setWithPriority",this.path_),ae("OnDisconnect.setWithPriority",1,e,this.path_,!1),ce("OnDisconnect.setWithPriority",2,t,!1),v.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new v.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,r.wrapCallback(n)),r.promise},e.prototype.update=function(e,t){if(v.validateArgCount("OnDisconnect.update",1,2,arguments.length),pe("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,M("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ue("OnDisconnect.update",1,e,this.path_,!1),v.validateCallback("OnDisconnect.update",2,t,!0);var i=new v.Deferred;return this.repo_.onDisconnectUpdate(this.path_,e,i.wrapCallback(t)),i.promise},e}(),ye=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return v.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),be=(o="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",a=0,s=[],function(e){var t,n=e===a;a=e;var r=new Array(8);for(t=7;t>=0;t--)r[t]=o.charAt(e%64),e=Math.floor(e/64);v.assert(0===e,"Cannot push at time == 0");var i=r.join("");if(n){for(t=11;t>=0&&63===s[t];t--)s[t]=0;s[t]++}else for(t=0;t<12;t++)s[t]=Math.floor(64*Math.random());for(t=0;t<12;t++)i+=o.charAt(s[t]);return v.assert(20===i.length,"nextPushId: Length should be 20."),i}),_e=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),we=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new _e(L,e),r=new _e(L,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return _e.MIN},e}(),Ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m.__extends(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return u},set:function(e){u=e},enumerable:!0,configurable:!0}),t.prototype.compare=function(e,t){return U(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw v.assertionError("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return _e.MIN},t.prototype.maxPost=function(){return new _e(V,u)},t.prototype.makePost=function(e,t){return v.assert("string"==typeof e,"KeyIndex indexValue must always be a string."),new _e(e,u)},t.prototype.toString=function(){return".key"},t}(we),ke=new Ce,Se=function(e){return"number"==typeof e?"number:"+H(e):"string:"+e},Ee=function(e){if(e.isLeafNode()){var t=e.val();v.assert("string"==typeof t||"number"==typeof t||"object"==typeof t&&v.contains(t,".sv"),"Priority must be a string or number.")}else v.assert(e===c||e.isEmpty(),"priority of unexpected type.");v.assert(e===c||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Te=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,v.assert(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ee(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return l},set:function(e){l=e},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=t.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(v.assert(".priority"!==r||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Se(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?H(this.value_):this.value_,this.lazyHash_=T(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(v.assert(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(r);return v.assert(i>=0,"Unknown leaf type: "+n),v.assert(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){return e===this||!!e.isLeafNode()&&this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}(),xe=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?U(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return _e.MIN},t.prototype.maxPost=function(){return new _e(V,new Te("[PRIORITY-POST]",d))},t.prototype.makePost=function(e,t){var n=h(e);return new _e(t,new Te("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(we)),Ie=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),Pe=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:De.EMPTY_NODE,this.right=null!=o?o:De.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r,i;return(i=(r=n(e,(i=this).key))<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return De.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return De.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){var e;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((e=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),Oe=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Pe(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),De=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Pe.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Pe.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new Ie(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new Ie(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new Ie(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new Ie(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new Oe,e}(),Ae=Math.log(2),Re=function(){function e(e){this.count=parseInt(Math.log(e+1)/Ae,10),this.current_=this.count-1;var t=parseInt(Array(this.count+1).join("1"),2);this.bits_=e+1&t}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),Ne=function(e,t,n,r){e.sort(t);var i=function(t){for(var r=null,i=null,o=e.length,a=function(t,r){var i=o-t,a=o;o-=t;var u=function t(r,i){var o,a,s=i-r;if(0==s)return null;if(1==s)return o=e[r],a=n?n(o):o,new Pe(a,o.node,Pe.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return o=e[u],a=n?n(o):o,new Pe(a,o.node,Pe.BLACK,c,l)}(i+1,a),c=e[i],l=n?n(c):c;s(new Pe(l,c.node,r,null,u))},s=function(e){r?(r.left=e,r=e):(i=e,r=e)},u=0;u<t.count;++u){var c=t.nextBitIsOne(),l=Math.pow(2,t.count-(u+1));c?a(l,Pe.BLACK):(a(l,Pe.BLACK),a(l,Pe.RED))}return i}(new Re(e.length));return new De(r||t,i)},Me={},Fe=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return v.assert(Me&&xe,"ChildrenNode.ts has not been loaded"),f=f||new e({".priority":Me},{".priority":xe})},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var t=v.safeGet(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t===Me?null:t},e.prototype.hasIndex=function(e){return v.contains(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){v.assert(t!==ke,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(_e.Wrap),s=a.getNext();s;)o=o||t.isDefinedOn(s.node),i.push(s),s=a.getNext();r=o?Ne(i,t.getCompare()):Me;var u=t.toString(),c=v.clone(this.indexSet_);c[u]=t;var l=v.clone(this.indexes_);return l[u]=r,new e(l,c)},e.prototype.addToIndexes=function(t,n){var r=this;return new e(v.map(this.indexes_,(function(e,i){var o=v.safeGet(r.indexSet_,i);if(v.assert(o,"Missing index implementation for "+i),e===Me){if(o.isDefinedOn(t.node)){for(var a=[],s=n.getIterator(_e.Wrap),u=s.getNext();u;)u.name!=t.name&&a.push(u),u=s.getNext();return a.push(t),Ne(a,o.getCompare())}return Me}var c=n.get(t.name),l=e;return c&&(l=l.remove(new _e(t.name,c))),l.insert(t,t.node)})),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e(v.map(this.indexes_,(function(e){if(e===Me)return e;var r=n.get(t.name);return r?e.remove(new _e(t.name,r)):e})),this.indexSet_)},e}();function Le(e,t){return U(e.name,t.name)}function Ve(e,t){return U(e,t)}var Ue=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ee(this.priorityNode_),this.children_.isEmpty()&&v.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return p||(p=new e(new De(Ve),null,Fe.Default))},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||p},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?p:t},e.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(v.assert(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i=new _e(t,n),o=void 0,a=void 0;return n.isEmpty()?(o=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,n),a=this.indexMap_.addToIndexes(i,this.children_)),r=o.isEmpty()?p:this.priorityNode_,new e(o,r,a)},e.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;v.assert(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(xe,(function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!t&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Se(this.getPriority().val())+":"),this.forEachChild(xe,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":T(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new _e(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new _e(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new _e(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,_e.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,_e.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===je?-1:0},e.prototype.withIndex=function(t){if(t===ke||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===ke||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(xe),r=t.getIterator(xe),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===ke?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),je=new(function(e){function t(){return e.call(this,new De(Ve),Ue.EMPTY_NODE,Fe.Default)||this}return m.__extends(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return Ue.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(Ue));function qe(e,t){if(void 0===t&&(t=null),null===e)return Ue.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),v.assert(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Te(e,qe(t));if(e instanceof Array){var n=Ue.EMPTY_NODE,r=e;return v.forEach(r,(function(e,t){if(v.contains(r,e)&&"."!==e.substring(0,1)){var i=qe(t);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(qe(t))}var i=[],o=!1,a=e;if(v.forEach(a,(function(e,t){if("string"!=typeof e||"."!==e.substring(0,1)){var n=qe(a[e]);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),i.push(new _e(e,n)))}})),0==i.length)return Ue.EMPTY_NODE;var s=Ne(i,Le,(function(e){return e.name}),Ve);if(o){var u=Ne(i,xe.getCompare());return new Ue(s,qe(t),new Fe({".priority":u},{".priority":xe}))}return new Ue(s,qe(t),Fe.Default)}Object.defineProperties(_e,{MIN:{value:new _e(L,Ue.EMPTY_NODE)},MAX:{value:new _e(V,je)}}),Ce.__EMPTY_NODE=Ue.EMPTY_NODE,Te.__childrenNodeConstructor=Ue,c=je,d=je,function(e){h=e}(qe);var Be,We,ze,He=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?U(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return _e.MIN},t.prototype.maxPost=function(){return _e.MAX},t.prototype.makePost=function(e,t){var n=qe(e);return new _e(t,n)},t.prototype.toString=function(){return".value"},t}(we)),Ge=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,v.assert(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return m.__extends(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?U(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=qe(e),r=Ue.EMPTY_NODE.updateChild(this.indexPath_,n);return new _e(t,r)},t.prototype.maxPost=function(){var e=Ue.EMPTY_NODE.updateChild(this.indexPath_,je);return new _e(V,e)},t.prototype.toString=function(){return this.indexPath_.slice().join("/")},t}(we),Qe=function(){function e(e,t,n){this.node_=e,this.ref_=t,this.index_=n}return e.prototype.val=function(){return v.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return v.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return v.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return v.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){v.validateArgCount("DataSnapshot.child",0,1,arguments.length),t=String(t),de("DataSnapshot.child",1,t,!1);var n=new X(t),r=this.ref_.child(n);return new e(this.node_.getChild(n),r,xe)},e.prototype.hasChild=function(e){v.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),de("DataSnapshot.hasChild",1,e,!1);var t=new X(e);return!this.node_.getChild(t).isEmpty()},e.prototype.getPriority=function(){return v.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;if(v.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),v.validateCallback("DataSnapshot.forEach",1,t,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return t(new e(i,n.ref_.child(r),xe))}))},e.prototype.hasChildren=function(){return v.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),e.prototype.numChildren=function(){return v.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return v.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}(),Ke=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+v.stringify(this.snapshot.exportVal())},e}(),Ye=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),Xe=function(){function e(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new Ke("value",this,new Qe(e.snapshotNode,t.getRef(),n))},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){v.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Ye(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}(),Je=function(){function e(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return v.contains(this.callbacks_,t="children_removed"===t?"child_removed":t)},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Ye(this,e,t):null},e.prototype.createEvent=function(e,t){v.assert(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),r=t.getQueryParams().getIndex();return new Ke(e.type,this,new Qe(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){v.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},e.prototype.matches=function(t){if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var n=v.getCount(t.callbacks_);if(n===v.getCount(this.callbacks_)){if(1===n){var r=v.getAnyKey(t.callbacks_),i=v.getAnyKey(this.callbacks_);return!(i!==r||t.callbacks_[r]&&this.callbacks_[i]&&t.callbacks_[r]!==this.callbacks_[i])}return v.every(this.callbacks_,(function(e,n){return t.callbacks_[e]===n}))}}}return!1},e.prototype.hasAnyCallback=function(){return null!==this.callbacks_},e}(),Ze=function(){function e(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return v.assert(Be,"Reference.ts has not been loaded"),Be},set:function(e){Be=e},enumerable:!0,configurable:!0}),e.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===ke){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!=L)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!=V)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===xe){if(null!=t&&!oe(t)||null!=n&&!oe(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(v.assert(e.getIndex()instanceof Ge||e.getIndex()===He,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},e.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return v.validateArgCount("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,r,i){v.validateArgCount("Query.on",2,4,arguments.length),le("Query.on",1,t,!1),v.validateCallback("Query.on",2,n,!1);var o=e.getCancelAndContextArgs_("Query.on",r,i);if("value"===t)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[t]=n,this.onChildEvent(a,o.cancel,o.context)}return n},e.prototype.onValueEvent=function(e,t,n){var r=new Xe(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,r)},e.prototype.onChildEvent=function(e,t,n){var r=new Je(e,t,n);this.repo.addEventCallbackForQuery(this,r)},e.prototype.off=function(e,t,n){v.validateArgCount("Query.off",0,3,arguments.length),le("Query.off",1,e,!0),v.validateCallback("Query.off",2,t,!0),v.validateContextObject("Query.off",3,n,!0);var r=null,i=null;if("value"===e){var o=t||null;r=new Xe(o,null,n||null)}else e&&(t&&((i={})[e]=t),r=new Je(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},e.prototype.once=function(t,n,r,i){var o=this;v.validateArgCount("Query.once",1,4,arguments.length),le("Query.once",1,t,!1),v.validateCallback("Query.once",2,n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,i),s=!0,u=new v.Deferred;u.promise.catch((function(){}));var c=function e(r){s&&(s=!1,o.off(t,e),n&&n.bind(a.context)(r),u.resolve(r))};return this.on(t,c,(function(e){o.off(t,c),a.cancel&&a.cancel.bind(a.context)(e),u.reject(e)})),u.promise},e.prototype.limitToFirst=function(t){if(v.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if(v.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if(v.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');de("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new X(t);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Ge(n),i=this.queryParams_.orderBy(r);return e.validateQueryEndpoints_(i),new e(this.repo,this.path,i,!0)},e.prototype.orderByKey=function(){v.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(ke);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){v.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(xe);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){v.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(He);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){void 0===t&&(t=null),v.validateArgCount("Query.startAt",0,2,arguments.length),ae("Query.startAt",1,t,this.path,!0),he("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(t=null,n=null),new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endAt=function(t,n){void 0===t&&(t=null),v.validateArgCount("Query.endAt",0,2,arguments.length),ae("Query.endAt",1,t,this.path,!0),he("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.equalTo=function(e,t){if(v.validateArgCount("Query.equalTo",1,2,arguments.length),ae("Query.equalTo",1,e,this.path,!1),he("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},e.prototype.toString=function(){return v.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},e.prototype.toJSON=function(){return v.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},e.prototype.queryIdentifier=function(){var e=this.queryObject(),t=B(e);return"{}"===t?"default":t},e.prototype.isEqual=function(t){if(v.validateArgCount("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===t.repo,i=this.path.equals(t.path),o=this.queryIdentifier()===t.queryIdentifier();return r&&i&&o},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,v.validateCallback(e,3,r.cancel,!0),r.context=n,v.validateContextObject(e,4,r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(v.errorPrefix(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}(),$e=function(){function e(){this.set={}}return e.prototype.add=function(e,t){this.set[e]=null===t||t},e.prototype.contains=function(e){return v.contains(this.set,e)},e.prototype.get=function(e){return this.contains(e)?this.set[e]:void 0},e.prototype.remove=function(e){delete this.set[e]},e.prototype.clear=function(){this.set={}},e.prototype.isEmpty=function(){return v.isEmpty(this.set)},e.prototype.count=function(){return v.getCount(this.set)},e.prototype.each=function(e){v.forEach(this.set,(function(t,n){return e(t,n)}))},e.prototype.keys=function(){var e=[];return v.forEach(this.set,(function(t){e.push(t)})),e},e}(),et=function(){function e(){this.value_=null,this.children_=null}return e.prototype.find=function(e){if(null!=this.value_)return this.value_.getChild(e);if(e.isEmpty()||null==this.children_)return null;var t=e.getFront();return e=e.popFront(),this.children_.contains(t)?this.children_.get(t).find(e):null},e.prototype.remember=function(t,n){if(t.isEmpty())this.value_=n,this.children_=null;else if(null!==this.value_)this.value_=this.value_.updateChild(t,n);else{null==this.children_&&(this.children_=new $e);var r=t.getFront();this.children_.contains(r)||this.children_.add(r,new e);var i=this.children_.get(r);t=t.popFront(),i.remember(t,n)}},e.prototype.forget=function(e){if(e.isEmpty())return this.value_=null,this.children_=null,!0;if(null!==this.value_){if(this.value_.isLeafNode())return!1;var t=this.value_;this.value_=null;var n=this;return t.forEachChild(xe,(function(e,t){n.remember(new X(e),t)})),this.forget(e)}if(null!==this.children_){var r=e.getFront();return e=e.popFront(),this.children_.contains(r)&&this.children_.get(r).forget(e)&&this.children_.remove(r),!!this.children_.isEmpty()&&(this.children_=null,!0)}return!0},e.prototype.forEachTree=function(e,t){null!==this.value_?t(e,this.value_):this.forEachChild((function(n,r){var i=new X(e.toString()+"/"+n);r.forEachTree(i,t)}))},e.prototype.forEachChild=function(e){null!==this.children_&&this.children_.each((function(t,n){e(t,n)}))},e}(),tt=function(e,t){return e&&"object"==typeof e?(v.assert(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e},nt=function e(t,n){var r,i=t.getPriority().val(),o=tt(i,n);if(t.isLeafNode()){var a=t,s=tt(a.getValue(),n);return s!==a.getValue()||o!==a.getPriority().val()?new Te(s,qe(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Te(o))),u.forEachChild(xe,(function(t,i){var o=e(i,n);o!==i&&(r=r.updateImmediateChild(t,o))})),r},rt=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}({}),it=function(){function e(e,t,n,r){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=r,v.assert(!r||t,"Tagged queries must be from server.")}return e.User=new e(!0,!1,null,!1),e.Server=new e(!1,!0,null,!1),e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)},e}(),ot=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=rt.ACK_USER_WRITE,this.source=it.User}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return v.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new X(t));return new e(X.Empty,n,this.revert)}return v.assert(this.path.getFront()===t,"operationForChild called for unrelated child."),new e(this.path.popFront(),this.affectedTree,this.revert)},e}(),at=function(){function e(e,t){void 0===t&&(We||(We=new De(j)),t=We),this.value=e,this.children=t}return e.fromObject=function(t){var n=e.Empty;return v.forEach(t,(function(e,t){n=n.set(new X(e),t)})),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:X.Empty,value:this.value};if(e.isEmpty())return null;var n=e.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(e.popFront(),t);return null!=i?{path:new X(n).child(i.path),value:i.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},e.prototype.subtree=function(t){if(t.isEmpty())return this;var n=t.getFront(),r=this.children.get(n);return null!==r?r.subtree(t.popFront()):e.Empty},e.prototype.set=function(t,n){if(t.isEmpty())return new e(n,this.children);var r=t.getFront(),i=(this.children.get(r)||e.Empty).set(t.popFront(),n),o=this.children.insert(r,i);return new e(this.value,o)},e.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?e.Empty:new e(null,this.children);var n=t.getFront(),r=this.children.get(n);if(r){var i=r.remove(t.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?e.Empty:new e(this.value,o)}return this},e.prototype.get=function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null},e.prototype.setTree=function(t,n){if(t.isEmpty())return n;var r,i=t.getFront(),o=(this.children.get(i)||e.Empty).setTree(t.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new e(this.value,r)},e.prototype.fold=function(e){return this.fold_(X.Empty,e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(e.child(r),t)})),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,X.Empty,t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(e.isEmpty())return null;var i=e.getFront(),o=this.children.get(i);return o?o.findOnPath_(e.popFront(),t.child(i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,X.Empty,t)},e.prototype.foreachOnPath_=function(t,n,r){if(t.isEmpty())return this;this.value&&r(n,this.value);var i=t.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(t.popFront(),n.child(i),r):e.Empty},e.prototype.foreach=function(e){this.foreach_(X.Empty,e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(e.child(n),t)})),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},e.Empty=new e(null),e}(),st=function(){function e(e,t){this.source=e,this.path=t,this.type=rt.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,X.Empty):new e(this.source,this.path.popFront())},e}(),ut=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=rt.OVERWRITE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,X.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)},e}(),ct=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=rt.MERGE}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){var n=this.children.subtree(new X(t));return n.isEmpty()?null:n.value?new ut(this.source,X.Empty,n.value):new e(this.source,X.Empty,n)}return v.assert(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,this.path.popFront(),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),lt=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),ht=function(){function e(e,t){this.eventCache_=e,this.serverCache_=t}return e.prototype.updateEventSnap=function(t,n,r){return new e(new lt(t,n,r),this.serverCache_)},e.prototype.updateServerSnap=function(t,n,r){return new e(this.eventCache_,new lt(t,n,r))},e.prototype.getEventCache=function(){return this.eventCache_},e.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},e.prototype.getServerCache=function(){return this.serverCache_},e.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},e.Empty=new e(new lt(Ue.EMPTY_NODE,!1,!1),new lt(Ue.EMPTY_NODE,!1,!1)),e}(),dt=function(){function e(e,t,n,r,i){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=r,this.prevName=i}return e.valueChange=function(t){return new e(e.VALUE,t)},e.childAddedChange=function(t,n){return new e(e.CHILD_ADDED,n,t)},e.childRemovedChange=function(t,n){return new e(e.CHILD_REMOVED,n,t)},e.childChangedChange=function(t,n,r){return new e(e.CHILD_CHANGED,n,t,r)},e.childMovedChange=function(t,n){return new e(e.CHILD_MOVED,n,t)},e.CHILD_ADDED="child_added",e.CHILD_REMOVED="child_removed",e.CHILD_CHANGED="child_changed",e.CHILD_MOVED="child_moved",e.VALUE="value",e}(),ft=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,o){v.assert(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()==n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(dt.childRemovedChange(t,a)):v.assert(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(dt.childAddedChange(t,n)):o.trackChildChange(dt.childChangedChange(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(xe,(function(e,r){t.hasChild(e)||n.trackChildChange(dt.childRemovedChange(e,r))})),t.isLeafNode()||t.forEachChild(xe,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(dt.childChangedChange(t,r,i))}else n.trackChildChange(dt.childAddedChange(t,r))}))),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?Ue.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),pt=function(){function e(){this.changeMap_={}}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;v.assert(t==dt.CHILD_ADDED||t==dt.CHILD_CHANGED||t==dt.CHILD_REMOVED,"Only child changes supported for tracking"),v.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=v.safeGet(this.changeMap_,n);if(r){var i=r.type;if(t==dt.CHILD_ADDED&&i==dt.CHILD_REMOVED)this.changeMap_[n]=dt.childChangedChange(n,e.snapshotNode,r.snapshotNode);else if(t==dt.CHILD_REMOVED&&i==dt.CHILD_ADDED)delete this.changeMap_[n];else if(t==dt.CHILD_REMOVED&&i==dt.CHILD_CHANGED)this.changeMap_[n]=dt.childRemovedChange(n,r.oldSnap);else if(t==dt.CHILD_CHANGED&&i==dt.CHILD_ADDED)this.changeMap_[n]=dt.childAddedChange(n,e.snapshotNode);else{if(t!=dt.CHILD_CHANGED||i!=dt.CHILD_CHANGED)throw v.assertionError("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap_[n]=dt.childChangedChange(n,e.snapshotNode,r.oldSnap)}}else this.changeMap_[n]=e},e.prototype.getChanges=function(){return v.getValues(this.changeMap_)},e}(),gt=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),mt=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new lt(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,t,1,n,e);return 0===i.length?null:i[0]},e}(),vt=function(e,t){this.viewCache=e,this.changes=t},yt=function(){function e(e){this.filter_=e}return e.prototype.assertIndexed=function(e){v.assert(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),v.assert(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},e.prototype.applyOperation=function(t,n,r,i){var o,a,s=new pt;if(n.type===rt.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(t,u.path,u.snap,r,i,s):(v.assert(u.source.fromServer,"Unknown source."),a=u.source.tagged||t.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(t,u.path,u.snap,r,i,a,s))}else if(n.type===rt.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(t,c.path,c.children,r,i,s):(v.assert(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.getServerCache().isFiltered(),o=this.applyServerMerge_(t,c.path,c.children,r,i,a,s))}else if(n.type===rt.ACK_USER_WRITE){var l=n;o=l.revert?this.revertUserWrite_(t,l.path,r,i,s):this.ackUserWrite_(t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==rt.LISTEN_COMPLETE)throw v.assertionError("Unknown operation type: "+n.type);o=this.listenComplete_(t,n.path,r,s)}var h=s.getChanges();return e.maybeAddValueEvent_(t,o,h),new vt(o,h)},e.maybeAddValueEvent_=function(e,t,n){var r=t.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=e.getCompleteEventSnap();(n.length>0||!e.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(dt.valueChange(t.getCompleteEventSnap()))}},e.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,r,i){var o=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var a=void 0,s=void 0;if(t.isEmpty())if(v.assert(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var u=e.getCompleteServerSnap(),c=n.calcCompleteEventChildren(u instanceof Ue?u:Ue.EMPTY_NODE);a=this.filter_.updateFullNode(e.getEventCache().getNode(),c,i)}else{var l=n.calcCompleteEventCache(e.getCompleteServerSnap());a=this.filter_.updateFullNode(e.getEventCache().getNode(),l,i)}else{var h=t.getFront();if(".priority"==h){v.assert(1==t.getLength(),"Can't have a priority with additional path components");var d=o.getNode();s=e.getServerCache().getNode();var f=n.calcEventCacheAfterServerOverwrite(t,d,s);a=null!=f?this.filter_.updatePriority(d,f):o.getNode()}else{var p=t.popFront(),g=void 0;if(o.isCompleteForChild(h)){s=e.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(t,o.getNode(),s);g=null!=m?o.getNode().getImmediateChild(h).updateChild(p,m):o.getNode().getImmediateChild(h)}else g=n.calcCompleteChild(h,e.getServerCache());a=null!=g?this.filter_.updateChild(o.getNode(),h,g,p,r,i):o.getNode()}}return e.updateEventSnap(a,o.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},e.prototype.applyServerOverwrite_=function(e,t,n,r,i,o,a){var s,u=e.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(t,n);s=c.updateFullNode(u.getNode(),l,null)}else{var h=t.getFront();if(!u.isCompleteForPath(t)&&t.getLength()>1)return e;var d=t.popFront(),f=u.getNode().getImmediateChild(h).updateChild(d,n);s=".priority"==h?c.updatePriority(u.getNode(),f):c.updateChild(u.getNode(),h,f,d,gt,null)}var p=e.updateServerSnap(s,u.isFullyInitialized()||t.isEmpty(),c.filtersNodes()),g=new mt(r,p,i);return this.generateEventCacheAfterServerEvent_(p,t,r,g,a)},e.prototype.applyUserOverwrite_=function(e,t,n,r,i,o){var a,s,u=e.getEventCache(),c=new mt(r,e,i);if(t.isEmpty())s=this.filter_.updateFullNode(e.getEventCache().getNode(),n,o),a=e.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=t.getFront();if(".priority"===l)s=this.filter_.updatePriority(e.getEventCache().getNode(),n),a=e.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=t.popFront(),d=u.getNode().getImmediateChild(l),f=void 0;if(h.isEmpty())f=n;else{var p=c.getCompleteChild(l);f=null!=p?".priority"===h.getBack()&&p.getChild(h.parent()).isEmpty()?p:p.updateChild(h,n):Ue.EMPTY_NODE}if(d.equals(f))a=e;else{var g=this.filter_.updateChild(u.getNode(),l,f,h,c,o);a=e.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},e.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},e.prototype.applyUserMerge_=function(t,n,r,i,o,a){var s=this,u=t;return r.foreach((function(r,c){var l=n.child(r);e.cacheHasChild_(t,l.getFront())&&(u=s.applyUserOverwrite_(u,l,c,i,o,a))})),r.foreach((function(r,c){var l=n.child(r);e.cacheHasChild_(t,l.getFront())||(u=s.applyUserOverwrite_(u,l,c,i,o,a))})),u},e.prototype.applyMerge_=function(e,t){return t.foreach((function(t,n){e=e.updateChild(t,n)})),e},e.prototype.applyServerMerge_=function(e,t,n,r,i,o,a){var s=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var u,c=e;u=t.isEmpty()?n:at.Empty.setTree(t,n);var l=e.getServerCache().getNode();return u.children.inorderTraversal((function(t,n){if(l.hasChild(t)){var u=e.getServerCache().getNode().getImmediateChild(t),h=s.applyMerge_(u,n);c=s.applyServerOverwrite_(c,new X(t),h,r,i,o,a)}})),u.children.inorderTraversal((function(t,n){var u=!e.getServerCache().isCompleteForChild(t)&&null==n.value;if(!l.hasChild(t)&&!u){var h=e.getServerCache().getNode().getImmediateChild(t),d=s.applyMerge_(h,n);c=s.applyServerOverwrite_(c,new X(t),d,r,i,o,a)}})),c},e.prototype.ackUserWrite_=function(e,t,n,r,i,o){if(null!=r.shadowingWrite(t))return e;var a=e.getServerCache().isFiltered(),s=e.getServerCache();if(null!=n.value){if(t.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,s.getNode().getChild(t),r,i,a,o);if(t.isEmpty()){var u=at.Empty;return s.getNode().forEachChild(ke,(function(e,t){u=u.set(new X(e),t)})),this.applyServerMerge_(e,t,u,r,i,a,o)}return e}var c=at.Empty;return n.foreach((function(e,n){var r=t.child(e);s.isCompleteForPath(r)&&(c=c.set(e,s.getNode().getChild(r)))})),this.applyServerMerge_(e,t,c,r,i,a,o)},e.prototype.listenComplete_=function(e,t,n,r){var i=e.getServerCache(),o=e.updateServerSnap(i.getNode(),i.isFullyInitialized()||t.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,t,n,gt,r)},e.prototype.revertUserWrite_=function(e,t,n,r,i){var o;if(null!=n.shadowingWrite(t))return e;var a=new mt(n,e,r),s=e.getEventCache().getNode(),u=void 0;if(t.isEmpty()||".priority"===t.getFront()){var c=void 0;if(e.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var l=e.getServerCache().getNode();v.assert(l instanceof Ue,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(l)}u=this.filter_.updateFullNode(s,c=c,i)}else{var h=t.getFront(),d=n.calcCompleteChild(h,e.getServerCache());null==d&&e.getServerCache().isCompleteForChild(h)&&(d=s.getImmediateChild(h)),(u=null!=d?this.filter_.updateChild(s,h,d,t.popFront(),a,i):e.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(s,h,Ue.EMPTY_NODE,t.popFront(),a,i):s).isEmpty()&&e.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(e.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(X.Empty),e.updateEventSnap(u,o,this.filter_.filtersNodes())},e}(),bt=function(){function e(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return e.prototype.generateEventsForChanges=function(e,t,n){var r=this,i=[],o=[];return e.forEach((function(e){e.type===dt.CHILD_CHANGED&&r.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push(dt.childMovedChange(e.childName,e.snapshotNode))})),this.generateEventsForType_(i,dt.CHILD_REMOVED,e,n,t),this.generateEventsForType_(i,dt.CHILD_ADDED,e,n,t),this.generateEventsForType_(i,dt.CHILD_MOVED,o,n,t),this.generateEventsForType_(i,dt.CHILD_CHANGED,e,n,t),this.generateEventsForType_(i,dt.VALUE,e,n,t),i},e.prototype.generateEventsForType_=function(e,t,n,r,i){var o=this,a=n.filter((function(e){return e.type===t}));a.sort(this.compareChanges_.bind(this)),a.forEach((function(t){var n=o.materializeSingleChange_(t,i);r.forEach((function(r){r.respondsTo(t.type)&&e.push(r.createEvent(n,o.query_))}))}))},e.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type?e:(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_),e)},e.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw v.assertionError("Should only compare child_ events.");var n=new _e(e.childName,e.snapshotNode),r=new _e(t.childName,t.snapshotNode);return this.index_.compare(n,r)},e}(),_t=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new ft(n.getIndex()),i=n.getNodeFilter();this.processor_=new yt(i);var o=t.getServerCache(),a=t.getEventCache(),s=r.updateFullNode(Ue.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Ue.EMPTY_NODE,a.getNode(),null),c=new lt(s,o.isFullyInitialized(),r.filtersNodes()),l=new lt(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new ht(l,c),this.eventGenerator_=new bt(this.query_)}return e.prototype.getQuery=function(){return this.query_},e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},e.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},e.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},e.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},e.prototype.removeEventRegistration=function(e,t){var n=[];if(t){v.assert(null==e,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(e){var i=e.createCancelEvent(t=t,r);i&&n.push(i)}))}if(e){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(e)){if(e.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},e.prototype.applyOperation=function(e,t,n){e.type===rt.MERGE&&null!==e.source.queryId&&(v.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),v.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,e,t,n);return this.processor_.assertIndexed(i.viewCache),v.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},e.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(xe,(function(e,t){n.push(dt.childAddedChange(e,t))})),t.isFullyInitialized()&&n.push(dt.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},e.prototype.generateEventsForChanges_=function(e,t,n){return this.eventGenerator_.generateEventsForChanges(e,t,n?[n]:this.eventRegistrations_)},e}(),wt=function(){function e(){this.views_={}}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return v.assert(ze,"Reference.ts has not been loaded"),ze},set:function(e){v.assert(!ze,"__referenceConstructor has already been defined"),ze=e},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return v.isEmpty(this.views_)},e.prototype.applyOperation=function(e,t,n){var r=e.source.queryId;if(null!==r){var i=v.safeGet(this.views_,r);return v.assert(null!=i,"SyncTree gave us an op for an invalid query."),i.applyOperation(e,t,n)}var o=[];return v.forEach(this.views_,(function(r,i){o=o.concat(i.applyOperation(e,t,n))})),o},e.prototype.addEventRegistration=function(e,t,n,r,i){var o=e.queryIdentifier(),a=v.safeGet(this.views_,o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;s?u=!0:r instanceof Ue?(s=n.calcCompleteEventChildren(r),u=!1):(s=Ue.EMPTY_NODE,u=!1);var c=new ht(new lt(s,u,!1),new lt(r,i,!1));a=new _t(e,c),this.views_[o]=a}return a.addEventRegistration(t),a.getInitialEvents(t)},e.prototype.removeEventRegistration=function(t,n,r){var i=t.queryIdentifier(),o=[],a=[],s=this.hasCompleteView();if("default"===i){var u=this;v.forEach(this.views_,(function(e,t){a=a.concat(t.removeEventRegistration(n,r)),t.isEmpty()&&(delete u.views_[e],t.getQuery().getQueryParams().loadsAllData()||o.push(t.getQuery()))}))}else{var c=v.safeGet(this.views_,i);c&&(a=a.concat(c.removeEventRegistration(n,r)),c.isEmpty()&&(delete this.views_[i],c.getQuery().getQueryParams().loadsAllData()||o.push(c.getQuery())))}return s&&!this.hasCompleteView()&&o.push(new e.__referenceConstructor(t.repo,t.path)),{removed:o,events:a}},e.prototype.getQueryViews=function(){var e=this;return Object.keys(this.views_).map((function(t){return e.views_[t]})).filter((function(e){return!e.getQuery().getQueryParams().loadsAllData()}))},e.prototype.getCompleteServerCache=function(e){var t=null;return v.forEach(this.views_,(function(n,r){t=t||r.getCompleteServerCache(e)})),t},e.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return v.safeGet(this.views_,t)},e.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},e.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},e.prototype.getCompleteView=function(){return v.findValue(this.views_,(function(e){return e.getQuery().getQueryParams().loadsAllData()}))||null},e}(),Ct=function(){function e(e){this.writeTree_=e}return e.prototype.addWrite=function(t,n){if(t.isEmpty())return new e(new at(n));var r=this.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,a=X.relativePath(i,t);return o=o.updateChild(a,n),new e(this.writeTree_.set(i,o))}var s=new at(n);return new e(this.writeTree_.setTree(t,s))},e.prototype.addWrites=function(e,t){var n=this;return v.forEach(t,(function(t,r){n=n.addWrite(e.child(t),r)})),n},e.prototype.removeWrite=function(t){return t.isEmpty()?e.Empty:new e(this.writeTree_.setTree(t,at.Empty))},e.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},e.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(X.relativePath(t.path,e)):null},e.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(xe,(function(t,n){e.push(new _e(t,n))})):this.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new _e(t,n.value))})),e},e.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var n=this.getCompleteNode(t);return new e(null!=n?new at(n):this.writeTree_.subtree(t))},e.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},e.prototype.apply=function(t){return e.applySubtreeWrite_(X.Empty,this.writeTree_,t)},e.Empty=new e(new at(null)),e.applySubtreeWrite_=function(t,n,r){if(null!=n.value)return r.updateChild(t,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(v.assert(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=e.applySubtreeWrite_(t.child(n),o,r)})),r.getChild(t).isEmpty()||null===i||(r=r.updateChild(t.child(".priority"),i)),r},e}(),kt=function(){function e(){this.visibleWrites_=Ct.Empty,this.allWrites_=[],this.lastWriteId_=-1}return e.prototype.childWrites=function(e){return new St(e,this)},e.prototype.addOverwrite=function(e,t,n,r){v.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},e.prototype.addMerge=function(e,t,n){v.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},e.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null},e.prototype.removeWrite=function(e){var t=this,n=this.allWrites_.findIndex((function(t){return t.writeId===e}));v.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&a>=0;){var s=this.allWrites_[a];s.visible&&(a>=n&&this.recordContainsPath_(s,r.path)?i=!1:r.path.contains(s.path)&&(o=!0)),a--}return!!i&&(o?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):v.forEach(r.children,(function(e){t.visibleWrites_=t.visibleWrites_.removeWrite(r.path.child(e))})),!0))},e.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcCompleteEventCache=function(t,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(t);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite(X.Empty)?e.layerTree_(this.allWrites_,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))}),t).apply(n||Ue.EMPTY_NODE):null}var a=this.visibleWrites_.getCompleteNode(t);if(null!=a)return a;var s=this.visibleWrites_.childCompoundWrite(t);return s.isEmpty()?n:null!=n||s.hasCompleteWrite(X.Empty)?s.apply(n||Ue.EMPTY_NODE):null},e.prototype.calcCompleteEventChildren=function(e,t){var n=Ue.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(e);if(r)return r.isLeafNode()||r.forEachChild(xe,(function(e,t){n=n.updateImmediateChild(e,t)})),n;if(t){var i=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(xe,(function(e,t){var r=i.childCompoundWrite(new X(e)).apply(t);n=n.updateImmediateChild(e,r)})),i.getCompleteChildren().forEach((function(e){n=n.updateImmediateChild(e.name,e.node)})),n}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach((function(e){n=n.updateImmediateChild(e.name,e.node)})),n},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,r){v.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=e.child(t);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(t):o.apply(r.getChild(t))},e.prototype.calcCompleteChild=function(e,t,n){var r=e.child(t),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(t)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(t)):null},e.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcIndexedSlice=function(e,t,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(e),u=s.getCompleteNode(X.Empty);if(null!=u)a=u;else{if(null==t)return[];a=s.apply(t)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),d=h.getNext();d&&c.length<r;)0!==l(d,n)&&c.push(d),d=h.getNext();return c},e.prototype.recordContainsPath_=function(e,t){return e.snap?e.path.contains(t):!!v.findKey(e.children,(function(n,r){return e.path.child(r).contains(t)}))},e.prototype.resetTree_=function(){this.visibleWrites_=e.layerTree_(this.allWrites_,e.DefaultFilter_,X.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},e.DefaultFilter_=function(e){return e.visible},e.layerTree_=function(e,t,n){for(var r=Ct.Empty,i=0;i<e.length;++i){var o=e[i];if(t(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=X.relativePath(n,a),r=r.addWrite(s,o.snap)):a.contains(n)&&(s=X.relativePath(a,n),r=r.addWrite(X.Empty,o.snap.getChild(s)));else{if(!o.children)throw v.assertionError("WriteRecord should have .snap or .children");if(n.contains(a))s=X.relativePath(n,a),r=r.addWrites(s,o.children);else if(a.contains(n))if((s=X.relativePath(a,n)).isEmpty())r=r.addWrites(X.Empty,o.children);else{var u=v.safeGet(o.children,s.getFront());if(u){var c=u.getChild(s.popFront());r=r.addWrite(X.Empty,c)}}}}}return r},e}(),St=function(){function e(e,t){this.treePath_=e,this.writeTree_=t}return e.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},e.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},e.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},e.prototype.calcIndexedSlice=function(e,t,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,r,i)},e.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}(),Et=function(){function e(e){this.listenProvider_=e,this.syncPointTree_=at.Empty,this.pendingWriteTree_=new kt,this.tagToQueryMap_={},this.queryToTagMap_={}}return e.prototype.applyUserOverwrite=function(e,t,n,r){return this.pendingWriteTree_.addOverwrite(e,t,n,r),r?this.applyOperationToSyncPoints_(new ut(it.User,e,t)):[]},e.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var r=at.fromObject(t);return this.applyOperationToSyncPoints_(new ct(it.User,e,r))},e.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var r=at.Empty;return null!=n.snap?r=r.set(X.Empty,!0):v.forEach(n.children,(function(e,t){r=r.set(new X(e),t)})),this.applyOperationToSyncPoints_(new ot(n.path,r,t))}return[]},e.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new ut(it.Server,e,t))},e.prototype.applyServerMerge=function(e,t){var n=at.fromObject(t);return this.applyOperationToSyncPoints_(new ct(it.Server,e,n))},e.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new st(it.Server,e))},e.prototype.applyTaggedQueryOverwrite=function(t,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=e.parseQueryKey_(i),a=o.path,s=o.queryId,u=X.relativePath(a,t),c=new ut(it.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,c)}return[]},e.prototype.applyTaggedQueryMerge=function(t,n,r){var i=this.queryKeyForTag_(r);if(i){var o=e.parseQueryKey_(i),a=o.path,s=o.queryId,u=X.relativePath(a,t),c=at.fromObject(n),l=new ct(it.forServerTaggedQuery(s),u,c);return this.applyTaggedOperation_(a,l)}return[]},e.prototype.applyTaggedListenComplete=function(t,n){var r=this.queryKeyForTag_(n);if(r){var i=e.parseQueryKey_(r),o=i.path,a=i.queryId,s=X.relativePath(o,t),u=new st(it.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},e.prototype.addEventRegistration=function(t,n){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(e,t){var n=X.relativePath(e,r);i=i||t.getCompleteServerCache(n),o=o||t.hasCompleteView()}));var a,s=this.syncPointTree_.get(r);s?(o=o||s.hasCompleteView(),i=i||s.getCompleteServerCache(X.Empty)):(s=new wt,this.syncPointTree_=this.syncPointTree_.set(r,s)),null!=i?a=!0:(a=!1,i=Ue.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=t.getCompleteServerCache(X.Empty);n&&(i=i.updateImmediateChild(e,n))})));var u=s.viewExistsForQuery(t);if(!u&&!t.getQueryParams().loadsAllData()){var c=e.makeQueryKey_(t);v.assert(!(c in this.queryToTagMap_),"View does not exist, but we have a tag");var l=e.getNextQueryTag_();this.queryToTagMap_[c]=l,this.tagToQueryMap_["_"+l]=c}var h=this.pendingWriteTree_.childWrites(r),d=s.addEventRegistration(t,n,h,i,a);if(!u&&!o){var f=s.viewForQuery(t);d=d.concat(this.setupListener_(t,f))}return d},e.prototype.removeEventRegistration=function(t,n,r){var i=this,o=t.path,a=this.syncPointTree_.get(o),s=[];if(a&&("default"===t.queryIdentifier()||a.viewExistsForQuery(t))){var u=a.removeEventRegistration(t,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;s=u.events;var l=-1!==c.findIndex((function(e){return e.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(e,t){return t.hasCompleteView()}));if(l&&!h){var d=this.syncPointTree_.subtree(o);if(!d.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(d),p=0;p<f.length;++p){var g=f[p],m=g.getQuery(),v=this.createListenerForView_(g);this.listenProvider_.startListening(e.queryForListening_(m),this.tagForQuery_(m),v.hashFn,v.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(e.queryForListening_(t),null):c.forEach((function(t){var n=i.queryToTagMap_[e.makeQueryKey_(t)];i.listenProvider_.stopListening(e.queryForListening_(t),n)}))),this.removeTags_(c)}return s},e.prototype.calcCompleteEventCache=function(e,t){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(e,(function(t,n){var r=X.relativePath(t,e),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(e,r,t,!0)},e.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold((function(e,t,n){if(t&&t.hasCompleteView())return[t.getCompleteView()];var r=[];return t&&(r=t.getQueryViews()),v.forEach(n,(function(e,t){r=r.concat(t)})),r}))},e.prototype.removeTags_=function(t){for(var n=0;n<t.length;++n){var r=t[n];if(!r.getQueryParams().loadsAllData()){var i=e.makeQueryKey_(r),o=this.queryToTagMap_[i];delete this.queryToTagMap_[i],delete this.tagToQueryMap_["_"+o]}}},e.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},e.prototype.setupListener_=function(t,n){var r=t.path,i=this.tagForQuery_(t),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(e.queryForListening_(t),i,o.hashFn,o.onComplete),s=this.syncPointTree_.subtree(r);if(i)v.assert(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var r=[];return t&&(r=r.concat(t.getQueryViews().map((function(e){return e.getQuery()})))),v.forEach(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];this.listenProvider_.stopListening(e.queryForListening_(l),this.tagForQuery_(l))}return a},e.prototype.createListenerForView_=function(e){var t=this,n=e.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(e.getServerCache()||Ue.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?t.applyTaggedListenComplete(n.path,r):t.applyListenComplete(n.path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?n="Client doesn't have permission to access the desired data.":"unavailable"==e&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r}(e,n);return t.removeEventRegistration(n,null,i)}}},e.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},e.parseQueryKey_=function(e){var t=e.indexOf("$");return v.assert(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new X(e.substr(0,t))}},e.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap_["_"+e]},e.prototype.tagForQuery_=function(t){var n=e.makeQueryKey_(t);return v.safeGet(this.queryToTagMap_,n)},e.getNextQueryTag_=function(){return e.nextQueryTag_++},e.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);v.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,r,null)},e.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(X.Empty))},e.prototype.applyOperationHelper_=function(e,t,n,r){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,r);var i=t.get(X.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(X.Empty));var o=[],a=e.path.getFront(),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(e,r,n))),o},e.prototype.applyOperationDescendantsHelper_=function(e,t,n,r){var i=this,o=t.get(X.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(X.Empty));var a=[];return t.children.inorderTraversal((function(t,o){var s=n?n.getImmediateChild(t):null,u=r.child(t),c=e.operationForChild(t);c&&(a=a.concat(i.applyOperationDescendantsHelper_(c,o,s,u)))})),o&&(a=a.concat(o.applyOperation(e,r,n))),a},e.nextQueryTag_=1,e}(),Tt=function(){function e(){this.rootNode_=Ue.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}(),xt=function(){function e(e){this.app_=e}return e.prototype.getToken=function(e){return this.app_.INTERNAL.getToken(e).then(null,(function(e){return e&&"auth/token-not-initialized"===e.code?(D("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)}))},e.prototype.addTokenChangeListener=function(e){this.app_.INTERNAL.addAuthTokenListener(e)},e.prototype.removeTokenChangeListener=function(e){this.app_.INTERNAL.removeAuthTokenListener(e)},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';M(e+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},e}(),It=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),v.contains(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return v.deepCopy(this.counters_)},e}(),Pt=function(){function e(){}return e.getCollection=function(e){var t=e.toString();return this.collections_[t]||(this.collections_[t]=new It),this.collections_[t]},e.getOrCreateReporter=function(e,t){var n=e.toString();return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},e.collections_={},e.reporters_={},e}(),Ot=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=v.clone(e);return this.last_&&v.forEach(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},e}(),Dt=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Ot(e);var n=1e4+2e4*Math.random();Y(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.includeStat=function(e){this.statsToReport_[e]=!0},e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;v.forEach(t,(function(t,i){i>0&&v.contains(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Y(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}(),At=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n],i=r.getPath();null===t||i.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new Rt(i)),t.add(r)}t&&this.eventLists_.push(t)},e.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_((function(t){return t.equals(e)}))},e.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_((function(t){return t.contains(e)||e.contains(t)}))},e.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(e(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1)}t&&(this.eventLists_=[]),this.recursionDepth_--},e}(),Rt=function(){function e(e){this.path_=e,this.events_=[]}return e.prototype.add=function(e){this.events_.push(e)},e.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();I&&D("event: "+t.toString()),K(n)}}},e.prototype.getPath=function(){return this.path_},e}(),Nt=function(){function e(e){this.allowedEvents_=e,this.listeners_={},v.assert(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=this.listeners_[e].slice(),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){v.assert(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},e}(),Mt=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",t="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))}),!1),r}return m.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return v.assert("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(Nt),Ft=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||v.isMobileCordova()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}return m.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return v.assert("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(Nt),Lt=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&K((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},e}(),Vt=function(){function e(e,t,n,r){this.connId=e,this.repoInfo=t,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=A(e),this.stats_=Pt.getCollection(t),this.urlFn=function(e){return t.connectionURL("long_polling",e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Lt(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(v.isNodeSdk()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Ut((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=e[1],o=e[2];if(n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"==r)n.id=i,n.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(i,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=e[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(r,i)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),!v.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return e.forceAllow_||!e.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!("object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"==typeof Windows&&"object"==typeof Windows.UI)&&!v.isNodeSdk()},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=v.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=v.base64Encode(t),r=W(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!v.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=v.stringify(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),Ut=function(){function e(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new $e,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,v.isNodeSdk())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=E(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(s){D("frame writing exception"),s.stack&&D(s.stack),D(s)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||D("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var t=this;if(this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0))),v.isNodeSdk()&&this.myID){var n={disconn:"t"};n.id=this.myID,n.pw=this.myPW;var r=this.urlFn(n);e.nodeRestRequest(r)}var i=this.onDisconnect;i&&(this.onDisconnect=null,i())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.count()<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(t+=n,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t,1);var r=function(){n.outstandingRequests.remove(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))},e.prototype.addTag=function(e,t){var n=this;v.isNodeSdk()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){D("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},e}(),jt=null;"undefined"!=typeof MozWebSocket?jt=MozWebSocket:"undefined"!=typeof WebSocket&&(jt=WebSocket);var qt=function(){function e(t,n,r,i){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=A(this.connId),this.stats_=Pt.getCollection(n),this.connURL=e.connectionURL_(n,r,i)}return e.connectionURL_=function(e,t,n){var r={v:"5"};return!v.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),t&&(r.s=t),n&&(r.ls=n),e.connectionURL("websocket",r)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,C.set("previous_websocket_failure",!0);try{if(v.isNodeSdk()){var r={headers:{"User-Agent":"Firebase/5/"+g.SDK_VERSION+"/"+process.platform+"/"+(v.CONSTANTS.NODE_ADMIN?"AdminNode":"Node")}},i=process.env,o=0==this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;o&&(r.proxy={origin:o}),this.mySock=new jt(this.connURL,[],r)}else this.mySock=new jt(this.connURL)}catch(s){this.log_("Error instantiating WebSocket.");var a=s.message||s.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==jt&&!e.forceDisallow_},e.previouslyFailed=function(){return C.isInMemoryStorage||!0===C.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){C.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length==this.totalFrames){var t=this.frames.join("");this.frames=null;var n=v.jsonEval(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if(v.assert(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=v.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=W(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),Bt=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[Vt,qt]},enumerable:!0,configurable:!0}),e.prototype.initTransports_=function(t){var n=qt&&qt.isAvailable(),r=n&&!qt.previouslyFailed();if(t.webSocketOnly&&(n||M("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[qt];else{var i=this.transports_=[];z(e.ALL_TRANSPORTS,(function(e,t){t&&t.isAvailable()&&i.push(t)}))}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),Wt=function(){function e(e,t,n,r,i,o,a){this.id=e,this.repoInfo_=t,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=A("c:"+this.id+":"),this.transportManager_=new Bt(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Y((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!=t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){this.sendData_({t:"d",d:e})},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=q("t",e),n=q("d",e);if("c"==t)this.onSecondaryControl_(n);else{if("d"!=t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=q("t",e),n=q("d",e);"c"==t?this.onControl_(n):"d"==t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=q("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?R("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):R("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&M("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Y((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Y((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(C.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),zt=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),Ht=function(e){function t(n,r,i,o,a,s){var u=e.call(this)||this;if(u.repoInfo_=n,u.onDataUpdate_=r,u.onConnectStatus_=i,u.onServerInfoUpdate_=o,u.authTokenProvider_=a,u.authOverride_=s,u.id=t.nextPersistentConnectionId_++,u.log_=A("p:"+u.id+":"),u.interruptReasons_={},u.listens_={},u.outstandingPuts_=[],u.outstandingPutCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=1e3,u.maxReconnectDelay_=3e5,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,s&&!v.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return u.scheduleConnect_(0),Mt.getInstance().on("visible",u.onVisible_,u),-1===n.host.indexOf("fblocal")&&Ft.getInstance().on("online",u.onOnline_,u),u}return m.__extends(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(v.stringify(i)),v.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.listen=function(e,t,n,r){var i=e.queryIdentifier(),o=e.path.toString();this.log_("Listen called for "+o+" "+i),this.listens_[o]=this.listens_[o]||{},v.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),v.assert(!this.listens_[o][i],"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens_[o][i]=a,this.connected_&&this.sendListen_(a)},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};e.tag&&(a.q=r.queryObject(),a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;t.warnOnListenWarnings_(s,r),(n.listens_[i]&&n.listens_[i][o])===e&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,s))}))},t.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&v.contains(e,"w")){var n=v.safeGet(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',i=t.path.toString();M("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||v.isAdmin(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=v.isValidFormat(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},t.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),v.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){"ok"!==e.s&&t.log_("reportStats","Error sending stats: "+e.d)}))}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+v.stringify(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):R("Unrecognized action received from server: "+v.stringify(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;v.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+t.nextConnectionId_++,o=this,a=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,r())};this.realtime_={close:c,sendRequest:function(e){v.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)}};var l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(l).then((function(t){s?D("getToken() completed but was canceled"):(D("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new Wt(i,o.repoInfo_,e,n,r,(function(e){M(e+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")}),a))})).then(null,(function(e){o.log_("Failed to get token: "+e),s||(v.CONSTANTS.NODE_ADMIN&&M(e),c())}))}},t.prototype.interrupt=function(e){D("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){D("Resuming connection for reason: "+e),delete this.interruptReasons_[e],v.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map((function(e){return B(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new X(e).toString();return void 0!==this.listens_[r]?(n=this.listens_[r][t],delete this.listens_[r][t],0===v.getCount(this.listens_[r])&&delete this.listens_[r]):n=void 0,n},t.prototype.onAuthRevoked_=function(e,t){D("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e=this;this.tryAuth(),v.forEach(this.listens_,(function(t,n){v.forEach(n,(function(t,n){e.sendListen_(n)}))}));for(var t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){var n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}},t.prototype.sendConnectStats_=function(){var e={},t="js";v.CONSTANTS.NODE_ADMIN?t="admin_node":v.CONSTANTS.NODE_CLIENT&&(t="node"),e["sdk."+t+"."+g.SDK_VERSION.replace(/\./g,"-")]=1,v.isMobileCordova()?e["framework.cordova"]=1:v.isReactNative()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=Ft.getInstance().currentlyOnline();return v.isEmpty(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(zt),Gt=function(e){function t(t,n,r){var i=e.call(this)||this;return i.repoInfo_=t,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=A("p:rest:"),i.listens_={},i}return m.__extends(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(v.assert(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},t.prototype.listen=function(e,n,r,i){var o=this,a=e.path.toString();this.log_("Listen called for "+a+" "+e.queryIdentifier());var s=t.getListenId_(e,r),u={};this.listens_[s]=u;var c=e.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",c,(function(e,t){var n=t;404===e&&(n=null,e=null),null===e&&o.onDataUpdate_(a,n,!1,r),v.safeGet(o.listens_,s)===u&&i(e?401==e?"permission_denied":"rest_error:"+e:"ok",null)}))},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(t.auth=o);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+v.querystring(t);r.log_("Sending REST request for "+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){r.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);var e=null;if(s.status>=200&&s.status<300){try{e=v.jsonEval(s.responseText)}catch(t){M("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,e)}else 401!==s.status&&404!==s.status&&M("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()}))},t}(zt),Qt=function(){function e(e,t,n){var r=this;this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new At,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new et,this.persistentConnection_=null;var i=new xt(n);if(this.stats_=Pt.getCollection(e),t||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new Gt(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{v.stringify(o)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}this.persistentConnection_=new Ht(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener((function(e){r.server_.refreshAuthToken(e)})),this.statsReporter_=Pt.getOrCreateReporter(e,(function(){return new Dt(r.stats_,r.server_)})),this.transactions_init_(),this.infoData_=new Tt,this.infoSyncTree_=new Et({startListening:function(e,t,n,i){var o=[],a=r.infoData_.getNode(e.path);return a.isEmpty()||(o=r.infoSyncTree_.applyServerOverwrite(e.path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Et({startListening:function(e,t,n,i){return r.server_.listen(e,n,t,(function(t,n){var o=i(t,n);r.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,t){r.server_.unlisten(e,t)}})}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e.prototype.name=function(){return this.repoInfo_.namespace},e.prototype.serverTime=function(){var e=this.infoData_.getNode(new X(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e},e.prototype.generateServerValues=function(){return(e=(e={timestamp:this.serverTime()})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e},e.prototype.onDataUpdate_=function(e,t,n,r){this.dataUpdateCount++;var i=new X(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var o=[];if(r)if(n){var a=v.map(t,(function(e){return qe(e)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var s=qe(t);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)}else if(n){var u=v.map(t,(function(e){return qe(e)}));o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=qe(t);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var l=i;o.length>0&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},e.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},e.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},e.prototype.onServerInfoUpdate_=function(e){var t=this;z(e,(function(e,n){t.updateInfo_(n,e)}))},e.prototype.updateInfo_=function(e,t){var n=new X("/.info/"+e),r=qe(t);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},e.prototype.getNextWriteId_=function(){return this.nextWriteId_++},e.prototype.setWithPriority=function(e,t,n,r){var i=this;this.log_("set",{path:e.toString(),value:t,priority:n});var o=this.generateServerValues(),a=qe(t,n),s=nt(a,o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(e,s,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(e.toString(),a.val(!0),(function(t,n){var o="ok"===t;o||M("set at "+e+" failed: "+t);var a=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(e,a),i.callOnCompleteCallback(r,t,n)}));var l=this.abortTransactions_(e);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},e.prototype.update=function(e,t,n){var r=this;this.log_("update",{path:e.toString(),value:t});var i=!0,o=this.generateServerValues(),a={};if(v.forEach(t,(function(e,t){i=!1;var n=qe(t);a[e]=nt(n,o)})),i)D("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(e,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(e.toString(),t,(function(t,i){var o="ok"===t;o||M("update at "+e+" failed: "+t);var a=r.serverSyncTree_.ackUserWrite(s,!o),u=a.length>0?r.rerunTransactions_(e):e;r.eventQueue_.raiseEventsForChangedPath(u,a),r.callOnCompleteCallback(n,t,i)})),v.forEach(t,(function(t){var n=r.abortTransactions_(e.child(t));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(e,[])}},e.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_("onDisconnectEvents");var t=this.generateServerValues(),n=function(e,t){var n=new et;return e.forEachTree(new X(""),(function(e,r){n.remember(e,nt(r,t))})),n}(this.onDisconnect_,t),r=[];n.forEachTree(X.Empty,(function(t,n){r=r.concat(e.serverSyncTree_.applyServerOverwrite(t,n));var i=e.abortTransactions_(t);e.rerunTransactions_(i)})),this.onDisconnect_=new et,this.eventQueue_.raiseEventsForChangedPath(X.Empty,r)},e.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,r,i)}))},e.prototype.onDisconnectSet=function(e,t,n){var r=this,i=qe(t);this.server_.onDisconnectPut(e.toString(),i.val(!0),(function(t,o){"ok"===t&&r.onDisconnect_.remember(e,i),r.callOnCompleteCallback(n,t,o)}))},e.prototype.onDisconnectSetWithPriority=function(e,t,n,r){var i=this,o=qe(t,n);this.server_.onDisconnectPut(e.toString(),o.val(!0),(function(t,n){"ok"===t&&i.onDisconnect_.remember(e,o),i.callOnCompleteCallback(r,t,n)}))},e.prototype.onDisconnectUpdate=function(e,t,n){var r=this;if(v.isEmpty(t))return D("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(e.toString(),t,(function(i,o){"ok"===i&&v.forEach(t,(function(t,n){var i=qe(n);r.onDisconnect_.remember(e.child(t),i)})),r.callOnCompleteCallback(n,i,o)}))},e.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},e.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var t;e?(this.statsListener_||(this.statsListener_=new Ot(this.stats_)),t=this.statsListener_.get()):t=this.stats_.get();var n=Object.keys(t).reduce((function(e,t){return Math.max(t.length,e)}),0);v.forEach(t,(function(e,t){for(var r=e.length;r<n+2;r++)e+=" ";console.log(e+t)}))}},e.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},e.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),D.apply(void 0,[n].concat(e))},e.prototype.callOnCompleteCallback=function(e,t,n){e&&K((function(){if("ok"==t)e(null);else{var r=(t||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,e(o)}}))},Object.defineProperty(e.prototype,"database",{get:function(){return this.__database||(this.__database=new rn(this))},enumerable:!0,configurable:!0}),e}(),Kt=function(){function e(t){this.indexedFilter_=new ft(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new _e(t,n))||(n=Ue.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=Ue.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(Ue.EMPTY_NODE);var i=this;return t.forEachChild(xe,(function(e,t){i.matches(new _e(e,t))||(r=r.updateImmediateChild(e,Ue.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),Yt=function(){function e(e){this.rangedFilter_=new Kt(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new _e(t,n))||(n=Ue.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=Ue.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=Ue.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(Ue.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(e,t){return l(t,e)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)a=i.getNext(),!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,Ue.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(e,t){return a(t,e)}}else o=this.index_.getCompare();var s=e;v.assert(s.numChildren()==this.limit_,"");var u=new _e(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),d=r.getChildAfterChild(this.index_,c,this.reverse_);null!=d&&(d.name==t||s.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var f=null==d?1:o(d,u);if(l&&!n.isEmpty()&&f>=0)return null!=i&&i.trackChildChange(dt.childChangedChange(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(dt.childRemovedChange(t,h));var p=s.updateImmediateChild(t,Ue.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(dt.childAddedChange(d.name,d.node)),p.updateImmediateChild(d.name,d.node)):p}return n.isEmpty()?e:l&&o(c,u)>=0?(null!=i&&(i.trackChildChange(dt.childRemovedChange(c.name,c.node)),i.trackChildChange(dt.childAddedChange(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,Ue.EMPTY_NODE)):e},e}(),Xt=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xe}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},e.prototype.getIndexStartValue=function(){return v.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return v.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:L},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return v.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return v.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:V},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return v.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.copy_=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e.prototype.limit=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="",t},e.prototype.limitToFirst=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},e.prototype.limitToLast=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},e.prototype.startAt=function(e,t){var n=this.copy_();return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n},e.prototype.endAt=function(e,t){var n=this.copy_();return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,void 0!==t?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n},e.prototype.orderBy=function(e){var t=this.copy_();return t.index_=e,t},e.prototype.getQueryObject=function(){var t=e.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[t.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),n[t.VIEW_FROM]=r}return this.index_!==xe&&(n[t.INDEX]=this.index_.toString()),n},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==xe},e.prototype.getNodeFilter=function(){return this.loadsAllData()?new ft(this.getIndex()):this.hasLimit()?new Yt(this):new Kt(this)},e.prototype.toRestQueryStringParameters=function(){var t,n=e.REST_QUERY_CONSTANTS_,r={};return this.isDefault()?r:(this.index_===xe?t=n.PRIORITY_INDEX:this.index_===He?t=n.VALUE_INDEX:this.index_===ke?t=n.KEY_INDEX:(v.assert(this.index_ instanceof Ge,"Unrecognized index type!"),t=this.index_.toString()),r[n.ORDER_BY]=v.stringify(t),this.startSet_&&(r[n.START_AT]=v.stringify(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+v.stringify(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=v.stringify(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+v.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_),r)},e.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},e.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},e.DEFAULT=new e,e}(),Jt=function(e){function t(t,n){if(!(t instanceof Qt))throw new Error("new Reference() no longer supported - use app.database().");return e.call(this,t,n,Xt.DEFAULT,!1)||this}return m.__extends(t,e),t.prototype.getKey=function(){return v.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},t.prototype.child=function(e){return v.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof e?e=String(e):e instanceof X||(null===this.path.getFront()?fe("Reference.child",1,e,!1):de("Reference.child",1,e,!1)),new t(this.repo,this.path.child(e))},t.prototype.getParent=function(){v.validateArgCount("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new t(this.repo,e)},t.prototype.getRoot=function(){v.validateArgCount("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},t.prototype.databaseProp=function(){return this.repo.database},t.prototype.set=function(e,t){v.validateArgCount("Reference.set",1,2,arguments.length),pe("Reference.set",this.path),ae("Reference.set",1,e,this.path,!1),v.validateCallback("Reference.set",2,t,!0);var n=new v.Deferred;return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},t.prototype.update=function(e,t){if(v.validateArgCount("Reference.update",1,2,arguments.length),pe("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,M("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ue("Reference.update",1,e,this.path,!1),v.validateCallback("Reference.update",2,t,!0);var i=new v.Deferred;return this.repo.update(this.path,e,i.wrapCallback(t)),i.promise},t.prototype.setWithPriority=function(e,t,n){if(v.validateArgCount("Reference.setWithPriority",2,3,arguments.length),pe("Reference.setWithPriority",this.path),ae("Reference.setWithPriority",1,e,this.path,!1),ce("Reference.setWithPriority",2,t,!1),v.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new v.Deferred;return this.repo.setWithPriority(this.path,e,t,r.wrapCallback(n)),r.promise},t.prototype.remove=function(e){return v.validateArgCount("Reference.remove",0,1,arguments.length),pe("Reference.remove",this.path),v.validateCallback("Reference.remove",1,e,!0),this.set(null,e)},t.prototype.transaction=function(e,t,n){if(v.validateArgCount("Reference.transaction",1,3,arguments.length),pe("Reference.transaction",this.path),v.validateCallback("Reference.transaction",1,e,!1),v.validateCallback("Reference.transaction",2,t,!0),me("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new v.Deferred;"function"==typeof t&&r.promise.catch((function(){}));var i=function(e,n,i){e?r.reject(e):r.resolve(new ye(n,i)),"function"==typeof t&&t(e,n,i)};return this.repo.startTransaction(this.path,e,i,n),r.promise},t.prototype.setPriority=function(e,t){v.validateArgCount("Reference.setPriority",1,2,arguments.length),pe("Reference.setPriority",this.path),ce("Reference.setPriority",1,e,!1),v.validateCallback("Reference.setPriority",2,t,!0);var n=new v.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),e,null,n.wrapCallback(t)),n.promise},t.prototype.push=function(e,t){v.validateArgCount("Reference.push",0,2,arguments.length),pe("Reference.push",this.path),ae("Reference.push",1,e,this.path,!0),v.validateCallback("Reference.push",2,t,!0);var n,r=this.repo.serverTime(),i=be(r),o=this.child(i),a=this.child(i);return n=null!=e?o.set(e,t).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof t&&n.catch((function(){})),o},t.prototype.onDisconnect=function(){return pe("Reference.onDisconnect",this.path),new ve(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),t}(Ze);Ze.__referenceConstructor=Jt,wt.__referenceConstructor=Jt;var Zt=function(){this.children={},this.childCount=0,this.value=null},$t=function(){function e(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=new Zt),this.name_=e,this.parent_=t,this.node_=n}return e.prototype.subTree=function(t){for(var n,r=t instanceof X?t:new X(t),i=this;null!==(n=r.getFront());)i=new e(n,i,v.safeGet(i.node_.children,n)||new Zt),r=r.popFront();return i},e.prototype.getValue=function(){return this.node_.value},e.prototype.setValue=function(e){v.assert(void 0!==e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},e.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},e.prototype.hasChildren=function(){return this.node_.childCount>0},e.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},e.prototype.forEachChild=function(t){var n=this;v.forEach(this.node_.children,(function(r,i){t(new e(r,n,i))}))},e.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild((function(t){t.forEachDescendant(e,!0,n)})),t&&n&&e(this)},e.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},e.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild((function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)}))},e.prototype.path=function(){return new X(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},e.prototype.name=function(){return this.name_},e.prototype.parent=function(){return this.parent_},e.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},e.prototype.updateChild_=function(e,t){var n=t.isEmpty(),r=v.contains(this.node_.children,e);n&&r?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},e}(),en=function(e){return e[e.RUN=0]="RUN",e[e.SENT=1]="SENT",e[e.COMPLETED=2]="COMPLETED",e[e.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",e[e.NEEDS_ABORT=4]="NEEDS_ABORT",e}({});Qt.MAX_TRANSACTION_RETRIES_=25,Qt.prototype.transactions_init_=function(){this.transactionQueueTree_=new $t},Qt.prototype.startTransaction=function(e,t,n,r){this.log_("transaction on "+e);var i=function(){},o=new Jt(this,e);o.on("value",i);var a={path:e,update:t,onComplete:n,status:null,order:E(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=this.getLatestState_(e);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var c=new Qe(a.currentInputSnapshot,new Jt(this,a.path),xe);a.onComplete(null,!1,c)}}else{se("transaction failed: Data returned ",u,a.path),a.status=en.RUN;var l=this.transactionQueueTree_.subTree(e),h=l.getValue()||[];h.push(a),l.setValue(h);var d=void 0;"object"==typeof u&&null!==u&&v.contains(u,".priority")?(d=v.safeGet(u,".priority"),v.assert(oe(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(e)||Ue.EMPTY_NODE).getPriority().val(),d=d;var f=this.generateServerValues(),p=qe(u,d),g=nt(p,f);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(e,g,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,m),this.sendReadyTransactions_()}},Qt.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||Ue.EMPTY_NODE},Qt.prototype.sendReadyTransactions_=function(e){var t=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);v.assert(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return e.status===en.RUN}))&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild((function(e){t.sendReadyTransactions_(e)}))},Qt.prototype.sendTransactionQueue_=function(e,t){for(var n=this,r=t.map((function(e){return e.currentWriteId})),i=this.getLatestState_(e,r),o=i,a=i.hash(),s=0;s<t.length;s++){var u=t[s];v.assert(u.status===en.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=en.SENT,u.retryCount++;var c=X.relativePath(e,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=e;this.server_.put(h.toString(),l,(function(r){n.log_("transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<t.length;a++){if(t[a].status=en.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(t[a].currentWriteId)),t[a].onComplete){var s=t[a].currentOutputSnapshotResolved,u=new Jt(n,t[a].path),c=new Qe(s,u,xe);o.push(t[a].onComplete.bind(null,null,!0,c))}t[a].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(e)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(e,i),a=0;a<o.length;a++)K(o[a])}else{if("datastale"===r)for(a=0;a<t.length;a++)t[a].status=t[a].status===en.SENT_NEEDS_ABORT?en.NEEDS_ABORT:en.RUN;else for(M("transaction at "+h.toString()+" failed: "+r),a=0;a<t.length;a++)t[a].status=en.NEEDS_ABORT,t[a].abortReason=r;n.rerunTransactions_(e)}}),a)},Qt.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),r=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(r,n),n},Qt.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n=[],r=[],i=e.filter((function(e){return e.status===en.RUN})).map((function(e){return e.currentWriteId})),o=0;o<e.length;o++){var a=e[o],s=X.relativePath(t,a.path),u=!1,c=void 0;if(v.assert(null!==s,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===en.NEEDS_ABORT)u=!0,c=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===en.RUN)if(a.retryCount>=Qt.MAX_TRANSACTION_RETRIES_)u=!0,c="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var l=this.getLatestState_(a.path,i);a.currentInputSnapshot=l;var h=e[o].update(l.val());if(void 0!==h){se("transaction failed: Data returned ",h,a.path);var d=qe(h);"object"==typeof h&&null!=h&&v.contains(h,".priority")||(d=d.updatePriority(l.getPriority()));var f=a.currentWriteId,p=this.generateServerValues(),g=nt(d,p);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(f),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,g,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(f,!0))}else u=!0,c="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,r),r=[],u&&(e[o].status=en.COMPLETED,setTimeout(e[o].unwatcher,Math.floor(0)),e[o].onComplete))if("nodata"===c){var m=new Jt(this,e[o].path),y=new Qe(e[o].currentInputSnapshot,m,xe);n.push(e[o].onComplete.bind(null,null,!1,y))}else n.push(e[o].onComplete.bind(null,new Error(c),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),o=0;o<n.length;o++)K(n[o]);this.sendReadyTransactions_()}},Qt.prototype.getAncestorTransactionNode_=function(e){for(var t,n=this.transactionQueueTree_;null!==(t=e.getFront())&&null===n.getValue();)n=n.subTree(t),e=e.popFront();return n},Qt.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort((function(e,t){return e.order-t.order})),t},Qt.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,r=e.getValue();if(null!==r)for(var i=0;i<r.length;i++)t.push(r[i]);e.forEachChild((function(e){n.aggregateTransactionQueuesForNode_(e,t)}))},Qt.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==en.COMPLETED&&(n[r]=n[i],r++);n.length=r,e.setValue(n.length>0?n:null)}e.forEachChild((function(e){t.pruneCompletedTransactionsBelowNode_(e)}))},Qt.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),r=this.transactionQueueTree_.subTree(e);return r.forEachAncestor((function(e){t.abortTransactionsOnNode_(e)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(e){t.abortTransactionsOnNode_(e)})),n},Qt.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],r=[],i=-1,o=0;o<t.length;o++)t[o].status===en.SENT_NEEDS_ABORT||(t[o].status===en.SENT?(v.assert(i===o-1,"All SENT items should be at beginning of queue."),i=o,t[o].status=en.SENT_NEEDS_ABORT,t[o].abortReason="set"):(v.assert(t[o].status===en.RUN,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(t[o].currentWriteId,!0)),t[o].onComplete&&n.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?e.setValue(null):t.length=i+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),r),o=0;o<n.length;o++)K(n[o])}};var tn,nn=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return tn||(tn=new e),tn},e.prototype.interrupt=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].interrupt()},e.prototype.resume=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].resume()},e.prototype.databaseFromApp=function(e,t){var n=t||e.options.databaseURL;void 0===n&&N("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var r=$(n),i=r.repoInfo;return ge("Invalid Firebase Database URL",1,r),r.path.isEmpty()||N("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(i,e).database},e.prototype.deleteRepo=function(e){var t=v.safeGet(this.repos_,e.app.name);t&&v.safeGet(t,e.repoInfo_.toURLString())===e||N("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete t[e.repoInfo_.toURLString()]},e.prototype.createRepo=function(e,t){var n=v.safeGet(this.repos_,t.name);n||(this.repos_[t.name]=n={});var r=v.safeGet(n,e.toURLString());return r&&N("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new Qt(e,this.useRestClient_,t),n[e.toURLString()]=r,r},e.prototype.forceRestClient=function(e){this.useRestClient_=e},e}(),rn=function(){function e(e){this.repo_=e,e instanceof Qt||N("Don't call new Database() directly - please use firebase.database()."),this.root_=new Jt(e,X.Empty),this.INTERNAL=new on(this)}return Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),e.prototype.ref=function(e){return this.checkDeleted_("ref"),v.validateArgCount("database.ref",0,1,arguments.length),e instanceof Jt?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_},e.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),v.validateArgCount(t,1,1,arguments.length);var n=$(e);ge(t,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&N(t+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},e.prototype.checkDeleted_=function(e){null===this.repo_&&N("Cannot call "+e+" on a deleted database.")},e.prototype.goOffline=function(){v.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},e.prototype.goOnline=function(){v.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},e.ServerValue={TIMESTAMP:{".sv":"timestamp"}},e}(),on=function(){function e(e){this.database=e}return e.prototype.delete=function(){return m.__awaiter(this,void 0,void 0,(function(){return m.__generator(this,(function(e){return this.database.checkDeleted_("delete"),nn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},e}(),an=Object.freeze({forceLongPolling:function(){qt.forceDisallow(),Vt.forceAllow()},forceWebSockets:function(){Vt.forceDisallow()},isWebSocketsAvailable:function(){return qt.isAvailable()},setSecurityDebugCallback:function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){e.repo.stats(t)},statsIncrementCounter:function(e,t){e.repo.statsIncrementCounter(t)},dataUpdateCount:function(e){return e.repo.dataUpdateCount},interceptServerData:function(e,t){return e.repo.interceptServerData_(t)}}),sn=Ht;Ht.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Ht.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var un=Object.freeze({DataConnection:sn,RealTimeConnection:Wt,hijackHash:function(e){var t=Ht.prototype.put;return Ht.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){Ht.prototype.put=t}},ConnectionTarget:Z,queryIdentifier:function(e){return e.queryIdentifier()},listens:function(e){return e.repo.persistentConnection_.listens_},forceRestClient:function(e){nn.getInstance().forceRestClient(e)}}),cn=rn.ServerValue;function ln(t){var n=t.INTERNAL.registerService("database",(function(e,t,n){return nn.getInstance().databaseFromApp(e,n)}),{Reference:Jt,Query:Ze,Database:rn,DataSnapshot:Qe,enableLogging:O,INTERNAL:an,ServerValue:cn,TEST_ACCESS:un},null,!0);v.isNodeSdk()&&(e.exports=n)}ln(g),t.registerDatabase=ln,t.Database=rn,t.Query=Ze,t.Reference=Jt,t.enableLogging=O,t.ServerValue=cn,t.DataSnapshot=Qe,t.OnDisconnect=ve},OwPH:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},Oyqw:function(e,t,n){var r=n("U/+K")("meta"),i=n("Zp05"),o=n("g0Mr"),a=n("ytDL").f,s=0,u=Object.isExtensible||function(){return!0},c=!n("61rj")((function(){return u(Object.preventExtensions({}))})),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},h=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return c&&h.NEED&&u(e)&&!o(e,r)&&l(e),e}}},PfMj:function(e,t,n){var r=n("Zp05"),i=n("gYfK"),o=n("jZgK")("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},QEVv:function(e,t,n){var r=n("gYfK"),i=n("jZgK")("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},"Qtk+":function(e,t){e.exports={}},"Rbo/":function(e,t,n){var r=n("ytDL"),i=n("UFGs"),o=n("9Aud");e.exports=n("lIov")?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},TDVo:function(e,t,n){var r=n("qtiw"),i=n("GYIZ"),o=n("g0Mr"),a=n("U/+K")("src"),s=n("lg3l"),u=(""+s).split("toString");n("Autd").inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(c&&(o(n,a)||i(n,a,e[t]?""+e[t]:u.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},"TGP+":function(e,t,n){n("FTyF"),e.exports=n("Autd").Object.assign},"Td+X":function(e,t,n){"use strict";var r=n("8L4g"),i=n("I1rR"),o=n("TDVo"),a=n("GYIZ"),s=n("Qtk+"),u=n("JiIP"),c=n("A+3H"),l=n("a5Eg"),h=n("jZgK")("iterator"),d=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,t,n,p,g,m,v){u(n,t,p);var y,b,_,w=function(e){if(!d&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},C=t+" Iterator",k="values"==g,S=!1,E=e.prototype,T=E[h]||E["@@iterator"]||g&&E[g],x=T||w(g),I=g?k?w("entries"):x:void 0,P="Array"==t&&E.entries||T;if(P&&(_=l(P.call(new e)))!==Object.prototype&&_.next&&(c(_,C,!0),r||"function"==typeof _[h]||a(_,h,f)),k&&T&&"values"!==T.name&&(S=!0,x=function(){return T.call(this)}),r&&!v||!d&&!S&&E[h]||a(E,h,x),s[t]=x,s[C]=f,g)if(y={values:k?x:w("values"),keys:m?x:w("keys"),entries:I},v)for(b in y)b in E||o(E,b,y[b]);else i(i.P+i.F*(d||S),t,y);return y}},"U/+K":function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},U8mZ:function(e,t,n){"use strict";var r=n("dNFx"),i=n("OwPH"),o=n("Qtk+"),a=n("rSCU");e.exports=n("Td+X")(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},UFGs:function(e,t,n){var r=n("Zp05");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},UOZm:function(e,t){t.f={}.propertyIsEnumerable},Uv6z:function(e,t){!function(e){"use strict";if(!e.fetch){var t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),i="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},u=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};p.prototype.append=function(e,t){e=h(e),t=d(t);var n=this.map[e];this.map[e]=n?n+","+t:t},p.prototype.delete=function(e){delete this.map[h(e)]},p.prototype.get=function(e){return e=h(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(h(e))},p.prototype.set=function(e,t){this.map[h(e)]=d(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),f(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),f(e)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},b.call(_.prototype),b.call(C.prototype),C.prototype.clone=function(){return new C(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},C.error=function(){var e=new C(null,{status:0,statusText:""});return e.type="error",e};var l=[301,302,303,307,308];C.redirect=function(e,t){if(-1===l.indexOf(t))throw new RangeError("Invalid status code");return new C(null,{status:t,headers:{location:e}})},e.Headers=p,e.Request=_,e.Response=C,e.fetch=function(e,t){return new Promise((function(n,i){var o=new _(e,t),a=new XMLHttpRequest;a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL"),n(new C("response"in a?a.response:a.responseText,r))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&r&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),a.send(void 0===o._bodyInit?null:o._bodyInit)}))},e.fetch.polyfill=!0}function h(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function g(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function v(e){var t=new FileReader,n=m(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(r&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(i&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(o&&r&&s(e))this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(e)&&!u(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=y(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var e,t,n,r=g(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=m(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function _(e,t){var n,r,i=(t=t||{}).body;if(e instanceof _){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),c.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function C(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},VPEh:function(e,t,n){n("6d8W"),e.exports=n("Autd").Array.findIndex},VqlW:function(e,t,n){var r=n("sQ1z"),i=n("8ouO");e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},"W+Pj":function(e,t,n){n("KBN1"),e.exports=n("Autd").String.startsWith},ZhmJ:function(e,t,n){n("u00B")("observable")},Zp05:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},a5Eg:function(e,t,n){var r=n("g0Mr"),i=n("j/6h"),o=n("ifzb")("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},"b/Kf":function(e,t,n){var r=n("rSCU"),i=n("c0bx"),o=n("jPdx");e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},bKVB:function(e,t,n){var r=n("UOZm"),i=n("xGvh"),o=n("rSCU"),a=n("IiNp"),s=n("g0Mr"),u=n("q098"),c=Object.getOwnPropertyDescriptor;t.f=n("lIov")?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(n){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},c0bx:function(e,t,n){var r=n("sQ1z"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},crnd:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="crnd"},dNFx:function(e,t,n){var r=n("jZgK")("unscopables"),i=Array.prototype;null==i[r]&&n("GYIZ")(i,r,{}),e.exports=function(e){i[r][e]=!0}},eKN1:function(e,t,n){t.f=n("jZgK")},ezrC:function(e,t,n){var r=n("Autd"),i=n("qtiw"),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n("8L4g")?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})},flRy:function(e,t,n){var r=n("PfMj"),i=n("8ouO");e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},g0Mr:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},gHGA:function(e,t,n){"use strict";n.r(t);var r=n("wj3C"),i=n.n(r),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function a(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function u(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function c(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}var h,d=n("zVF4");n.d(t,"registerMessaging",(function(){return R})),n.d(t,"isSupported",(function(){return N}));var f=((h={})["only-available-in-window"]="This method is available in a Window context.",h["only-available-in-sw"]="This method is available in a service worker context.",h["should-be-overriden"]="This method should be overriden by extended classes.",h["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",h["permission-default"]="The required permissions were not granted and dismissed instead.",h["permission-blocked"]="The required permissions were not granted and blocked instead.",h["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",h["notifications-blocked"]="Notifications have been blocked.",h["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",h["sw-registration-expected"]="A service worker registration was the expected input.",h["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",h["invalid-saved-token"]="Unable to access details of the saved token.",h["sw-reg-redundant"]="The service worker being used for push was made redundant.",h["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$message}",h["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",h["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",h["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$message}",h["token-update-failed"]="A problem occured while updating the user from FCM: {$message}",h["token-update-no-token"]="FCM returned no token when updating the user to push.",h["use-sw-before-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",h["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",h["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",h["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",h["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",h["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",h["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$message}",h["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",h["failed-to-delete-token"]="Unable to delete the currently saved token.",h["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",h["incorrect-gcm-sender-id"]="Please change your web app manifest's 'gcm_sender_id' value to '103953800507' to use Firebase messaging.",h["bad-scope"]="The service worker scope must be a string with at least one character.",h["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",h["bad-subscription"]="The subscription must be a valid PushSubscription.",h["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",h["bad-push-set"]="The FCM push set used for storage / lookup was not not a valid push set string.",h["failed-delete-vapid-key"]="The VAPID key could not be deleted.",h["invalid-public-vapid-key"]="The public VAPID key must be a string.",h["public-vapid-key-decryption-failed"]="The public VAPID key did not equal 65 bytes when decrypted.",h),p=new d.ErrorFactory("messaging","Messaging",f),g=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),m="https://fcm.googleapis.com",v=function(e){return e.TYPE_OF_MSG="firebase-messaging-msg-type",e.DATA="firebase-messaging-msg-data",e}({}),y=function(e){return e.PUSH_MSG_RECEIVED="push-msg-received",e.NOTIFICATION_CLICKED="notification-clicked",e}({});function b(e,t){if(null==e||null==t)return!1;if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),i=0;i<e.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}function _(e){return function(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}(t)))}(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var w=function(){function e(){}return e.prototype.getToken=function(e,t,n){return u(this,void 0,void 0,(function(){var r,i,o,a,s,u,l;return c(this,(function(c){switch(c.label){case 0:r=_(t.getKey("p256dh")),i=_(t.getKey("auth")),o="authorized_entity="+e+"&endpoint="+t.endpoint+"&encryption_key="+r+"&encryption_auth="+i,b(n.buffer,g.buffer)||(a=_(n),o+="&application_pub_key="+a),(s=new Headers).append("Content-Type","application/x-www-form-urlencoded"),u={method:"POST",headers:s,body:o},c.label=1;case 1:return c.trys.push([1,4,,5]),[4,fetch(m+"/fcm/connect/subscribe",u)];case 2:return[4,c.sent().json()];case 3:return l=c.sent(),[3,5];case 4:throw c.sent(),p.create("token-subscribe-failed");case 5:if(l.error)throw p.create("token-subscribe-failed",{message:l.error.message});if(!l.token)throw p.create("token-subscribe-no-token");if(!l.pushSet)throw p.create("token-subscribe-no-push-set");return[2,{token:l.token,pushSet:l.pushSet}]}}))}))},e.prototype.updateToken=function(e,t,n,r,i){return u(this,void 0,void 0,(function(){var o,a,s,u,l,h,d;return c(this,(function(c){switch(c.label){case 0:o=_(r.getKey("p256dh")),a=_(r.getKey("auth")),s="push_set="+n+"&token="+t+"&authorized_entity="+e+"&endpoint="+r.endpoint+"&encryption_key="+o+"&encryption_auth="+a,b(i.buffer,g.buffer)||(u=_(i),s+="&application_pub_key="+u),(l=new Headers).append("Content-Type","application/x-www-form-urlencoded"),h={method:"POST",headers:l,body:s},c.label=1;case 1:return c.trys.push([1,4,,5]),[4,fetch(m+"/fcm/connect/subscribe",h)];case 2:return[4,c.sent().json()];case 3:return d=c.sent(),[3,5];case 4:throw c.sent(),p.create("token-update-failed");case 5:if(d.error)throw p.create("token-update-failed",{message:d.error.message});if(!d.token)throw p.create("token-update-no-token");return[2,d.token]}}))}))},e.prototype.deleteToken=function(e,t,n){return u(this,void 0,void 0,(function(){var r,i,o,a;return c(this,(function(s){switch(s.label){case 0:r="authorized_entity="+e+"&token="+t+"&pushSet="+n,(i=new Headers).append("Content-Type","application/x-www-form-urlencoded"),o={method:"POST",headers:i,body:r},s.label=1;case 1:return s.trys.push([1,4,,5]),[4,fetch(m+"/fcm/connect/unsubscribe",o)];case 2:return[4,s.sent().json()];case 3:if((a=s.sent()).error)throw p.create("token-unsubscribe-failed",{message:a.error.message});return[3,5];case 4:throw s.sent(),p.create("token-unsubscribe-failed");case 5:return[2]}}))}))},e}();function C(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var k=function(){function e(){this.dbPromise=null}return e.prototype.get=function(e){return this.createTransaction((function(t){return t.get(e)}))},e.prototype.getIndex=function(e,t){return this.createTransaction((function(n){return n.index(e).get(t)}))},e.prototype.put=function(e){return this.createTransaction((function(t){return t.put(e)}),"readwrite")},e.prototype.delete=function(e){return this.createTransaction((function(t){return t.delete(e)}),"readwrite")},e.prototype.closeDatabase=function(){return u(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return this.dbPromise?[4,this.dbPromise]:[3,2];case 1:e.sent().close(),this.dbPromise=null,e.label=2;case 2:return[2]}}))}))},e.prototype.createTransaction=function(e,t){return void 0===t&&(t="readonly"),u(this,void 0,void 0,(function(){var n,r,i,o;return c(this,(function(a){switch(a.label){case 0:return[4,this.getDb()];case 1:return n=a.sent(),r=n.transaction(this.objectStoreName,t),i=r.objectStore(this.objectStoreName),[4,S(e(i))];case 2:return o=a.sent(),[2,new Promise((function(e,t){r.oncomplete=function(){e(o)},r.onerror=function(){t(r.error)}}))]}}))}))},e.prototype.getDb=function(){var e=this;return this.dbPromise||(this.dbPromise=new Promise((function(t,n){var r=indexedDB.open(e.dbName,e.dbVersion);r.onsuccess=function(){t(r.result)},r.onerror=function(){e.dbPromise=null,n(r.error)},r.onupgradeneeded=function(t){return e.onDbUpgrade(r,t)}}))),this.dbPromise},e}();function S(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}var E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_token_details_db",t.dbVersion=3,t.objectStoreName="fcm_token_object_Store",t}return a(t,e),t.prototype.onDbUpgrade=function(e,t){var n=e.result;switch(t.oldVersion){case 0:(r=n.createObjectStore(this.objectStoreName,{keyPath:"swScope"})).createIndex("fcmSenderId","fcmSenderId",{unique:!1}),r.createIndex("fcmToken","fcmToken",{unique:!0});case 1:!function(){var e=indexedDB.open("undefined");e.onerror=function(e){},e.onsuccess=function(t){!function(e){if(e.objectStoreNames.contains("fcm_token_object_Store")){var t=e.transaction("fcm_token_object_Store").objectStore("fcm_token_object_Store"),n=new w,r=t.openCursor();r.onerror=function(e){console.warn("Unable to cleanup old IDB.",e)},r.onsuccess=function(){var t=r.result;if(t){var i=t.value;n.deleteToken(i.fcmSenderId,i.fcmToken,i.fcmPushSet),t.continue()}else e.close(),indexedDB.deleteDatabase("undefined")}}}(e.result)}}();case 2:var r,i=(r=e.transaction.objectStore(this.objectStoreName)).openCursor();i.onsuccess=function(){var e=i.result;if(e){var t=e.value,n=s({},t);t.createTime||(n.createTime=Date.now()),"string"==typeof t.vapidKey&&(n.vapidKey=C(t.vapidKey)),"string"==typeof t.auth&&(n.auth=C(t.auth).buffer),"string"==typeof t.auth&&(n.p256dh=C(t.p256dh).buffer),e.update(n),e.continue()}}}},t.prototype.getTokenDetailsFromToken=function(e){return u(this,void 0,void 0,(function(){return c(this,(function(t){if(!e)throw p.create("bad-token");return T({fcmToken:e}),[2,this.getIndex("fcmToken",e)]}))}))},t.prototype.getTokenDetailsFromSWScope=function(e){return u(this,void 0,void 0,(function(){return c(this,(function(t){if(!e)throw p.create("bad-scope");return T({swScope:e}),[2,this.get(e)]}))}))},t.prototype.saveTokenDetails=function(e){return u(this,void 0,void 0,(function(){return c(this,(function(t){if(!e.swScope)throw p.create("bad-scope");if(!e.vapidKey)throw p.create("bad-vapid-key");if(!e.endpoint||!e.auth||!e.p256dh)throw p.create("bad-subscription");if(!e.fcmSenderId)throw p.create("bad-sender-id");if(!e.fcmToken)throw p.create("bad-token");if(!e.fcmPushSet)throw p.create("bad-push-set");return T(e),[2,this.put(e)]}))}))},t.prototype.deleteToken=function(e){return u(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return"string"!=typeof e||0===e.length?[2,Promise.reject(p.create("invalid-delete-token"))]:[4,this.getTokenDetailsFromToken(e)];case 1:if(!(t=n.sent()))throw p.create("delete-token-not-found");return[4,this.delete(t.swScope)];case 2:return n.sent(),[2,t]}}))}))},t}(k);function T(e){if(e.fcmToken&&("string"!=typeof e.fcmToken||0===e.fcmToken.length))throw p.create("bad-token");if(e.swScope&&("string"!=typeof e.swScope||0===e.swScope.length))throw p.create("bad-scope");if(e.vapidKey&&(!(e.vapidKey instanceof Uint8Array)||65!==e.vapidKey.length))throw p.create("bad-vapid-key");if(e.endpoint&&("string"!=typeof e.endpoint||0===e.endpoint.length))throw p.create("bad-subscription");if(e.auth&&!(e.auth instanceof ArrayBuffer))throw p.create("bad-subscription");if(e.p256dh&&!(e.p256dh instanceof ArrayBuffer))throw p.create("bad-subscription");if(e.fcmSenderId&&("string"!=typeof e.fcmSenderId||0===e.fcmSenderId.length))throw p.create("bad-sender-id");if(e.fcmPushSet&&("string"!=typeof e.fcmPushSet||0===e.fcmPushSet.length))throw p.create("bad-push-set")}var x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dbName="fcm_vapid_details_db",t.dbVersion=1,t.objectStoreName="fcm_vapid_object_Store",t}return a(t,e),t.prototype.onDbUpgrade=function(e){e.result.createObjectStore(this.objectStoreName,{keyPath:"swScope"})},t.prototype.getVapidFromSWScope=function(e){return u(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:if("string"!=typeof e||0===e.length)throw p.create("bad-scope");return[4,this.get(e)];case 1:return[2,(t=n.sent())?t.vapidKey:void 0]}}))}))},t.prototype.saveVapidDetails=function(e,t){return u(this,void 0,void 0,(function(){return c(this,(function(n){if("string"!=typeof e||0===e.length)throw p.create("bad-scope");if(null===t||65!==t.length)throw p.create("bad-vapid-key");return[2,this.put({swScope:e,vapidKey:t})]}))}))},t.prototype.deleteVapidDetails=function(e){return u(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return[4,this.getVapidFromSWScope(e)];case 1:if(!(t=n.sent()))throw p.create("delete-scope-not-found");return[4,this.delete(e)];case 2:return n.sent(),[2,t]}}))}))},t}(k),I=function(){function e(e){var t=this;if(!e.options.messagingSenderId||"string"!=typeof e.options.messagingSenderId)throw p.create("bad-sender-id");this.messagingSenderId=e.options.messagingSenderId,this.tokenDetailsModel=new E,this.vapidDetailsModel=new x,this.iidModel=new w,this.app=e,this.INTERNAL={delete:function(){return t.delete()}}}return e.prototype.getToken=function(){return u(this,void 0,void 0,(function(){var e,t,n,r,i;return c(this,(function(o){switch(o.label){case 0:if("denied"===(e=this.getNotificationPermission_()))throw p.create("notifications-blocked");return"granted"!==e?[2,null]:[4,this.getSWRegistration_()];case 1:return t=o.sent(),[4,this.getPublicVapidKey_()];case 2:return n=o.sent(),[4,this.getPushSubscription(t,n)];case 3:return r=o.sent(),[4,this.tokenDetailsModel.getTokenDetailsFromSWScope(t.scope)];case 4:return(i=o.sent())?[2,this.manageExistingToken(t,r,n,i)]:[2,this.getNewToken(t,r,n)]}}))}))},e.prototype.manageExistingToken=function(e,t,n,r){return u(this,void 0,void 0,(function(){return c(this,(function(i){switch(i.label){case 0:return function(e,t,n){if(!n.vapidKey||!b(t.buffer,n.vapidKey.buffer))return!1;var r=e.endpoint===n.endpoint,i=b(e.getKey("auth"),n.auth),o=b(e.getKey("p256dh"),n.p256dh);return r&&i&&o}(t,n,r)?Date.now()<r.createTime+6048e5?[2,r.fcmToken]:[2,this.updateToken(e,t,n,r)]:[4,this.deleteTokenFromDB(r.fcmToken)];case 1:return i.sent(),[2,this.getNewToken(e,t,n)]}}))}))},e.prototype.updateToken=function(e,t,n,r){return u(this,void 0,void 0,(function(){var i,o,a;return c(this,(function(s){switch(s.label){case 0:return s.trys.push([0,4,,6]),[4,this.iidModel.updateToken(this.messagingSenderId,r.fcmToken,r.fcmPushSet,t,n)];case 1:return i=s.sent(),o={swScope:e.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:i,fcmPushSet:r.fcmPushSet,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(o)];case 2:return s.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return s.sent(),[2,i];case 4:return a=s.sent(),[4,this.deleteToken(r.fcmToken)];case 5:throw s.sent(),a;case 6:return[2]}}))}))},e.prototype.getNewToken=function(e,t,n){return u(this,void 0,void 0,(function(){var r,i;return c(this,(function(o){switch(o.label){case 0:return[4,this.iidModel.getToken(this.messagingSenderId,t,n)];case 1:return r=o.sent(),i={swScope:e.scope,vapidKey:n,fcmSenderId:this.messagingSenderId,fcmToken:r.token,fcmPushSet:r.pushSet,createTime:Date.now(),endpoint:t.endpoint,auth:t.getKey("auth"),p256dh:t.getKey("p256dh")},[4,this.tokenDetailsModel.saveTokenDetails(i)];case 2:return o.sent(),[4,this.vapidDetailsModel.saveVapidDetails(e.scope,n)];case 3:return o.sent(),[2,r.token]}}))}))},e.prototype.deleteToken=function(e){return u(this,void 0,void 0,(function(){var t,n;return c(this,(function(r){switch(r.label){case 0:return[4,this.deleteTokenFromDB(e)];case 1:return r.sent(),[4,this.getSWRegistration_()];case 2:return(t=r.sent())?[4,t.pushManager.getSubscription()]:[3,4];case 3:if(n=r.sent())return[2,n.unsubscribe()];r.label=4;case 4:return[2,!0]}}))}))},e.prototype.deleteTokenFromDB=function(e){return u(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return[4,this.tokenDetailsModel.deleteToken(e)];case 1:return t=n.sent(),[4,this.iidModel.deleteToken(t.fcmSenderId,t.fcmToken,t.fcmPushSet)];case 2:return n.sent(),[2]}}))}))},e.prototype.getPushSubscription=function(e,t){return e.pushManager.getSubscription().then((function(n){return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t})}))},e.prototype.requestPermission=function(){throw p.create("only-available-in-window")},e.prototype.useServiceWorker=function(e){throw p.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){throw p.create("only-available-in-window")},e.prototype.onMessage=function(e,t,n){throw p.create("only-available-in-window")},e.prototype.onTokenRefresh=function(e,t,n){throw p.create("only-available-in-window")},e.prototype.setBackgroundMessageHandler=function(e){throw p.create("only-available-in-sw")},e.prototype.delete=function(){return u(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,Promise.all([this.tokenDetailsModel.closeDatabase(),this.vapidDetailsModel.closeDatabase()])];case 1:return e.sent(),[2]}}))}))},e.prototype.getNotificationPermission_=function(){return Notification.permission},e.prototype.getTokenDetailsModel=function(){return this.tokenDetailsModel},e.prototype.getVapidDetailsModel=function(){return this.vapidDetailsModel},e.prototype.getIidModel=function(){return this.iidModel},e}(),P=function(e){function t(t){var n=e.call(this,t)||this;return n.bgMessageHandler=null,self.addEventListener("push",(function(e){n.onPush(e)})),self.addEventListener("pushsubscriptionchange",(function(e){n.onSubChange(e)})),self.addEventListener("notificationclick",(function(e){n.onNotificationClick(e)})),n}return a(t,e),t.prototype.onPush=function(e){e.waitUntil(this.onPush_(e))},t.prototype.onSubChange=function(e){e.waitUntil(this.onSubChange_(e))},t.prototype.onNotificationClick=function(e){e.waitUntil(this.onNotificationClick_(e))},t.prototype.onPush_=function(e){return u(this,void 0,void 0,(function(){var t,n,r,i,o,a;return c(this,(function(s){switch(s.label){case 0:if(!e.data)return[2];try{t=e.data.json()}catch(u){return[2]}return[4,this.hasVisibleClients_()];case 1:return s.sent()?[2,this.sendMessageToWindowClients_(t)]:(n=this.getNotificationData_(t))?(r=n.title||"",[4,this.getSWRegistration_()]):[3,3];case 2:return i=s.sent(),o=n.actions,a=Notification.maxActions,o&&a&&o.length>a&&console.warn("This browser only supports "+a+" actions.The remaining actions will not be displayed."),[2,i.showNotification(r,n)];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(t)]:[3,5];case 4:return s.sent(),[2];case 5:return[2]}}))}))},t.prototype.onSubChange_=function(e){return u(this,void 0,void 0,(function(){var e,t,n,r;return c(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getSWRegistration_()];case 1:return e=i.sent(),[3,3];case 2:throw t=i.sent(),p.create("unable-to-resubscribe",{message:t});case 3:return i.trys.push([3,5,,8]),[4,e.pushManager.getSubscription()];case 4:return i.sent(),[3,8];case 5:return n=i.sent(),[4,this.getTokenDetailsModel().getTokenDetailsFromSWScope(e.scope)];case 6:if(!(r=i.sent()))throw n;return[4,this.deleteToken(r.fcmToken)];case 7:throw i.sent(),n;case 8:return[2]}}))}))},t.prototype.onNotificationClick_=function(e){return u(this,void 0,void 0,(function(){var t,n,r,i;return c(this,(function(o){switch(o.label){case 0:return e.notification&&e.notification.data&&e.notification.data.FCM_MSG?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),(t=e.notification.data.FCM_MSG).notification&&(n=t.fcmOptions&&t.fcmOptions.link||t.notification.click_action)?[4,this.getWindowClient_(n)]:[2]):[2];case 1:return(r=o.sent())?[3,3]:[4,self.clients.openWindow(n)];case 2:return r=o.sent(),[3,5];case 3:return[4,r.focus()];case 4:r=o.sent(),o.label=5;case 5:return r?(delete t.notification,delete t.fcmOptions,i=D(y.NOTIFICATION_CLICKED,t),[2,this.attemptToMessageClient_(r,i)]):[2]}}))}))},t.prototype.getNotificationData_=function(e){var t;if(e&&"object"==typeof e.notification){var n=s({},e.notification);return n.data=s({},e.notification.data,((t={}).FCM_MSG=e,t)),n}},t.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!=typeof e)throw p.create("bg-handler-function-expected");this.bgMessageHandler=e},t.prototype.getWindowClient_=function(e){return u(this,void 0,void 0,(function(){var t,n,r,i;return c(this,(function(o){switch(o.label){case 0:return t=new URL(e,self.location.href).href,[4,O()];case 1:for(n=o.sent(),r=null,i=0;i<n.length;i++)if(new URL(n[i].url,self.location.href).href===t){r=n[i];break}return[2,r]}}))}))},t.prototype.attemptToMessageClient_=function(e,t){return u(this,void 0,void 0,(function(){return c(this,(function(n){if(!e)throw p.create("no-window-client-to-msg");return e.postMessage(t),[2]}))}))},t.prototype.hasVisibleClients_=function(){return u(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,O()];case 1:return[2,e.sent().some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))]}}))}))},t.prototype.sendMessageToWindowClients_=function(e){return u(this,void 0,void 0,(function(){var t,n,r=this;return c(this,(function(i){switch(i.label){case 0:return[4,O()];case 1:return t=i.sent(),n=D(y.PUSH_MSG_RECEIVED,e),[4,Promise.all(t.map((function(e){return r.attemptToMessageClient_(e,n)})))];case 2:return i.sent(),[2]}}))}))},t.prototype.getSWRegistration_=function(){return u(this,void 0,void 0,(function(){return c(this,(function(e){return[2,self.registration]}))}))},t.prototype.getPublicVapidKey_=function(){return u(this,void 0,void 0,(function(){var e,t;return c(this,(function(n){switch(n.label){case 0:return[4,this.getSWRegistration_()];case 1:if(!(e=n.sent()))throw p.create("sw-registration-expected");return[4,this.getVapidDetailsModel().getVapidFromSWScope(e.scope)];case 2:return null==(t=n.sent())?[2,g]:[2,t]}}))}))},t}(I);function O(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function D(e,t){var n;return(n={})[v.TYPE_OF_MSG]=e,n[v.DATA]=t,n}var A=function(e){function t(t){var n=e.call(this,t)||this;return n.registrationToUse=null,n.publicVapidKeyToUse=null,n.manifestCheckPromise=null,n.messageObserver=null,n.tokenRefreshObserver=null,n.onMessageInternal=Object(d.createSubscribe)((function(e){n.messageObserver=e})),n.onTokenRefreshInternal=Object(d.createSubscribe)((function(e){n.tokenRefreshObserver=e})),n.setupSWMessageListener_(),n}return a(t,e),t.prototype.getToken=function(){return u(this,void 0,void 0,(function(){return c(this,(function(t){switch(t.label){case 0:return this.manifestCheckPromise||(this.manifestCheckPromise=function(){return u(this,void 0,void 0,(function(){var e,t;return c(this,(function(n){switch(n.label){case 0:if(!(e=document.querySelector('link[rel="manifest"]')))return[2];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch(e.href)];case 2:return[4,n.sent().json()];case 3:return t=n.sent(),[3,5];case 4:return n.sent(),[2];case 5:if(!t||!t.gcm_sender_id)return[2];if("103953800507"!==t.gcm_sender_id)throw p.create("incorrect-gcm-sender-id");return[2]}}))}))}()),[4,this.manifestCheckPromise];case 1:return t.sent(),[2,e.prototype.getToken.call(this)]}}))}))},t.prototype.requestPermission=function(){return u(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:return"granted"===this.getNotificationPermission_()?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw p.create("denied"===e?"permission-blocked":"permission-default")}}))}))},t.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw p.create("sw-registration-expected");if(null!=this.registrationToUse)throw p.create("use-sw-before-get-token");this.registrationToUse=e},t.prototype.usePublicVapidKey=function(e){if("string"!=typeof e)throw p.create("invalid-public-vapid-key");if(null!=this.publicVapidKeyToUse)throw p.create("use-public-key-before-get-token");var t=C(e);if(65!==t.length)throw p.create("public-vapid-key-decryption-failed");this.publicVapidKeyToUse=t},t.prototype.onMessage=function(e,t,n){return"function"==typeof e?this.onMessageInternal(e,t,n):this.onMessageInternal(e)},t.prototype.onTokenRefresh=function(e,t,n){return"function"==typeof e?this.onTokenRefreshInternal(e,t,n):this.onTokenRefreshInternal(e)},t.prototype.waitForRegistrationToActivate_=function(e){var t=e.installing||e.waiting||e.active;return new Promise((function(n,r){if(t)if("activated"!==t.state)if("redundant"!==t.state){t.addEventListener("statechange",(function i(){if("activated"===t.state)n(e);else{if("redundant"!==t.state)return;r(p.create("sw-reg-redundant"))}t.removeEventListener("statechange",i)}))}else r(p.create("sw-reg-redundant"));else n(e);else r(p.create("no-sw-in-reg"))}))},t.prototype.getSWRegistration_=function(){var e=this;return this.registrationToUse?this.waitForRegistrationToActivate_(this.registrationToUse):(this.registrationToUse=null,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}).catch((function(e){throw p.create("failed-serviceworker-registration",{browserErrorMessage:e.message})})).then((function(t){return e.waitForRegistrationToActivate_(t).then((function(){return e.registrationToUse=t,t.update(),t}))})))},t.prototype.getPublicVapidKey_=function(){return u(this,void 0,void 0,(function(){return c(this,(function(e){return this.publicVapidKeyToUse?[2,this.publicVapidKeyToUse]:[2,g]}))}))},t.prototype.setupSWMessageListener_=function(){var e=this;navigator.serviceWorker.addEventListener("message",(function(t){if(t.data&&t.data[v.TYPE_OF_MSG]){var n=t.data;switch(n[v.TYPE_OF_MSG]){case y.PUSH_MSG_RECEIVED:case y.NOTIFICATION_CLICKED:e.messageObserver&&e.messageObserver.next(n[v.DATA])}}}),!1)},t}(I);function R(e){e.INTERNAL.registerService("messaging",(function(e){if(!N())throw p.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new P(e):new A(e)}),{isSupported:N})}function N(){return self&&"ServiceWorkerGlobalScope"in self?"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}R(i.a)},gRXz:function(e,t,n){"use strict";var r=n("sQ1z"),i=n("8ouO");e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},gYfK:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},ifzb:function(e,t,n){var r=n("ezrC")("keys"),i=n("U/+K");e.exports=function(e){return r[e]||(r[e]=i(e))}},iqUP:function(e,t,n){"use strict";n("lcbw");var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;n("t6oF"),n("NSPt"),n("6Joi"),n("ABqa"),n("gHGA"),n("LmZi"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport * as firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),e.exports=i},"j/6h":function(e,t,n){var r=n("8ouO");e.exports=function(e){return Object(r(e))}},jPdx:function(e,t,n){var r=n("sQ1z"),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},jZgK:function(e,t,n){var r=n("ezrC")("wks"),i=n("U/+K"),o=n("qtiw").Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},kSm0:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},lIov:function(e,t,n){e.exports=!n("61rj")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},lcbw:function(e,t,n){"use strict";n.r(t),n("Uv6z"),n("pZxE"),n("NPZs"),n("VPEh"),n("TGP+"),n("W+Pj"),n("JilW"),n("AR9Z"),n("tmUU")},lg3l:function(e,t,n){e.exports=n("ezrC")("native-function-to-string",Function.toString)},"lv+R":function(e,t){t.f=Object.getOwnPropertySymbols},mAIw:function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return h})),n.d(t,"__exportStar",(function(){return d})),n.d(t,"__values",(function(){return f})),n.d(t,"__read",(function(){return p})),n.d(t,"__spread",(function(){return g})),n.d(t,"__await",(function(){return m})),n.d(t,"__asyncGenerator",(function(){return v})),n.d(t,"__asyncDelegator",(function(){return y})),n.d(t,"__asyncValues",(function(){return b})),n.d(t,"__makeTemplateObject",(function(){return _})),n.d(t,"__importStar",(function(){return w})),n.d(t,"__importDefault",(function(){return C}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof m?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function y(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:m(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}},"mY8+":function(e,t,n){var r=n("6CFf"),i=n("H1Af"),o=n("j/6h"),a=n("c0bx"),s=n("sl9K");e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,h=6==e,d=5==e||h,f=t||s;return function(t,s,p){for(var g,m,v=o(t),y=i(v),b=r(s,p,3),_=a(y.length),w=0,C=n?f(t,_):u?f(t,0):void 0;_>w;w++)if((d||w in y)&&(m=b(g=y[w],w,v),e))if(n)C[w]=m;else if(m)switch(e){case 3:return!0;case 5:return g;case 6:return w;case 2:C.push(g)}else if(l)return!1;return h?-1:c||l?l:C}}},oQnE:function(e,t,n){"use strict";var r=n("VqlW")(!0);n("Td+X")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},os0x:function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return h})),n.d(t,"__exportStar",(function(){return d})),n.d(t,"__values",(function(){return f})),n.d(t,"__read",(function(){return p})),n.d(t,"__spread",(function(){return g})),n.d(t,"__await",(function(){return m})),n.d(t,"__asyncGenerator",(function(){return v})),n.d(t,"__asyncDelegator",(function(){return y})),n.d(t,"__asyncValues",(function(){return b})),n.d(t,"__makeTemplateObject",(function(){return _})),n.d(t,"__importStar",(function(){return w})),n.d(t,"__importDefault",(function(){return C}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof m?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function y(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:m(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}},oxOc:function(e,t,n){var r=n("gYfK");e.exports=Array.isArray||function(e){return"Array"==r(e)}},pZxE:function(e,t,n){"use strict";function r(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}var i=setTimeout;function o(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function s(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(i){return void c(t.promise,i)}u(t.promise,r)}else(1===e._state?u:c)(t.promise,e._value)}))):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void d((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,l(e)}catch(o){c(e,o)}var r,i}function c(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&a._immediateFn((function(){e._handled||a._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)s(e,e._deferreds[t]);e._deferreds=null}function h(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function d(e,t){var n=!1;try{e((function(e){n||(n=!0,u(t,e))}),(function(e){n||(n=!0,c(t,e))}))}catch(r){if(n)return;n=!0,c(t,r)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(o);return s(this,new h(e,t,n)),n},a.prototype.finally=r,a.all=function(e){return new a((function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function o(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(t){o(e,t)}),n)}r[e]=a,0==--i&&t(r)}catch(u){n(u)}}for(var a=0;a<r.length;a++)o(a,r[a])}))},a.resolve=function(e){return e&&"object"==typeof e&&e.constructor===a?e:new a((function(t){t(e)}))},a.reject=function(e){return new a((function(t,n){n(e)}))},a.race=function(e){return new a((function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)}))},a._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){i(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var f=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"Promise"in f?f.Promise.prototype.finally||(f.Promise.prototype.finally=r):f.Promise=a},"q/0M":function(e,t,n){"use strict";n.r(t),n.d(t,"setLogLevel",(function(){return u})),n.d(t,"Logger",(function(){return s})),n.d(t,"LogLevel",(function(){return i}));var r=[],i=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}({}),o=i.INFO,a=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var o=(new Date).toISOString();switch(t){case i.DEBUG:case i.VERBOSE:console.log.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;case i.INFO:console.info.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;case i.WARN:console.warn.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;case i.ERROR:console.error.apply(console,["["+o+"]  "+e.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},s=function(){function e(e){this.name=e,this._logLevel=o,this._logHandler=a,r.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.DEBUG].concat(e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.VERBOSE].concat(e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.INFO].concat(e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.WARN].concat(e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,i.ERROR].concat(e))},e}();function u(e){r.forEach((function(t){t.logLevel=e}))}},q098:function(e,t,n){e.exports=!n("lIov")&&!n("61rj")((function(){return 7!=Object.defineProperty(n("y6nS")("div"),"a",{get:function(){return 7}}).a}))},qtiw:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},rSCU:function(e,t,n){var r=n("H1Af"),i=n("8ouO");e.exports=function(e){return r(i(e))}},s6PA:function(e,t,n){"use strict";var r=n("I1rR"),i=n("mY8+")(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n("dNFx")("find")},sQ1z:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},sl9K:function(e,t,n){var r=n("M1gn");e.exports=function(e,t){return new(r(e))(t)}},t6oF:function(e,t,n){"use strict";n.r(t);var r=n("wj3C"),i=n.n(r);(function(){var e,t=t||{},n=this;function r(e){return"string"==typeof e}function o(e){return"boolean"==typeof e}var a=/^[\w+/_-]+[=]{0,2}$/,s=null;function u(){}function c(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function l(e){return null===e}function h(e){return"array"==c(e)}function d(e){var t=c(e);return"array"==t||"object"==t&&"number"==typeof e.length}function f(e){return"function"==c(e)}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var g="closure_uid_"+(1e9*Math.random()>>>0),m=0;function v(e,t,n){return e.call.apply(e.bind,arguments)}function y(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function b(e,t,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:y).apply(null,arguments)}function _(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var w=Date.now||function(){return+new Date};function C(e,t){function n(){}n.prototype=t.prototype,e.pb=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.gd=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function k(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function S(e){if(Error.captureStackTrace)Error.captureStackTrace(this,S);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function E(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");S.call(this,n+e[r])}function T(e,t){throw new E("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function x(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function I(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function P(){this.b=this.a=null}C(S,Error),S.prototype.name="CustomError",C(E,S),E.prototype.name="AssertionError",x.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var O=new x((function(){return new A}),(function(e){e.reset()}));function D(){var e=pe,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function A(){this.next=this.b=this.a=null}P.prototype.add=function(e,t){var n=O.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},A.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},A.prototype.reset=function(){this.next=this.b=this.a=null};var R=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(r(e))return r(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},N=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var i=e.length,o=r(e)?e.split(""):e,a=0;a<i;a++)a in o&&t.call(n,o[a],a,e)},M=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,i=Array(n),o=r(e)?e.split(""):e,a=0;a<n;a++)a in o&&(i[a]=t.call(void 0,o[a],a,e));return i},F=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,i=r(e)?e.split(""):e,o=0;o<n;o++)if(o in i&&t.call(void 0,i[o],o,e))return!0;return!1};function L(e,t){return 0<=R(e,t)}function V(e,t){var n;return(n=0<=(t=R(e,t)))&&Array.prototype.splice.call(e,t,1),n}function U(e,t){!function(e,t){var n=e.length,i=r(e)?e.split(""):e;for(--n;0<=n;--n)n in i&&t.call(void 0,i[n],n,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&Array.prototype.splice.call(e,r,1)}))}function j(e){return Array.prototype.concat.apply([],arguments)}function q(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}var B,W=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},z=/&/g,H=/</g,G=/>/g,Q=/"/g,K=/'/g,Y=/\x00/g,X=/[\x00&<>"']/;function J(e,t){return-1!=e.indexOf(t)}function Z(e,t){return e<t?-1:e>t?1:0}e:{var $=n.navigator;if($){var ee=$.userAgent;if(ee){B=ee;break e}}B=""}function te(e){return J(B,e)}function ne(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function re(e){for(var t in e)return!1;return!0}function ie(e){var t,n={};for(t in e)n[t]=e[t];return n}var oe,ae,se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<se.length;o++)n=se[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ce(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function le(e){return X.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(z,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(H,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(G,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(Q,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(K,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(Y,"&#0;"))),e}function he(e){n.setTimeout((function(){throw e}),0)}function de(e,t){ae||function(){if(n.Promise&&n.Promise.resolve){var e=n.Promise.resolve(void 0);ae=function(){e.then(ge)}}else ae=function(){var e=ge;!f(n.setImmediate)||n.Window&&n.Window.prototype&&!te("Edge")&&n.Window.prototype.setImmediate==n.setImmediate?(oe||(oe=function(){var e=n.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!te("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(""),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=b((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0!==e&&!te("Trident")&&!te("MSIE")){var t=new e,r={},i=r;return t.port1.onmessage=function(){if(void 0!==r.next){var e=(r=r.next).xb;r.xb=null,e()}},function(e){i.next={xb:e},i=i.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){n.setTimeout(e,0)}}()),oe(e)):n.setImmediate(e)}}(),fe||(ae(),fe=!0),pe.add(e,t)}var fe=!1,pe=new P;function ge(){for(var e;e=D();){try{e.a.call(e.b)}catch(t){he(t)}I(O,e)}fe=!1}function me(e,t){if(this.a=ve,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=u)try{var n=this;e.call(t,(function(e){Pe(n,ye,e)}),(function(e){if(!(e instanceof Fe))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}Pe(n,be,e)}))}catch(r){Pe(this,be,r)}}var ve=0,ye=2,be=3;function _e(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}_e.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var we=new x((function(){return new _e}),(function(e){e.reset()}));function Ce(e,t,n){var r=we.get();return r.g=e,r.b=t,r.f=n,r}function ke(e){if(e instanceof me)return e;var t=new me(u);return Pe(t,ye,e),t}function Se(e){return new me((function(t,n){n(e)}))}function Ee(e,t,n){Oe(e,t,n,null)||de(_(t,e))}function Te(e){return new me((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Eb:!0,value:o}:{Eb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)Ee(e[o],_(i,o,!0),_(i,o,!1));else t(r)}))}function xe(e,t){e.b||e.a!=ye&&e.a!=be||De(e),e.f?e.f.next=t:e.b=t,e.f=t}function Ie(e,t,n,r){var i=Ce(null,null,null);return i.a=new me((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(a){o(a)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof Fe?o(t):e(i)}catch(a){o(a)}}:o})),i.a.c=e,xe(e,i),i.a}function Pe(e,t,n){e.a==ve&&(e===n&&(t=be,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Oe(n,e.Pc,e.Qc,e)||(e.i=n,e.a=t,e.c=null,De(e),t!=be||n instanceof Fe||function(e,t){e.g=!0,de((function(){e.g&&Me.call(null,t)}))}(e,n)))}function Oe(e,t,n,r){if(e instanceof me)return xe(e,Ce(t||u,n||null,r)),!0;if(k(e))return e.then(t,n,r),!0;if(p(e))try{var i=e.then;if(f(i))return function(e,t,n,r,i){function o(e){a||(a=!0,r.call(i,e))}var a=!1;try{t.call(e,(function(e){a||(a=!0,n.call(i,e))}),o)}catch(s){o(s)}}(e,i,t,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function De(e){e.h||(e.h=!0,de(e.Yb,e))}function Ae(e){var t=null;return e.b&&(e.b=(t=e.b).next,t.next=null),e.b||(e.f=null),t}function Re(e,t,n,r){if(n==be&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,Ne(t,n,r);else try{t.c?t.g.call(t.f):Ne(t,n,r)}catch(i){Me.call(null,i)}I(we,t)}function Ne(e,t,n){t==ye?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}me.prototype.then=function(e,t,n){return Ie(this,f(e)?e:null,f(t)?t:null,n)},me.prototype.$goog_Thenable=!0,(e=me.prototype).ia=function(e,t){return(e=Ce(e,e,t)).c=!0,xe(this,e),this},e.s=function(e,t){return Ie(this,null,e,t)},e.cancel=function(e){this.a==ve&&de((function(){!function e(t,n){if(t.a==ve)if(t.c){var r=t.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==t&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==ve&&1==i?e(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):Ae(r),Re(r,o,be,n)))}t.c=null}else Pe(t,be,n)}(this,new Fe(e))}),this)},e.Pc=function(e){this.a=ve,Pe(this,ye,e)},e.Qc=function(e){this.a=ve,Pe(this,be,e)},e.Yb=function(){for(var e;e=Ae(this);)Re(this,e,this.a,this.i);this.h=!1};var Me=he;function Fe(e){S.call(this,e)}function Le(){0!=Ve&&(Ue[this[g]||(this[g]=++m)]=this),this.qa=this.qa,this.ja=this.ja}C(Fe,S),Fe.prototype.name="cancel";var Ve=0,Ue={};function je(e){if(!e.qa&&(e.qa=!0,e.va(),0!=Ve)){var t=e[g]||(e[g]=++m);if(0!=Ve&&e.ja&&0<e.ja.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ue[t]}}function qe(e){return qe[" "](e),e}Le.prototype.qa=!1,Le.prototype.va=function(){if(this.ja)for(;this.ja.length;)this.ja.shift()()},qe[" "]=u;var Be,We,ze=te("Opera"),He=te("Trident")||te("MSIE"),Ge=te("Edge"),Qe=Ge||He,Ke=te("Gecko")&&!(J(B.toLowerCase(),"webkit")&&!te("Edge"))&&!(te("Trident")||te("MSIE"))&&!te("Edge"),Ye=J(B.toLowerCase(),"webkit")&&!te("Edge");function Xe(){var e=n.document;return e?e.documentMode:void 0}e:{var Je="",Ze=(We=B,Ke?/rv:([^\);]+)(\)|;)/.exec(We):Ge?/Edge\/([\d\.]+)/.exec(We):He?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(We):Ye?/WebKit\/(\S+)/.exec(We):ze?/(?:Version)[ \/]?(\S+)/.exec(We):void 0);if(Ze&&(Je=Ze?Ze[1]:""),He){var $e=Xe();if(null!=$e&&$e>parseFloat(Je)){Be=String($e);break e}}Be=Je}var et,tt={};function nt(e){return function(e,t){var n=tt;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t()}(e,(function(){for(var t=0,n=W(String(Be)).split("."),r=W(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=Z(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||Z(0==a[2].length,0==s[2].length)||Z(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}var rt=n.document;et=rt&&He?Xe()||("CSS1Compat"==rt.compatMode?parseInt(Be,10):5):void 0;var it=Object.freeze||function(e){return e},ot=!He||9<=Number(et),at=He&&!nt("9"),st=function(){if(!n.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{n.addEventListener("test",u,t),n.removeEventListener("test",u,t)}catch(r){}return e}();function ut(e,t){this.type=e,this.b=this.target=t,this.Kb=!0}function ct(e,t){if(ut.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(Ke){e:{try{qe(t.nodeName);var o=!0;break e}catch(a){}o=!1}o||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=r(e.pointerType)?e.pointerType:lt[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}ut.prototype.preventDefault=function(){this.Kb=!1},C(ct,ut);var lt=it({2:"touch",3:"pen",4:"mouse"});ct.prototype.preventDefault=function(){ct.pb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,at)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}},ct.prototype.f=function(){return this.a};var ht="closure_listenable_"+(1e6*Math.random()|0),dt=0;function ft(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Ma=i,this.key=++dt,this.oa=this.Ia=!1}function pt(e){e.oa=!0,e.listener=null,e.proxy=null,e.src=null,e.Ma=null}function gt(e){this.src=e,this.a={},this.b=0}function mt(e,t){var n=t.type;n in e.a&&V(e.a[n],t)&&(pt(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function vt(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.oa&&o.listener==t&&o.capture==!!n&&o.Ma==r)return i}return-1}gt.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=vt(e,t,r,i);return-1<a?(t=e[a],n||(t.Ia=!1)):((t=new ft(t,this.src,o,!!r,i)).Ia=n,e.push(t)),t};var yt="closure_lm_"+(1e6*Math.random()|0),bt={};function _t(e,t,n,r,i){if(r&&r.once)Ct(e,t,n,r,i);else if(h(t))for(var o=0;o<t.length;o++)_t(e,t[o],n,r,i);else n=Dt(n),e&&e[ht]?Rt(e,t,n,p(r)?!!r.capture:!!r,i):wt(e,t,n,!1,r,i)}function wt(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i,s=Pt(e);if(s||(e[yt]=s=new gt(e)),!(n=s.add(t,n,r,a,o)).proxy)if(r=function(){var e=It,t=ot?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)st||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Et(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}}function Ct(e,t,n,r,i){if(h(t))for(var o=0;o<t.length;o++)Ct(e,t[o],n,r,i);else n=Dt(n),e&&e[ht]?Nt(e,t,n,p(r)?!!r.capture:!!r,i):wt(e,t,n,!0,r,i)}function kt(e,t,n,r,i){if(h(t))for(var o=0;o<t.length;o++)kt(e,t[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=Dt(n),e&&e[ht]?(e=e.o,(t=String(t).toString())in e.a&&-1<(n=vt(o=e.a[t],n,r,i))&&(pt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--))):e&&(e=Pt(e))&&(t=e.a[t.toString()],e=-1,t&&(e=vt(t,n,r,i)),(n=-1<e?t[e]:null)&&St(n))}function St(e){if("number"!=typeof e&&e&&!e.oa){var t=e.src;if(t&&t[ht])mt(t.o,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Et(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Pt(t))?(mt(n,e),0==n.b&&(n.src=null,t[yt]=null)):pt(e)}}}function Et(e){return e in bt?bt[e]:bt[e]="on"+e}function Tt(e,t,n,r){var i=!0;if((e=Pt(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.oa&&(o=xt(o,r),i=i&&!1!==o)}return i}function xt(e,t){var n=e.listener,r=e.Ma||e.src;return e.Ia&&St(e),n.call(r,t)}function It(e,t){if(e.oa)return!0;if(!ot){if(!t)e:{t=["window","event"];for(var r=n,i=0;i<t.length;i++)if(null==(r=r[t[i]])){t=null;break e}t=r}if(t=new ct(i=t,this),r=!0,!(0>i.keyCode||null!=i.returnValue)){e:{var o=!1;if(0==i.keyCode)try{i.keyCode=-1;break e}catch(s){o=!0}(o||null==i.returnValue)&&(i.returnValue=!0)}for(i=[],o=t.b;o;o=o.parentNode)i.push(o);for(e=e.type,o=i.length-1;0<=o;o--){t.b=i[o];var a=Tt(i[o],e,!0,t);r=r&&a}for(o=0;o<i.length;o++)t.b=i[o],a=Tt(i[o],e,!1,t),r=r&&a}return r}return xt(e,new ct(t,this))}function Pt(e){return(e=e[yt])instanceof gt?e:null}var Ot="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dt(e){return f(e)?e:(e[Ot]||(e[Ot]=function(t){return e.handleEvent(t)}),e[Ot])}function At(){Le.call(this),this.o=new gt(this),this.Rb=this,this.Wa=null}function Rt(e,t,n,r,i){e.o.add(String(t),n,!1,r,i)}function Nt(e,t,n,r,i){e.o.add(String(t),n,!0,r,i)}function Mt(e,t,n,r){if(!(t=e.o.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.oa&&a.capture==n){var s=a.listener,u=a.Ma||a.src;a.Ia&&mt(e.o,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Kb}function Ft(e,t,r){if(f(e))r&&(e=b(e,r));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=b(e.handleEvent,e)}return 2147483647<Number(t)?-1:n.setTimeout(e,t||0)}function Lt(e){var t=null;return new me((function(n,r){-1==(t=Ft((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).s((function(e){throw n.clearTimeout(t),e}))}function Vt(e){if(e.S&&"function"==typeof e.S)return e.S();if(r(e))return e.split("");if(d(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}function Ut(e){if(e.U&&"function"==typeof e.U)return e.U();if(!e.S||"function"!=typeof e.S){if(d(e)||r(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var i in t=[],n=0,e)t[n++]=i;return t}}function jt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof jt)for(n=e.U(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function qt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Bt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Bt(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Bt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}C(At,Le),At.prototype[ht]=!0,At.prototype.addEventListener=function(e,t,n,r){_t(this,e,t,n,r)},At.prototype.removeEventListener=function(e,t,n,r){kt(this,e,t,n,r)},At.prototype.dispatchEvent=function(e){var t,n=this.Wa;if(n)for(t=[];n;n=n.Wa)t.push(n);n=this.Rb;var i=e.type||e;if(r(e))e=new ut(e,n);else if(e instanceof ut)e.target=e.target||n;else{var o=e;ue(e=new ut(i,n),o)}if(o=!0,t)for(var a=t.length-1;0<=a;a--){var s=e.b=t[a];o=Mt(s,i,!0,e)&&o}if(o=Mt(s=e.b=n,i,!0,e)&&o,o=Mt(s,i,!1,e)&&o,t)for(a=0;a<t.length;a++)o=Mt(s=e.b=t[a],i,!1,e)&&o;return o},At.prototype.va=function(){if(At.pb.va.call(this),this.o){var e,t=this.o;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)pt(n[r]);delete t.a[e],t.b--}}this.Wa=null},(e=jt.prototype).S=function(){qt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.U=function(){return qt(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return Bt(this.b,e)?this.b[e]:t},e.set=function(e,t){Bt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.U(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Wt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function zt(e,t){if(this.b=this.o=this.c="",this.i=null,this.h=this.g="",this.f=!1,e instanceof zt){this.f=void 0!==t?t:e.f,Ht(this,e.c),this.o=e.o,this.b=e.b,Gt(this,e.i),this.g=e.g,t=e.a;var n=new sn;n.c=t.c,t.a&&(n.a=new jt(t.a),n.b=t.b),Qt(this,n),this.h=e.h}else e&&(n=String(e).match(Wt))?(this.f=!!t,Ht(this,n[1]||"",!0),this.o=Zt(n[2]||""),this.b=Zt(n[3]||"",!0),Gt(this,n[4]),this.g=Zt(n[5]||"",!0),Qt(this,n[6]||"",!0),this.h=Zt(n[7]||"")):(this.f=!!t,this.a=new sn(null,this.f))}function Ht(e,t,n){e.c=n?Zt(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function Gt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Qt(e,t,n){t instanceof sn?(e.a=t,function(e,t){t&&!e.f&&(un(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ln(this,t),dn(this,n,e))}),e)),e.f=t}(e.a,e.f)):(n||(t=$t(t,on)),e.a=new sn(t,e.f))}function Kt(e,t,n){e.a.set(t,n)}function Yt(e,t){return e.a.get(t)}function Xt(e){return e instanceof zt?new zt(e):new zt(e,void 0)}function Jt(e,t){var n=new zt(null,void 0);return Ht(n,"https"),e&&(n.b=e),t&&(n.g=t),n}function Zt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function $t(e,t,n){return r(e)?(e=encodeURI(e).replace(t,en),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function en(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}zt.prototype.toString=function(){var e=[],t=this.c;t&&e.push($t(t,tn,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push($t(t,tn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.g)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push($t(n,"/"==n.charAt(0)?rn:nn,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.h)&&e.push("#",$t(n,an)),e.join("")};var tn=/[#\/\?@]/g,nn=/[#\?:]/g,rn=/[#\?]/g,on=/[#\?@]/g,an=/#/g;function sn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function un(e){e.a||(e.a=new jt,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function cn(e){var t=Ut(e);if(void 0===t)throw Error("Keys are undefined");var n=new sn(null,void 0);e=Vt(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];h(o)?dn(n,i,o):n.add(i,o)}return n}function ln(e,t){un(e),t=fn(e,t),Bt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Bt((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&qt(e)))}function hn(e,t){return un(e),t=fn(e,t),Bt(e.a.b,t)}function dn(e,t,n){ln(e,t),0<n.length&&(e.c=null,e.a.set(fn(e,t),q(n)),e.b+=n.length)}function fn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}(e=sn.prototype).add=function(e,t){un(this),this.c=null,e=fn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){un(this),this.a.forEach((function(n,r){N(n,(function(n){e.call(t,n,r,this)}),this)}),this)},e.U=function(){un(this);for(var e=this.a.S(),t=this.a.U(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.S=function(e){un(this);var t=[];if(r(e))hn(this,e)&&(t=j(t,this.a.get(fn(this,e))));else{e=this.a.S();for(var n=0;n<e.length;n++)t=j(t,e[n])}return t},e.set=function(e,t){return un(this),this.c=null,hn(this,e=fn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e&&0<(e=this.S(e)).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.U(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.S(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var pn=!He||9<=Number(et);function gn(e,t){this.a=e===yn&&t||"",this.b=vn}function mn(e){return e instanceof gn&&e.constructor===gn&&e.b===vn?e.a:(T("expected object of type Const, got '"+e+"'"),"type_error:Const")}gn.prototype.na=!0,gn.prototype.ma=function(){return this.a},gn.prototype.toString=function(){return"Const{"+this.a+"}"};var vn={},yn={};function bn(){this.a="",this.b=Sn}function _n(e){return e instanceof bn&&e.constructor===bn&&e.b===Sn?e.a:(T("expected object of type TrustedResourceUrl, got '"+e+"' of type "+c(e)),"type_error:TrustedResourceUrl")}function wn(e,t){var n=mn(e);if(!kn.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(e){var t=new bn;return t.a=e,t}(e=n.replace(Cn,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof gn?mn(e):encodeURIComponent(String(e))})))}bn.prototype.na=!0,bn.prototype.ma=function(){return this.a},bn.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Cn=/%{(\w+)}/g,kn=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Sn={};function En(){this.a="",this.b=Pn}function Tn(e){return e instanceof En&&e.constructor===En&&e.b===Pn?e.a:(T("expected object of type SafeUrl, got '"+e+"' of type "+c(e)),"type_error:SafeUrl")}En.prototype.na=!0,En.prototype.ma=function(){return this.a},En.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var xn=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function In(e){return e instanceof En?e:(e="object"==typeof e&&e.na?e.ma():String(e),xn.test(e)||(e="about:invalid#zClosurez"),On(e))}var Pn={};function On(e){var t=new En;return t.a=e,t}function Dn(){this.a="",this.b=An}On("about:blank"),Dn.prototype.na=!0,Dn.prototype.ma=function(){return this.a},Dn.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var An={};function Rn(e){var t=new Dn;return t.a=e,t}function Nn(e){var t=document;return r(e)?t.getElementById(e):e}function Mn(e,t){ne(t,(function(t,n){t&&"object"==typeof t&&t.na&&(t=t.ma()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:Fn.hasOwnProperty(n)?e.setAttribute(Fn[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}Rn("<!DOCTYPE html>"),Rn(""),Rn("<br>");var Fn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Ln(e,t,n){function i(n){n&&t.appendChild(r(n)?e.createTextNode(n):n)}for(var o=2;o<n.length;o++){var a=n[o];!d(a)||p(a)&&0<a.nodeType?i(a):N(Vn(a)?q(a):a,i)}}function Vn(e){if(e&&"number"==typeof e.length){if(p(e))return"function"==typeof e.item||"string"==typeof e.item;if(f(e))return"function"==typeof e.item}return!1}function Un(e){var t=[];return function e(t,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(h(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),e(t,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),Wn(i,r),r.push(":"),e(t,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Wn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new jn,e,t),t.join("")}function jn(){}var qn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Bn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Wn(e,t){t.push('"',e.replace(Bn,(function(e){var t=qn[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),qn[e]=t),t})),'"')}function zn(){var e=ur();return He&&!!et&&11==et||/Edge\/\d+/.test(e)}function Hn(){return n.window&&n.window.location.href||self&&self.location&&self.location.href||""}function Gn(e,t){t=t||n.window;var r="about:blank";e&&(r=Tn(In(e))),t.location.href=r}function Qn(e){return!!((e=(e||ur()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function Kn(e){e=e||n.window;try{e.close()}catch(t){}}function Yn(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=ur().toLowerCase(),r&&(t.target=r,J(n,"crios/")&&(t.target="_blank")),or(ur())==ir&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof En?n:In(void 0!==n.href?n.href:String(n)),n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((te("iPhone")&&!te("iPod")&&!te("iPad")||te("iPad")||te("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(a=r.document.createElement("A"),t instanceof En||t instanceof En||(t="object"==typeof t&&t.na?t.ma():String(t),xn.test(t)||(t="about:invalid#zClosurez"),t=On(t)),a.href=Tn(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=r.open("",n,a),e=Tn(t),a&&(Qe&&J(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e=Rn('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+le(e)+'">'),a.document.write(function(e){return e instanceof Dn&&e.constructor===Dn&&e.b===An?e.a:(T("expected object of type SafeHtml, got '"+e+"' of type "+c(e)),"type_error:SafeHtml")}(e)),a.document.close())):(a=r.open(Tn(t),n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var Xn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jn=/^[^@]+@[^@]+$/;function Zn(){var e=null;return new me((function(t){"complete"==n.document.readyState?t():(e=function(){t()},Ct(window,"load",e))})).s((function(t){throw kt(window,"load",e),t}))}function $n(e){return e=e||ur(),!("file:"!==fr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function er(){var e=n.window;try{return!(!e||e==e.top)}catch(t){return!1}}function tr(){return"object"!=typeof n.window&&"function"==typeof n.importScripts}function nr(){return i.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":i.a.INTERNAL.hasOwnProperty("node")?"Node":tr()?"Worker":"Browser"}function rr(){var e=nr();return"ReactNative"===e||"Node"===e}var ir="Firefox";function or(e){var t=e.toLowerCase();return J(t,"opera/")||J(t,"opr/")||J(t,"opios/")?"Opera":J(t,"iemobile")?"IEMobile":J(t,"msie")||J(t,"trident/")?"IE":J(t,"edge/")?"Edge":J(t,"firefox/")?ir:J(t,"silk/")?"Silk":J(t,"blackberry")?"Blackberry":J(t,"webos")?"Webos":!J(t,"safari/")||J(t,"chrome/")||J(t,"crios/")||J(t,"android")?!J(t,"chrome/")&&!J(t,"crios/")||J(t,"edge/")?J(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":"Chrome":"Safari"}var ar={Wc:"FirebaseCore-web",Yc:"FirebaseUI-web"};function sr(e,t){t=t||[];var n,r=[],i={};for(n in ar)i[ar[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=nr())?r=or(i=ur()):"Worker"===r&&(r=or(i=ur())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function ur(){return n.navigator&&n.navigator.userAgent||""}function cr(e,t){e=e.split("."),t=t||n;for(var r=0;r<e.length&&"object"==typeof t&&null!=t;r++)t=t[e[r]];return r!=e.length&&(t=void 0),t}function lr(){try{var e=n.localStorage,t=yr();if(e)return e.setItem(t,"1"),e.removeItem(t),!zn()||!!n.indexedDB}catch(r){return tr()&&!!n.indexedDB}return!1}function hr(){return(dr()||"chrome-extension:"===fr()||$n())&&!rr()&&lr()&&!tr()}function dr(){return"http:"===fr()||"https:"===fr()}function fr(){return n.location&&n.location.protocol||null}function pr(e){return!Qn(e=e||ur())&&or(e)!=ir}function gr(e){return void 0===e?null:Un(e)}function mr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!=e[t]&&(n[t]=e[t]);return n}function vr(e){if(null!==e)return JSON.parse(e)}function yr(e){return e||Math.floor(1e9*Math.random()).toString()}function br(e){return"Safari"!=or(e=e||ur())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function _r(){var e=n.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var r=0;r<e.CP.length;r++)e.CP[r]=null}function wr(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=ur(),t=nr(),this.b=Qn(e)||"ReactNative"===t}function Cr(){var e=n.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function kr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(n){}return null}function Sr(){return!(!cr("fireauth.oauthhelper",n)&&!cr("fireauth.iframe",n))}wr.prototype.get=function(){var e=n.navigator;return!e||"boolean"!=typeof e.onLine||!dr()&&"chrome-extension:"!==fr()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Er,Tr={};function xr(e){Tr[e]||(Tr[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var Ir={};Object.defineProperty(Ir,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ir,"abcd",{configurable:!0,enumerable:!0,value:2}),Er=2==Ir.abcd}catch(We){Er=!1}function Pr(e,t,n){Er?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Or(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Pr(e,n,t[n])}function Dr(e){var t={};return Or(t,e),t}function Ar(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Pr(t,n,Ar(e[n]));return t}function Rr(e){var t={},n=e[Mr],r=e[Fr];if(!(e=e[Lr])||e!=Nr&&!n)throw Error("Invalid provider user info!");t[Ur]=r||null,t[Vr]=n||null,Pr(this,qr,e),Pr(this,jr,Ar(t))}var Nr="EMAIL_SIGNIN",Mr="email",Fr="newEmail",Lr="requestType",Vr="email",Ur="fromEmail",jr="data",qr="operation";function Br(e,t){this.code=zr+e,this.message=t||Hr[e]||""}function Wr(e){var t=e&&e.code;return t?new Br(t.substring(zr.length),e.message):null}C(Br,Error),Br.prototype.C=function(){return{code:this.code,message:this.message}},Br.prototype.toJSON=function(){return this.C()};var zr="auth/",Hr={"argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function Gr(e){var t=e[Jr];if(void 0===t)throw new Br("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new Br("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Qr];if(n&&"object"==typeof n){t=n[ei];var r=n[Zr];if(n=n[$r],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new Br("argument-error",Zr+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Br("argument-error",$r+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new Br("argument-error",ei+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Br("missing-android-pkg-name")}}else if(void 0!==n)throw new Br("argument-error",Qr+" property must be a non null object when specified.");if(this.f=null,(t=e[Xr])&&"object"==typeof t){if("string"==typeof(t=t[ti])&&t.length)this.f=t;else if(void 0!==t)throw new Br("argument-error",ti+" property must be a non empty string when specified.")}else if(void 0!==t)throw new Br("argument-error",Xr+" property must be a non null object when specified.");if(void 0!==(t=e[Yr])&&"boolean"!=typeof t)throw new Br("argument-error",Yr+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[Kr])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new Br("argument-error",Kr+" property must be a non empty string when specified.");this.i=e||null}var Qr="android",Kr="dynamicLinkDomain",Yr="handleCodeInApp",Xr="iOS",Jr="url",Zr="installApp",$r="minimumVersion",ei="packageName",ti="bundleId";function ni(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var ri=null,ii=null;function oi(e){this.c=e.sub,w(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function ai(e){return(e=si(e))&&e.sub&&e.iss&&e.aud&&e.exp?new oi(e):null}function si(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{return JSON.parse(function(e){var t="";return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=ii[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!ri){ri={},ii={};for(var e=0;65>e;e++)ri[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),ii[ri[e]]=e,62<=e&&(ii["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,(function(e){t+=String.fromCharCode(e)})),t}(e))}catch(r){}return null}oi.prototype.f=function(){return this.b};var ui,ci={bd:{bb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",jb:"https://securetoken.googleapis.com/v1/token",id:"p"},dd:{bb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",jb:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ed:{bb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",jb:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function li(e){for(var t in ci)if(ci[t].id===e)return{firebaseEndpoint:(e=ci[t]).bb,secureTokenEndpoint:e.jb};return null}ui=li("__EID__")?"__EID__":void 0;var hi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),di=["client_id","response_type","scope","redirect_uri","state"],fi={Xc:{Na:"locale",Ba:500,Aa:600,Oa:"facebook.com",ib:di},Zc:{Na:null,Ba:500,Aa:620,Oa:"github.com",ib:di},$c:{Na:"hl",Ba:515,Aa:680,Oa:"google.com",ib:di},fd:{Na:"lang",Ba:485,Aa:705,Oa:"twitter.com",ib:hi}};function pi(e){for(var t in fi)if(fi[t].Oa==e)return fi[t];return null}function gi(e){var t={};t["facebook.com"]=_i,t["google.com"]=Ci,t["github.com"]=wi,t["twitter.com"]=ki;var n=e&&e[vi];try{if(n)return t[n]?new t[n](e):new bi(e);if(void 0!==e[mi])return new yi(e)}catch(r){}return null}var mi="idToken",vi="providerId";function yi(e){var t=e[vi];if(!t&&e[mi]){var n=ai(e[mi]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Pr(this,"providerId",t),Pr(this,"isNewUser",n)}function bi(e){yi.call(this,e),Pr(this,"profile",Ar((e=vr(e.rawUserInfo||"{}"))||{}))}function _i(e){if(bi.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function wi(e){if(bi.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Pr(this,"username",this.profile&&this.profile.login||null)}function Ci(e){if(bi.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ki(e){if(bi.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Pr(this,"username",e.screenName||null)}function Si(e){this.a=Xt(e)}function Ei(e){var t=Xt(e),n=Yt(t,"link"),r=Yt(Xt(n),"link");return t=Yt(t,"deep_link_id"),Yt(Xt(t),"link")||t||r||n||e}function Ti(e,t){return e.then((function(e){if(e[ua]){var n=ai(e[ua]);if(!n||t!=n.c)throw new Br("user-mismatch");return e}throw new Br("user-mismatch")})).s((function(e){throw e&&e.code&&e.code==zr+"user-not-found"?new Br("user-mismatch"):e}))}function xi(e,t){if(!t)throw new Br("internal-error","failed to construct a credential");this.a=t,Pr(this,"providerId",e),Pr(this,"signInMethod",e)}function Ii(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function Pi(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Pr(this,"idToken",t.idToken),t.accessToken&&Pr(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Pr(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new Br("internal-error","failed to construct a credential");Pr(this,"accessToken",t.oauthToken),Pr(this,"secret",t.oauthTokenSecret)}Pr(this,"providerId",e),Pr(this,"signInMethod",n)}function Oi(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:cn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function Di(e,t){this.Fc=t||[],Or(this,{providerId:e,isOAuthProvider:!0}),this.zb={},this.eb=(pi(e)||{}).Na||null,this.ab=null}function Ai(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new Br("argument-error",'SAML provider IDs must be prefixed with "saml."');Di.call(this,e,[])}function Ri(e){Di.call(this,e,di),this.a=[]}function Ni(){Ri.call(this,"facebook.com")}function Mi(e){if(!e)throw new Br("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return p(e)&&(t=e.accessToken),(new Ni).credential(null,t)}function Fi(){Ri.call(this,"github.com")}function Li(e){if(!e)throw new Br("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return p(e)&&(t=e.accessToken),(new Fi).credential(null,t)}function Vi(){Ri.call(this,"google.com"),this.ua("profile")}function Ui(e,t){var n=e;return p(e)&&(n=e.idToken,t=e.accessToken),(new Vi).credential(n,t)}function ji(){Di.call(this,"twitter.com",hi)}function qi(e,t){var n=e;if(p(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new Br("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Pi("twitter.com",n,"twitter.com")}function Bi(e,t,n){this.a=e,this.c=t,Pr(this,"providerId","password"),Pr(this,"signInMethod",n===Wi.EMAIL_LINK_SIGN_IN_METHOD?Wi.EMAIL_LINK_SIGN_IN_METHOD:Wi.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Wi(){Or(this,{providerId:"password",isOAuthProvider:!1})}function zi(e,t){if(!(t=Hi(t)))throw new Br("argument-error","Invalid email link!");return new Bi(e,t,Wi.EMAIL_LINK_SIGN_IN_METHOD)}function Hi(e){var t=Yt((e=new Si(e=Ei(e))).a,"oobCode")||null;return"signIn"===(Yt(e.a,"mode")||null)&&t?t:null}function Gi(e){if(!(e.Ua&&e.Ta||e.Fa&&e.$))throw new Br("internal-error");this.a=e,Pr(this,"providerId","phone"),Pr(this,"signInMethod","phone")}function Qi(e){return e.a.Fa&&e.a.$?{temporaryProof:e.a.Fa,phoneNumber:e.a.$}:{sessionInfo:e.a.Ua,code:e.a.Ta}}function Ki(e){try{this.a=e||i.a.auth()}catch(t){throw new Br("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Or(this,{providerId:"phone",isOAuthProvider:!1})}function Yi(e,t){if(!e)throw new Br("missing-verification-id");if(!t)throw new Br("missing-verification-code");return new Gi({Ua:e,Ta:t})}function Xi(e){if(e.temporaryProof&&e.phoneNumber)return new Gi({Fa:e.temporaryProof,$:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return Ui(o,n);case"facebook.com":return Mi(n);case"github.com":return Li(n);case"twitter.com":return qi(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new xi(t,a):new Pi(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new Ri(t).credential(o,n,i):null}}catch(s){return null}}function Ji(e){if(!e.isOAuthProvider)throw new Br("invalid-oauth-provider")}function Zi(e,t,n,r,i,o){if(this.b=e,this.c=t||null,this.f=n||null,this.g=r||null,this.h=o||null,this.a=i||null,!this.f&&!this.a)throw new Br("invalid-auth-event");if(this.f&&this.a)throw new Br("invalid-auth-event");if(this.f&&!this.g)throw new Br("invalid-auth-event")}function $i(e){return(e=e||{}).type?new Zi(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&Wr(e.error),e.postBody):null}function eo(){this.b=null,this.a=[]}C(bi,yi),C(_i,bi),C(wi,bi),C(Ci,bi),C(ki,bi),xi.prototype.la=function(e){return Ta(e,Ii(this))},xi.prototype.b=function(e,t){var n=Ii(this);return n.idToken=t,xa(e,n)},xi.prototype.f=function(e,t){return Ti(Ia(e,Ii(this)),t)},xi.prototype.C=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Pi.prototype.la=function(e){return Ta(e,Oi(this))},Pi.prototype.b=function(e,t){var n=Oi(this);return n.idToken=t,xa(e,n)},Pi.prototype.f=function(e,t){return Ti(Ia(e,Oi(this)),t)},Pi.prototype.C=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},Di.prototype.Da=function(e){return this.zb=ie(e),this},C(Ai,Di),C(Ri,Di),Ri.prototype.ua=function(e){return L(this.a,e)||this.a.push(e),this},Ri.prototype.Fb=function(){return q(this.a)},Ri.prototype.credential=function(e,t,n){if(!e&&!t)throw new Br("argument-error","credential failed: must provide the ID token and/or the access token.");return new Pi(this.providerId,{idToken:e||null,accessToken:t||null,nonce:n||null},this.providerId)},C(Ni,Ri),Pr(Ni,"PROVIDER_ID","facebook.com"),Pr(Ni,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),C(Fi,Ri),Pr(Fi,"PROVIDER_ID","github.com"),Pr(Fi,"GITHUB_SIGN_IN_METHOD","github.com"),C(Vi,Ri),Pr(Vi,"PROVIDER_ID","google.com"),Pr(Vi,"GOOGLE_SIGN_IN_METHOD","google.com"),C(ji,Di),Pr(ji,"PROVIDER_ID","twitter.com"),Pr(ji,"TWITTER_SIGN_IN_METHOD","twitter.com"),Bi.prototype.la=function(e){return this.signInMethod==Wi.EMAIL_LINK_SIGN_IN_METHOD?rs(e,Fa,{email:this.a,oobCode:this.c}):rs(e,$a,{email:this.a,password:this.c})},Bi.prototype.b=function(e,t){return this.signInMethod==Wi.EMAIL_LINK_SIGN_IN_METHOD?rs(e,La,{idToken:t,email:this.a,oobCode:this.c}):rs(e,Qa,{idToken:t,email:this.a,password:this.c})},Bi.prototype.f=function(e,t){return Ti(this.la(e),t)},Bi.prototype.C=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Or(Wi,{PROVIDER_ID:"password"}),Or(Wi,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Or(Wi,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Gi.prototype.la=function(e){return e.Va(Qi(this))},Gi.prototype.b=function(e,t){var n=Qi(this);return n.idToken=t,rs(e,ts,n)},Gi.prototype.f=function(e,t){var n=Qi(this);return n.operation="REAUTH",Ti(e=rs(e,ns,n),t)},Gi.prototype.C=function(){var e={providerId:"phone"};return this.a.Ua&&(e.verificationId=this.a.Ua),this.a.Ta&&(e.verificationCode=this.a.Ta),this.a.Fa&&(e.temporaryProof=this.a.Fa),this.a.$&&(e.phoneNumber=this.a.$),e},Ki.prototype.Va=function(e,t){var n=this.a.b;return ke(t.verify()).then((function(i){if(!r(i))throw new Br("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":return function(e,t){return rs(e,Ha,t)}(n,{phoneNumber:e,recaptchaToken:i}).then((function(e){return"function"==typeof t.reset&&t.reset(),e}),(function(e){throw"function"==typeof t.reset&&t.reset(),e}));default:throw new Br("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Or(Ki,{PROVIDER_ID:"phone"}),Or(Ki,{PHONE_SIGN_IN_METHOD:"phone"}),Zi.prototype.C=function(){return{type:this.b,eventId:this.c,urlResponse:this.f,sessionId:this.g,postBody:this.h,error:this.a&&this.a.C()}};var to,no=null;function ro(e){var t="unauthorized-domain",n=void 0,r=Xt(e);e=r.b,"chrome-extension"==(r=r.c)?n=ce("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=ce("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",Br.call(this,t,n)}function io(e,t,n){Br.call(this,e,n),(e=t||{}).Ab&&Pr(this,"email",e.Ab),e.$&&Pr(this,"phoneNumber",e.$),e.credential&&Pr(this,"credential",e.credential)}function oo(e){if(e.code){var t=e.code||"";0==t.indexOf(zr)&&(t=t.substring(zr.length));var n={credential:Xi(e)};if(e.email)n.Ab=e.email;else if(e.phoneNumber)n.$=e.phoneNumber;else if(!n.credential)return new Br(t,e.message||void 0);return new io(t,n,e.message)}return null}function ao(){}function so(){}function uo(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function co(){}function lo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.fc,this),this.a.onerror=b(this.Gb,this),this.a.onprogress=b(this.gc,this),this.a.ontimeout=b(this.kc,this)}function ho(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function fo(e,t,n){this.reset(e,t,n,void 0,void 0)}function po(e){this.f=e,this.b=this.c=this.a=null}function go(e,t){this.name=e,this.value=t}eo.prototype.subscribe=function(e){var t=this;this.a.push(e),this.b||(this.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"==typeof(e=cr("universalLinks.subscribe",n))&&e(null,this.b))},eo.prototype.unsubscribe=function(e){U(this.a,(function(t){return t==e}))},C(ro,Br),C(io,Br),io.prototype.C=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber);var t=this.credential&&this.credential.C();return t&&ue(e,t),e},io.prototype.toJSON=function(){return this.C()},ao.prototype.c=null,C(so,ao),so.prototype.a=function(){var e=uo(this);return e?new ActiveXObject(e):new XMLHttpRequest},so.prototype.b=function(){var e={};return uo(this)&&(e[0]=!0,e[1]=!0),e},to=new so,C(co,ao),co.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new lo;throw Error("Unsupported browser")},co.prototype.b=function(){return{}},(e=lo.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ho(this,4)},e.Gb=function(){this.status=500,this.response=this.responseText="",ho(this,4)},e.kc=function(){this.Gb()},e.gc=function(){this.status=200,ho(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},fo.prototype.a=null,fo.prototype.reset=function(e,t,n,r,i){r||w(),delete this.a},go.prototype.toString=function(){return this.name};var mo=new go("SEVERE",1e3),vo=new go("WARNING",900),yo=new go("CONFIG",700),bo=new go("FINE",500);po.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.c?t.c:t.a?e(t.a):(T("Root logger has no level set."),null)}(this).value)for(f(t)&&(t=t()),e=new fo(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var _o={},wo=null;function Co(e){var t;if(wo||(wo=new po(""),_o[""]=wo,wo.c=yo),!(t=_o[e])){t=new po(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=Co(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,_o[e]=t}return t}function ko(e,t){e&&e.log(bo,t,void 0)}function So(e){this.f=e}function Eo(e){At.call(this),this.u=e,this.readyState=To,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Co("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}C(So,ao),So.prototype.a=function(){return new Eo(this.f)},So.prototype.b=function(e){return function(){return e}}({}),C(Eo,At);var To=0;function xo(e){e.c.read().then(e.ec.bind(e)).catch(e.La.bind(e))}function Io(e,t){t&&e.f&&(e.status=e.f.status,e.statusText=e.f.statusText),e.readyState=4,e.f=null,e.c=null,e.l=null,Po(e)}function Po(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Oo(e){At.call(this),this.headers=new jt,this.D=e||null,this.c=!1,this.w=this.a=null,this.h=this.N=this.l="",this.f=this.I=this.i=this.G=!1,this.g=0,this.u=null,this.m=Do,this.v=this.O=!1}(e=Eo.prototype).open=function(e,t){if(this.readyState!=To)throw this.abort(),Error("Error reopening a connection");this.m=e,this.g=t,this.readyState=1,Po(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.i,method:this.m,credentials:void 0,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.g,t)).then(this.jc.bind(this),this.La.bind(this))},e.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Io(this,!1)),this.readyState=To},e.jc=function(e){this.a&&(this.f=e,this.b||(this.b=e.headers,this.readyState=2,Po(this)),this.a&&(this.readyState=3,Po(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.hc.bind(this),this.La.bind(this)):void 0!==n.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.l=new TextDecoder,xo(this)):e.text().then(this.ic.bind(this),this.La.bind(this)))))},e.ec=function(e){if(this.a){var t=this.l.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?Io(this,!0):Po(this),3==this.readyState&&xo(this)}},e.ic=function(e){this.a&&(this.response=this.responseText=e,Io(this,!0))},e.hc=function(e){this.a&&(this.response=e,Io(this,!0))},e.La=function(e){var t=this.h;t&&t.log(vo,"Failed to fetch url "+this.g,e instanceof Error?e:Error(e)),this.a&&Io(this,!0)},e.setRequestHeader=function(e,t){this.i.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.h)&&e.log(vo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.h;return e&&e.log(vo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},C(Oo,At);var Do="";Oo.prototype.b=Co("goog.net.XhrIo");var Ao=/^https?$/i,Ro=["POST","PUT"];function No(e){return"content-type"==e.toLowerCase()}function Mo(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,Fo(e),Vo(e)}function Fo(e){e.G||(e.G=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Lo(e){if(e.c&&void 0!==t)if(e.w[1]&&4==jo(e)&&2==qo(e))ko(e.b,Bo(e,"Local request error detected and ignored"));else if(e.i&&4==jo(e))Ft(e.Jb,0,e);else if(e.dispatchEvent("readystatechange"),4==jo(e)){ko(e.b,Bo(e,"Request complete")),e.c=!1;try{var r,i=qo(e);e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var o=!0;break e;default:o=!1}if(!(r=o)){var a;if(a=0===i){var s=String(e.l).match(Wt)[1]||null;if(!s&&n.self&&n.self.location){var u=n.self.location.protocol;s=u.substr(0,u.length-1)}a=!Ao.test(s?s.toLowerCase():"")}r=a}if(r)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var c=2<jo(e)?e.a.statusText:""}catch(l){ko(e.b,"Can not get status: "+l.message),c=""}e.h=c+" ["+qo(e)+"]",Fo(e)}}finally{Vo(e)}}}function Vo(e,t){if(e.a){Uo(e);var n=e.a,r=e.w[0]?u:null;e.a=null,e.w=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(e=e.b)&&e.log(mo,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function Uo(e){e.a&&e.v&&(e.a.ontimeout=null),e.u&&(n.clearTimeout(e.u),e.u=null)}function jo(e){return e.a?e.a.readyState:0}function qo(e){try{return 2<jo(e)?e.a.status:-1}catch(t){return-1}}function Bo(e,t){return t+" ["+e.N+" "+e.l+" "+qo(e)+"]"}function Wo(e){var t=ea;this.g=[],this.v=t,this.u=e||null,this.f=this.a=!1,this.c=void 0,this.l=this.w=this.i=!1,this.h=0,this.b=null,this.o=0}function zo(e,t,n){e.a=!0,e.c=n,e.f=!t,Ko(e)}function Ho(e){if(e.a){if(!e.l)throw new Yo(e);e.l=!1}}function Go(e,t,n,r){e.g.push([t,n,r]),e.a&&Ko(e)}function Qo(e){return F(e.g,(function(e){return f(e[1])}))}function Ko(e){if(e.h&&e.a&&Qo(e)){var t=e.h,r=Zo[t];r&&(n.clearTimeout(r.a),delete Zo[t]),e.h=0}e.b&&(e.b.o--,delete e.b),t=e.c;for(var i=r=!1;e.g.length&&!e.i;){var o=e.g.shift(),a=o[0],s=o[1];if(o=o[2],a=e.f?s:a)try{var u=a.call(o||e.u,t);void 0!==u&&(e.f=e.f&&(u==t||u instanceof Error),e.c=t=u),(k(t)||"function"==typeof n.Promise&&t instanceof n.Promise)&&(i=!0,e.i=!0)}catch(c){t=c,e.f=!0,Qo(e)||(r=!0)}}e.c=t,i&&(u=b(e.m,e,!0),i=b(e.m,e,!1),t instanceof Wo?(Go(t,u,i),t.w=!0):t.then(u,i)),r&&(t=new Jo(t),Zo[t.a]=t,e.h=t.a)}function Yo(){S.call(this)}function Xo(){S.call(this)}function Jo(e){this.a=n.setTimeout(b(this.c,this),0),this.b=e}(e=Oo.prototype).Ga=function(){void 0!==t&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ko(this.b,Bo(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(ko(this.b,Bo(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Vo(this))},e.va=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Vo(this,!0)),Oo.pb.va.call(this)},e.Jb=function(){this.qa||(this.I||this.i||this.f?Lo(this):this.yc())},e.yc=function(){Lo(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Do:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(mo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ko(this.b,"Can not get response: "+t.message),null}},Wo.prototype.cancel=function(e){if(this.a)this.c instanceof Wo&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.o--,0>=t.o&&t.cancel())}this.v?this.v.call(this.u,this):this.l=!0,this.a||(e=new Xo(this),Ho(this),zo(this,!1,e))}},Wo.prototype.m=function(e,t){this.i=!1,zo(this,e,t)},Wo.prototype.then=function(e,t,n){var r,i,o=new me((function(e,t){r=e,i=t}));return Go(this,r,(function(e){e instanceof Xo?o.cancel():i(e)})),o.then(e,t,n)},Wo.prototype.$goog_Thenable=!0,C(Yo,S),Yo.prototype.message="Deferred has already fired",Yo.prototype.name="AlreadyCalledError",C(Xo,S),Xo.prototype.message="Deferred was canceled",Xo.prototype.name="CanceledError",Jo.prototype.c=function(){throw delete Zo[this.a],this.b};var Zo={};function $o(e){var t={},r=t.document||document,i=_n(e),o=document.createElement("SCRIPT"),u={Lb:o,Ga:void 0},c=new Wo(u),l=null,h=null!=t.timeout?t.timeout:5e3;return 0<h&&(l=window.setTimeout((function(){ta(o,!0);var e=new ia(ra,"Timeout reached for loading script "+i);Ho(c),zo(c,!1,e)}),h),u.Ga=l),o.onload=o.onreadystatechange=function(){o.readyState&&"loaded"!=o.readyState&&"complete"!=o.readyState||(ta(o,t.hd||!1,l),Ho(c),zo(c,!0,null))},o.onerror=function(){ta(o,!0,l);var e=new ia(na,"Error while loading script "+i);Ho(c),zo(c,!1,e)},ue(u=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Mn(o,u),function(e,t){e.src=_n(t),null===s&&(s=(t=(t=n.document).querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&a.test(t)?t:""),(t=s)&&e.setAttribute("nonce",t)}(o,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(r).appendChild(o),c}function ea(){if(this&&this.Lb){var e=this.Lb;e&&"SCRIPT"==e.tagName&&ta(e,!0,this.Ga)}}function ta(e,t,r){null!=r&&n.clearTimeout(r),e.onload=u,e.onerror=u,e.onreadystatechange=u,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var na=0,ra=1;function ia(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),S.call(this,n),this.code=e}function oa(e){this.f=e}function aa(e,t,r){if(this.b=e,this.i=(e=t||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.o=e.secureTokenTimeout||ca,this.f=ie(e.secureTokenHeaders||la),this.g=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.h=e.firebaseTimeout||ha,this.a=ie(e.firebaseHeaders||da),r&&(this.a["X-Client-Version"]=r,this.f["X-Client-Version"]=r),r="Node"==nr(),!(r=n.XMLHttpRequest||r&&i.a.INTERNAL.node&&i.a.INTERNAL.node.XMLHttpRequest)&&!tr())throw new Br("internal-error","The XMLHttpRequest compatibility library was not found.");this.c=void 0,this.c=tr()?new So(self):rr()?new oa(r):new co}C(ia,S),C(oa,ao),oa.prototype.a=function(){return new this.f},oa.prototype.b=function(){return{}};var sa,ua="idToken",ca=new wr(3e4,6e4),la={"Content-Type":"application/x-www-form-urlencoded"},ha=new wr(3e4,6e4),da={"Content-Type":"application/json"};function fa(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function pa(e,t){t?(e.a["X-Client-Version"]=t,e.f["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.f["X-Client-Version"])}function ga(e,t,r,i,o,a,s){(function(){var e=ur();return!((e="Chrome"!=or(e)?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e||He&&et&&!(9<et))})()||tr()?e=b(e.m,e):(sa||(sa=new me((function(e,t){!function(e,t){((window.gapi||{}).client||{}).request?e():(n[va]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){Go(e,null,t,void 0)}($o(wn(ma,{onload:va})),(function(){t(Error("CORS_UNSUPPORTED"))})))}(e,t)}))),e=b(e.l,e)),e(t,r,i,o,a,s)}aa.prototype.m=function(e,t,i,o,a,s){if(tr()&&(void 0===n.fetch||void 0===n.Headers||void 0===n.Request))throw new Br("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var u=new Oo(this.c);if(s){u.g=Math.max(0,s);var c=setTimeout((function(){u.dispatchEvent("timeout")}),s)}Rt(u,"complete",(function(){c&&clearTimeout(c);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return ko(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(n){e=null}t&&t(e)})),Nt(u,"ready",(function(){c&&clearTimeout(c),je(this)})),Nt(u,"timeout",(function(){c&&clearTimeout(c),je(this),t&&t(null)})),function(e,t,i,o,a){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);i=i?i.toUpperCase():"GET",e.l=t,e.h="",e.N=i,e.G=!1,e.c=!0,e.a=e.D?e.D.a():to.a(),e.w=function(e){return e.c||(e.c=e.b())}(e.D?e.D:to),e.a.onreadystatechange=b(e.Jb,e);try{ko(e.b,Bo(e,"Opening Xhr")),e.I=!0,e.a.open(i,String(t),!0),e.I=!1}catch(u){return ko(e.b,Bo(e,"Error opening Xhr: "+u.message)),void Mo(e,u)}t=o||"";var s=new jt(e.headers);a&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(d(e)||r(e))N(e,t,void 0);else for(var n=Ut(e),i=Vt(e),o=i.length,a=0;a<o;a++)t.call(void 0,i[a],n&&n[a],e)}(a,(function(e,t){s.set(t,e)})),a=function(e){e:{for(var t=No,n=e.length,i=r(e)?e.split(""):e,o=0;o<n;o++)if(o in i&&t.call(void 0,i[o],o,e)){t=o;break e}t=-1}return 0>t?null:r(e)?e.charAt(t):e[t]}(s.U()),o=n.FormData&&t instanceof n.FormData,!L(Ro,i)||a||o||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.O&&(e.a.withCredentials=e.O);try{Uo(e),0<e.g&&(e.v=function(e){return He&&nt(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(e.a),ko(e.b,Bo(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=b(e.Ga,e)):e.u=Ft(e.Ga,e.g,e)),ko(e.b,Bo(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(u){ko(e.b,Bo(e,"Send error: "+u.message)),Mo(e,u)}}(u,e,i,o,a)};var ma=new gn(yn,"https://apis.google.com/js/client.js?onload=%{onload}"),va="__fcb"+Math.floor(1e6*Math.random()).toString();function ya(e){if(!r(e=e.email)||!Jn.test(e))throw new Br("invalid-email")}function ba(e){"email"in e&&ya(e)}function _a(e){if(!e[ua])throw new Br("internal-error")}function wa(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new Br("internal-error")}else{if(!e.sessionInfo)throw new Br("missing-verification-id");if(!e.code)throw new Br("missing-verification-code")}}aa.prototype.l=function(e,t,n,r,i){var o=this;sa.then((function(){window.gapi.client.setApiKey(o.b);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).s((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},aa.prototype.Ra=function(){return rs(this,Ka,{})},aa.prototype.qb=function(e,t){return rs(this,Ga,{idToken:e,email:t})},aa.prototype.rb=function(e,t){return rs(this,Qa,{idToken:e,password:t})};var Ca={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ka(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new Br("internal-error")}function Sa(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&hn(e=new sn(e.postBody),"nonce")&&(t.nonce=e.get("nonce"))),t}function Ea(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=oo(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=oo(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=oo(e)):e.errorMessage&&(t=is(e.errorMessage)),t)throw t;if(!e[ua])throw new Br("internal-error")}function Ta(e,t){return t.returnIdpCredential=!0,rs(e,Ya,t)}function xa(e,t){return t.returnIdpCredential=!0,rs(e,Ja,t)}function Ia(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,rs(e,Xa,t)}function Pa(e){if(!e.oobCode)throw new Br("invalid-action-code")}(e=aa.prototype).sb=function(e,t){var n={idToken:e},r=[];return ne(Ca,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),rs(this,Ga,n)},e.lb=function(e,t){return ue(e={requestType:"PASSWORD_RESET",email:e},t),rs(this,qa,e)},e.mb=function(e,t){return ue(e={requestType:"EMAIL_SIGNIN",email:e},t),rs(this,Ua,e)},e.kb=function(e,t){return ue(e={requestType:"VERIFY_EMAIL",idToken:e},t),rs(this,ja,e)},e.Va=function(e){return rs(this,es,e)},e.$a=function(e,t){return rs(this,za,{oobCode:e,newPassword:t})},e.Ja=function(e){return rs(this,Da,{oobCode:e})},e.Xa=function(e){return rs(this,Oa,{oobCode:e})};var Oa={endpoint:"setAccountInfo",B:Pa,da:"email"},Da={endpoint:"resetPassword",B:Pa,J:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t)throw new Br("internal-error")}},Aa={endpoint:"signupNewUser",B:function(e){if(ya(e),!e.password)throw new Br("weak-password")},J:_a,R:!0},Ra={endpoint:"createAuthUri"},Na={endpoint:"deleteAccount",T:["idToken"]},Ma={endpoint:"setAccountInfo",T:["idToken","deleteProvider"],B:function(e){if(!h(e.deleteProvider))throw new Br("internal-error")}},Fa={endpoint:"emailLinkSignin",T:["email","oobCode"],B:ya,J:_a,R:!0},La={endpoint:"emailLinkSignin",T:["idToken","email","oobCode"],B:ya,J:_a,R:!0},Va={endpoint:"getAccountInfo"},Ua={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new Br("internal-error");ya(e)},da:"email"},ja={endpoint:"getOobConfirmationCode",T:["idToken","requestType"],B:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new Br("internal-error")},da:"email"},qa={endpoint:"getOobConfirmationCode",T:["requestType"],B:function(e){if("PASSWORD_RESET"!=e.requestType)throw new Br("internal-error");ya(e)},da:"email"},Ba={vb:!0,endpoint:"getProjectConfig",Ib:"GET"},Wa={vb:!0,endpoint:"getRecaptchaParam",Ib:"GET",J:function(e){if(!e.recaptchaSiteKey)throw new Br("internal-error")}},za={endpoint:"resetPassword",B:Pa,da:"email"},Ha={endpoint:"sendVerificationCode",T:["phoneNumber","recaptchaToken"],da:"sessionInfo"},Ga={endpoint:"setAccountInfo",T:["idToken"],B:ba,R:!0},Qa={endpoint:"setAccountInfo",T:["idToken"],B:function(e){if(ba(e),!e.password)throw new Br("weak-password")},J:_a,R:!0},Ka={endpoint:"signupNewUser",J:_a,R:!0},Ya={endpoint:"verifyAssertion",B:ka,Pa:Sa,J:Ea,R:!0},Xa={endpoint:"verifyAssertion",B:ka,Pa:Sa,J:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new Br("user-not-found");if(e.errorMessage)throw is(e.errorMessage);if(!e[ua])throw new Br("internal-error")},R:!0},Ja={endpoint:"verifyAssertion",B:function(e){if(ka(e),!e.idToken)throw new Br("internal-error")},Pa:Sa,J:Ea,R:!0},Za={endpoint:"verifyCustomToken",B:function(e){if(!e.token)throw new Br("invalid-custom-token")},J:_a,R:!0},$a={endpoint:"verifyPassword",B:function(e){if(ya(e),!e.password)throw new Br("wrong-password")},J:_a,R:!0},es={endpoint:"verifyPhoneNumber",B:wa,J:_a},ts={endpoint:"verifyPhoneNumber",B:function(e){if(!e.idToken)throw new Br("internal-error");wa(e)},J:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",oo(e);_a(e)}},ns={Xb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:wa,J:_a};function rs(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return!1}return!0}(n,t.T))return Se(new Br("internal-error"));var r,i=t.Ib||"POST";return ke(n).then(t.B).then((function(){return t.R&&(n.returnSecureToken=!0),function(e,t,n,r,i,o){var a=Xt(e.g+t);Kt(a,"key",e.b),o&&Kt(a,"cb",w().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&Kt(a,u,r[u]);return new me((function(t,o){ga(e,a.toString(),(function(e){e?e.error?o(os(e,i||{})):t(e):o(new Br("network-request-failed"))}),n,s?void 0:Un(mr(r)),e.a,e.h.get())}))}(e,t.endpoint,i,n,t.Xb,t.vb||!1)})).then((function(e){return r=e,t.Pa?t.Pa(n,r):r})).then(t.J).then((function(){if(!t.da)return r;if(!(t.da in r))throw new Br("internal-error");return r[t.da]}))}function is(e){return os({error:{errors:[{message:e}],code:400,message:e}})}function os(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Br(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",ue(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new Br(r[i],t);return!t&&e&&(t=gr(e)),new Br("internal-error",t)}function as(e){this.b=e,this.a=null,this.gb=function(e){return(ls||(ls=new me((function(e,t){function r(){_r(),cr("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){_r(),t(Error("Network Error"))},timeout:us.get()})}if(cr("gapi.iframes.Iframe"))e();else if(cr("gapi.load"))r();else{var i="__iframefcb"+Math.floor(1e6*Math.random()).toString();n[i]=function(){cr("gapi.load")?r():t(Error("Network Error"))},ke($o(i=wn(ss,{onload:i}))).s((function(){t(Error("Network Error"))}))}})).s((function(e){throw ls=null,e})))).then((function(){return new me((function(t,n){cr("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:cr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cs.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var ss=new gn(yn,"https://apis.google.com/js/api.js?onload=%{onload}"),us=new wr(3e4,6e4),cs=new wr(5e3,15e3),ls=null;function hs(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=Jt(this.i,"/__/auth/iframe"),Kt(this.a,"apiKey",this.g),Kt(this.a,"appName",this.h),this.b=null,this.c=[]}function ds(e,t,n,r,i){this.m=e,this.l=t,this.c=n,this.o=r,this.h=this.g=this.i=null,this.a=i,this.f=null}function fs(e){try{return i.a.app(e).auth().ya()}catch(t){return[]}}function ps(e,t,n,r,i){this.l=e,this.f=t,this.b=n,this.c=r||null,this.h=i||null,this.m=this.u=this.v=null,this.g=[],this.o=this.a=null}function gs(e){var t=Hn();return function(e){return rs(e,Ba,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=Xt(t),r=n.c;n=n.b;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Xt(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:Xn.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new ro(Hn())}))}function ms(e){return e.o?e.o:(e.o=Zn().then((function(){if(!e.u){var t=e.c,n=e.h,r=fs(e.b),i=new hs(e.l,e.f,e.b);i.f=t,i.b=n,i.c=q(r||[]),e.u=i.toString()}e.i=new as(e.u),function(e){if(!e.i)throw Error("IfcHandler must be initialized!");!function(e,t){e.gb.then((function(){e.a.register("authEvent",t,cr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.i,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=$i(t.authEvent),n=0;n<e.g.length;n++)r=e.g[n](t)||r;return(n={}).status=r?"ACK":"ERROR",ke(n)}return n.status="ERROR",ke(n)}))}(e)})),e.o)}function vs(e){return e.m||(e.v=e.c?sr(e.c,fs(e.b)):null,e.m=new aa(e.f,li(e.h),e.v)),e.m}function ys(e,t,n,r,i,o,a,s,u,c){return(e=new ds(e,t,n,r,i)).i=o,e.g=a,e.h=s,e.b=ie(u||null),e.f=c,e.toString()}function bs(e){if(this.a=e||i.a.INTERNAL.reactNative&&i.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Br("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function _s(e){this.b=e,this.a={},this.c=b(this.f,this)}hs.prototype.toString=function(){return this.f?Kt(this.a,"v",this.f):ln(this.a.a,"v"),this.b?Kt(this.a,"eid",this.b):ln(this.a.a,"eid"),this.c.length?Kt(this.a,"fw",this.c.join(",")):ln(this.a.a,"fw"),this.a.toString()},ds.prototype.toString=function(){var e=Jt(this.m,"/__/auth/handler");if(Kt(e,"apiKey",this.l),Kt(e,"appName",this.c),Kt(e,"authType",this.o),this.a.isOAuthProvider){var t=this.a;try{var n=i.a.app(this.c).auth().ea()}catch(u){n=null}for(var r in t.ab=n,Kt(e,"providerId",this.a.providerId),n=mr((t=this.a).zb))n[r]=n[r].toString();r=t.Fc,n=ie(n);for(var o=0;o<r.length;o++){var a=r[o];a in n&&delete n[a]}t.eb&&t.ab&&!n[t.eb]&&(n[t.eb]=t.ab),re(n)||Kt(e,"customParameters",gr(n))}if("function"==typeof this.a.Fb&&(t=this.a.Fb()).length&&Kt(e,"scopes",t.join(",")),this.i?Kt(e,"redirectUrl",this.i):ln(e.a,"redirectUrl"),this.g?Kt(e,"eventId",this.g):ln(e.a,"eventId"),this.h?Kt(e,"v",this.h):ln(e.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Yt(e,s)&&Kt(e,s,this.b[s]);return this.f?Kt(e,"eid",this.f):ln(e.a,"eid"),(s=fs(this.c)).length&&Kt(e,"fw",s.join(",")),e.toString()},(e=ps.prototype).Ea=function(e,t,n){var r=new Br("popup-closed-by-user"),i=new Br("web-storage-unsupported"),o=this,a=!1;return this.ga().then((function(){(function(e){var t={type:"webStorageSupport"};return ms(e).then((function(){return function(e,t){return e.gb.then((function(){return new me((function(n){e.a.send(t.type,t,n,cr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.i,t)})).then((function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(e&&Kn(e),t(i),a=!0)}))})).s((function(){})).then((function(){if(!a)return function(e){return new me((function(t){return function n(){Lt(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!a)return Lt(n).then((function(){t(r)}))}))},e.Mb=function(){var e=ur();return!pr(e)&&!br(e)},e.Hb=function(){return!1},e.Db=function(e,t,n,r,i,o,a){if(!e)return Se(new Br("popup-blocked"));if(a&&!pr())return this.ga().s((function(t){Kn(e),i(t)})),r(),ke();this.a||(this.a=gs(vs(this)));var s=this;return this.a.then((function(){var t=s.ga().s((function(t){throw Kn(e),i(t),t}));return r(),t})).then((function(){Ji(n),a||Gn(ys(s.l,s.f,s.b,t,n,null,o,s.c,void 0,s.h),e)})).s((function(e){throw"auth/network-request-failed"==e.code&&(s.a=null),e}))},e.Ca=function(e,t,n){this.a||(this.a=gs(vs(this)));var r=this;return this.a.then((function(){Ji(t),Gn(ys(r.l,r.f,r.b,e,t,Hn(),n,r.c,void 0,r.h))})).s((function(e){throw"auth/network-request-failed"==e.code&&(r.a=null),e}))},e.ga=function(){var e=this;return ms(this).then((function(){return e.i.gb})).s((function(){throw e.a=null,new Br("network-request-failed")}))},e.Qb=function(){return!0},e.wa=function(e){this.g.push(e)},e.Ka=function(e){U(this.g,(function(t){return t==e}))},(e=bs.prototype).get=function(e){return ke(this.a.getItem(e)).then((function(e){return e&&vr(e)}))},e.set=function(e,t){return ke(this.a.setItem(e,gr(t)))},e.P=function(e){return ke(this.a.removeItem(e))},e.Y=function(){},e.ca=function(){};var ws,Cs=[];function ks(e){this.a=e}function Ss(e){this.c=e,this.b=!1,this.a=[]}function Es(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return Se(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new me((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),e.a.push(c={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),void 0!==e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return Ts(e,c),t})).s((function(t){throw Ts(e,c),t}))}function Ts(e,t){if(t){var n=t.messageChannel;n&&(n.port1.removeEventListener("message",t.onMessage),n.port1.close()),U(e.a,(function(e){return e==t}))}}function xs(){if(!Ps())throw new Br("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.l=n.indexedDB,this.type="indexedDB",this.g=this.o=this.f=this.i=null,this.u=!1,this.h=null;var e=this;tr()&&self?(this.o=function(){var e=tr()?self:null;if(N(Cs,(function(n){n.b==e&&(t=n)})),!t){var t=new _s(e);Cs.push(t)}return t}(),this.o.subscribe("keyChanged",(function(t,n){return Ns(e).then((function(t){return 0<t.length&&N(e.a,(function(e){e(t)})),{keyProcessed:L(t,n.key)}}))})),this.o.subscribe("ping",(function(){return ke(["keyChanged"])}))):function(){var e=n.navigator;return e&&e.serviceWorker?ke().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).s((function(){return null})):ke(null)}().then((function(t){(e.h=t)&&(e.g=new Ss(new ks(t)),Es(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&L(t[0].value,"keyChanged")&&(e.u=!0)})).s((function(){})))}))}function Is(e){return e.m||(e.m=function e(t){return new me((function(n,r){var i=t.l.open("firebaseLocalStorageDb",1);i.onerror=function(e){try{e.preventDefault()}catch(t){}r(Error(e.target.error))},i.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){r(t)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):function(e){return new me((function(t,n){var r=e.l.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}(t).then((function(){return e(t)})).then((function(e){n(e)})).s((function(e){r(e)}))}}))}(e)),e.m}function Ps(){try{return!!n.indexedDB}catch(We){return!1}}function Os(e){return e.objectStore("firebaseLocalStorage")}function Ds(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function As(e){return new me((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function Rs(e,t){return e.g&&e.h&&function(){var e=n.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?Es(e.g,"keyChanged",{key:t},e.u).then((function(){})).s((function(){})):ke()}function Ns(e){return Is(e).then((function(e){var t=Os(Ds(e,!1));return t.getAll?As(t.getAll()):new me((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=function e(t,n){var r,i=[];for(r in t)r in n?typeof t[r]!=typeof n[r]?i.push(r):"object"==typeof t[r]&&null!=t[r]&&null!=n[r]?0<e(t[r],n[r]).length&&i.push(r):t[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in t||i.push(r);return i}(e.c,n),e.c=n}return r}))}function Ms(e){e.i&&e.i.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function Fs(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=ke().then((function(){if(Ps()){var e=yr(),r="__sak"+e;return ws||(ws=new xs),(n=ws).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.P(r)})).then((function(){return n})).s((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.Y((function(e){N(t.a,(function(t){t(e)}))})),e}))}function Ls(){this.a={},this.type="inMemory"}function Vs(){if(!function(){var e="Node"==nr();if(!(e=Us()||e&&i.a.INTERNAL.node&&i.a.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==nr())throw new Br("internal-error","The LocalStorage compatibility library was not found.");throw new Br("web-storage-unsupported")}this.a=Us()||i.a.INTERNAL.node.localStorage,this.type="localStorage"}function Us(){try{var e=n.localStorage,t=yr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(r){return null}}function js(){this.type="nullStorage"}function qs(){if(!function(){var e="Node"==nr();if(!(e=Bs()||e&&i.a.INTERNAL.node&&i.a.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==nr())throw new Br("internal-error","The SessionStorage compatibility library was not found.");throw new Br("web-storage-unsupported")}this.a=Bs()||i.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Bs(){try{var e=n.sessionStorage,t=yr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(r){return null}}function Ws(){var e={};e.Browser=Gs,e.Node=Qs,e.ReactNative=Ks,e.Worker=Ys,this.a=e[nr()]}_s.prototype.f=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];N(r,(function(t){i.push(ke().then((function(){return t(e.origin,e.data.data)})))})),Te(i).then((function(r){var i=[];N(r,(function(e){i.push({fulfilled:e.Eb,value:e.value,reason:e.reason?e.reason.message:void 0})})),N(i,(function(e){for(var t in e)void 0===e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},_s.prototype.subscribe=function(e,t){re(this.a)&&this.b.addEventListener("message",this.c),void 0===this.a[e]&&(this.a[e]=[]),this.a[e].push(t)},_s.prototype.unsubscribe=function(e,t){void 0!==this.a[e]&&t?(U(this.a[e],(function(e){return e==t})),0==this.a[e].length&&delete this.a[e]):t||delete this.a[e],re(this.a)&&this.b.removeEventListener("message",this.c)},ks.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Ss.prototype.close=function(){for(;0<this.a.length;)Ts(this,this.a[0]);this.b=!0},(e=xs.prototype).set=function(e,t){var n,r=!1,i=this;return Is(this).then((function(t){return As((t=Os(Ds(n=t,!0))).get(e))})).then((function(o){var a=Os(Ds(n,!0));return o?(o.value=t,As(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=e,o.value=t,As(a.add(o)))})).then((function(){return i.c[e]=t,Rs(i,e)})).ia((function(){r&&i.b--}))},e.get=function(e){return Is(this).then((function(t){return As(Os(Ds(t,!1)).get(e))})).then((function(e){return e&&e.value}))},e.P=function(e){var t=!1,n=this;return Is(this).then((function(r){return t=!0,n.b++,As(Os(Ds(r,!0)).delete(e))})).then((function(){return delete n.c[e],Rs(n,e)})).ia((function(){t&&n.b--}))},e.Y=function(e){0==this.a.length&&function(e){Ms(e),function t(){e.f=setTimeout((function(){e.i=Ns(e).then((function(t){0<t.length&&N(e.a,(function(e){e(t)}))})).then((function(){t()})).s((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}()}(this),this.a.push(e)},e.ca=function(e){U(this.a,(function(t){return t==e})),0==this.a.length&&Ms(this)},(e=Fs.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},e.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},e.P=function(e){return this.b.then((function(t){return t.P(e)}))},e.Y=function(e){this.a.push(e)},e.ca=function(e){U(this.a,(function(t){return t==e}))},(e=Ls.prototype).get=function(e){return ke(this.a[e])},e.set=function(e,t){return this.a[e]=t,ke()},e.P=function(e){return delete this.a[e],ke()},e.Y=function(){},e.ca=function(){},(e=Vs.prototype).get=function(e){var t=this;return ke().then((function(){return vr(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return ke().then((function(){var r=gr(t);null===r?n.P(e):n.a.setItem(e,r)}))},e.P=function(e){var t=this;return ke().then((function(){t.a.removeItem(e)}))},e.Y=function(e){n.window&&_t(n.window,"storage",e)},e.ca=function(e){n.window&&kt(n.window,"storage",e)},(e=js.prototype).get=function(){return ke(null)},e.set=function(){return ke()},e.P=function(){return ke()},e.Y=function(){},e.ca=function(){},(e=qs.prototype).get=function(e){var t=this;return ke().then((function(){return vr(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return ke().then((function(){var r=gr(t);null===r?n.P(e):n.a.setItem(e,r)}))},e.P=function(e){var t=this;return ke().then((function(){t.a.removeItem(e)}))},e.Y=function(){},e.ca=function(){};var zs,Hs,Gs={A:Vs,Sa:qs},Qs={A:Vs,Sa:qs},Ks={A:bs,Sa:js},Ys={A:Vs,Sa:js},Xs={ad:"local",NONE:"none",cd:"session"};function Js(){var e=!(br(ur())||!er()),t=pr(),r=lr();this.m=e,this.h=t,this.o=r,this.a={},zs||(zs=new Ws),e=zs;try{this.g=!zn()&&Sr()||!n.indexedDB?new e.a.A:new Fs(tr()?new Ls:new e.a.A)}catch(i){this.g=new Ls,this.h=!0}try{this.i=new e.a.Sa}catch(i){this.i=new Ls}this.l=new Ls,this.f=b(this.Pb,this),this.b={}}function Zs(){return Hs||(Hs=new Js),Hs}function $s(e,t){switch(t){case"session":return e.i;case"none":return e.l;default:return e.g}}function eu(e,t){return"firebase:"+e.name+(t?":"+t:"")}function tu(e,t,n){return n=eu(t,n),"local"==t.A&&(e.b[n]=null),$s(e,t.A).P(n)}function nu(e){e.c&&(clearInterval(e.c),e.c=null)}function ru(e){this.a=e,this.b=Zs()}(e=Js.prototype).get=function(e,t){return $s(this,e.A).get(eu(e,t))},e.set=function(e,t,n){var r=eu(e,n),i=this,o=$s(this,e.A);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.A&&(i.b[r]=t)}))},e.addListener=function(e,t,r){e=eu(e,t),this.o&&(this.b[e]=n.localStorage.getItem(e)),re(this.a)&&($s(this,"local").Y(this.f),this.h||(zn()||!Sr())&&n.indexedDB||!this.o||function(e){nu(e),e.c=setInterval((function(){for(var t in e.a){var r=n.localStorage.getItem(t),i=e.b[t];r!=i&&(e.b[t]=r,r=new ct({type:"storage",key:t,target:window,oldValue:i,newValue:r,a:!0}),e.Pb(r))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(r)},e.removeListener=function(e,t,n){e=eu(e,t),this.a[e]&&(U(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),re(this.a)&&($s(this,"local").ca(this.f),nu(this))},e.Pb=function(e){if(e&&e.f){var t=e.a.key;if(null==t)for(var r in this.a){var i=this.b[r];void 0===i&&(i=null);var o=n.localStorage.getItem(r);o!==i&&(this.b[r]=o,this.Ya(r))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?$s(this,"local").ca(this.f):nu(this),this.m)if(r=n.localStorage.getItem(t),(i=e.a.newValue)!==r)null!==i?n.localStorage.setItem(t,i):n.localStorage.removeItem(t);else if(this.b[t]===i&&void 0===e.a.a)return;var a=this;r=function(){void 0===e.a.a&&a.b[t]===n.localStorage.getItem(t)||(a.b[t]=n.localStorage.getItem(t),a.Ya(t))},He&&et&&10==et&&n.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(r,10):r()}}else N(e,b(this.Ya,this))},e.Ya=function(e){this.a[e]&&N(this.a[e],(function(e){e()}))};var iu,ou={name:"authEvent",A:"local"};function au(){this.a=Zs()}function su(e,t){this.b=uu,this.f=n.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.o=n.Int32Array?new Int32Array(64):Array(64),void 0!==iu||(iu=n.Int32Array?new Int32Array(gu):gu),this.reset()}C(su,(function(){this.b=-1}));for(var uu=64,cu=uu-1,lu=[],hu=0;hu<cu;hu++)lu[hu]=0;var du=j(128,lu);function fu(e){for(var t=e.f,n=e.o,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){var o=(0|n[t-16])+(((i=0|n[t-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+(((r=0|n[t-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var d=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|iu[t])|0)+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+d|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function pu(e,t,n){void 0===n&&(n=t.length);var i=0,o=e.c;if(r(t))for(;i<n;)e.f[o++]=t.charCodeAt(i++),o==e.b&&(fu(e),o=0);else{if(!d(t))throw Error("message must be string or array");for(;i<n;){var a=t[i++];if(!("number"==typeof a&&0<=a&&255>=a&&a==(0|a)))throw Error("message must be a byte array");e.f[o++]=a,o==e.b&&(fu(e),o=0)}}e.c=o,e.g+=n}su.prototype.reset=function(){this.g=this.c=0,this.a=n.Int32Array?new Int32Array(this.h):q(this.h)};var gu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function mu(){su.call(this,8,vu)}C(mu,su);var vu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function yu(e,t,n,r,i){this.l=e,this.i=t,this.o=n,this.m=r||null,this.u=i||null,this.h=t+":"+n,this.v=new au,this.g=new ru(this.h),this.f=null,this.b=[],this.a=this.c=null}function bu(e){return new Br("invalid-cordova-configuration",e)}function _u(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(r){}}function wu(e){return e.f||(e.f=e.ga().then((function(){return new me((function(t){e.wa((function n(r){return t(r),e.Ka(n),!1})),function(e){function t(t){i=!0,o&&o.cancel(),Cu(e).then((function(n){var i=r;if(n&&t&&t.url){var o=null;-1!=(i=Ei(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=vr(Yt(o=Xt(i),"firebaseError")||null))?Wr(o):null)?new Zi(n.b,n.c,null,null,o):new Zi(n.b,n.c,i,n.g)),i=o||r}_u(e,i)}))}var r=new Zi("unknown",null,null,null,new Br("no-auth-event")),i=!1,o=Lt(500).then((function(){return Cu(e).then((function(){i||_u(e,r)}))})),a=n.handleOpenURL;n.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(cr("BuildInfo.packageName",n).toLowerCase()+"://")&&t({url:e}),"function"==typeof a)try{a(e)}catch(r){console.error(r)}},no||(no=new eo),no.subscribe(t)}(e)}))}))),e.f}function Cu(e){var t=null;return function(e){return e.b.get(ou,e.a).then((function(e){return $i(e)}))}(e.g).then((function(n){return t=n,tu((n=e.g).b,ou,n.a)})).then((function(){return t}))}function ku(e){this.a=e,this.b=Zs()}(e=yu.prototype).ga=function(){return this.za?this.za:this.za=($n(void 0)?Zn().then((function(){return new me((function(e,t){var r=n.document,i=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);r.addEventListener("deviceready",(function(){clearTimeout(i),e()}),!1)}))})):Se(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof cr("universalLinks.subscribe",n))throw bu("cordova-universal-links-plugin-fix is not installed");if(void 0===cr("BuildInfo.packageName",n))throw bu("cordova-plugin-buildinfo is not installed");if("function"!=typeof cr("cordova.plugins.browsertab.openUrl",n))throw bu("cordova-plugin-browsertab is not installed");if("function"!=typeof cr("cordova.InAppBrowser.open",n))throw bu("cordova-plugin-inappbrowser is not installed")}),(function(){throw new Br("cordova-not-ready")}))},e.Ea=function(e,t){return t(new Br("operation-not-supported-in-this-environment")),ke()},e.Db=function(){return Se(new Br("operation-not-supported-in-this-environment"))},e.Qb=function(){return!1},e.Mb=function(){return!0},e.Hb=function(){return!0},e.Ca=function(e,t,r){if(this.c)return Se(new Br("redirect-operation-pending"));var i=this,o=n.document,a=null,s=null,u=null,c=null;return this.c=ke().then((function(){return Ji(t),wu(i)})).then((function(){return function(e,t,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),a=new Zi(t,i,null,o,new Br("no-auth-event")),s=cr("BuildInfo.packageName",n);if("string"!=typeof s)throw new Br("invalid-cordova-configuration");var u=cr("BuildInfo.displayName",n),c={};if(ur().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!ur().toLowerCase().match(/android/))return Se(new Br("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=function(e){var t=new mu;pu(t,e),e=[];var n=8*t.g;pu(t,du,56>t.c?56-t.c:t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(fu(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return M(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}(o),c.sessionId=o;var l=ys(e.l,e.i,e.o,t,r,null,i,e.m,c,e.u);return e.ga().then((function(){var t=e.h;return e.v.a.set(ou,a.C(),t)})).then((function(){var t=cr("cordova.plugins.browsertab.isAvailable",n);if("function"!=typeof t)throw new Br("invalid-cordova-configuration");var r=null;t((function(t){if(t){if("function"!=typeof(r=cr("cordova.plugins.browsertab.openUrl",n)))throw new Br("invalid-cordova-configuration");r(l)}else{if("function"!=typeof(r=cr("cordova.InAppBrowser.open",n)))throw new Br("invalid-cordova-configuration");t=!(!(t=ur()).match(/(iPad|iPhone|iPod).*OS 7_\d/i)&&!t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)),e.a=r(l,t?"_blank":"_system","location=yes")}}))}))}(i,e,t,r)})).then((function(){return new me((function(e,t){s=function(){var t=cr("cordova.plugins.browsertab.close",n);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.wa(s),c=function(){Cr()&&u()},o.addEventListener("resume",u=function(){a||(a=Lt(2e3).then((function(){t(new Br("redirect-cancelled-by-user"))})))},!1),ur().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)})).s((function(e){return Cu(i).then((function(){throw e}))}))})).ia((function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&i.Ka(s),i.c=null}))},e.wa=function(e){this.b.push(e),wu(this).s((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Zi("unknown",null,null,null,new Br("no-auth-event")),e(t))}))},e.Ka=function(e){U(this.b,(function(t){return t==e}))};var Su={name:"pendingRedirect",A:"session"};function Eu(e){return tu(e.b,Su,e.a)}function Tu(e,t,n){this.u=e,this.o=t,this.l=n,this.h=[],this.f=!1,this.i=b(this.cb,this),this.b=new Fu,this.m=new ju,this.g=new ku(this.o+":"+this.l),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.m,this.c.linkViaPopup=this.m,this.c.reauthViaPopup=this.m,this.a=xu(this.u,this.o,this.l,ui)}function xu(e,t,n,r){var o=i.a.SDK_VERSION||null;return $n()?new yu(e,t,n,o,r):new ps(e,t,n,o,r)}function Iu(e){e.f||(e.f=!0,e.a.wa(e.i));var t=e.a;return e.a.ga().s((function(n){throw e.a==t&&e.reset(),n}))}function Pu(e){e.a.Mb()&&Iu(e).s((function(t){var n=new Zi("unknown",null,null,null,new Br("operation-not-supported-in-this-environment"));Ru(t)&&e.cb(n)})),e.a.Hb()||Lu(e.b)}(e=Tu.prototype).reset=function(){this.f=!1,this.a.Ka(this.i),this.a=xu(this.u,this.o,this.l)},e.Za=function(){this.b.Za()},e.subscribe=function(e){if(L(this.h,e)||this.h.push(e),!this.f){var t=this;(function(e){return e.b.get(Su,e.a).then((function(e){return"pending"==e}))})(this.g).then((function(e){e?Eu(t.g).then((function(){Iu(t).s((function(e){var n=new Zi("unknown",null,null,null,new Br("operation-not-supported-in-this-environment"));Ru(e)&&t.cb(n)}))})):Pu(t)})).s((function(){Pu(t)}))}},e.unsubscribe=function(e){U(this.h,(function(t){return t==e}))},e.cb=function(e){if(!e)throw new Br("invalid-auth-event");for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.wb(e.b,e.c)){(t=this.c[e.b])&&t.h(e,r),t=!0;break}}return Lu(this.b),t};var Ou=new wr(2e3,1e4),Du=new wr(3e4,6e4);function Au(e,t,n,r,i,o){return e.a.Db(t,n,r,(function(){e.f||(e.f=!0,e.a.wa(e.i))}),(function(){e.reset()}),i,o)}function Ru(e){return!(!e||"auth/cordova-not-ready"!=e.code)}Tu.prototype.fa=function(){return this.b.fa()},Tu.prototype.Ca=function(e,t,n){var r,i=this;return function(e){return e.b.set(Su,"pending",e.a)}(this.g).then((function(){return i.a.Ca(e,t,n).s((function(e){if(Ru(e))throw new Br("operation-not-supported-in-this-environment");return r=e,Eu(i.g).then((function(){throw r}))})).then((function(){return i.a.Qb()?new me((function(){})):Eu(i.g).then((function(){return i.fa()})).then((function(){})).s((function(){}))}))}))},Tu.prototype.Ea=function(e,t,n,r){return this.a.Ea(n,(function(n){e.ha(t,null,n,r)}),Ou.get())};var Nu={};function Mu(e,t,n){var r=t+":"+n;return Nu[r]||(Nu[r]=new Tu(e,t,n)),Nu[r]}function Fu(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Lu(e){e.g||(e.g=!0,Uu(e,!1,null,null))}function Vu(e,t){if(e.b=function(){return ke(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function Uu(e,t,n,r){t?r?function(e,t){if(e.b=function(){return Se(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):Vu(e,n):Vu(e,{user:null}),e.f=[],e.c=[]}function ju(){}function qu(){this.tb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.tb},set:function(e){this.tb=e},enumerable:!1})}function Bu(e,t){this.a=t,Pr(this,"verificationId",e)}function Wu(e,t,n,r){return new Ki(e).Va(t,n).then((function(e){return new Bu(e,r)}))}function zu(e){var t=si(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new Br("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Or(this,{token:e,expirationTime:kr(1e3*t.exp),authTime:kr(1e3*t.auth_time),issuedAtTime:kr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,claims:t})}function Hu(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Gu(e){this.f=e,this.b=this.a=null,this.c=0}function Qu(e,t){var n=t[ua],r=t.refreshToken;t=Ku(t.expiresIn),e.b=n,e.c=t,e.a=r}function Ku(e){return w()+1e3*parseInt(e,10)}function Yu(e,t){this.a=e||null,this.b=t||null,Or(this,{lastSignInTime:kr(t||null),creationTime:kr(e||null)})}function Xu(e,t,n,r,i,o){Or(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function Ju(e,t){for(var n in ut.call(this,e),t)this[n]=t[n]}function Zu(e,t,n){this.G=[],this.l=e.apiKey,this.m=e.appName,this.u=e.authDomain||null,e=i.a.SDK_VERSION?sr(i.a.SDK_VERSION):null,this.b=new aa(this.l,li(ui),e),this.h=new Gu(this.b),oc(this,t[ua]),Qu(this.h,t),Pr(this,"refreshToken",this.h.a),uc(this,n||{}),At.call(this),this.I=!1,this.u&&hr()&&(this.a=Mu(this.u,this.l,this.m)),this.N=[],this.i=null,this.w=function(e){return new Hu((function(){return e.F(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.h.c-w()-3e5;return 0<t?t:0}))}(this),this.V=b(this.Ha,this);var r=this;this.ka=null,this.ta=function(e){r.pa(e.g)},this.X=null,this.O=[],this.sa=function(e){ec(r,e.c)},this.W=null}function $u(e,t){e.X&&kt(e.X,"languageCodeChanged",e.ta),(e.X=t)&&_t(t,"languageCodeChanged",e.ta)}function ec(e,t){e.O=t,pa(e.b,i.a.SDK_VERSION?sr(i.a.SDK_VERSION,e.O):null)}function tc(e,t){e.W&&kt(e.W,"frameworkChanged",e.sa),(e.W=t)&&_t(t,"frameworkChanged",e.sa)}function nc(e){try{return i.a.app(e.m).auth()}catch(t){throw new Br("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function rc(e){e.D||e.w.b||(e.w.start(),kt(e,"tokenChanged",e.V),_t(e,"tokenChanged",e.V))}function ic(e){kt(e,"tokenChanged",e.V),e.w.stop()}function oc(e,t){e.ra=t,Pr(e,"_lat",t)}function ac(e){for(var t=[],n=0;n<e.N.length;n++)t.push(e.N[n](e));return Te(t).then((function(){return e}))}function sc(e){e.a&&!e.I&&(e.I=!0,e.a.subscribe(e))}function uc(e,t){Or(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,metadata:new Yu(t.createdAt,t.lastLoginAt),providerData:[]})}function cc(){}function lc(e){return ke().then((function(){if(e.D)throw new Br("app-deleted")}))}function hc(e){return M(e.providerData,(function(e){return e.providerId}))}function dc(e,t){t&&(fc(e,t.providerId),e.providerData.push(t))}function fc(e,t){U(e.providerData,(function(e){return e.providerId==t}))}function pc(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Pr(e,t,n)}function gc(e,t){e!=t&&(Or(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,providerData:[]}),Pr(e,"metadata",t.metadata?function(e){return new Yu(e.a,e.b)}(t.metadata):new Yu),N(t.providerData,(function(t){dc(e,t)})),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.h,t.h),Pr(e,"refreshToken",e.h.a))}function mc(e){return e.F().then((function(t){var n=e.isAnonymous;return function(e,t){return rs(e.b,Va,{idToken:t}).then(b(e.zc,e))}(e,t).then((function(){return n||pc(e,"isAnonymous",!1),t}))}))}function vc(e,t){t[ua]&&e.ra!=t[ua]&&(Qu(e.h,t),e.dispatchEvent(new Ju("tokenChanged")),oc(e,t[ua]),pc(e,"refreshToken",e.h.a))}function yc(e,t){return mc(e).then((function(){if(L(hc(e),t))return ac(e).then((function(){throw new Br("provider-already-linked")}))}))}function bc(e,t,n){return Dr({user:e,credential:Xi(t),additionalUserInfo:t=gi(t),operationType:n})}function _c(e,t){return vc(e,t),e.reload().then((function(){return e}))}function wc(e,t,n,r,o){if(!hr())return Se(new Br("operation-not-supported-in-this-environment"));if(e.i&&!o)return Se(e.i);var a=pi(n.providerId),s=yr(e.uid+":::"),u=null;(!pr()||er())&&e.u&&n.isOAuthProvider&&(u=ys(e.u,e.l,e.m,t,n,null,s,i.a.SDK_VERSION||null));var c=Yn(u,a&&a.Ba,a&&a.Aa);return r=r().then((function(){if(kc(e),!o)return e.F().then((function(){}))})).then((function(){return Au(e.a,c,t,n,s,!!u)})).then((function(){return new me((function(n,r){e.ha(t,null,new Br("cancelled-popup-request"),e.g||null),e.f=n,e.v=r,e.g=s,e.c=e.a.Ea(e,t,c,s)}))})).then((function(e){return c&&Kn(c),e?Dr(e):null})).s((function(e){throw c&&Kn(c),e})),Sc(e,r,o)}function Cc(e,t,n,r,i){if(!hr())return Se(new Br("operation-not-supported-in-this-environment"));if(e.i&&!i)return Se(e.i);var o=null,a=yr(e.uid+":::");return r=r().then((function(){if(kc(e),!i)return e.F().then((function(){}))})).then((function(){return e.aa=a,ac(e)})).then((function(t){return e.ba&&(t=(t=e.ba).b.set(xc,e.C(),t.a)),t})).then((function(){return e.a.Ca(t,n,a)})).s((function(t){if(o=t,e.ba)return Ic(e.ba);throw o})).then((function(){if(o)throw o})),Sc(e,r,i)}function kc(e){if(!e.a||!e.I){if(e.a&&!e.I)throw new Br("internal-error");throw new Br("auth-domain-config-required")}}function Sc(e,t,n){var r=function(e,t,n){return e.i&&!n?(t.cancel(),Se(e.i)):t.s((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.i||e.dispatchEvent(new Ju("userInvalidated")),e.i=t),t}))}(e,t,n);return e.G.push(r),r.ia((function(){V(e.G,r)})),r}function Ec(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n[ua]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-w())/1e3;var r=new Zu(t,n,e);return e.providerData&&N(e.providerData,(function(e){e&&dc(r,Dr(e))})),e.redirectEventId&&(r.aa=e.redirectEventId),r}function Tc(e){this.a=e,this.b=Zs()}Fu.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Fu.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.b,r=e.c,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(Uu(this,!0,null,e.a),ke()):t.xa(n,r)?function(e,t,n){n=n.xa(t.b,t.c);var r=t.f,i=t.g,o=t.h,a=!!t.b.match(/Redirect$/);n(r,i,o).then((function(t){Uu(e,a,t,null)})).s((function(t){Uu(e,a,null,t)}))}(this,e,t):Se(new Br("invalid-auth-event")):(Uu(this,!1,null,null),ke())}else Se(new Br("invalid-auth-event"))},Fu.prototype.Za=function(){this.g&&!this.i&&Uu(this,!1,null,null)},Fu.prototype.fa=function(){var e=this;return new me((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new Br("timeout");e.a&&e.a.cancel(),e.a=Lt(Du.get()).then((function(){e.b||(e.g=!0,Uu(e,!0,null,t))}))}(e))}))},ju.prototype.h=function(e,t){if(e){var n=e.b,r=e.c;e.a?(t.ha(e.b,null,e.a,e.c),ke()):t.xa(n,r)?function(e,t){var n=e.c,r=e.b;t.xa(r,n)(e.f,e.g,e.h).then((function(e){t.ha(r,e,null,n)})).s((function(e){t.ha(r,null,e,n)}))}(e,t):Se(new Br("invalid-auth-event"))}else Se(new Br("invalid-auth-event"))},Bu.prototype.confirm=function(e){return e=Yi(this.verificationId,e),this.a(e)},Hu.prototype.start=function(){this.a=this.c,function e(t,r){t.stop(),t.b=Lt(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(t,r)).then((function(){return function(){var e=n.document,t=null;return Cr()||!e?ke():new me((function(n){t=function(){Cr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).s((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return t.h()})).then((function(){e(t,!0)})).s((function(n){t.i(n)&&e(t,!1)}))}(this,!0)},Hu.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Gu.prototype.C=function(){return{apiKey:this.f.b,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Gu.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Se(new Br("user-token-expired")):e||!this.b||w()>this.c-3e4?this.a?function(e,t){return function(e,t){return new me((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?ga(e,e.i+"?key="+encodeURIComponent(e.b),(function(e){e?e.error?r(os(e)):e.access_token&&e.refresh_token?n(e):r(new Br("internal-error")):r(new Br("network-request-failed"))}),"POST",cn(t).toString(),e.f,e.o.get()):r(new Br("internal-error"))}))}(e.f,t).then((function(t){return e.b=t.access_token,e.c=Ku(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}})).s((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):ke(null):ke({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Yu.prototype.C=function(){return{lastLoginAt:this.b,createdAt:this.a}},C(Ju,ut),C(Zu,At),Zu.prototype.pa=function(e){this.ka=e,fa(this.b,e)},Zu.prototype.ea=function(){return this.ka},Zu.prototype.ya=function(){return q(this.O)},Zu.prototype.Ha=function(){this.w.b&&(this.w.stop(),this.w.start())},Pr(Zu.prototype,"providerId","firebase"),(e=Zu.prototype).reload=function(){var e=this;return Sc(this,lc(this).then((function(){return mc(e).then((function(){return ac(e)})).then(cc)})))},e.dc=function(e){return this.F(e).then((function(e){return new zu(e)}))},e.F=function(e){var t=this;return Sc(this,lc(this).then((function(){return t.h.getToken(e)})).then((function(e){if(!e)throw new Br("internal-error");return e.accessToken!=t.ra&&(oc(t,e.accessToken),t.dispatchEvent(new Ju("tokenChanged"))),pc(t,"refreshToken",e.refreshToken),e.accessToken})))},e.zc=function(e){if(!(e=e.users)||!e.length)throw new Br("internal-error");uc(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?M(e,(function(e){return new Xu(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)dc(this,t[n]);pc(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length))},e.hb=function(e){var t=this,n=null;return Sc(this,e.f(this.b,this.uid).then((function(e){return vc(t,e),n=bc(t,e,"reauthenticate"),t.i=null,t.reload()})).then((function(){return n})),!0)},e.Ac=function(e){return xr("firebase.User.prototype.reauthenticateWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential instead."),this.hb(e).then((function(){}))},e.fb=function(e){var t=this,n=null;return Sc(this,yc(this,e.providerId).then((function(){return t.F()})).then((function(n){return e.b(t.b,n)})).then((function(e){return n=bc(t,e,"link"),_c(t,e)})).then((function(){return n})))},e.rc=function(e){return xr("firebase.User.prototype.linkWithCredential is deprecated. Please use firebase.User.prototype.linkAndRetrieveDataWithCredential instead."),this.fb(e).then((function(e){return e.user}))},e.sc=function(e,t){var n=this;return Sc(this,yc(this,"phone").then((function(){return Wu(nc(n),e,t,b(n.fb,n))})))},e.Bc=function(e,t){var n=this;return Sc(this,ke().then((function(){return Wu(nc(n),e,t,b(n.hb,n))})),!0)},e.qb=function(e){var t=this;return Sc(this,this.F().then((function(n){return t.b.qb(n,e)})).then((function(e){return vc(t,e),t.reload()})))},e.Tc=function(e){var t=this;return Sc(this,this.F().then((function(n){return e.b(t.b,n)})).then((function(e){return vc(t,e),t.reload()})))},e.rb=function(e){var t=this;return Sc(this,this.F().then((function(n){return t.b.rb(n,e)})).then((function(e){return vc(t,e),t.reload()})))},e.sb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return lc(this);var t=this;return Sc(this,this.F().then((function(n){return t.b.sb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return vc(t,e),pc(t,"displayName",e.displayName||null),pc(t,"photoURL",e.photoUrl||null),N(t.providerData,(function(e){"password"===e.providerId&&(Pr(e,"displayName",t.displayName),Pr(e,"photoURL",t.photoURL))})),ac(t)})).then(cc))},e.Rc=function(e){var t=this;return Sc(this,mc(this).then((function(n){return L(hc(t),e)?function(e,t,n){return rs(e,Ma,{idToken:t,deleteProvider:n})}(t.b,n,[e]).then((function(e){var n={};return N(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),N(hc(t),(function(e){n[e]||fc(t,e)})),n[Ki.PROVIDER_ID]||Pr(t,"phoneNumber",null),ac(t)})):ac(t).then((function(){throw new Br("no-such-provider")}))})))},e.delete=function(){var e=this;return Sc(this,this.F().then((function(t){return rs(e.b,Na,{idToken:t})})).then((function(){e.dispatchEvent(new Ju("userDeleted"))}))).then((function(){for(var t=0;t<e.G.length;t++)e.G[t].cancel("app-deleted");$u(e,null),tc(e,null),e.G=[],e.D=!0,ic(e),Pr(e,"refreshToken",null),e.a&&e.a.unsubscribe(e)}))},e.wb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.aa||null)==t||"reauthViaRedirect"==e&&(this.aa||null)==t)},e.ha=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.xa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?b(this.Bb,this):"reauthViaPopup"==e&&t==(this.g||null)?b(this.Cb,this):"linkViaRedirect"==e&&(this.aa||null)==t?b(this.Bb,this):"reauthViaRedirect"==e&&(this.aa||null)==t?b(this.Cb,this):null},e.tc=function(e){var t=this;return wc(this,"linkViaPopup",e,(function(){return yc(t,e.providerId).then((function(){return ac(t)}))}),!1)},e.Cc=function(e){return wc(this,"reauthViaPopup",e,(function(){return ke()}),!0)},e.uc=function(e){var t=this;return Cc(this,"linkViaRedirect",e,(function(){return yc(t,e.providerId)}),!1)},e.Dc=function(e){return Cc(this,"reauthViaRedirect",e,(function(){return ke()}),!0)},e.Bb=function(e,t,n){var r=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return Sc(this,this.F().then((function(i){return xa(r.b,{requestUri:e,postBody:n,sessionId:t,idToken:i})})).then((function(e){return i=bc(r,e,"link"),_c(r,e)})).then((function(){return i})))},e.Cb=function(e,t,n){var r=this;this.c&&(this.c.cancel(),this.c=null);var i=null;return Sc(this,ke().then((function(){return Ti(Ia(r.b,{requestUri:e,sessionId:t,postBody:n}),r.uid)})).then((function(e){return i=bc(r,e,"reauthenticate"),vc(r,e),r.i=null,r.reload()})).then((function(){return i})),!0)},e.kb=function(e){var t=this,n=null;return Sc(this,this.F().then((function(t){return n=t,void 0===e||re(e)?{}:ni(new Gr(e))})).then((function(e){return t.b.kb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.toJSON=function(){return this.C()},e.C=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.u,stsTokenManager:this.h.C(),redirectEventId:this.aa||null};return this.metadata&&ue(e,this.metadata.C()),N(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),e};var xc={name:"redirectUser",A:"session"};function Ic(e){return tu(e.b,xc,e.a)}function Pc(e){this.a=e,this.b=Zs(),this.c=null,this.f=function(e){var t=Ac("local"),r=Ac("session"),i=Ac("none");return function(e,t,r){var i=eu(t,r),o=$s(e,t.A);return e.get(t,r).then((function(a){var s=null;try{s=vr(n.localStorage.getItem(i))}catch(u){}if(s&&!a)return n.localStorage.removeItem(i),e.set(t,s,r);s&&a&&"localStorage"!=o.type&&n.localStorage.removeItem(i)}))}(e.b,t,e.a).then((function(){return e.b.get(r,e.a)})).then((function(n){return n?r:e.b.get(i,e.a).then((function(n){return n?i:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(Dc,e.a).then((function(e){return e?Ac(e):t}))}))}))})).then((function(t){return e.c=t,Oc(e,t.A)})).s((function(){e.c||(e.c=t)}))}(this),this.b.addListener(Ac("local"),this.a,b(this.g,this))}function Oc(e,t){var n,r=[];for(n in Xs)Xs[n]!==t&&r.push(tu(e.b,Ac(Xs[n]),e.a));return r.push(tu(e.b,Dc,e.a)),function(e){return new me((function(t,n){var r=e.length,i=[];if(r)for(var o=function(e,n){r--,i[e]=n,0==r&&t(i)},a=function(e){n(e)},s=0;s<e.length;s++)Ee(e[s],_(o,s),a);else t(i)}))}(r)}Pc.prototype.g=function(){var e=this,t=Ac("local");Fc(this,(function(){return ke().then((function(){return e.c&&"local"!=e.c.A?e.b.get(t,e.a):null})).then((function(n){if(n)return Oc(e,"local").then((function(){e.c=t}))}))}))};var Dc={name:"persistence",A:"session"};function Ac(e){return{name:"authUser",A:e}}function Rc(e,t){return Fc(e,(function(){return e.b.set(e.c,t.C(),e.a)}))}function Nc(e){return Fc(e,(function(){return tu(e.b,e.c,e.a)}))}function Mc(e,t){return Fc(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),Ec(e||{})}))}))}function Fc(e,t){return e.f=e.f.then(t,t),e.f}function Lc(e){if(this.l=!1,Pr(this,"settings",new qu),Pr(this,"app",e),!zc(this).options||!zc(this).options.apiKey)throw new Br("invalid-api-key");e=i.a.SDK_VERSION?sr(i.a.SDK_VERSION):null,this.b=new aa(zc(this).options&&zc(this).options.apiKey,li(ui),e),this.N=[],this.m=[],this.I=[],this.Tb=i.a.INTERNAL.createSubscribe(b(this.oc,this)),this.O=void 0,this.Ub=i.a.INTERNAL.createSubscribe(b(this.pc,this)),Bc(this,null),this.h=new Pc(zc(this).options.apiKey+":"+zc(this).name),this.w=new Tc(zc(this).options.apiKey+":"+zc(this).name),this.V=Kc(this,function(e){var t=zc(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(xc,e.a).then((function(e){return e&&t&&(e.authDomain=t),Ec(e||{})}))}(e.w,zc(e).options.authDomain).then((function(t){return(e.D=t)&&(t.ba=e.w),Ic(e.w)}));return Kc(e,t)}(e).then((function(){return Mc(e.h,t)})).then((function(t){return t?(t.ba=e.w,e.D&&(e.D.aa||null)==(t.aa||null)?t:t.reload().then((function(){return Rc(e.h,t).then((function(){return t}))})).s((function(n){return"auth/network-request-failed"==n.code?t:Nc(e.h)}))):null})).then((function(t){Bc(e,t||null)}));return Kc(e,n)}(this)),this.i=Kc(this,function(e){return e.V.then((function(){return e.fa()})).s((function(){})).then((function(){if(!e.l)return e.ka()})).s((function(){})).then((function(){if(!e.l){e.X=!0;var t=e.h;t.b.addListener(Ac("local"),t.a,e.ka)}}))}(this)),this.X=!1,this.ka=b(this.Oc,this),this.Ha=b(this.Z,this),this.ra=b(this.bc,this),this.sa=b(this.mc,this),this.ta=b(this.nc,this),function(e){var t=zc(e).options.authDomain,n=zc(e).options.apiKey;t&&hr()&&(e.Sb=e.V.then((function(){if(!e.l){if(e.a=Mu(t,n,zc(e).name),e.a.subscribe(e),Hc(e)&&sc(Hc(e)),e.D){sc(e.D);var r=e.D;r.pa(e.ea()),$u(r,e),ec(r=e.D,e.G),tc(r,e),e.D=null}return e.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.vc,this),this.u=0,At.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.ea()},set:function(e){this.pa(e)},enumerable:!1}),e.W=null}(this),this.G=[]}function Vc(e){ut.call(this,"languageCodeChanged"),this.g=e}function Uc(e){ut.call(this,"frameworkChanged"),this.c=e}function jc(e){return e.Sb||Se(new Br("auth-domain-config-required"))}function qc(e,t){var n={};return n.apiKey=zc(e).options.apiKey,n.authDomain=zc(e).options.authDomain,n.appName=zc(e).name,e.V.then((function(){return function(e,t,n,r){var i=new Zu(e,t);return n&&(i.ba=n),r&&ec(i,r),i.reload().then((function(){return i}))}(n,t,e.w,e.ya())})).then((function(t){return Hc(e)&&t.uid==Hc(e).uid?(gc(Hc(e),t),e.Z(t)):(Bc(e,t),sc(t),e.Z(t))})).then((function(){Qc(e)}))}function Bc(e,t){Hc(e)&&(function(e,t){U(e.N,(function(e){return e==t}))}(Hc(e),e.Ha),kt(Hc(e),"tokenChanged",e.ra),kt(Hc(e),"userDeleted",e.sa),kt(Hc(e),"userInvalidated",e.ta),ic(Hc(e))),t&&(t.N.push(e.Ha),_t(t,"tokenChanged",e.ra),_t(t,"userDeleted",e.sa),_t(t,"userInvalidated",e.ta),0<e.u&&rc(t)),Pr(e,"currentUser",t),t&&(t.pa(e.ea()),$u(t,e),ec(t,e.G),tc(t,e))}function Wc(e,t){var n=null,r=null;return Kc(e,t.then((function(t){return n=Xi(t),r=gi(t),qc(e,t)})).then((function(){return Dr({user:Hc(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function zc(e){return e.app}function Hc(e){return e.currentUser}function Gc(e){return Hc(e)&&Hc(e)._lat||null}function Qc(e){if(e.X){for(var t=0;t<e.m.length;t++)e.m[t]&&e.m[t](Gc(e));if(e.O!==e.getUid()&&e.I.length)for(e.O=e.getUid(),t=0;t<e.I.length;t++)e.I[t]&&e.I[t](Gc(e))}}function Kc(e,t){return e.N.push(t),t.ia((function(){V(e.N,t)})),t}function Yc(){}function Xc(){this.a={},this.b=1e12}Pc.prototype.nb=function(e){var t=null,n=this;return function(e){var t=new Br("invalid-persistence-type"),n=new Br("unsupported-persistence-type");e:{for(r in Xs)if(Xs[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(nr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;default:if(!lr()&&"none"!==e)throw n}}(e),Fc(this,(function(){return e!=n.c.A?n.b.get(n.c,n.a).then((function(r){return t=r,Oc(n,e)})).then((function(){if(n.c=Ac(e),t)return n.b.set(n.c,t,n.a)})):ke()}))},C(Lc,At),C(Vc,ut),C(Uc,ut),(e=Lc.prototype).nb=function(e){return Kc(this,e=this.h.nb(e))},e.pa=function(e){this.W===e||this.l||(this.W=e,fa(this.b,this.W),this.dispatchEvent(new Vc(this.ea())))},e.ea=function(){return this.W},e.Uc=function(){var e=n.navigator;this.pa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.vc=function(e){this.G.push(e),pa(this.b,i.a.SDK_VERSION?sr(i.a.SDK_VERSION,this.G):null),this.dispatchEvent(new Uc(this.G))},e.ya=function(){return q(this.G)},e.toJSON=function(){return{apiKey:zc(this).options.apiKey,authDomain:zc(this).options.authDomain,appName:zc(this).name,currentUser:Hc(this)&&Hc(this).C()}},e.wb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.ha=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.xa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?b(this.ac,this):null},e.ac=function(e,t,n){var r=this;e={requestUri:e,postBody:n,sessionId:t},this.c&&(this.c.cancel(),this.c=null);var i=null,o=null,a=Ta(r.b,e).then((function(e){return i=Xi(e),o=gi(e),e}));return Kc(this,e=r.V.then((function(){return a})).then((function(e){return qc(r,e)})).then((function(){return Dr({user:Hc(r),credential:i,additionalUserInfo:o,operationType:"signIn"})})))},e.Mc=function(e){if(!hr())return Se(new Br("operation-not-supported-in-this-environment"));var t=this,n=pi(e.providerId),r=yr(),o=null;(!pr()||er())&&zc(this).options.authDomain&&e.isOAuthProvider&&(o=ys(zc(this).options.authDomain,zc(this).options.apiKey,zc(this).name,"signInViaPopup",e,null,r,i.a.SDK_VERSION||null));var a=Yn(o,n&&n.Ba,n&&n.Aa);return Kc(this,n=jc(this).then((function(t){return Au(t,a,"signInViaPopup",e,r,!!o)})).then((function(){return new me((function(e,n){t.ha("signInViaPopup",null,new Br("cancelled-popup-request"),t.g),t.f=e,t.v=n,t.g=r,t.c=t.a.Ea(t,"signInViaPopup",a,r)}))})).then((function(e){return a&&Kn(a),e?Dr(e):null})).s((function(e){throw a&&Kn(a),e})))},e.Nc=function(e){if(!hr())return Se(new Br("operation-not-supported-in-this-environment"));var t=this;return Kc(this,jc(this).then((function(){return function(e){return Fc(e,(function(){return e.b.set(Dc,e.c.A,e.a)}))}(t.h)})).then((function(){return t.a.Ca("signInViaRedirect",e)})))},e.fa=function(){if(!hr())return Se(new Br("operation-not-supported-in-this-environment"));var e=this;return Kc(this,jc(this).then((function(){return e.a.fa()})).then((function(e){return e?Dr(e):null})))},e.Sc=function(e){if(!e)return Se(new Br("null-user"));var t=this,n={};n.apiKey=zc(this).options.apiKey,n.authDomain=zc(this).options.authDomain,n.appName=zc(this).name;var r=function(e,t,n,r){t=t||{apiKey:e.l,authDomain:e.u,appName:e.m};var i=e.h,o={};return o[ua]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-w())/1e3,t=new Zu(t,o),n&&(t.ba=n),r&&ec(t,r),gc(t,e),t}(e,n,t.w,t.ya());return Kc(this,this.i.then((function(){if(zc(t).options.apiKey!=e.l)return r.reload()})).then((function(){return Hc(t)&&e.uid==Hc(t).uid?(gc(Hc(t),e),t.Z(e)):(Bc(t,r),sc(r),t.Z(r))})).then((function(){Qc(t)})))},e.ob=function(){var e=this;return Kc(this,this.i.then((function(){return Hc(e)?(Bc(e,null),Nc(e.h).then((function(){Qc(e)}))):ke()})))},e.Oc=function(){var e=this;return Mc(this.h,zc(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=Hc(e)&&t){n=Hc(e).uid;var r=t.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return gc(Hc(e),t),Hc(e).F();(Hc(e)||t)&&(Bc(e,t),t&&(sc(t),t.ba=e.w),e.a&&e.a.subscribe(e),Qc(e))}}))},e.Z=function(e){return Rc(this.h,e)},e.bc=function(){Qc(this),this.Z(Hc(this))},e.mc=function(){this.ob()},e.nc=function(){this.ob()},e.oc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(Hc(t))}))},e.pc=function(e){var t=this;!function(e,t){e.I.push(t),Kc(e,e.i.then((function(){!e.l&&L(e.I,t)&&e.O!==e.getUid()&&(e.O=e.getUid(),t(Gc(e)))})))}(this,(function(){e.next(Hc(t))}))},e.xc=function(e,t,n){var r=this;return this.X&&i.a.Promise.resolve().then((function(){f(e)?e(Hc(r)):f(e.next)&&e.next(Hc(r))})),this.Tb(e,t,n)},e.wc=function(e,t,n){var r=this;return this.X&&i.a.Promise.resolve().then((function(){r.O=r.getUid(),f(e)?e(Hc(r)):f(e.next)&&e.next(Hc(r))})),this.Ub(e,t,n)},e.cc=function(e){var t=this;return Kc(this,this.i.then((function(){return Hc(t)?Hc(t).F(e).then((function(e){return{accessToken:e}})):null})))},e.Nb=function(e){var t=this;return this.i.then((function(){return Wc(t,rs(t.b,Za,{token:e}))})).then((function(e){var n=e.user;return pc(n,"isAnonymous",!1),t.Z(n),e}))},e.Gc=function(e){return xr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCustomToken is deprecated. Please use firebase.auth.Auth.prototype.signInWithCustomToken instead."),this.Nb(e)},e.Hc=function(e,t){return xr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.signInWithEmailAndPassword instead."),this.Ob(e,t)},e.Ob=function(e,t){var n=this;return this.i.then((function(){return Wc(n,rs(n.b,$a,{email:e,password:t}))}))},e.yb=function(e,t){var n=this;return this.i.then((function(){return Wc(n,rs(n.b,Aa,{email:e,password:t}))}))},e.Wb=function(e,t){return xr("firebase.auth.Auth.prototype.createUserAndRetrieveDataWithEmailAndPassword is deprecated. Please use firebase.auth.Auth.prototype.createUserWithEmailAndPassword instead."),this.yb(e,t)},e.Jc=function(e){return xr("firebase.auth.Auth.prototype.signInWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential instead."),this.Qa(e).then((function(e){return e.user}))},e.Qa=function(e){var t=this;return this.i.then((function(){return Wc(t,e.la(t.b))}))},e.Ra=function(){var e=this;return this.i.then((function(){var t=Hc(e);if(t&&t.isAnonymous){var n=Dr({providerId:null,isNewUser:!1});return Dr({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return Wc(e,e.b.Ra()).then((function(t){var n=t.user;return pc(n,"isAnonymous",!0),e.Z(n),t}))}))},e.Ic=function(){return xr("firebase.auth.Auth.prototype.signInAnonymouslyAndRetrieveData is deprecated. Please use firebase.auth.Auth.prototype.signInAnonymously instead."),this.Ra()},e.getUid=function(){return Hc(this)&&Hc(this).uid||null},e.Vb=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&Hc(this)&&rc(Hc(this))},e.Ec=function(e){var t=this;N(this.m,(function(n){n==e&&t.u--})),0>this.u&&(this.u=0),0==this.u&&Hc(this)&&ic(Hc(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.m.push(e),Kc(this,this.i.then((function(){t.l||L(t.m,e)&&e(Gc(t))})))},e.removeAuthTokenListener=function(e){U(this.m,(function(t){return t==e}))},e.delete=function(){this.l=!0;for(var e=0;e<this.N.length;e++)this.N[e].cancel("app-deleted");return this.N=[],this.h&&(e=this.h).b.removeListener(Ac("local"),e.a,this.ka),this.a&&(this.a.unsubscribe(this),this.a.Za()),i.a.Promise.resolve()},e.Zb=function(e){return xr("firebase.auth.Auth.prototype.fetchProvidersForEmail is deprecated. Please use firebase.auth.Auth.prototype.fetchSignInMethodsForEmail instead."),Kc(this,function(e,t){return rs(e,Ra,{identifier:t,continueUri:dr()?Hn():"http://localhost"}).then((function(e){return e.allProviders||[]}))}(this.b,e))},e.$b=function(e){return Kc(this,function(e,t){return rs(e,Ra,{identifier:t,continueUri:dr()?Hn():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.b,e))},e.qc=function(e){return!!Hi(e)},e.mb=function(e,t){var n=this;return Kc(this,ke().then((function(){var e=new Gr(t);if(!e.c)throw new Br("argument-error",Yr+" must be true when sending sign in link to email");return ni(e)})).then((function(t){return n.b.mb(e,t)})).then((function(){})))},e.Vc=function(e){return this.Ja(e).then((function(e){return e.data.email}))},e.$a=function(e,t){return Kc(this,this.b.$a(e,t).then((function(){})))},e.Ja=function(e){return Kc(this,this.b.Ja(e).then((function(e){return new Rr(e)})))},e.Xa=function(e){return Kc(this,this.b.Xa(e).then((function(){})))},e.lb=function(e,t){var n=this;return Kc(this,ke().then((function(){return void 0===t||re(t)?{}:ni(new Gr(t))})).then((function(t){return n.b.lb(e,t)})).then((function(){})))},e.Lc=function(e,t){return Kc(this,Wu(this,e,t,b(this.Qa,this)))},e.Kc=function(e,t){var n=this;return Kc(this,ke().then((function(){var r=zi(e,t||Hn());return n.Qa(r)})))},Yc.prototype.render=function(){},Yc.prototype.reset=function(){},Yc.prototype.getResponse=function(){},Yc.prototype.execute=function(){};var Jc=null;function Zc(e,t){return(t=$c(t))&&e.a[t]||null}function $c(e){return(e=void 0===e?1e12:e)?e.toString():null}function el(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Nn(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():_t(this.f,"click",this.i)}function tl(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function nl(){}Xc.prototype.render=function(e,t){return this.a[this.b.toString()]=new el(e,t),this.b++},Xc.prototype.reset=function(e){var t=Zc(this,e);e=$c(e),t&&e&&(t.delete(),delete this.a[e])},Xc.prototype.getResponse=function(e){return(e=Zc(this,e))?e.getResponse():null},Xc.prototype.execute=function(e){(e=Zc(this,e))&&e.execute()},el.prototype.getResponse=function(){return tl(this),this.b},el.prototype.execute=function(){tl(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(r){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(r){}e.h&&e.execute()}),6e4)}),500))},el.prototype.delete=function(){tl(this),this.g=!0,clearTimeout(this.a),this.a=null,kt(this.f,"click",this.i)},nl.prototype.g=function(){return Jc||(Jc=new Xc),ke(Jc)},nl.prototype.c=function(){};var rl=null;function il(){this.b=n.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var ol=new gn(yn,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),al=new wr(3e4,6e4);il.prototype.g=function(e){var t=this;return new me((function(r,i){var o=setTimeout((function(){i(new Br("network-request-failed"))}),al.get());!n.grecaptcha||e!==t.f&&!t.b?(n[t.a]=function(){if(n.grecaptcha){t.f=e;var a=n.grecaptcha.render;n.grecaptcha.render=function(e,n){return e=a(e,n),t.b++,e},clearTimeout(o),r(n.grecaptcha)}else clearTimeout(o),i(new Br("internal-error"));delete n[t.a]},ke($o(wn(ol,{onload:t.a,hl:e||""}))).s((function(){clearTimeout(o),i(new Br("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(o),r(n.grecaptcha))}))},il.prototype.c=function(){this.b--};var sl=null;function ul(e,t,r,i,o,a,s){if(Pr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.l=t,this.g=null,s?(rl||(rl=new nl),s=rl):(sl||(sl=new il),s=sl),this.m=s,this.a=r||{theme:"light",type:"image"},this.h=[],this.a[hl])throw new Br("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[dl],!n.document)throw new Br("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Nn(t)||!this.i&&Nn(t).hasChildNodes())throw new Br("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.u=new aa(e,a||null,o||null),this.v=i||function(){return null};var u=this;this.o=[];var c=this.a[cl];this.a[cl]=function(e){if(fl(u,e),"function"==typeof c)c(e);else if("string"==typeof c){var t=cr(c,n);"function"==typeof t&&t(e)}};var l=this.a[ll];this.a[ll]=function(){if(fl(u,null),"function"==typeof l)l();else if("string"==typeof l){var e=cr(l,n);"function"==typeof e&&e()}}}var cl="callback",ll="expired-callback",hl="sitekey",dl="size";function fl(e,t){for(var n=0;n<e.o.length;n++)try{e.o[n](t)}catch(r){}}function pl(e,t){return e.h.push(t),t.ia((function(){V(e.h,t)})),t}function gl(e){if(e.D)throw new Br("internal-error","RecaptchaVerifier instance has been destroyed.")}function ml(e,t,n){var r=!1;try{this.b=n||i.a.app()}catch(s){throw new Br("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Br("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().ya()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}a=i.a.SDK_VERSION?sr(i.a.SDK_VERSION,a):null,ul.call(this,n,e,t,(function(){try{var e=o.b.auth().ea()}catch(t){e=null}return e}),a,li(ui),r)}function vl(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new Br("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],0>i||i>=yl.length)throw new Br("internal-error","Argument validator received an unsupported number of arguments.");n=yl[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new Br("argument-error",e+" failed: "+r)}(e=ul.prototype).za=function(){var e=this;return this.f?this.f:this.f=pl(this,ke().then((function(){if(dr()&&!tr())return Zn();throw new Br("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.v())})).then((function(t){return e.g=t,rs(e.u,Wa,{})})).then((function(t){e.a[hl]=t.recaptchaSiteKey})).s((function(t){throw e.f=null,t})))},e.render=function(){gl(this);var e=this;return pl(this,this.za().then((function(){if(null===e.c){var t=e.l;if(!e.i){var n=Nn(t);t=function(e,t,n){var i=arguments,o=document,a=String(i[0]),s=i[1];if(!pn&&s&&(s.name||s.type)){if(a=["<",a],s.name&&a.push(' name="',le(s.name),'"'),s.type){a.push(' type="',le(s.type),'"');var u={};ue(u,s),delete u.type,s=u}a.push(">"),a=a.join("")}return a=o.createElement(a),s&&(r(s)?a.className=s:h(s)?a.className=s.join(" "):Mn(a,s)),2<i.length&&Ln(o,a,i),a}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},e.verify=function(){gl(this);var e=this;return pl(this,this.render().then((function(t){return new me((function(n){var r=e.g.getResponse(t);if(r)n(r);else{e.o.push((function t(r){r&&(function(e,t){U(e.o,(function(e){return e==t}))}(e,t),n(r))})),e.i&&e.g.execute(e.c)}}))})))},e.reset=function(){gl(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){gl(this),this.D=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=Nn(this.l);for(var t;t=e.firstChild;)e.removeChild(t)}},C(ml,ul);var yl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function bl(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:r}}function _l(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:o}}function wl(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:p}}function Cl(e,t){return{name:e||"",K:"a function",optional:!!t,M:f}}function kl(e,t){return{name:e||"",K:"null",optional:!!t,M:l}}function Sl(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){return!!t&&!(!t.la||e&&t.providerId!==e)}}}function El(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!!(e&&r(e.type)&&f(e.verify))}}}function Tl(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function xl(e,t){for(var n in t){var r=t[n].name;e[r]=Ol(r,e[n],t[n].j)}}function Il(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:_((function(e){return this[e]}),n),set:_((function(e,t,n,r){vl(e,[n],[r],!0),this[t]=r}),r,n,t[n].ub),enumerable:!0})}}function Pl(e,t,n,r){e[t]=Ol(t,n,r)}function Ol(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return vl(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}xl(Lc.prototype,{Xa:{name:"applyActionCode",j:[bl("code")]},Ja:{name:"checkActionCode",j:[bl("code")]},$a:{name:"confirmPasswordReset",j:[bl("code"),bl("newPassword")]},yb:{name:"createUserWithEmailAndPassword",j:[bl("email"),bl("password")]},Wb:{name:"createUserAndRetrieveDataWithEmailAndPassword",j:[bl("email"),bl("password")]},Zb:{name:"fetchProvidersForEmail",j:[bl("email")]},$b:{name:"fetchSignInMethodsForEmail",j:[bl("email")]},fa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[bl("emailLink")]},wc:{name:"onAuthStateChanged",j:[Tl(wl(),Cl(),"nextOrObserver"),Cl("opt_error",!0),Cl("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[Tl(wl(),Cl(),"nextOrObserver"),Cl("opt_error",!0),Cl("opt_completed",!0)]},lb:{name:"sendPasswordResetEmail",j:[bl("email"),Tl(wl("opt_actionCodeSettings",!0),kl(null,!0),"opt_actionCodeSettings",!0)]},mb:{name:"sendSignInLinkToEmail",j:[bl("email"),wl("actionCodeSettings")]},nb:{name:"setPersistence",j:[bl("persistence")]},Qa:{name:"signInAndRetrieveDataWithCredential",j:[Sl()]},Ra:{name:"signInAnonymously",j:[]},Ic:{name:"signInAnonymouslyAndRetrieveData",j:[]},Jc:{name:"signInWithCredential",j:[Sl()]},Nb:{name:"signInWithCustomToken",j:[bl("token")]},Gc:{name:"signInAndRetrieveDataWithCustomToken",j:[bl("token")]},Ob:{name:"signInWithEmailAndPassword",j:[bl("email"),bl("password")]},Kc:{name:"signInWithEmailLink",j:[bl("email"),bl("emailLink",!0)]},Hc:{name:"signInAndRetrieveDataWithEmailAndPassword",j:[bl("email"),bl("password")]},Lc:{name:"signInWithPhoneNumber",j:[bl("phoneNumber"),El()]},Mc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Nc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Sc:{name:"updateCurrentUser",j:[Tl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof Zu)}},kl(),"user")]},ob:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[bl(null,!0)]},Uc:{name:"useDeviceLanguage",j:[]},Vc:{name:"verifyPasswordResetCode",j:[bl("code")]}}),Il(Lc.prototype,{lc:{name:"languageCode",ub:Tl(bl(),kl(),"languageCode")}}),(Lc.Persistence=Xs).LOCAL="local",Lc.Persistence.SESSION="session",Lc.Persistence.NONE="none",xl(Zu.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[_l("opt_forceRefresh",!0)]},F:{name:"getIdToken",j:[_l("opt_forceRefresh",!0)]},fb:{name:"linkAndRetrieveDataWithCredential",j:[Sl()]},rc:{name:"linkWithCredential",j:[Sl()]},sc:{name:"linkWithPhoneNumber",j:[bl("phoneNumber"),El()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},hb:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Sl()]},Ac:{name:"reauthenticateWithCredential",j:[Sl()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[bl("phoneNumber"),El()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},kb:{name:"sendEmailVerification",j:[Tl(wl("opt_actionCodeSettings",!0),kl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[bl(null,!0)]},Rc:{name:"unlink",j:[bl("provider")]},qb:{name:"updateEmail",j:[bl("email")]},rb:{name:"updatePassword",j:[bl("password")]},Tc:{name:"updatePhoneNumber",j:[Sl("phone")]},sb:{name:"updateProfile",j:[wl("profile")]}}),xl(Xc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),xl(Yc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),xl(me.prototype,{ia:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Il(qu.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",ub:_l("appVerificationDisabledForTesting")}}),xl(Bu.prototype,{confirm:{name:"confirm",j:[bl("verificationCode")]}}),Pl(Wi,"credential",(function(e,t){return new Bi(e,t)}),[bl("email"),bl("password")]),xl(Ni.prototype,{ua:{name:"addScope",j:[bl("scope")]},Da:{name:"setCustomParameters",j:[wl("customOAuthParameters")]}}),Pl(Ni,"credential",Mi,[Tl(bl(),wl(),"token")]),Pl(Wi,"credentialWithLink",zi,[bl("email"),bl("emailLink")]),xl(Fi.prototype,{ua:{name:"addScope",j:[bl("scope")]},Da:{name:"setCustomParameters",j:[wl("customOAuthParameters")]}}),Pl(Fi,"credential",Li,[Tl(bl(),wl(),"token")]),xl(Vi.prototype,{ua:{name:"addScope",j:[bl("scope")]},Da:{name:"setCustomParameters",j:[wl("customOAuthParameters")]}}),Pl(Vi,"credential",Ui,[Tl(bl(),Tl(wl(),kl()),"idToken"),Tl(bl(),kl(),"accessToken",!0)]),xl(ji.prototype,{Da:{name:"setCustomParameters",j:[wl("customOAuthParameters")]}}),Pl(ji,"credential",qi,[Tl(bl(),wl(),"token"),bl("secret",!0)]),xl(Ri.prototype,{ua:{name:"addScope",j:[bl("scope")]},credential:{name:"credential",j:[Tl(bl(),kl(),"idToken",!0),Tl(bl(),kl(),"accessToken",!0),Tl(bl(),kl(),"nonce",!0)]},Da:{name:"setCustomParameters",j:[wl("customOAuthParameters")]}}),Pl(Ki,"credential",Yi,[bl("verificationId"),bl("verificationCode")]),xl(Ki.prototype,{Va:{name:"verifyPhoneNumber",j:[bl("phoneNumber"),El()]}}),xl(Br.prototype,{toJSON:{name:"toJSON",j:[bl(null,!0)]}}),xl(io.prototype,{toJSON:{name:"toJSON",j:[bl(null,!0)]}}),xl(ro.prototype,{toJSON:{name:"toJSON",j:[bl(null,!0)]}}),xl(ml.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),function(){if(void 0===i.a||!i.a.INTERNAL||!i.a.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={Auth:Lc,Error:Br};Pl(e,"EmailAuthProvider",Wi,[]),Pl(e,"FacebookAuthProvider",Ni,[]),Pl(e,"GithubAuthProvider",Fi,[]),Pl(e,"GoogleAuthProvider",Vi,[]),Pl(e,"TwitterAuthProvider",ji,[]),Pl(e,"OAuthProvider",Ri,[bl("providerId")]),Pl(e,"SAMLAuthProvider",Ai,[bl("providerId")]),Pl(e,"PhoneAuthProvider",Ki,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof Lc)}}]),Pl(e,"RecaptchaVerifier",ml,[Tl(bl(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),wl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof i.a.app.App)}}]),i.a.INTERNAL.registerService("auth",(function(e,t){return t({INTERNAL:{getUid:b((e=new Lc(e)).getUid,e),getToken:b(e.cc,e),addAuthTokenListener:b(e.Vb,e),removeAuthTokenListener:b(e.Ec,e)}}),e}),e,(function(e,t){if("create"===e)try{t.auth()}catch(n){}})),i.a.INTERNAL.extendNamespace({User:Zu})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},t7fG:function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return h})),n.d(t,"__exportStar",(function(){return d})),n.d(t,"__values",(function(){return f})),n.d(t,"__read",(function(){return p})),n.d(t,"__spread",(function(){return g})),n.d(t,"__await",(function(){return m})),n.d(t,"__asyncGenerator",(function(){return v})),n.d(t,"__asyncDelegator",(function(){return y})),n.d(t,"__asyncValues",(function(){return b})),n.d(t,"__makeTemplateObject",(function(){return _})),n.d(t,"__importStar",(function(){return w})),n.d(t,"__importDefault",(function(){return C}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof m?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function y(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:m(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}},tLdg:function(e,t,n){var r=n("jZgK")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(i){}}return!0}},tmUU:function(e,t,n){n("oQnE"),n("zGGa"),e.exports=n("eKN1").f("iterator")},u00B:function(e,t,n){var r=n("qtiw"),i=n("Autd"),o=n("8L4g"),a=n("eKN1"),s=n("ytDL").f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},wj3C:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("zVF4"),i=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o=[],a=function(){function e(e,t,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled||!1,this.options_=r.deepCopy(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){o.push(e),setTimeout((function(){return e(null)}),0)},removeAuthTokenListener:function(e){o=o.filter((function(t){return t!==e}))}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed_(),this._automaticDataCollectionEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){e.firebase_.INTERNAL.removeApp(e.name_);var t=[];return Object.keys(e.services_).forEach((function(n){Object.keys(e.services_[n]).forEach((function(r){t.push(e.services_[n][r])}))})),Promise.all(t.map((function(e){return e.INTERNAL.delete()})))})).then((function(){e.isDeleted_=!0,e.services_={}}))},e.prototype._getService=function(e,t){if(void 0===t&&(t="[DEFAULT]"),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n="[DEFAULT]"!==t?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype.extendApp=function(e){var t=this;r.deepExtend(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(o.forEach((function(e){t.INTERNAL.addAuthTokenListener(e)})),o=[])},e.prototype.checkDestroyed_=function(){this.isDeleted_&&s("app-deleted",{name:this.name_})},e}();function s(e,t){throw u.create(e,t)}a.prototype.name&&a.prototype.options||a.prototype.delete||console.log("dc");var u=new r.ErrorFactory("app","Firebase",{"no-app":"No Firebase App '{$name}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$name}","duplicate-app":"Firebase App named '{$name}' already exists","app-deleted":"Firebase App named '{$name}' already deleted","duplicate-service":"Firebase service named '{$name}' already registered","sa-not-supported":"Initializing the Firebase SDK with a service account is only allowed in a Node.js environment. On client devices, you should instead initialize the SDK with an api key and auth domain","invalid-app-argument":"firebase.{$name}() takes either no argument or a Firebase App instance."}),c=!1;try{c="[object process]"===Object.prototype.toString.call(global.process)}catch(h){}c&&console.warn('\nWarning: This is a browser-targeted Firebase bundle but it appears it is being\nrun in a Node environment.  If running in a Node environment, make sure you\nare using the bundle specified by the "main" field in package.json.\n\nIf you are using Webpack, you can specify "main" as the first item in\n"resolve.mainFields":\nhttps://webpack.js.org/configuration/resolve/#resolvemainfields\n\nIf using Rollup, use the rollup-plugin-node-resolve plugin and set "module"\nto false and "main" to true:\nhttps://github.com/rollup/rollup-plugin-node-resolve\n');var l=function e(){var t={},n={},o={},u={__esModule:!0,initializeApp:function(e,n){void 0===n&&(n={}),"object"==typeof n&&null!==n||(n={name:n});var r=n;void 0===r.name&&(r.name="[DEFAULT]");var o=r.name;"string"==typeof o&&o||s("bad-app-name",{name:o+""}),i(t,o)&&s("duplicate-app",{name:o});var c=new a(e,r,u);return t[o]=c,h(c,"create"),c},app:c,apps:null,Promise:Promise,SDK_VERSION:"5.9.1",INTERNAL:{registerService:function(e,t,i,h,d){n[e]&&s("duplicate-service",{name:e}),n[e]=t,h&&(o[e]=h,l().forEach((function(e){h("create",e)})));var f=function(t){return void 0===t&&(t=c()),"function"!=typeof t[e]&&s("invalid-app-argument",{name:e}),t[e]()};return void 0!==i&&r.deepExtend(f,i),u[e]=f,a.prototype[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this._getService.bind(this,e);return r.apply(this,d?t:[])},f},createFirebaseNamespace:e,extendNamespace:function(e){r.deepExtend(u,e)},createSubscribe:r.createSubscribe,ErrorFactory:r.ErrorFactory,removeApp:function(e){h(t[e],"delete"),delete t[e]},factories:n,useAsService:d,Promise:Promise,deepExtend:r.deepExtend}};function c(e){return i(t,e=e||"[DEFAULT]")||s("no-app",{name:e}),t[e]}function l(){return Object.keys(t).map((function(e){return t[e]}))}function h(e,t){Object.keys(n).forEach((function(n){var r=d(0,n);null!==r&&o[r]&&o[r](t,e)}))}function d(e,t){return"serverAuth"===t?null:t}return r.patchProperty(u,"default",u),Object.defineProperty(u,"apps",{get:l}),r.patchProperty(c,"App",a),u}();t.firebase=l,t.default=l},x7I3:function(e,t,n){"use strict";n.r(t),n.d(t,"createWebChannelTransport",(function(){return Gt})),n.d(t,"ErrorCode",(function(){return Qt})),n.d(t,"EventType",(function(){return Kt})),n.d(t,"WebChannel",(function(){return Yt})),n.d(t,"XhrIo",(function(){return Xt}));var r,i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=o||{},a=i;function s(e){return"string"==typeof e}function u(e,t){e=e.split("."),t=t||a;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function c(){}function l(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function h(e){return"array"==l(e)}function d(e){var t=l(e);return"array"==t||"object"==t&&"number"==typeof e.length}function f(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var p="closure_uid_"+(1e9*Math.random()>>>0),g=0;function m(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function y(e,t,n){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:v).apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var _=Date.now||function(){return+new Date};function w(e,t){function n(){}n.prototype=t.prototype,e.S=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.re=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function C(){this.i=this.i,this.j=this.j}C.prototype.i=!1,C.prototype.La=function(){!this.i&&(this.i=!0,this.G(),0)&&(this[p]||(this[p]=++g))},C.prototype.G=function(){if(this.j)for(;this.j.length;)this.j.shift()()};var k=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(s(e))return s(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},S=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=s(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function E(e){return Array.prototype.concat.apply([],arguments)}function T(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function x(e){return/^[\s\xa0]*$/.test(e)}var I,P=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function O(e,t){return-1!=e.indexOf(t)}function D(e,t){return e<t?-1:e>t?1:0}e:{var A=a.navigator;if(A){var R=A.userAgent;if(R){I=R;break e}}I=""}function N(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function M(e){var t,n={};for(t in e)n[t]=e[t];return n}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function V(e){return V[" "](e),e}V[" "]=c;var U,j,q=O(I,"Opera"),B=O(I,"Trident")||O(I,"MSIE"),W=O(I,"Edge"),z=W||B,H=O(I,"Gecko")&&!(O(I.toLowerCase(),"webkit")&&!O(I,"Edge"))&&!(O(I,"Trident")||O(I,"MSIE"))&&!O(I,"Edge"),G=O(I.toLowerCase(),"webkit")&&!O(I,"Edge");function Q(){var e=a.document;return e?e.documentMode:void 0}e:{var K="",Y=(j=I,H?/rv:([^\);]+)(\)|;)/.exec(j):W?/Edge\/([\d\.]+)/.exec(j):B?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(j):G?/WebKit\/(\S+)/.exec(j):q?/(?:Version)[ \/]?(\S+)/.exec(j):void 0);if(Y&&(K=Y?Y[1]:""),B){var X=Q();if(null!=X&&X>parseFloat(K)){U=String(X);break e}}U=K}var J,Z={};function $(e){return function(e,t){var n=Z;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t()}(e,(function(){for(var t=0,n=P(String(U)).split("."),r=P(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=D(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||D(0==a[2].length,0==s[2].length)||D(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}var ee=a.document;J=ee&&B?Q()||("CSS1Compat"==ee.compatMode?parseInt(U,10):5):void 0;var te=!B||9<=Number(J),ne=B&&!$("9"),re=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",c,t),a.removeEventListener("test",c,t)}catch(n){}return e}();function ie(e,t){this.type=e,this.a=this.target=t,this.b=!1,this.hc=!0}function oe(e,t){ie.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.f=null,e&&this.g(e,t)}ie.prototype.c=function(){this.hc=!1},w(oe,ie);var ae={2:"touch",3:"pen",4:"mouse"};oe.prototype.g=function(e,t){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(H){e:{try{V(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=s(e.pointerType)?e.pointerType:ae[e.pointerType]||"",this.f=e,e.defaultPrevented&&this.c()},oe.prototype.c=function(){oe.S.c.call(this);var e=this.f;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,ne)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};var se="closure_listenable_"+(1e6*Math.random()|0),ue=0;function ce(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ya=i,this.key=++ue,this.ja=this.oa=!1}function le(e){this.src=e,this.a={},this.b=0}function he(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ja&&o.listener==t&&o.capture==!!n&&o.ya==r)return i}return-1}ce.prototype.a=function(){this.ja=!0,this.ya=this.src=this.proxy=this.listener=null},(r=le.prototype).add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=he(e,t,r,i);return-1<a?(t=e[a],n||(t.oa=!1)):((t=new ce(t,this.src,o,!!r,i)).oa=n,e.push(t)),t},r.Sc=function(e,t,n,r){if((e=e.toString())in this.a){var i=this.a[e];-1<(t=he(i,t,n,r))&&(i[t].a(),Array.prototype.splice.call(i,t,1),0==i.length&&(delete this.a[e],this.b--))}},r.fc=function(e){var t=e.type;if(t in this.a){var n,r=this.a[t],i=k(r,e);(n=0<=i)&&Array.prototype.splice.call(r,i,1),n&&(e.a(),0==this.a[t].length&&(delete this.a[t],this.b--))}},r.Tc=function(){var e;for(e in this.a){for(var t=this.a[e],n=0;n<t.length;n++)t[n].a();delete this.a[e],this.b--}},r.Rc=function(e,t,n,r){var i=-1;return(e=this.a[e.toString()])&&(i=he(e,t,n,r)),-1<i?e[i]:null};var de="closure_lm_"+(1e6*Math.random()|0),fe={};function pe(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(h(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=we(r),t&&t[se]?t.Mb(n,r,f(i)?!!i.capture:!!i,o):ge(t,n,r,!0,i,o)}(e,t,n,r,i);if(h(t)){for(var o=0;o<t.length;o++)pe(e,t[o],n,r,i);return null}return n=we(n),e&&e[se]?e.Lb(t,n,f(r)?!!r.capture:!!r,i):ge(e,t,n,!1,r,i)}function ge(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=f(i)?!!i.capture:!!i;if(a&&!te)return null;var s=be(e);if(s||(e[de]=s=new le(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=ye,t=te?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)re||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ve(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function me(e){if("number"!=typeof e&&e&&!e.ja){var t=e.src;if(t&&t[se])t.nc(e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ve(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=be(t))?(n.fc(e),0==n.b&&(n.src=null,t[de]=null)):e.a()}}}function ve(e){return e in fe?fe[e]:fe[e]="on"+e}function ye(e,t){return!!e.ja||function(e,t){var n=e.listener,r=e.ya||e.src;return e.oa&&me(e),n.call(r,t)}(e,te?new oe(t,this):t=new oe(t||u("window.event"),this))}function be(e){return(e=e[de])instanceof le?e:null}var _e="__closure_events_fn_"+(1e9*Math.random()>>>0);function we(e){return"function"==l(e)?e:(e[_e]||(e[_e]=function(t){return e.handleEvent(t)}),e[_e])}function Ce(){C.call(this),this.c=new le(this),this.K=this,this.F=null}w(Ce,C),Ce.prototype[se]=!0,(r=Ce.prototype).addEventListener=function(e,t,n,r){pe(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(h(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=f(i)?!!i.capture:!!i,r=we(r),t&&t[se]?t.Qc(n,r,i,o):t&&(t=be(t))&&(n=t.Rc(n,r,i,o))&&me(n)}(this,e,t,n,r)},r.dispatchEvent=function(e){var t,n=this.F;if(n)for(t=[];n;n=n.F)t.push(n);n=this.K;var r=e.type||e;if(s(e))e=new ie(e,n);else if(e instanceof ie)e.target=e.target||n;else{var i=e;L(e=new ie(r,n),i)}if(i=!0,t)for(var o=t.length-1;!e.b&&0<=o;o--){var a=e.a=t[o];i=a.ua(r,!0,e)&&i}if(e.b||(i=(a=e.a=n).ua(r,!0,e)&&i,e.b||(i=a.ua(r,!1,e)&&i)),t)for(o=0;!e.b&&o<t.length;o++)i=(a=e.a=t[o]).ua(r,!1,e)&&i;return i},r.G=function(){Ce.S.G.call(this),this.Id(),this.F=null},r.Lb=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},r.Mb=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)},r.Qc=function(e,t,n,r){this.c.Sc(String(e),t,n,r)},r.nc=function(e){this.c.fc(e)},r.Id=function(){this.c&&this.c.Tc()},r.ua=function(e,t,n){if(!(e=this.c.a[String(e)]))return!0;e=e.concat();for(var r=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ja&&o.capture==t){var a=o.listener,s=o.ya||o.src;o.oa&&this.nc(o),r=!1!==a.call(s,n)&&r}}return r&&0!=n.hc};var ke=a.JSON.stringify;function Se(e,t){this.g=100,this.c=e,this.h=t,this.b=0,this.a=null}function Ee(){this.b=this.a=null}Se.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e},Se.prototype.f=function(e){this.h(e),this.b<this.g&&(this.b++,e.next=this.a,this.a=e)};var Te,xe=new Se((function(){return new Ie}),(function(e){e.reset()}));function Ie(){this.next=this.b=this.a=null}function Pe(e){a.setTimeout((function(){throw e}),0)}Ee.prototype.add=function(e,t){var n=this.c();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Ee.prototype.f=function(){var e=null;return this.a&&(e=this.a,this.a=this.a.next,this.a||(this.b=null),e.next=null),e},Ee.prototype.g=function(e){xe.f(e)},Ee.prototype.c=function(){return xe.get()},Ie.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Ie.prototype.reset=function(){this.next=this.b=this.a=null};var Oe=!1,De=new Ee;function Ae(){for(var e;e=De.f();){try{e.a.call(e.b)}catch(t){Pe(t)}De.g(e)}Oe=!1}function Re(e,t){Ce.call(this),this.b=e||1,this.a=t||a,this.f=y(this.$d,this),this.g=_()}function Ne(e,t,n){if("function"==l(e))n&&(e=y(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=y(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function Me(e,t,n){C.call(this),this.f=null!=n?y(e,n):e,this.c=t,this.b=y(this.Cd,this),this.a=[]}function Fe(e){C.call(this),this.b=e,this.a={}}w(Re,Ce),(r=Re.prototype).wa=!1,r.P=null,r.$d=function(){if(this.wa){var e=_()-this.g;0<e&&e<.8*this.b?this.P=this.a.setTimeout(this.f,this.b-e):(this.P&&(this.a.clearTimeout(this.P),this.P=null),this.Gc(),this.wa&&(this.Na(),this.start()))}},r.Gc=function(){this.dispatchEvent("tick")},r.start=function(){this.wa=!0,this.P||(this.P=this.a.setTimeout(this.f,this.b),this.g=_())},r.Na=function(){this.wa=!1,this.P&&(this.a.clearTimeout(this.P),this.P=null)},r.G=function(){Re.S.G.call(this),this.Na(),delete this.a},w(Me,C),(r=Me.prototype).Ca=!1,r.ec=0,r.ba=null,r.Hc=function(e){this.a=arguments,this.ba||this.ec?this.Ca=!0:this.yb()},r.Pc=function(){this.ba&&(a.clearTimeout(this.ba),this.ba=null,this.Ca=!1,this.a=[])},r.G=function(){Me.S.G.call(this),this.Pc()},r.Cd=function(){this.ba=null,this.Ca&&!this.ec&&(this.Ca=!1,this.yb())},r.yb=function(){this.ba=Ne(this.b,this.c),this.f.apply(null,this.a)},w(Fe,C);var Le=[];function Ve(){}(r=Fe.prototype).Jb=function(e,t,n){this.wd(e,t,n)},r.wd=function(e,t,n){h(t)||(t&&(Le[0]=t.toString()),t=Le);for(var r=0;r<t.length;r++){var i=pe(e,t[r],n||this.handleEvent,!1,this.b||this);if(!i)break;this.a[i.key]=i}},r.Kb=function(){N(this.a,(function(e,t){this.a.hasOwnProperty(t)&&me(e)}),this),this.a={}},r.G=function(){Fe.S.G.call(this),this.Kb()},r.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ue=new Ce;function je(e){ie.call(this,"serverreachability",e)}function qe(e){Ue.dispatchEvent(new je(Ue,e))}function Be(e){ie.call(this,"statevent",e)}function We(e){Ue.dispatchEvent(new Be(Ue,e))}function ze(e){ie.call(this,"timingevent",e)}function He(e,t){if("function"!=l(e))throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){e()}),t)}w(je,ie),w(Be,ie),w(ze,ie);var Ge={NO_ERROR:0,ae:1,he:2,ge:3,de:4,fe:5,ie:6,qc:7,TIMEOUT:8,le:9},Qe={ce:"complete",pe:"success",rc:"error",qc:"abort",ne:"ready",oe:"readystatechange",TIMEOUT:"timeout",je:"incrementaldata",me:"progress",ee:"downloadprogress",qe:"uploadprogress"};function Ke(){}function Ye(){}Ke.prototype.a=null,Ke.prototype.c=function(){return this.a||(this.a={})};var Xe,Je={OPEN:"a",be:"b",rc:"c",ke:"d"};function Ze(){ie.call(this,"d")}function $e(){ie.call(this,"c")}function et(){}function tt(e,t,n){this.g=e,this.da=t,this.ca=n||1,this.I=new Fe(this),this.L=nt,this.T=new Re(e=z?125:void 0),this.J=null,this.b=!1,this.i=this.C=this.f=this.F=this.u=this.U=this.h=null,this.j=[],this.a=null,this.A=0,this.c=this.v=null,this.o=-1,this.l=!1,this.K=0,this.B=null,this.s=this.Y=this.H=!1}w(Ze,ie),w($e,ie),w(et,Ke),et.prototype.b=function(){return new XMLHttpRequest},Xe=new et;var nt=45e3,rt={},it={};function ot(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(d(e)||s(e))S(e,t,void 0);else{if(e.O&&"function"==typeof e.O)var n=e.O();else if(e.D&&"function"==typeof e.D)n=void 0;else if(d(e)||s(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.D&&"function"==typeof e.D)return e.D();if(s(e))return e.split("");if(d(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function at(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else e&&this.fd(e)}function st(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=tt.prototype).ha=function(e){this.J=e},r.setTimeout=function(e){this.L=e},r.Xc=function(e){this.K=e},r.Qd=function(e){this.j=e},r.cb=function(e,t){this.F=1,this.f=e.N().za(),this.i=t,this.H=!0,this.ic(null)},r.bb=function(e,t,n){this.F=1,this.f=e.N().za(),this.i=null,this.H=t,this.ic(n)},r.ic=function(e){this.u=_(),this.fa(),this.C=this.f.N(),this.C.Aa("t",this.ca),this.A=0,this.a=this.g.sa(this.g.Da()?e:null),0<this.K&&(this.B=new Me(y(this.oc,this,this.a),this.K)),this.I.Jb(this.a,"readystatechange",this.Hd),e=this.J?M(this.J):{},this.i?(this.v||(this.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",this.a.xa(this.C,this.v,this.i,e)):(this.v="GET",this.a.xa(this.C,this.v,null,e)),qe(1)},r.Hd=function(e){e=e.target;var t=this.B;t&&3==e.W()?t.Hc():this.oc(e)},r.oc=function(e){try{e==this.a&&this.Ed()}catch(t){}},r.Ed=function(){var e=this.a.W(),t=this.a.Db(),n=this.a.aa();if(!(3>e||3==e&&!z&&!this.a.va()))if(this.l||4!=e||7==t||qe(8==t||0>=n?3:2),this.pa(),this.o=n=this.a.aa(),t=this.a.va(),this.b=200==n){if(this.Td()){if(!(n=this.Kc()))return this.b=!1,this.c=3,We(12),this.Z(),void this.ta();this.s=!0,this.Wa(n)}this.H?(this.vb(e,t),z&&this.b&&3==e&&this.Yd()):this.Wa(t),4==e&&this.Z(),this.b&&!this.l&&(4==e?this.g.Va(this):(this.b=!1,this.fa()))}else 400==n&&0<t.indexOf("Unknown SID")?(this.c=3,We(12)):(this.c=0,We(13)),this.Z(),this.ta()},r.Td=function(){return this.Y&&!this.s},r.Kc=function(){if(this.a){var e=this.a.ga("X-HTTP-Initial-Response");if(e&&!x(e))return e}return null},r.Md=function(){this.Y=!0},r.vb=function(e,t){for(var n=!0;!this.l&&this.A<t.length;){var r=this.Lc(t);if(r==it){4==e&&(this.c=4,We(14),n=!1);break}if(r==rt){this.c=4,We(15),n=!1;break}this.Wa(r)}4==e&&0==t.length&&(this.c=1,We(16),n=!1),this.b=this.b&&n,n||(this.Z(),this.ta())},r.Gd=function(){if(this.a){var e=this.a.W(),t=this.a.va();this.A<t.length&&(this.pa(),this.vb(e,t),this.b&&4!=e&&this.fa())}},r.Yd=function(){this.I.Jb(this.T,"tick",this.Gd),this.T.start()},r.Lc=function(e){var t=this.A,n=e.indexOf("\n",t);return-1==n?it:(t=Number(e.substring(t,n)),isNaN(t)?rt:(n+=1)+t>e.length?it:(e=e.substr(n,t),this.A=n+t,e))},r.Ld=function(e){this.F=2,this.f=e.N().za(),e=!1,a.navigator&&a.navigator.sendBeacon&&(e=a.navigator.sendBeacon(this.f.toString(),"")),!e&&a.Image&&((new Image).src=this.f,e=!0),e||(this.a=this.g.sa(null),this.a.xa(this.f)),this.u=_(),this.fa()},r.cancel=function(){this.l=!0,this.Z()},r.Kd=function(e){e&&this.setTimeout(e),this.h&&(this.pa(),this.fa())},r.fa=function(){this.U=_()+this.L,this.mc(this.L)},r.mc=function(e){if(null!=this.h)throw Error("WatchDog timer not null");this.h=He(y(this.Dd,this),e)},r.pa=function(){this.h&&(a.clearTimeout(this.h),this.h=null)},r.Dd=function(){this.h=null;var e=_();0<=e-this.U?this.md():this.mc(this.U-e)},r.md=function(){2!=this.F&&(qe(3),We(17)),this.Z(),this.c=2,this.ta()},r.ta=function(){this.g.Tb()||this.l||this.g.Va(this)},r.Z=function(){this.pa();var e=this.B;e&&"function"==typeof e.La&&e.La(),this.B=null,this.T.Na(),this.I.Kb(),this.a&&(e=this.a,this.a=null,e.abort(),e.La())},r.Wa=function(e){try{this.g.bc(this,e),qe(4)}catch(t){}},(r=at.prototype).D=function(){this.Ka();for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},r.O=function(){return this.Ka(),this.a.concat()},r.Ra=function(e){return st(this.b,e)},r.hd=function(){return 0==this.c},r.gd=function(){this.b={},this.c=this.a.length=0},r.Qb=function(e){st(this.b,e)&&(delete this.b[e],this.c--,this.a.length>2*this.c&&this.Ka())},r.Ka=function(){if(this.c!=this.a.length){for(var e=0,t=0;e<this.a.length;){var n=this.a[e];st(this.b,n)&&(this.a[t++]=n),e++}this.a.length=t}if(this.c!=this.a.length){var r={};for(t=e=0;e<this.a.length;)st(r,n=this.a[e])||(this.a[t++]=n,r[n]=1),e++;this.a.length=t}},r.get=function(e,t){return st(this.b,e)?this.b[e]:t},r.set=function(e,t){st(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},r.fd=function(e){if(e instanceof at)for(var t=e.O(),n=0;n<t.length;n++)this.set(t[n],e.get(t[n]));else for(t in e)this.set(t,e[t])},r.forEach=function(e,t){for(var n=this.O(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}},r.Pb=function(){return new at(this)};var ut=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ct(e,t){var n;this.c=this.i=this.b="",this.h=null,this.j=this.g="",this.f=this.l=!1,e instanceof ct?(this.f=void 0!==t?t:e.f,this.ma(e.b),this.$a(e.i),this.ka(e.c),this.la(e.h),this.Ba(e.g),this.Za(e.a.Gb()),this.Ya(e.j)):e&&(n=String(e).match(ut))?(this.f=!!t,this.ma(n[1]||"",!0),this.$a(n[2]||"",!0),this.ka(n[3]||"",!0),this.la(n[4]),this.Ba(n[5]||"",!0),this.Za(n[6]||"",!0),this.Ya(n[7]||"",!0)):(this.f=!!t,this.a=new yt(null,this.f))}function lt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ht(e,t,n){return s(e)?(e=encodeURI(e).replace(t,dt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function dt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(r=ct.prototype).toString=function(){var e=[],t=this.b;t&&e.push(ht(t,ft,!0),":");var n=this.c;return(n||"file"==t)&&(e.push("//"),(t=this.i)&&e.push(ht(t,ft,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&e.push(":",String(n))),(n=this.g)&&(this.Sa()&&"/"!=n.charAt(0)&&e.push("/"),e.push(ht(n,"/"==n.charAt(0)?gt:pt,!0))),(n=this.Ic())&&e.push("?",n),(n=this.j)&&e.push("#",ht(n,vt)),e.join("")},r.resolve=function(e){var t=this.N(),n=e.qd();n?t.ma(e.b):n=e.rd(),n?t.$a(e.i):n=e.Sa(),n?t.ka(e.c):n=e.od();var r=e.g;if(n)t.la(e.h);else if(n=e.Sb()){if("/"!=r.charAt(0))if(this.Sa()&&!this.Sb())r="/"+r;else{var i=t.g.lastIndexOf("/");-1!=i&&(r=t.g.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(O(i,"./")||O(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.Ba(r):n=e.pd(),n?t.Za(e.a.Gb()):n=e.nd(),n&&t.Ya(e.j),t},r.N=function(){return new ct(this)},r.ma=function(e,t){this.M(),(this.b=t?lt(e,!0):e)&&(this.b=this.b.replace(/:$/,""))},r.qd=function(){return!!this.b},r.$a=function(e,t){this.M(),this.i=t?lt(e):e},r.rd=function(){return!!this.i},r.ka=function(e,t){this.M(),this.c=t?lt(e,!0):e},r.Sa=function(){return!!this.c},r.la=function(e){if(this.M(),e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);this.h=e}else this.h=null},r.od=function(){return null!=this.h},r.Ba=function(e,t){this.M(),this.g=t?lt(e,!0):e},r.Sb=function(){return!!this.g},r.pd=function(){return""!==this.a.toString()},r.Za=function(e,t){this.M(),e instanceof yt?(this.a=e,this.a.Oc(this.f)):(t||(e=ht(e,mt)),this.a=new yt(e,this.f))},r.Ic=function(){return this.a.toString()},r.m=function(e,t){this.M(),this.a.set(e,t)},r.Aa=function(e,t){this.M(),h(t)||(t=[String(t)]),this.a.lc(e,t)},r.Ya=function(e,t){this.M(),this.j=t?lt(e):e},r.nd=function(){return!!this.j},r.za=function(){return this.M(),this.m("zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),this},r.M=function(){if(this.l)throw Error("Tried to modify a read-only Uri")};var ft=/[#\/\?@]/g,pt=/[#\?:]/g,gt=/[#\?]/g,mt=/[#\?@]/g,vt=/#/g;function yt(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function bt(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function _t(){this.a=this.b=null}function wt(){this.a=new at}function Ct(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[p]||(e[p]=++g)):t.charAt(0)+e}function kt(e,t){this.a=e,this.b=t}function St(e){this.g=e||Et,e=a.PerformanceNavigationTiming?0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(a.Ja&&a.Ja.Vb&&a.Ja.Vb()&&a.Ja.Vb().te),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new wt),this.b=null,this.c=[]}(r=yt.prototype).V=function(){if(!this.a&&(this.a=new at,this.b=0,this.c)){var e=this;!function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(this.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}},r.add=function(e,t){this.V(),this.ia(),e=this.$(e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},r.Ib=function(e){this.V(),e=this.$(e),this.a.Ra(e)&&(this.ia(),this.b-=this.a.get(e).length,this.a.Qb(e))},r.Hb=function(e){return this.V(),e=this.$(e),this.a.Ra(e)},r.forEach=function(e,t){this.V(),this.a.forEach((function(n,r){S(n,(function(n){e.call(t,n,r,this)}),this)}),this)},r.O=function(){this.V();for(var e=this.a.D(),t=this.a.O(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},r.D=function(e){this.V();var t=[];if(s(e))this.Hb(e)&&(t=E(t,this.a.get(this.$(e))));else{e=this.a.D();for(var n=0;n<e.length;n++)t=E(t,e[n])}return t},r.set=function(e,t){return this.V(),this.ia(),e=this.$(e),this.Hb(e)&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},r.get=function(e,t){return e&&0<(e=this.D(e)).length?String(e[0]):t},r.lc=function(e,t){this.Ib(e),0<t.length&&(this.ia(),this.a.set(this.$(e),T(t)),this.b+=t.length)},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.O(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.D(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},r.ia=function(){this.c=null},r.Gb=function(){var e=new yt;return e.c=this.c,this.a&&(e.a=this.a.Pb(),e.b=this.b),e},r.$=function(e){return e=String(e),this.f&&(e=e.toLowerCase()),e},r.Oc=function(e){e&&!this.f&&(this.V(),this.ia(),this.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(this.Ib(t),this.lc(n,e))}),this)),this.f=e},w((function(){}),(function(){})),(r=bt.prototype).R=null,r.Wc=function(e){this.h=e},r.Vc=function(e){this.i=e,e=this.a.Cb(this.i),We(3);var t=this.a.H.b;null!=t?(this.f=this.a.Oa(t[0]),this.R=1,this.rb()):(e.Aa("MODE","init"),!this.a.o&&this.a.j&&e.Aa("X-HTTP-Session-Id",this.a.j),this.b=new tt(this,void 0,void 0),this.b.ha(this.h),this.b.bb(e,!1,null),this.R=0)},r.rb=function(){var e=this.a.H.a;if(null!=e)We(4),e?(We(10),this.a.na(this,!1)):(We(11),this.a.na(this,!0));else{this.b=new tt(this,void 0,void 0),this.b.ha(this.h),e=this.a.Bb(this.f,this.i),We(4),e.Aa("TYPE","xmlhttp");var t=this.a.j,n=this.a.Fa;t&&n&&e.m(t,n),this.b.bb(e,!1,this.f)}},r.sa=function(e){return this.a.sa(e)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Tb=function(){return!1},r.bc=function(e,t){if(this.c=e.o,0==this.R)if(this.Uc(e),t){try{var n=this.a.U.a(t)}catch(r){return void this.a.ab(this)}this.f=this.a.Oa(n[0])}else this.a.ab(this);else 1==this.R&&(this.g?We(6):"11111"==t?(We(5),this.g=!0,this.Ac()&&(this.c=200,this.b.cancel(),We(11),this.a.na(this,!0))):(We(7),this.g=!1))},r.Va=function(){this.c=this.b.o,this.b.b?0==this.R?(this.R=1,this.rb()):1==this.R&&(this.g?(We(11),this.a.na(this,!0)):(We(10),this.a.na(this,!1))):(0==this.R?We(8):1==this.R&&We(9),this.a.ab(this))},r.Uc=function(e){if(!this.a.o&&(e=e.a)){var t=e.ga("X-Client-Wire-Protocol");this.l=t||null,this.a.j&&(e=e.ga("X-HTTP-Session-Id"))&&this.a.kc(e)}},r.Da=function(){return this.a.Da()},r.Pa=function(){return this.a.Pa()},r.Ac=function(){return!B||10<=Number(J)},(r=wt.prototype).add=function(e){this.a.set(Ct(e),e)},r.ed=function(e){this.a.Qb(Ct(e))},r.jd=function(){this.a.gd()},r.Rb=function(){return this.a.hd()},r.Ob=function(e){return this.a.Ra(Ct(e))},r.D=function(){return this.a.D()};var Et=10;function Tt(){this.b=this.a=void 0}function xt(){this.f=new Tt}function It(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}(r=St.prototype).kb=function(e){!this.a&&(O(e,"spdy")||O(e,"quic")||O(e,"h2"))&&(this.f=this.g,this.a=new wt,this.b&&(this.Ha(this.b),this.b=null))},r.Ub=function(){return!!this.b||!!this.a&&this.a.a.c>=this.f},r.Mc=function(){return this.b?1:this.a?this.a.a.c:0},r.Ta=function(e){return this.b?this.b==e:!!this.a&&this.a.Ob(e)},r.Ha=function(e){this.a?this.a.add(e):this.b=e},r.gc=function(e){this.b&&this.b==e?this.b=null:this.a&&this.a.Ob(e)&&this.a.ed(e)},r.cancel=function(){this.c=this.Xb(),this.b?(this.b.cancel(),this.b=null):this.a&&!this.a.Rb()&&(S(this.a.D(),(function(e){e.cancel()})),this.a.jd())},r.Xb=function(){if(null!=this.b)return this.c.concat(this.b.j);if(null!=this.a&&!this.a.Rb()){var e=this.c;return S(this.a.D(),(function(t){e=e.concat(t.j)})),e}return T(this.c)},r.wc=function(e){this.c=this.c.concat(e)},r.Bc=function(){this.c.length=0},Tt.prototype.stringify=function(e){return a.JSON.stringify(e,this.a)},Tt.prototype.parse=function(e){return a.JSON.parse(e,this.b)},xt.prototype.b=function(e,t,n){var r=n||"";try{ot(e,(function(e,n){var i=e;f(e)&&(i=ke(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}},xt.prototype.c=function(e,t,n){for(var r=-1;;){var i=["count="+t];-1==r?0<t?i.push("ofs="+(r=e[0].a)):r=0:i.push("ofs="+r);for(var o=!0,a=0;a<t;a++){var s=e[a].a,u=e[a].b;if(0>(s-=r))r=Math.max(0,e[a].a-100),o=!1;else try{this.b(u,i,"req"+s+"_")}catch(c){n&&n(u)}}if(o)return i.join("&")}},xt.prototype.a=function(e){return this.f.parse(e)};var Pt=a.JSON.parse;function Ot(e){Ce.call(this),this.headers=new at,this.l=e||null,this.b=!1,this.v=this.a=null,this.C="",this.h=0,this.f="",this.g=this.B=this.o=this.A=!1,this.u=0,this.s=null,this.J=Dt,this.H=this.L=this.I=!1}w(Ot,Ce);var Dt="",At=/^https?$/i,Rt=["POST","PUT"];function Nt(e){return"content-type"==e.toLowerCase()}function Mt(e,t){return{type:t,lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total}}function Ft(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var t="";return N(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),s(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=e.indexOf("#"))&&(n=e.length),0>(r=e.indexOf("?"))||r>n){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return e.m(t,n),e}function Lt(e){this.gb=22,this.g=[],this.H=new _t,this.da=this.fb=this.C=this.Ea=this.a=this.Fa=this.j=this.ca=this.f=this.J=this.h=null,this.sc=!0,this.zc=this.L=0,this.uc=!!u("internalChannelParams.failFast",e),this.Ga=this.v=this.s=this.l=this.i=this.b=null,this.eb=!0,this.B=this.jb=this.K=-1,this.Y=this.u=this.A=0,this.tc=u("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Fc=u("internalChannelParams.retryDelaySeedMs",e)||1e4,this.pc=u("internalChannelParams.forwardChannelMaxRetries",e)||2,this.ib=u("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.xc=e&&e.ue||void 0,this.F=void 0,this.vc=0,this.T=e&&e.supportsCrossDomainXhr||!1,this.I="",this.c=new St(e&&e.concurrentRequestLimit),this.U=new xt,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.hb=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.se&&(this.eb=!1)}function Vt(){}function Ut(){if(B&&!(10<=Number(J)))throw Error("Environmental error: no available transport.")}function jt(e,t){Ce.call(this),this.a=new Lt(t),this.g=e,this.o=t&&t.testUrl?t.testUrl:function(e){for(var t=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?t=i:((r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i)}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.cd(e),e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.tb&&(e?e["X-WebChannel-Client-Profile"]=t.tb:e={"X-WebChannel-Client-Profile":t.tb}),this.a.Pd(e),(e=t&&t.httpHeadersOverwriteParam)&&!x(e)&&this.a.Nd(e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!x(t)&&(this.a.Od(t),null!==(e=this.b)&&t in e&&t in(e=this.b)&&delete e[t]),this.f=new Wt(this)}function qt(e){Ze.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.f=e)?(e=this.f,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function Bt(){$e.call(this),this.status=1}function Wt(e){this.a=e}(r=Ot.prototype).Sd=function(e){this.I=e},r.xa=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.C+"; newUri="+e);t=t?t.toUpperCase():"GET",this.C=e,this.f="",this.h=0,this.A=!1,this.b=!0,this.a=this.Ec(),this.v=this.l?this.l.c():Xe.c(),this.a.onreadystatechange=y(this.ac,this),this.L&&"onprogress"in this.a&&(this.a.onprogress=y((function(e){this.Zb(e,!0)}),this),this.a.upload&&(this.a.upload.onprogress=y(this.Zb,this)));try{this.B=!0,this.a.open(t,String(e),!0),this.B=!1}catch(o){return void this.Ab(o)}e=n||"";var i=this.headers.Pb();r&&ot(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Nt,n=e.length,r=s(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:s(e)?e.charAt(t):e[t]}(i.O()),n=a.FormData&&e instanceof a.FormData,!(0<=k(Rt,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.J&&(this.a.responseType=this.J),"withCredentials"in this.a&&this.a.withCredentials!==this.I&&(this.a.withCredentials=this.I);try{this.sb(),0<this.u&&((this.H=function(e){return B&&$(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.u,this.a.ontimeout=y(this.Nb,this)):this.s=Ne(this.Nb,this.u,this)),this.o=!0,this.a.send(e),this.o=!1}catch(o){this.Ab(o)}},r.Ec=function(){return this.l?this.l.b():Xe.b()},r.Nb=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.u+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.Ab=function(e){this.b=!1,this.a&&(this.g=!0,this.a.abort(),this.g=!1),this.f=e,this.h=5,this.xb(),this.qa()},r.xb=function(){this.A||(this.A=!0,this.dispatchEvent("complete"),this.dispatchEvent("error"))},r.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),this.qa())},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),this.qa(!0)),Ot.S.G.call(this)},r.ac=function(){this.i||(this.B||this.o||this.g?this.$b():this.Bd())},r.Bd=function(){this.$b()},r.$b=function(){if(this.b&&void 0!==o&&(!this.v[1]||4!=this.W()||2!=this.aa()))if(this.o&&4==this.W())Ne(this.ac,0,this);else if(this.dispatchEvent("readystatechange"),this.td()){this.b=!1;try{this.vd()?(this.dispatchEvent("complete"),this.dispatchEvent("success")):(this.h=6,this.f=this.Fb()+" ["+this.aa()+"]",this.xb())}finally{this.qa()}}},r.Zb=function(e,t){this.dispatchEvent(Mt(e,"progress")),this.dispatchEvent(Mt(e,t?"downloadprogress":"uploadprogress"))},r.qa=function(e){if(this.a){this.sb();var t=this.a,n=this.v[0]?c:null;this.v=this.a=null,e||this.dispatchEvent("ready");try{t.onreadystatechange=n}catch(r){}}},r.sb=function(){this.a&&this.H&&(this.a.ontimeout=null),this.s&&(a.clearTimeout(this.s),this.s=null)},r.td=function(){return 4==this.W()},r.vd=function(){var e=this.aa();e:switch(e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}return t||0===e&&!this.ud()},r.ud=function(){var e=String(this.C).match(ut)[1]||null;return!e&&a.self&&a.self.location&&(e=(e=a.self.location.protocol).substr(0,e.length-1)),At.test(e?e.toLowerCase():"")},r.W=function(){return this.a?this.a.readyState:0},r.aa=function(){try{return 2<this.W()?this.a.status:-1}catch(j){return-1}},r.Fb=function(){try{return 2<this.W()?this.a.statusText:""}catch(j){return""}},r.va=function(){try{return this.a?this.a.responseText:""}catch(j){return""}},r.Nc=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Pt(t)}},r.ga=function(e){return this.a?this.a.getResponseHeader(e):null},r.Db=function(){return this.h},r.dd=function(){return s(this.f)?this.f:String(this.f)},(r=Lt.prototype).qb=8,r.w=1,r.bd=function(e,t,n){We(0),this.Ea=t,this.ca=n||{},this.o&&(this.H.b=[],this.H.a=!1),this.Dc(e)},r.Qa=function(){if(this.lb(),3==this.w){var e=this.L++,t=this.C.N();t.m("SID",this.I),t.m("RID",e),t.m("TYPE","terminate"),this.ea(t),new tt(this,e,void 0).Ld(t)}this.Yb()},r.Dc=function(e){this.v=new bt(this),null===this.f&&this.v.Wc(this.h);var t=e;this.f&&this.h&&(t=Ft(e,this.f,this.h)),this.v.Vc(t)},r.Cc=function(){this.C=this.Cb(this.Ea),this.Ma()},r.lb=function(){this.v&&(this.v.abort(),this.v=null),this.a&&(this.a.cancel(),this.a=null),this.l&&(a.clearTimeout(this.l),this.l=null),this.ra(),this.c.cancel(),this.i&&(a.clearTimeout(this.i),this.i=null)},r.cd=function(e){this.h=e},r.Pd=function(e){this.J=e},r.Nd=function(e){this.f=e},r.Od=function(e){this.j=e},r.kc=function(e){this.Fa=e},r.Rd=function(){this.T=!0},r.jc=function(e){this.b=e},r.sd=function(){return!this.Ga},r.Xa=function(e){this.g.push(new kt(this.zc++,e)),3==this.w&&this.Ma()},r.Jc=function(){return this.uc?0:this.pc},r.Tb=function(){return 0==this.w},r.Ma=function(){this.c.Ub()||this.i||(this.i=He(y(this.dc,this),0),this.A=0)},r.xd=function(e){return!(this.c.Mc()>=this.c.f-(this.i?1:0)||(this.i?(this.g=e.j.concat(this.g),0):1==this.w||2==this.w||this.A>=this.Jc()||(this.i=He(y(this.dc,this,e),this.Eb(this.A)),this.A++,0)))},r.dc=function(e){this.i=null,this.Xd(e)},r.Xd=function(e){1==this.w?e||(this.Fd(),this.w=2):3==this.w&&(e?this.Wb(e):0==this.g.length||this.c.Ub()||this.Wb())},r.Fd=function(){this.L=Math.floor(1e5*Math.random());var e=this.L++,t=new tt(this,e,void 0),n=this.h;this.J&&(n?L(n=M(n),this.J):n=this.J),null===this.f&&t.ha(n);var r=this.wb(t),i=this.C.N();i.m("RID",e),0<this.gb&&i.m("CVER",this.gb),this.o&&this.j&&i.m("X-HTTP-Session-Id",this.j),this.ea(i),this.f&&n&&Ft(i,this.f,n),this.c.Ha(t),this.hb?(i.m("$req",r),i.m("SID","null"),t.Md(),t.cb(i,null)):t.cb(i,r)},r.Wb=function(e){var t;t=e?e.da:this.L++;var n=this.C.N();n.m("SID",this.I),n.m("RID",t),n.m("AID",this.K),this.ea(n),this.f&&this.h&&Ft(n,this.f,this.h),t=new tt(this,t,this.A+1),null===this.f&&t.ha(this.h),e&&this.Jd(e),e=this.wb(t),t.setTimeout(Math.round(.5*this.ib)+Math.round(.5*this.ib*Math.random())),this.c.Ha(t),t.cb(n,e)},r.ea=function(e){this.b&&ot({},(function(t,n){e.m(n,t)}))},r.wb=function(e){var t=Math.min(this.g.length,1e3),n=this.b?y(this.b.yc,this.b,this):null;return n=this.U.c(this.g,t,n),e.Qd(this.g.splice(0,t)),n},r.Jd=function(e){this.g=e.j.concat(this.g)},r.zb=function(){if(!this.a&&!this.l){this.Y=1;var e=this.cc;Te||function(){var e=a.Promise.resolve(void 0);Te=function(){e.then(Ae)}}(),Oe||(Te(),Oe=!0),De.add(e,this),this.u=0}},r.Ua=function(){return!(this.a||this.l||3<=this.u||(this.Y++,this.l=He(y(this.cc,this),this.Eb(this.u)),this.u++,0))},r.cc=function(){this.l=null,this.Vd()},r.Vd=function(){this.a=new tt(this,"rpc",this.Y),null===this.f&&this.a.ha(this.h),this.a.Xc(this.vc);var e=this.fb.N();e.m("RID","rpc"),e.m("SID",this.I),e.m("CI",this.Ga?"0":"1"),e.m("AID",this.K),this.ea(e),e.m("TYPE","xmlhttp"),this.f&&this.h&&Ft(e,this.f,this.h),this.F&&this.a.setTimeout(this.F),this.a.bb(e,!0,this.da)},r.na=function(e,t){var n=e.l;n&&this.c.kb(n),this.Ga=this.eb&&t,this.B=e.c,this.Cc()},r.ab=function(e){this.B=e.c,this.X(2)},r.bc=function(e,t){if(0!=this.w&&(this.a==e||this.c.Ta(e)))if(this.B=e.o,!e.s&&this.c.Ta(e)&&3==this.w){try{var n=this.U.a(t)}catch(r){n=null}h(n)&&3==n.length?this.ld(n,e):this.X(11)}else(e.s||this.a==e)&&this.ra(),x(t)||(n=this.U.a(t),this.Ad(n,e))},r.ld=function(e,t){0==e[0]?this.kd(t):(this.jb=e[1],0<this.jb-this.K&&this.Ud(e[2])&&!this.s&&(this.s=He(y(this.yd,this),6e3)))},r.kd=function(e){if(!this.l){if(this.a){if(!(this.a.u+3e3<e.u))return;this.ra(),this.a.cancel(),this.a=null}this.Ua(),We(18)}},r.Ud=function(e){return 37500>e&&!this.sd()&&0==this.u},r.Oa=function(e){return this.sc?this.b?this.b.$c(e):e:null},r.yd=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,this.Ua(),We(19))},r.ra=function(){null!=this.s&&(a.clearTimeout(this.s),this.s=null)},r.Va=function(e){var t=null;if(this.a==e){this.ra(),this.a=null;var n=2}else{if(!this.c.Ta(e))return;t=e.j,this.c.gc(e),n=1}if(this.B=e.o,0!=this.w)if(e.b)1==n?(n=_()-e.u,Ue.dispatchEvent(new ze(Ue,e.i?e.i.length:0,n,this.A)),this.Ma()):this.zb();else{var r=e.c;if(3==r||0==r&&0<this.B||!(1==n&&this.xd(e)||2==n&&this.Ua()))switch(t&&0<t.length&&this.c.wc(t),r){case 1:this.X(5);break;case 4:this.X(10);break;case 3:this.X(6);break;default:this.X(2)}}},r.Eb=function(e){var t=this.tc+Math.floor(Math.random()*this.Fc);return this.Pa()||(t*=2),t*e},r.ad=function(e){if(this.o&&(e=e.a)){var t=e.ga("X-Client-Wire-Protocol");t&&this.c.kb(t),this.j&&(e=e.ga("X-HTTP-Session-Id"))&&(this.kc(e),this.C.m(this.j,e))}},r.Ad=function(e,t){for(var n=this.b&&this.b.Ia?[]:null,r=0;r<e.length;r++){var i=e[r];if(this.K=i[0],i=i[1],2==this.w)if("c"==i[0]){this.I=i[1],this.da=this.Oa(i[2]);var o=i[3];null!=o&&(this.qb=o),null!=(i=i[5])&&"number"==typeof i&&0<i&&(this.F=1.5*i),this.ad(t),this.w=3,this.b&&this.b.pb(),this.Wd(t)}else"stop"!=i[0]&&"close"!=i[0]||this.X(7);else 3==this.w&&("stop"==i[0]||"close"==i[0]?(n&&0!=n.length&&(this.b.Ia(this,n),n.length=0),"stop"==i[0]?this.X(7):this.Qa()):"noop"!=i[0]&&(n?n.push(i):this.b&&this.b.ob(i)),this.u=0)}n&&0!=n.length&&this.b.Ia(this,n)},r.Wd=function(e){this.fb=this.Bb(this.da,this.Ea),e.s?(this.c.gc(e),e.Kd(this.F),this.a=e):this.zb()},r.X=function(e){if(2==e){var t=null;this.b&&(t=null);var n=y(this.Zd,this);t||(t=new ct("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||t.ma("https"),t.za()),function(e,t){var n=new Ve,r=new Image;r.onload=b(It,n,r,"TestLoadImage: loaded",!0,t),r.onerror=b(It,n,r,"TestLoadImage: error",!1,t),r.onabort=b(It,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=b(It,n,r,"TestLoadImage: timeout",!1,t),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}(t.toString(),n)}else We(2);this.zd(e)},r.Zd=function(e){We(e?2:1)},r.zd=function(e){this.w=0,this.b&&this.b.nb(e),this.Yb(),this.lb()},r.Yb=function(){this.w=0,this.B=-1,this.b&&(0==this.c.Xb().length&&0==this.g.length||(this.c.Bc(),T(this.g),this.g.length=0),this.b.mb())},r.Cb=function(e){return this.ub(null,e)},r.Bb=function(e,t){return this.ub(this.Da()?e:null,t)},r.ub=function(e,t){var n=function(e){return e instanceof ct?e.N():new ct(e,void 0)}(t);if(""!=n.c)e&&n.ka(e+"."+n.c),n.la(n.h);else{var r=a.location;n=function(e,t,n,r){var i=new ct(null,void 0);return e&&i.ma(e),t&&i.ka(t),n&&i.la(n),r&&i.Ba(r),i}(r.protocol,e?e+"."+r.hostname:r.hostname,+r.port,t)}return this.ca&&N(this.ca,(function(e,t){n.m(t,e)})),t=this.Fa,(e=this.j)&&t&&n.m(e,t),n.m("VER",this.qb),this.ea(n),n},r.sa=function(e){if(e&&!this.T)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ot(this.xc)).Sd(this.T),e},r.Pa=function(){return!!this.b&&!0},r.Da=function(){return this.T},(r=Vt.prototype).Ia=null,r.pb=function(){},r.ob=function(){},r.nb=function(){},r.mb=function(){},r.yc=function(){},r.$c=function(e){return e},Ut.prototype.a=function(e,t){return new jt(e,t)},w(jt,Ce),(r=jt.prototype).addEventListener=function(e,t,n,r){jt.S.addEventListener.call(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){jt.S.removeEventListener.call(this,e,t,n,r)},r.Yc=function(){this.a.jc(this.f),this.l&&this.a.Rd(),this.a.bd(this.o,this.g,this.b||void 0)},r.close=function(){this.a.Qa()},r.Zc=function(e){if(s(e)){var t={};t.__data__=e,this.a.Xa(t)}else this.h?((t={}).__data__=ke(e),this.a.Xa(t)):this.a.Xa(e)},r.G=function(){this.a.jc(null),delete this.f,this.a.Qa(),delete this.a,jt.S.G.call(this)},w(qt,Ze),w(Bt,$e),w(Wt,Vt),Wt.prototype.pb=function(){this.a.dispatchEvent("a")},Wt.prototype.ob=function(e){this.a.dispatchEvent(new qt(e))},Wt.prototype.nb=function(e){this.a.dispatchEvent(new Bt(e))},Wt.prototype.mb=function(){this.a.dispatchEvent("b")};var zt=b((function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r}),Ut);Ut.prototype.createWebChannel=Ut.prototype.a,jt.prototype.send=jt.prototype.Zc,jt.prototype.open=jt.prototype.Yc,jt.prototype.close=jt.prototype.close,Ge.NO_ERROR=0,Ge.TIMEOUT=8,Ge.HTTP_ERROR=6,Qe.COMPLETE="complete",Ye.EventType=Je,Je.OPEN="a",Je.CLOSE="b",Je.ERROR="c",Je.MESSAGE="d",Ce.prototype.listen=Ce.prototype.Lb,Ot.prototype.listenOnce=Ot.prototype.Mb,Ot.prototype.getLastError=Ot.prototype.dd,Ot.prototype.getLastErrorCode=Ot.prototype.Db,Ot.prototype.getStatus=Ot.prototype.aa,Ot.prototype.getStatusText=Ot.prototype.Fb,Ot.prototype.getResponseJson=Ot.prototype.Nc,Ot.prototype.getResponseText=Ot.prototype.va,Ot.prototype.send=Ot.prototype.xa;var Ht={createWebChannelTransport:zt,ErrorCode:Ge,EventType:Qe,WebChannel:Ye,XhrIo:Ot},Gt=Ht.createWebChannelTransport,Qt=Ht.ErrorCode,Kt=Ht.EventType,Yt=Ht.WebChannel,Xt=Ht.XhrIo;t.default=Ht},xGvh:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},xrBK:function(e,t,n){var r=n("UFGs"),i=n("Rbo/"),o=n("kSm0"),a=n("ifzb")("IE_PROTO"),s=function(){},u=function(){var e,t=n("y6nS")("iframe"),r=o.length;for(t.style.display="none",n("yI25").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},y6nS:function(e,t,n){var r=n("Zp05"),i=n("qtiw").document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},yI25:function(e,t,n){var r=n("qtiw").document;e.exports=r&&r.documentElement},yLjp:function(e,t,n){n("u00B")("asyncIterator")},ytDL:function(e,t,n){var r=n("UFGs"),i=n("q098"),o=n("IiNp"),a=Object.defineProperty;t.f=n("lIov")?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},zGGa:function(e,t,n){for(var r=n("U8mZ"),i=n("9Aud"),o=n("TDVo"),a=n("qtiw"),s=n("GYIZ"),u=n("Qtk+"),c=n("jZgK"),l=c("iterator"),h=c("toStringTag"),d=u.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(f),g=0;g<p.length;g++){var m,v=p[g],y=f[v],b=a[v],_=b&&b.prototype;if(_&&(_[l]||s(_,l,d),_[h]||s(_,h,v),u[v]=d,y))for(m in r)_[m]||o(_,m,r[m],!0)}},zUnb:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.r(t);var i=!1,o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=e},get useDeprecatedSynchronousErrorHandling(){return i}};function a(e){setTimeout((function(){throw e}),0)}var s={closed:!0,next:function(e){},error:function(e){if(o.useDeprecatedSynchronousErrorHandling)throw e;a(e)},complete:function(){}},u=Array.isArray||function(e){return e&&"number"==typeof e.length};function c(e){return null!==e&&"object"==typeof e}var l,h=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map((function(e,t){return"".concat(t+1,") ").concat(e.toString())})).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),d=((l=function(){function e(t){_classCallCheck(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return _createClass(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,i=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var a=0;a<n.length;++a)n[a].remove(this);if(r(i))try{i.call(this)}catch(p){t=p instanceof h?f(p.errors):[p]}if(u(o))for(var s=-1,l=o.length;++s<l;){var d=o[s];if(c(d))try{d.unsubscribe()}catch(p){t=t||[],p instanceof h?t=t.concat(f(p.errors)):t.push(p)}}if(t)throw new h(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}()).EMPTY=function(e){return e.closed=!0,e}(new l),l);function f(e){return e.reduce((function(e,t){return e.concat(t instanceof h?t.errors:t)}),[])}var p="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),g=function(e){function t(e,n,r){var i;switch(_classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=s;break;case 1:if(!e){i.destination=s;break}if("object"==typeof e){e instanceof t?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(_assertThisInitialized(i))):(i.syncErrorThrowable=!0,i.destination=new m(_assertThisInitialized(i),e));break}default:i.syncErrorThrowable=!0,i.destination=new m(_assertThisInitialized(i),e,n,r)}return i}return _inherits(t,e),_createClass(t,[{key:p,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,_get(_getPrototypeOf(t.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i}}]),t}(d),m=function(e){function t(e,n,i,o){var a,u;_classCallCheck(this,t),(a=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._parentSubscriber=e;var c=_assertThisInitialized(a);return r(n)?u=n:n&&(u=n.next,i=n.error,o=n.complete,n!==s&&(r((c=Object.create(n)).unsubscribe)&&a.add(c.unsubscribe.bind(c)),c.unsubscribe=a.unsubscribe.bind(_assertThisInitialized(a)))),a._context=c,a._next=u,a._error=i,a._complete=o,a}return _inherits(t,e),_createClass(t,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=o.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):a(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;a(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;a(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(a(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),t}(g),v="function"==typeof Symbol&&Symbol.observable||"@@observable";function y(){}function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _(t)}function _(e){return e?1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}:y}var w,C=((w=function(){function e(t){_classCallCheck(this,e),this._isScalar=!1,t&&(this._subscribe=t)}return _createClass(e,[{key:"lift",value:function(t){var n=new e;return n.source=this,n.operator=t,n}},{key:"subscribe",value:function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof g)return e;if(e[p])return e[p]()}return e||t||n?new g(e,t,n):new g(s)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){o.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof g?r:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=k(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}}),r,t)}))}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:v,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:_(t)(this)}},{key:"toPromise",value:function(e){var t=this;return new(e=k(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))}}]),e}()).create=function(e){return new w(e)},w);function k(e){if(e||(e=o.Promise||Promise),!e)throw new Error("no Promise impl found");return e}var S,E=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),T=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).subject=e,r.subscriber=n,r.closed=!1,r}return _inherits(t,e),_createClass(t,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),t}(d),x=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).destination=e,n}return _inherits(t,e),t}(g),I=((S=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return _inherits(t,e),_createClass(t,[{key:p,value:function(){return new x(this)}},{key:"lift",value:function(e){var t=new P(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new E;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)}},{key:"error",value:function(e){if(this.closed)throw new E;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new E;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new E;return _get(_getPrototypeOf(t.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new E;return this.hasError?(e.error(this.thrownError),d.EMPTY):this.isStopped?(e.complete(),d.EMPTY):(this.observers.push(e),new T(this,e))}},{key:"asObservable",value:function(){var e=new C;return e.source=this,e}}]),t}(C)).create=function(e,t){return new P(e,t)},S),P=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).destination=e,r.source=n,r}return _inherits(t,e),_createClass(t,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):d.EMPTY}}]),t}(I);function O(e){return e&&"function"==typeof e.schedule}var D=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),t}(g),A=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};var R="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",N=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function M(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var F=function(e){if(e&&"function"==typeof e[v])return r=e,function(e){var t=r[v]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(N(e))return A(e);if(M(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,a),e};if(e&&"function"==typeof e[R])return t=e,function(e){for(var n=t[R]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,r,i=c(e)?"an invalid object":"'".concat(e,"'");throw new TypeError("You provided ".concat(i," where a stream was expected.")+" You can provide an Observable, Promise, Array, or Iterable.")};function L(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new D(e,n,r);if(!i.closed)return t instanceof C?t.subscribe(i):F(t)(i)}var V=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),t}(g);function U(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new j(e,t))}}var j=function(){function e(t,n){_classCallCheck(this,e),this.project=t,this.thisArg=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new q(e,this.project,this.thisArg))}}]),e}(),q=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).project=n,i.count=0,i.thisArg=r||_assertThisInitialized(i),i}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),t}(g);function B(e,t){return new C((function(n){var r=new d,i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function W(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[v]}(e))return function(e,t){return new C((function(n){var r=new d;return r.add(t.schedule((function(){var i=e[v]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(M(e))return function(e,t){return new C((function(n){var r=new d;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(N(e))return B(e,t);if(function(e){return e&&"function"==typeof e[R]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new C((function(n){var r,i=new d;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[R](),i.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(o){return void n.error(o)}t?n.complete():(n.next(e),this.schedule())}})))}))),i}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof C?e:new C(F(e))}function z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(r){return r.pipe(z((function(n,r){return W(e(n,r)).pipe(U((function(e,i){return t(n,e,r,i)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new H(e,n))})}var H=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;_classCallCheck(this,e),this.project=t,this.concurrent=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new G(e,this.project,this.concurrent))}}]),e}(),G=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).project=n,r.concurrent=i,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=new D(this,t,n),i=this.destination;i.add(r);var o=L(this,e,void 0,void 0,r);o!==r&&i.add(o)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyComplete",value:function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),t}(V);function Q(e){return e}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return z(Q,e)}function Y(e,t){return t?B(e,t):new C(A(e))}function X(){return function(e){return e.lift(new Z(e))}}var J,Z=function(){function e(t){_classCallCheck(this,e),this.connectable=t}return _createClass(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var r=new $(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),e}(),$=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).connectable=n,r}return _inherits(t,e),_createClass(t,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),t}(g),ee={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(J=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return _inherits(t,e),_createClass(t,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new d).add(this.source.subscribe(new te(this.getSubject(),this))),e.closed&&(this._connection=null,e=d.EMPTY)),e}},{key:"refCount",value:function(){return X()(this)}}]),t}(C).prototype)._subscribe},_isComplete:{value:J._isComplete,writable:!0},getSubject:{value:J.getSubject},connect:{value:J.connect},refCount:{value:J.refCount}},te=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).connectable=n,r}return _inherits(t,e),_createClass(t,[{key:"_error",value:function(e){this._unsubscribe(),_get(_getPrototypeOf(t.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),_get(_getPrototypeOf(t.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),t}(x);function ne(){return new I}function re(e){return{toString:e}.toString()}function ie(e,t,n){return re((function(){var r=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof i)return r.apply(this,t),this;var o=_construct(i,t);return a.annotation=o,a;function a(e,t,n){for(var r=e.hasOwnProperty("__parameters__")?e.__parameters__:Object.defineProperty(e,"__parameters__",{value:[]}).__parameters__;r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}))}var oe=ie("Inject",(function(e){return{token:e}})),ae=ie("Optional"),se=ie("Self"),ue=ie("SkipSelf"),ce=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function le(e){for(var t in e)if(e[t]===le)return t;throw Error("Could not find renamed property on target object.")}function he(e,t){for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function de(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function fe(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function pe(e){return ge(e,e[ve])||ge(e,e[_e])}function ge(e,t){return t&&t.token===e?t:null}function me(e){return e&&(e.hasOwnProperty(ye)||e.hasOwnProperty(we))?e[ye]:null}var ve=le({"\u0275prov":le}),ye=le({"\u0275inj":le}),be=le({"\u0275provFallback":le}),_e=le({ngInjectableDef:le}),we=le({ngInjectorDef:le});function Ce(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Ce).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function ke(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var Se=le({__forward_ref__:le});function Ee(e){return e.__forward_ref__=Ee,e.toString=function(){return Ce(this())},e}function Te(e){return xe(e)?e():e}function xe(e){return"function"==typeof e&&e.hasOwnProperty(Se)&&e.__forward_ref__===Ee}var Ie,Pe="undefined"!=typeof globalThis&&globalThis,Oe="undefined"!=typeof window&&window,De="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ae="undefined"!=typeof global&&global,Re=Pe||Ae||Oe||De,Ne=le({"\u0275cmp":le}),Me=le({"\u0275dir":le}),Fe=le({"\u0275pipe":le}),Le=le({"\u0275mod":le}),Ve=le({"\u0275loc":le}),Ue=le({"\u0275fac":le}),je=le({__NG_ELEMENT_ID__:le}),qe=function(){function e(t,n){_classCallCheck(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=de({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return _createClass(e,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),e}(),Be=new qe("INJECTOR",-1),We={},ze=/\n/gm,He=le({provide:String,useValue:le}),Ge=void 0;function Qe(e){var t=Ge;return Ge=e,t}function Ke(e){var t=Ie;return Ie=e,t}function Ye(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce.Default;if(void 0===Ge)throw new Error("inject() must be called from an injection context");return null===Ge?Je(e,void 0,t):Ge.get(e,t&ce.Optional?null:void 0,t)}function Xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce.Default;return(Ie||Ye)(Te(e),t)}function Je(e,t,n){var r=pe(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&ce.Optional)return null;if(void 0!==t)return t;throw new Error("Injector: NOT_FOUND [".concat(Ce(e),"]"))}function Ze(e){for(var t=[],n=0;n<e.length;n++){var r=Te(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,o=ce.Default,a=0;a<r.length;a++){var s=r[a];s instanceof ae||"Optional"===s.ngMetadataName||s===ae?o|=ce.Optional:s instanceof ue||"SkipSelf"===s.ngMetadataName||s===ue?o|=ce.SkipSelf:s instanceof se||"Self"===s.ngMetadataName||s===se?o|=ce.Self:i=s instanceof oe||s===oe?s.token:s}t.push(Xe(i,o))}else t.push(Xe(r))}return t}var $e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:We;if(t===We){var n=new Error("NullInjectorError: No provider for ".concat(Ce(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}(),et=function e(){_classCallCheck(this,e)},tt=function e(){_classCallCheck(this,e)};function nt(e,t){e.forEach((function(e){return Array.isArray(e)?nt(e,t):t(e)}))}function rt(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function it(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function ot(e,t){for(var n=[],r=0;r<e;r++)n.push(t);return n}function at(e,t){var n=st(e,t);if(n>=0)return e[1|n]}function st(e,t){return function(e,t,n){for(var r=0,i=e.length>>1;i!==r;){var o=r+(i-r>>1),a=e[o<<1];if(t===a)return o<<1;a>t?i=o:r=o+1}return~(i<<1)}(e,t)}var ut=function(){var e={OnPush:0,Default:1};return e[e.OnPush]="OnPush",e[e.Default]="Default",e}(),ct=function(){var e={Emulated:0,Native:1,None:2,ShadowDom:3};return e[e.Emulated]="Emulated",e[e.Native]="Native",e[e.None]="None",e[e.ShadowDom]="ShadowDom",e}(),lt={},ht=[],dt=0;function ft(e){return re((function(){var t=e.type,n=t.prototype,r={},i={type:t,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:e.changeDetection===ut.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||ht,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||ct.Emulated,id:"c",styles:e.styles||ht,_:null,setInput:null,schemas:e.schemas||null,tView:null},o=e.directives,a=e.features,s=e.pipes;return i.id+=dt++,i.inputs=yt(e.inputs,r),i.outputs=yt(e.outputs),a&&a.forEach((function(e){return e(i)})),i.directiveDefs=o?function(){return("function"==typeof o?o():o).map(pt)}:null,i.pipeDefs=s?function(){return("function"==typeof s?s():s).map(gt)}:null,i}))}function pt(e){return wt(e)||function(e){return e[Me]||null}(e)}function gt(e){return function(e){return e[Fe]||null}(e)}var mt={};function vt(e){var t={type:e.type,bootstrap:e.bootstrap||ht,declarations:e.declarations||ht,imports:e.imports||ht,exports:e.exports||ht,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&re((function(){mt[e.id]=e.type})),t}function yt(e,t){if(null==e)return lt;var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}var bt=ft;function _t(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function wt(e){return e[Ne]||null}function Ct(e,t){return e.hasOwnProperty(Ue)?e[Ue]:null}function kt(e,t){var n=e[Le]||null;if(!n&&!0===t)throw new Error("Type ".concat(Ce(e)," does not have '\u0275mod' property."));return n}function St(e){return Array.isArray(e)&&"object"==typeof e[1]}function Et(e){return Array.isArray(e)&&!0===e[1]}function Tt(e){return 0!=(8&e.flags)}function xt(e){return 2==(2&e.flags)}function It(e){return 1==(1&e.flags)}function Pt(e){return null!==e.template}function Ot(e){return 0!=(512&e[2])}var Dt=void 0;function At(){return void 0!==Dt?Dt:"undefined"!=typeof document?document:void 0}function Rt(e){return!!e.listen}var Nt={createRenderer:function(e,t){return At()}};function Mt(e){for(;Array.isArray(e);)e=e[0];return e}function Ft(e,t){return Mt(t[e+19])}function Lt(e,t){return Mt(t[e.index])}function Vt(e,t){return e.data[t+19]}function Ut(e,t){return e[t+19]}function jt(e,t){var n=t[e];return St(n)?n:n[0]}function qt(e){var t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Bt(e){return 4==(4&e[2])}function Wt(e){return 128==(128&e[2])}function zt(e,t){return null===e||null==t?null:e[t]}function Ht(e){e[18]=0}var Gt={lFrame:pn(null),bindingsEnabled:!0,checkNoChangesMode:!1};function Qt(){return Gt.bindingsEnabled}function Kt(){return Gt.lFrame.lView}function Yt(){return Gt.lFrame.tView}function Xt(e){Gt.lFrame.contextLView=e}function Jt(){return Gt.lFrame.previousOrParentTNode}function Zt(e,t){Gt.lFrame.previousOrParentTNode=e,Gt.lFrame.isParent=t}function $t(){return Gt.lFrame.isParent}function en(){Gt.lFrame.isParent=!1}function tn(){return Gt.checkNoChangesMode}function nn(e){Gt.checkNoChangesMode=e}function rn(){var e=Gt.lFrame,t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function on(){return Gt.lFrame.bindingIndex}function an(){return Gt.lFrame.bindingIndex++}function sn(e){var t=Gt.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function un(e,t){var n=Gt.lFrame;n.bindingIndex=n.bindingRootIndex=e,n.currentDirectiveIndex=t}function cn(){return Gt.lFrame.currentQueryIndex}function ln(e){Gt.lFrame.currentQueryIndex=e}function hn(e,t){var n=fn();Gt.lFrame=n,n.previousOrParentTNode=t,n.lView=e}function dn(e,t){var n=fn(),r=e[1];Gt.lFrame=n,n.previousOrParentTNode=t,n.lView=e,n.tView=r,n.contextLView=e,n.bindingIndex=r.bindingStartIndex}function fn(){var e=Gt.lFrame,t=null===e?null:e.child;return null===t?pn(e):t}function pn(e){var t={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null};return null!==e&&(e.child=t),t}function gn(){var e=Gt.lFrame;return Gt.lFrame=e.parent,e.previousOrParentTNode=null,e.lView=null,e}var mn=gn;function vn(){var e=gn();e.isParent=!0,e.tView=null,e.selectedIndex=0,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.currentSanitizer=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function yn(){return Gt.lFrame.selectedIndex}function bn(e){Gt.lFrame.selectedIndex=e}function _n(){var e=Gt.lFrame;return Vt(e.tView,e.selectedIndex)}function wn(e,t){for(var n=t.directiveStart,r=t.directiveEnd;n<r;n++){var i=e.data[n];i.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(-n,i.afterContentInit),i.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(n,i.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i.afterContentChecked)),i.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(-n,i.afterViewInit),i.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(n,i.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,i.afterViewChecked)),null!=i.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(n,i.onDestroy)}}function Cn(e,t,n){En(e,t,3,n)}function kn(e,t,n,r){(3&e[2])===n&&En(e,t,n,r)}function Sn(e,t){var n=e[2];(3&n)===t&&(n&=1023,n+=1,e[2]=n)}function En(e,t,n,r){for(var i=null!=r?r:-1,o=0,a=void 0!==r?65535&e[18]:0;a<t.length;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=r&&o>=r)break}else t[a]<0&&(e[18]+=65536),(o<i||-1==i)&&(Tn(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function Tn(e,t,n,r){var i=n[r]<0,o=n[r+1],a=e[i?-n[r]:n[r]];i?e[2]>>10<e[18]>>16&&(3&e[2])===t&&(e[2]+=1024,o.call(a)):o.call(a)}var xn=function e(t,n,r){_classCallCheck(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function In(e,t,n){for(var r=Rt(e),i=0;i<n.length;){var o=n[i];if("number"==typeof o){if(0!==o)break;i++;var a=n[i++],s=n[i++],u=n[i++];r?e.setAttribute(t,s,u,a):t.setAttributeNS(a,s,u)}else{var c=o,l=n[++i];On(c)?r&&e.setProperty(t,c,l):r?e.setAttribute(t,c,l):t.setAttribute(c,l),i++}}return i}function Pn(e){return 3===e||4===e||6===e}function On(e){return 64===e.charCodeAt(0)}function Dn(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else for(var n=-1,r=0;r<t.length;r++){var i=t[r];"number"==typeof i?n=i:0===n||An(e,n,i,null,-1===n||2===n?t[++r]:null)}return e}function An(e,t,n,r,i){var o=0,a=e.length;if(-1===t)a=-1;else for(;o<e.length;){var s=e[o++];if("number"==typeof s){if(s===t){a=-1;break}if(s>t){a=o-1;break}}}for(;o<e.length;){var u=e[o];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(e.splice(a,0,t),o=a+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function Rn(e){return-1!==e}function Nn(e){return 32767&e}function Mn(e){return e>>16}function Fn(e,t){for(var n=Mn(e),r=t;n>0;)r=r[15],n--;return r}function Ln(e){return"string"==typeof e?e:null==e?"":""+e}function Vn(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Ln(e)}var Un=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Re);function jn(e){return{name:"window",target:e.ownerDocument.defaultView}}function qn(e){return{name:"document",target:e.ownerDocument}}function Bn(e){return e instanceof Function?e():e}var Wn=!0;function zn(e){var t=Wn;return Wn=e,t}var Hn=0;function Gn(e,t){var n=Kn(e,t);if(-1!==n)return n;var r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Qn(r.data,e),Qn(t,null),Qn(r.blueprint,null));var i=Yn(e,t),o=e.injectorIndex;if(Rn(i))for(var a=Nn(i),s=Fn(i,t),u=s[1].data,c=0;c<8;c++)t[o+c]=s[a+c]|u[a+c];return t[o+8]=i,o}function Qn(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Kn(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null==t[e.injectorIndex+8]?-1:e.injectorIndex}function Yn(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=t[6],r=1;n&&-1===n.injectorIndex;)n=(t=t[15])?t[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function Xn(e,t,n){!function(e,t,n){var r="string"!=typeof n?n[je]:n.charCodeAt(0)||0;null==r&&(r=n[je]=Hn++);var i=255&r,o=1<<i,a=64&i,s=32&i,u=t.data;128&i?a?s?u[e+7]|=o:u[e+6]|=o:s?u[e+5]|=o:u[e+4]|=o:a?s?u[e+3]|=o:u[e+2]|=o:s?u[e+1]|=o:u[e]|=o}(e,t,n)}function Jn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ce.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==e){var o=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e[je];return"number"==typeof t&&t>0?255&t:t}(n);if("function"==typeof o){hn(t,e);try{var a=o();if(null!=a||r&ce.Optional)return a;throw new Error("No provider for ".concat(Vn(n),"!"))}finally{mn()}}else if("number"==typeof o){if(-1===o)return new ir(e,t);var s=null,u=Kn(e,t),c=-1,l=r&ce.Host?t[16][6]:null;for((-1===u||r&ce.SkipSelf)&&(c=-1===u?Yn(e,t):t[u+8],rr(r,!1)?(s=t[1],u=Nn(c),t=Fn(c,t)):u=-1);-1!==u;){c=t[u+8];var h=t[1];if(nr(o,u,h.data)){var d=$n(u,t,n,s,r,l);if(d!==Zn)return d}rr(r,t[1].data[u+8]===l)&&nr(o,u,t)?(s=h,u=Nn(c),t=Fn(c,t)):u=-1}}}if(r&ce.Optional&&void 0===i&&(i=null),0==(r&(ce.Self|ce.Host))){var f=t[9],p=Ke(void 0);try{return f?f.get(n,i,r&ce.Optional):Je(n,i,r&ce.Optional)}finally{Ke(p)}}if(r&ce.Optional)return i;throw new Error("NodeInjector: NOT_FOUND [".concat(Vn(n),"]"))}var Zn={};function $n(e,t,n,r,i,o){var a=t[1],s=a.data[e+8],u=er(s,a,n,null==r?xt(s)&&Wn:r!=a&&3===s.type,i&ce.Host&&o===s);return null!==u?tr(t,a,u,s):Zn}function er(e,t,n,r,i){for(var o=e.providerIndexes,a=t.data,s=65535&o,u=e.directiveStart,c=o>>16,l=i?s+c:e.directiveEnd,h=r?s:s+c;h<l;h++){var d=a[h];if(h<u&&n===d||h>=u&&d.type===n)return h}if(i){var f=a[u];if(f&&Pt(f)&&f.type===n)return u}return null}function tr(e,t,n,r){var i=e[n],o=t.data;if(i instanceof xn){var a=i;if(a.resolving)throw new Error("Circular dep for ".concat(Vn(o[n])));var s,u=zn(a.canSeeViewProviders);a.resolving=!0,a.injectImpl&&(s=Ke(a.injectImpl)),hn(e,r);try{i=e[n]=a.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){var r=t.onChanges,i=t.onInit,o=t.doCheck;r&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)),i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-e,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{a.injectImpl&&Ke(s),zn(u),a.resolving=!1,mn()}}return i}function nr(e,t,n){var r=64&e,i=32&e;return!!((128&e?r?i?n[t+7]:n[t+6]:i?n[t+5]:n[t+4]:r?i?n[t+3]:n[t+2]:i?n[t+1]:n[t])&1<<e)}function rr(e,t){return!(e&ce.Self||e&ce.Host&&t)}var ir=function(){function e(t,n){_classCallCheck(this,e),this._tNode=t,this._lView=n}return _createClass(e,[{key:"get",value:function(e,t){return Jn(this._tNode,this._lView,e,void 0,t)}}]),e}();function or(e){return re((function(){var t=Object.getPrototypeOf(e.prototype).constructor,n=t[Ue]||function e(t){var n=t;if(xe(t))return function(){var t=e(Te(n));return t?t():null};var r=Ct(n);if(null===r){var i=me(n);r=i&&i.factory}return r||null}(t);return null!==n?n:function(e){return new e}}))}function ar(e){return e.ngDebugContext}function sr(e){return e.ngOriginalError}function ur(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.error.apply(e,n)}var cr=function(){function e(){_classCallCheck(this,e),this._console=console}return _createClass(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||ur}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(e){return e?ar(e)?ar(e):this._findContext(sr(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=sr(e);t&&sr(t);)t=sr(t);return t}}]),e}(),lr=function(){function e(t){_classCallCheck(this,e),this.changingThisBreaksApplicationSecurity=t}return _createClass(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see http://g.co/ng/security#xss)"}}]),e}();function hr(e){return e instanceof lr?e.changingThisBreaksApplicationSecurity:e}function dr(e,t){var n=function(e){return e instanceof lr&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error("Required a safe ".concat(t,", got a ").concat(n," (see http://g.co/ng/security#xss)"))}return n===t}var fr=!0,pr=!1;function gr(){return pr=!0,fr}var mr=function(){function e(t){_classCallCheck(this,e),this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert");var n=this.inertDocument.body;if(null==n){var r=this.inertDocument.createElement("html");this.inertDocument.appendChild(r),n=this.inertDocument.createElement("body"),r.appendChild(n)}n.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!n.querySelector||n.querySelector("svg")?(n.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=n.querySelector&&n.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return _createClass(e,[{key:"getInertBodyElement_XHR",value:function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(r){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(void 0);var n=t.response.body;return n.removeChild(n.firstChild),n}},{key:"getInertBodyElement_DOMParser",value:function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(n){return null}}},{key:"getInertBodyElement_InertDocument",value:function(e){var t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=e,t;var n=this.inertDocument.createElement("body");return n.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var r=t.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||e.removeAttribute(r)}for(var i=e.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),e}(),vr=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,yr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function br(e){return(e=String(e)).match(vr)||e.match(yr)?e:(gr()&&console.warn("WARNING: sanitizing unsafe URL value ".concat(e," (see http://g.co/ng/security#xss)")),"unsafe:"+e)}function _r(e){var t={},n=!0,r=!1,i=void 0;try{for(var o,a=e.split(",")[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){t[o.value]=!0}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}function wr(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)a.hasOwnProperty(s)&&(e[s]=!0)}return e}var Cr,kr=_r("area,br,col,hr,img,wbr"),Sr=_r("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Er=_r("rp,rt"),Tr=wr(Er,Sr),xr=wr(kr,wr(Sr,_r("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),wr(Er,_r("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Tr),Ir=_r("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Pr=_r("srcset"),Or=wr(Ir,Pr,_r("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),_r("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Dr=_r("script,style,template"),Ar=function(){function e(){_classCallCheck(this,e),this.sanitizedSomething=!1,this.buf=[]}return _createClass(e,[{key:"sanitizeChildren",value:function(e){for(var t=e.firstChild,n=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(e){var t=e.nodeName.toLowerCase();if(!xr.hasOwnProperty(t))return this.sanitizedSomething=!0,!Dr.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var n,r=e.attributes,i=0;i<r.length;i++){var o=r.item(i),a=o.name,s=a.toLowerCase();if(Or.hasOwnProperty(s)){var u=o.value;Ir[s]&&(u=br(u)),Pr[s]&&(n=u,u=(n=String(n)).split(",").map((function(e){return br(e.trim())})).join(", ")),this.buf.push(" ",a,'="',Mr(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(e){var t=e.nodeName.toLowerCase();xr.hasOwnProperty(t)&&!kr.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}},{key:"chars",value:function(e){this.buf.push(Mr(e))}},{key:"checkClobberedElement",value:function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(e.outerHTML));return t}}]),e}(),Rr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Nr=/([^\#-~ |!])/g;function Mr(e){return e.replace(/&/g,"&amp;").replace(Rr,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(Nr,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Fr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Lr=function(){var e={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return e[e.NONE]="NONE",e[e.HTML]="HTML",e[e.STYLE]="STYLE",e[e.SCRIPT]="SCRIPT",e[e.URL]="URL",e[e.RESOURCE_URL]="RESOURCE_URL",e}();function Vr(e){var t=jr();return t?t.sanitize(Lr.HTML,e)||"":dr(e,"HTML")?hr(e):function(e,t){var n=null;try{Cr=Cr||new mr(e);var r=t?String(t):"";n=Cr.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Cr.getInertBodyElement(r)}while(r!==o);var a=new Ar,s=a.sanitizeChildren(Fr(n)||n);return gr()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(n)for(var u=Fr(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}(At(),Ln(e))}function Ur(e){var t=jr();return t?t.sanitize(Lr.URL,e)||"":dr(e,"URL")?hr(e):br(Ln(e))}function jr(){var e=Kt();return e&&e[12]}function qr(e,t){e.__ngContext__=t}function Br(e){throw new Error("Multiple components match node with tagname ".concat(e.tagName))}function Wr(){throw new Error("Cannot mix multi providers and regular providers")}function zr(e,t,n){for(var r=e.length;;){var i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){var o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function Hr(e,t,n){for(var r=0;r<e.length;){var i=e[r++];if(n&&"class"===i){if(-1!==zr((i=e[r]).toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function Gr(e,t,n){return t===(0!==e.type||n?e.tagName:"ng-template")}function Qr(e,t,n){for(var r=4,i=e.attrs||[],o=function(e){for(var t=0;t<e.length;t++)if(Pn(e[t]))return t;return e.length}(i),a=!1,s=0;s<t.length;s++){var u=t[s];if("number"!=typeof u){if(!a)if(4&r){if(r=2|1&r,""!==u&&!Gr(e,u,n)||""===u&&1===t.length){if(Kr(r))return!1;a=!0}}else{var c=8&r?u:t[++s];if(8&r&&null!==e.attrs){if(!Hr(e.attrs,c,n)){if(Kr(r))return!1;a=!0}continue}var l=Yr(8&r?"class":u,i,0==e.type&&"ng-template"!==e.tagName,n);if(-1===l){if(Kr(r))return!1;a=!0;continue}if(""!==c){var h;h=l>o?"":i[l+1].toLowerCase();var d=8&r?h:null;if(d&&-1!==zr(d,c,0)||2&r&&c!==h){if(Kr(r))return!1;a=!0}}}}else{if(!a&&!Kr(r)&&!Kr(u))return!1;if(a&&Kr(u))continue;a=!1,r=u|1&r}}return Kr(r)||a}function Kr(e){return 0==(1&e)}function Yr(e,t,n,r){if(null===t)return-1;var i=0;if(r||!n){for(var o=!1;i<t.length;){var a=t[i];if(a===e)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){for(var s=t[++i];"string"==typeof s;)s=t[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){if(e[n]===t)return n;n++}return-1}(t,e)}function Xr(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<t.length;r++)if(Qr(e,t[r],n))return!0;return!1}function Jr(e,t){e:for(var n=0;n<t.length;n++){var r=t[n];if(e.length===r.length){for(var i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function Zr(e,t){return e?":not("+t.trim()+")":t}function $r(e){for(var t=e[0],n=1,r=2,i="",o=!1;n<e.length;){var a=e[n];if("string"==typeof a)if(2&r){var s=e[++n];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""===i||Kr(a)||(t+=Zr(o,i),i=""),r=a,o=o||!Kr(r);n++}return""!==i&&(t+=Zr(o,i)),t}var ei={};function ti(e){var t=e[3];return Et(t)?t[3]:t}function ni(e){ri(Yt(),Kt(),yn()+e,tn())}function ri(e,t,n,r){if(!r)if(3==(3&t[2])){var i=e.preOrderCheckHooks;null!==i&&Cn(t,i,n)}else{var o=e.preOrderHooks;null!==o&&kn(t,o,0,n)}bn(n)}function ii(e,t){return e<<17|t<<2}function oi(e){return e>>17&32767}function ai(e){return 2|e}function si(e){return(131068&e)>>2}function ui(e,t){return-131069&e|t<<2}function ci(e){return 1|e}function li(e,t){var n=e.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1];if(-1!==o){var a=e.data[o];ln(i),a.contentQueries(2,t[o],o)}}}function hi(e,t,n){return Rt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function di(e,t,n,r,i,o,a,s,u,c){var l=t.blueprint.slice();return l[0]=i,l[2]=140|r,Ht(l),l[3]=l[15]=e,l[8]=n,l[10]=a||e&&e[10],l[11]=s||e&&e[11],l[12]=u||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=o,l[16]=2==t.type?e[16]:l,l}function fi(e,t,n,r,i,o){var a=n+19,s=e.data[a]||function(e,t,n,r,i,o){var a=Jt(),s=$t(),u=s?a:a&&a.parent,c=e.data[n]=Ci(0,u&&u!==t?u:null,r,n,i,o);return null===e.firstChild&&(e.firstChild=c),a&&(!s||null!=a.child||null===c.parent&&2!==a.type?s||(a.next=c):a.child=c),c}(e,t,a,r,i,o);return Zt(s,!0),s}function pi(e,t,n){dn(t,t[6]);try{var r=e.viewQuery;null!==r&&Hi(1,r,n);var i=e.template;null!==i&&vi(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&li(e,t),e.staticViewQueries&&Hi(2,e.viewQuery,n);var o=e.components;null!==o&&function(e,t){for(var n=0;n<t.length;n++)ji(e,t[n])}(t,o)}finally{t[2]&=-5,vn()}}function gi(e,t,n,r){var i=t[2];if(256!=(256&i)){dn(t,t[6]);var o=tn();try{Ht(t),Gt.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&vi(e,t,n,2,r);var a=3==(3&i);if(!o)if(a){var s=e.preOrderCheckHooks;null!==s&&Cn(t,s,null)}else{var u=e.preOrderHooks;null!==u&&kn(t,u,0,null),Sn(t,0)}if(function(e){for(var t=e[13];null!==t;){var n=void 0;if(Et(t)&&(n=t[2])>>1==-1){for(var r=9;r<t.length;r++){var i=t[r],o=i[1];Wt(i)&&gi(o,i,o.template,i[8])}0!=(1&n)&&Vi(t,e[16])}t=t[4]}}(t),null!==e.contentQueries&&li(e,t),!o)if(a){var c=e.contentCheckHooks;null!==c&&Cn(t,c)}else{var l=e.contentHooks;null!==l&&kn(t,l,1),Sn(t,1)}!function(e,t){try{var n=e.expandoInstructions;if(null!==n)for(var r=e.expandoStartIndex,i=-1,o=0;o<n.length;o++){var a=n[o];"number"==typeof a?a<=0?(bn(0-a),i=r+=9+n[++o]):r+=a:(null!==a&&(un(r,i),a(2,t[i])),i++)}}finally{bn(-1)}}(e,t);var h=e.components;null!==h&&function(e,t){for(var n=0;n<t.length;n++)Ui(e,t[n])}(t,h);var d=e.viewQuery;if(null!==d&&Hi(2,d,r),!o)if(a){var f=e.viewCheckHooks;null!==f&&Cn(t,f)}else{var p=e.viewHooks;null!==p&&kn(t,p,2),Sn(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),o||(t[2]&=-73)}finally{vn()}}}function mi(e,t,n,r){var i=t[10],o=!tn(),a=Bt(t);try{o&&!a&&i.begin&&i.begin(),a&&pi(e,t,r),gi(e,t,n,r)}finally{o&&!a&&i.end&&i.end()}}function vi(e,t,n,r,i){var o=yn();try{bn(-1),2&r&&t.length>19&&ri(e,t,0,tn()),n(r,i)}finally{bn(o)}}function yi(e,t,n){Qt()&&(function(e,t,n,r){var i=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||Gn(n,t),qr(r,t);for(var a=n.initialInputs,s=i;s<o;s++){var u=e.data[s],c=Pt(u);c&&Ni(t,n,u);var l=tr(t,e,s,n);qr(l,t),null!==a&&Mi(0,s-i,l,u,0,a),c&&(jt(n.index,t)[8]=l)}}(e,t,n,Lt(n,t)),128==(128&n.flags)&&function(e,t,n){var r=n.directiveStart,i=n.directiveEnd,o=e.expandoInstructions,a=e.firstCreatePass,s=n.index-19;try{bn(s);for(var u=r;u<i;u++){var c=e.data[u],l=t[u];null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs?Ii(c,l):a&&o.push(null)}}finally{bn(-1)}}(e,t,n))}function bi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lt,r=t.localNames;if(null!==r)for(var i=t.index+1,o=0;o<r.length;o+=2){var a=r[o+1],s=-1===a?n(t,e):e[a];e[i++]=s}}function _i(e){return e.tView||(e.tView=wi(1,-1,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts))}function wi(e,t,n,r,i,o,a,s,u,c){var l=19+r,h=l+i,d=function(e,t){for(var n=[],r=0;r<t;r++)n.push(r<e?null:ei);return n}(l,h);return d[1]={type:e,id:t,blueprint:d,template:n,queries:null,viewQuery:s,node:null,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:u,consts:c}}function Ci(e,t,n,r,i,o){return{type:n,index:r,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,residualStyles:void 0,classes:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ki(e,t,n){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Si(e,t,n,r,i,o,a,s){var u,c,l=Lt(t,n),h=t.inputs;!s&&null!=h&&(u=h[r])?(Xi(e,n,u,r,i),xt(t)&&function(e,t){var n=jt(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3===t.type&&(r="class"===(c=r)?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c,i=null!=a?a(i,t.tagName||"",r):i,Rt(o)?o.setProperty(l,r,i):On(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function Ei(e,t,n,r){var i=!1;if(Qt()){var o=function(e,t,n){var r=e.directiveRegistry,i=null;if(r)for(var o=0;o<r.length;o++){var a=r[o];Xr(n,a.selectors,!1)&&(i||(i=[]),Xn(Gn(n,t),e,a.type),Pt(a)?(2&n.flags&&Br(n),Oi(e,n),i.unshift(a)):i.push(a))}return i}(e,t,n),a=null===r?null:{"":-1};if(null!==o){var s=0;i=!0,Ai(n,e.data.length,o.length);for(var u=0;u<o.length;u++){var c=o[u];c.providersResolver&&c.providersResolver(c)}Pi(e,n,o.length);for(var l=!1,h=!1,d=0;d<o.length;d++){var f=o[d];n.mergedAttrs=Dn(n.mergedAttrs,f.hostAttrs),Ri(e,t,f),Di(e.data.length-1,f,a),null!==f.contentQueries&&(n.flags|=8),null===f.hostBindings&&null===f.hostAttrs&&0===f.hostVars||(n.flags|=128),!l&&(f.onChanges||f.onInit||f.doCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index-19),l=!0),h||!f.onChanges&&!f.doCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index-19),h=!0),Ti(e,f),s+=f.hostVars}!function(e,t){for(var n=t.directiveEnd,r=e.data,i=t.attrs,o=[],a=null,s=null,u=t.directiveStart;u<n;u++){var c=r[u],l=c.inputs;o.push(null!==i?Fi(l,i):null),a=ki(l,u,a),s=ki(c.outputs,u,s)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=a,t.outputs=s}(e,n),xi(e,t,s)}a&&function(e,t,n){if(t)for(var r=e.localNames=[],i=0;i<t.length;i+=2){var o=n[t[i+1]];if(null==o)throw new Error("Export of name '".concat(t[i+1],"' not found!"));r.push(t[i],o)}}(n,r,a)}return n.mergedAttrs=Dn(n.mergedAttrs,n.attrs),i}function Ti(e,t){var n=e.expandoInstructions;n.push(t.hostBindings),0!==t.hostVars&&n.push(t.hostVars)}function xi(e,t,n){for(var r=0;r<n;r++)t.push(ei),e.blueprint.push(ei),e.data.push(null)}function Ii(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Pi(e,t,n){var r=19-t.index,i=e.data.length-(65535&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(r,i,n)}function Oi(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Di(e,t,n){if(n){if(t.exportAs)for(var r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Pt(t)&&(n[""]=e)}}function Ai(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Ri(e,t,n){e.data.push(n);var r=n.factory||(n.factory=Ct(n.type)),i=new xn(r,Pt(n),null);e.blueprint.push(i),t.push(i)}function Ni(e,t,n){var r=Lt(t,e),i=_i(n),o=e[10],a=qi(e,di(e,i,null,n.onPush?64:16,r,t,o,o.createRenderer(r,n)));e[t.index]=a}function Mi(e,t,n,r,i,o){var a=o[t];if(null!==a)for(var s=r.setInput,u=0;u<a.length;){var c=a[u++],l=a[u++],h=a[u++];null!==s?r.setInput(n,h,c,l):n[l]=h}}function Fi(e,t){for(var n=null,r=0;r<t.length;){var i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Li(e,t,n,r){return new Array(e,!0,-2,t,null,null,r,n,null)}function Vi(e,t){for(var n=e[5],r=0;r<n.length;r++){var i=n[r],o=i[3][3][16];if(o!==t&&0==(16&o[2])){var a=i[1];gi(a,i,a.template,i[8])}}}function Ui(e,t){var n=jt(t,e);if(Wt(n)&&80&n[2]){var r=n[1];gi(r,n,r.template,n[8])}}function ji(e,t){var n=jt(t,e),r=n[1];!function(e,t){for(var n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),pi(r,n,n[8])}function qi(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Bi(e){for(;e;){e[2]|=64;var t=ti(e);if(Ot(e)&&!t)return e;e=t}return null}function Wi(e,t,n){var r=t[10];r.begin&&r.begin();try{gi(e,t,e.template,n)}catch(i){throw Yi(t,i),i}finally{r.end&&r.end()}}function zi(e){!function(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],r=qt(n),i=r[1];mi(i,r,i.template,n)}}(e[8])}function Hi(e,t,n){ln(0),t(e,n)}var Gi=Promise.resolve(null);function Qi(e){return e[7]||(e[7]=[])}function Ki(e){return e.cleanup||(e.cleanup=[])}function Yi(e,t){var n=e[9],r=n?n.get(cr,null):null;r&&r.handleError(t)}function Xi(e,t,n,r,i){for(var o=0;o<n.length;){var a=n[o++],s=n[o++],u=t[a],c=e.data[a];null!==c.setInput?c.setInput(u,i,r,s):u[s]=i}}function Ji(e,t,n){var r=Ft(t,e),i=e[11];Rt(i)?i.setValue(r,n):r.textContent=n}function Zi(e,t){var n=t[3];return-1===e.index?Et(n)?n:null:n}function $i(e,t){var n=Zi(e,t);return n?ho(t[11],n[7]):null}function eo(e,t,n,r,i){if(null!=r){var o,a=!1;Et(r)?o=r:St(r)&&(a=!0,r=r[0]);var s=Mt(r);0===e&&null!==n?null==i?co(t,n,s):uo(t,n,s,i||null):1===e&&null!==n?uo(t,n,s,i||null):2===e?function(e,t,n){var r=ho(e,t);r&&function(e,t,n,r){Rt(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,s,a):3===e&&t.destroyNode(s),null!=o&&function(e,t,n,r,i){var o=n[7];o!==Mt(n)&&eo(t,e,r,o,i);for(var a=9;a<n.length;a++){var s=n[a];vo(s[1],s,e,t,r,o)}}(t,e,o,n,i)}}function to(e,t,n,r){var i=$i(e.node,t);i&&vo(e,t,t[11],n?1:2,i,r)}function no(e,t){var n=e[5],r=n.indexOf(t);n.splice(r,1)}function ro(e,t){if(!(e.length<=9)){var n=9+t,r=e[n];if(r){var i=r[17];null!==i&&i!==e&&no(i,r),t>0&&(e[n-1][4]=r[4]);var o=it(e,9+t);to(r[1],r,!1,null);var a=o[5];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}}function io(e,t){if(!(256&t[2])){var n=t[11];Rt(n)&&n.destroyNode&&vo(e,t,n,3,null,null),function(e){var t=e[13];if(!t)return ao(e[1],e);for(;t;){var n=null;if(St(t))n=t[13];else{var r=t[9];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)St(t)&&ao(t[1],t),t=oo(t,e);null===t&&(t=e),St(t)&&ao(t[1],t),n=t&&t[4]}t=n}}(t)}}function oo(e,t){var n;return St(e)&&(n=e[6])&&2===n.type?Zi(n,e):e[3]===t?null:e[3]}function ao(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var n;if(null!=e&&null!=(n=e.destroyHooks))for(var r=0;r<n.length;r+=2){var i=t[n[r]];i instanceof xn||n[r+1].call(i)}}(e,t),function(e,t){var n=e.cleanup;if(null!==n){for(var r=t[7],i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){var o=n[i+1],a="function"==typeof o?o(t):Mt(t[o]),s=r[n[i+2]],u=n[i+3];"boolean"==typeof u?a.removeEventListener(n[i],s,u):u>=0?r[u]():r[-u].unsubscribe(),i+=2}else n[i].call(r[n[i+1]]);t[7]=null}}(e,t);var n=t[6];n&&3===n.type&&Rt(t[11])&&t[11].destroy();var r=t[17];if(null!==r&&Et(t[3])){r!==t[3]&&no(r,t);var i=t[5];null!==i&&i.detachView(e)}}}function so(e,t,n){for(var r=t.parent;null!=r&&(4===r.type||5===r.type);)r=(t=r).parent;if(null==r){var i=n[6];return 2===i.type?$i(i,n):n[0]}if(t&&5===t.type&&4&t.flags)return Lt(t,n).parentNode;if(2&r.flags){var o=e.data,a=o[o[r.index].directiveStart].encapsulation;if(a!==ct.ShadowDom&&a!==ct.Native)return null}return Lt(r,n)}function uo(e,t,n,r){Rt(e)?e.insertBefore(t,n,r):t.insertBefore(n,r,!0)}function co(e,t,n){Rt(e)?e.appendChild(t,n):t.appendChild(n)}function lo(e,t,n,r){null!==r?uo(e,t,n,r):co(e,t,n)}function ho(e,t){return Rt(e)?e.parentNode(t):t.parentNode}function fo(e,t){if(2===e.type){var n=Zi(e,t);return null===n?null:go(n.indexOf(t,9)-9,n)}return 4===e.type||5===e.type?Lt(e,t):null}function po(e,t,n,r){var i=so(e,r,t);if(null!=i){var o=t[11],a=fo(r.parent||t[6],t);if(Array.isArray(n))for(var s=0;s<n.length;s++)lo(o,i,n[s],a);else lo(o,i,n,a)}}function go(e,t){var n=9+e+1;if(n<t.length){var r=t[n],i=r[1].firstChild;if(null!==i)return function e(t,n){if(null!==n){var r=n.type;if(3===r)return Lt(n,t);if(0===r)return go(-1,t[n.index]);if(4===r||5===r){var i=n.child;if(null!==i)return e(t,i);var o=t[n.index];return Et(o)?go(-1,o):Mt(o)}var a=t[16],s=a[6],u=ti(a),c=s.projection[n.projection];return null!=c?e(u,c):e(t,n.next)}return null}(r,i)}return t[7]}function mo(e,t,n,r,i,o,a){for(;null!=n;){var s=r[n.index],u=n.type;a&&0===t&&(s&&qr(Mt(s),r),n.flags|=4),64!=(64&n.flags)&&(4===u||5===u?(mo(e,t,n.child,r,i,o,!1),eo(t,e,i,s,o)):1===u?yo(e,t,r,n,i,o):eo(t,e,i,s,o)),n=a?n.projectionNext:n.next}}function vo(e,t,n,r,i,o){mo(n,r,e.node.child,t,i,o,!1)}function yo(e,t,n,r,i,o){var a=n[16],s=a[6].projection[r.projection];if(Array.isArray(s))for(var u=0;u<s.length;u++)eo(t,e,i,s[u],o);else mo(e,t,s,a[3],i,o,!0)}function bo(e,t,n){Rt(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function _o(e,t,n){Rt(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}var wo,Co,ko,So=function(){function e(t,n){_classCallCheck(this,e),this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._viewContainerRef=null,this._tViewNode=null}return _createClass(e,[{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){var e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}io(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){var t,n,r;t=this._lView[1],r=e,Qi(n=this._lView).push(r),t.firstCreatePass&&Ki(t).push(n[7].length-1,null)}},{key:"markForCheck",value:function(){Bi(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){Wi(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,n){nn(!0);try{Wi(e,t,n)}finally{nn(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,vo(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}},{key:"rootNodes",get:function(){var e=this._lView;return null==e[0]?function e(t,n,r,i){for(var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==r;){var a=n[r.index];if(null!==a&&i.push(Mt(a)),Et(a))for(var s=9;s<a.length;s++){var u=a[s],c=u[1].firstChild;null!==c&&e(u[1],u,c,i)}var l=r.type;if(4===l||5===l)e(t,n,r.child,i);else if(1===l){var h=n[16],d=h[6],f=ti(h),p=d.projection[r.projection];null!==p&&null!==f&&e(f[1],f,p,i,!0)}r=o?r.projectionNext:r.next}return i}(e[1],e,e[6].child,[]):[]}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}}]),e}(),Eo=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e)))._view=e,n}return _inherits(t,e),_createClass(t,[{key:"detectChanges",value:function(){zi(this._view)}},{key:"checkNoChanges",value:function(){!function(e){nn(!0);try{zi(e)}finally{nn(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),t}(So);function To(e,t,n){return wo||(wo=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}(e)),new wo(Lt(t,n))}function xo(e,t,n,r){return Co||(Co=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._declarationView=e,i._declarationTContainer=n,i.elementRef=r,i}return _inherits(t,e),_createClass(t,[{key:"createEmbeddedView",value:function(e){var t=this._declarationTContainer.tViews,n=di(this._declarationView,t,e,16,null,t.node);n[17]=this._declarationView[this._declarationTContainer.index];var r=this._declarationView[5];null!==r&&(n[5]=r.createEmbeddedView(t)),pi(t,n,e);var i=new So(n);return i._tViewNode=n[6],i}}]),t}(e)),0===n.type?new Co(r,n,To(t,n,r)):null}function Io(e,t,n,r){var i;ko||(ko=function(e){function n(e,t,r){var i;return _classCallCheck(this,n),(i=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this)))._lContainer=e,i._hostTNode=t,i._hostView=r,i}return _inherits(n,e),_createClass(n,[{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){return null!==this._lContainer[8]&&this._lContainer[8][e]||null}},{key:"createEmbeddedView",value:function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r}},{key:"createComponent",value:function(e,t,n,r,i){var o=n||this.parentInjector;if(!i&&null==e.ngModule&&o){var a=o.get(et,null);a&&(i=a)}var s=e.create(o,r,void 0,i);return this.insert(s.hostView,t),s}},{key:"insert",value:function(e,t){var n=e._lView,r=n[1];if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Et(n[3])){var i=this.indexOf(e);if(-1!==i)this.detach(i);else{var o=n[3],a=new ko(o,o[6],o[3]);a.detach(a.indexOf(e))}}var s=this._adjustIndex(t);return function(e,t,n,r){var i=9+r,o=n.length;r>0&&(n[i-1][4]=t),r<o-9?(t[4]=n[i],rt(n,9+r,t)):(n.push(t),t[4]=null),t[3]=n;var a=t[17];null!==a&&n!==a&&function(e,t){var n=e[5],r=t[3][3][16];16!=(16&r[2])&&t[16]!==r&&(e[2]|=1),null===n?e[5]=[t]:n.push(t)}(a,t);var s=t[5];null!==s&&s.insertView(e),t[2]|=128}(r,n,this._lContainer,s),to(r,n,!0,go(s,this._lContainer)),e.attachToViewContainerRef(this),rt(this._lContainer[8],s,e),e}},{key:"move",value:function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=this._lContainer[8];return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1);(function(e,t){var n=ro(e,t);n&&io(n[1],n)})(this._lContainer,t),it(this._lContainer[8],t)}},{key:"detach",value:function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1),n=ro(this._lContainer,t);return n&&null!=it(this._lContainer[8],t)?new So(n):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:e}},{key:"allocateContainerIfNeeded",value:function(){null===this._lContainer[8]&&(this._lContainer[8]=[])}},{key:"element",get:function(){return To(t,this._hostTNode,this._hostView)}},{key:"injector",get:function(){return new ir(this._hostTNode,this._hostView)}},{key:"parentInjector",get:function(){var e=Yn(this._hostTNode,this._hostView),t=Fn(e,this._hostView),n=function(e,t,n){if(n.parent&&-1!==n.parent.injectorIndex){for(var r=n.parent.injectorIndex,i=n.parent;null!=i.parent&&r==i.parent.injectorIndex;)i=i.parent;return i}for(var o=Mn(e),a=t,s=t[6];o>1;)s=(a=a[15])[6],o--;return s}(e,this._hostView,this._hostTNode);return Rn(e)&&null!=n?new ir(n,t):new ir(null,this._hostView)}},{key:"length",get:function(){return this._lContainer.length-9}}]),n}(e));var o=r[n.index];if(Et(o))(function(e,t){e[2]=-2})(i=o);else{var a;if(4===n.type)a=Mt(o);else if(a=r[11].createComment(""),Ot(r)){var s=r[11],u=Lt(n,r);uo(s,ho(s,u),a,function(e,t){return Rt(e)?e.nextSibling(t):t.nextSibling}(s,u))}else po(r[1],r,a,n);r[n.index]=i=Li(o,r,a,n),qi(r,i)}return new ko(i,n,r)}var Po=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Oo()},e}(),Oo=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,t,n){if(!n&&xt(e)){var r=jt(e.index,t);return new So(r,r)}return 3===e.type||0===e.type||4===e.type||5===e.type?new So(t[16],t):null}(Jt(),Kt(),e)},Do=new qe("Set Injector scope."),Ao={},Ro={},No=[],Mo=void 0;function Fo(){return void 0===Mo&&(Mo=new $e),Mo}function Lo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new Vo(e,n,t||Fo(),r)}var Vo=function(){function e(t,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,e),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var a=[];n&&nt(n,(function(e){return i.processProvider(e,t,n)})),nt([t],(function(e){return i.processInjectorType(e,[],a)})),this.records.set(Be,qo(void 0,this));var s=this.records.get(Do);this.scope=null!=s?s.value:null,this.source=o||("object"==typeof t?null:Ce(t))}return _createClass(e,[{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach((function(e){return e.ngOnDestroy()}))}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:We,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ce.Default;this.assertNotDestroyed();var r,i=Qe(this);try{if(!(n&ce.SkipSelf)){var o=this.records.get(e);if(void 0===o){var a=("function"==typeof(r=e)||"object"==typeof r&&r instanceof qe)&&pe(e);o=a&&this.injectableDefInScope(a)?qo(Uo(e),Ao):null,this.records.set(e,o)}if(null!=o)return this.hydrate(e,o)}return(n&ce.Self?Fo():this.parent).get(e,t=n&ce.Optional&&t===We?null:t)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(Ce(e)),i)throw s;return function(e,t,n,r){var i=e.ngTempTokenPath;throw t.__source&&i.unshift(t.__source),e.message=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var i=Ce(t);if(Array.isArray(t))i=t.map(Ce).join(" -> ");else if("object"==typeof t){var o=[];for(var a in t)if(t.hasOwnProperty(a)){var s=t[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):Ce(s)))}i="{".concat(o.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(e.replace(ze,"\n  "))}("\n"+e.message,i,"R3InjectorError",r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(s,e,0,this.source)}throw s}finally{Qe(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach((function(t){return e.get(t)}))}},{key:"toString",value:function(){var e=[];return this.records.forEach((function(t,n){return e.push(Ce(n))})),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,n){var r=this;if(!(e=Te(e)))return!1;var i=me(e),o=null==i&&e.ngModule||void 0,a=void 0===o?e:o,s=-1!==n.indexOf(a);if(void 0!==o&&(i=me(o)),null==i)return!1;if(null!=i.imports&&!s){var u;n.push(a);try{nt(i.imports,(function(e){r.processInjectorType(e,t,n)&&(void 0===u&&(u=[]),u.push(e))}))}finally{}if(void 0!==u)for(var c=function(e){var t=u[e],n=t.ngModule,i=t.providers;nt(i,(function(e){return r.processProvider(e,n,i||No)}))},l=0;l<u.length;l++)c(l)}this.injectorDefTypes.add(a),this.records.set(a,qo(i.factory,Ao));var h=i.providers;if(null!=h&&!s){var d=e;nt(h,(function(e){return r.processProvider(e,d,h)}))}return void 0!==o&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,n){var r=Wo(e=Te(e))?e:Te(e&&e.provide),i=function(e,t,n){return Bo(e)?qo(void 0,e.useValue):qo(jo(e,t,n),Ao)}(e,t,n);if(Wo(e)||!0!==e.multi){var o=this.records.get(r);o&&void 0!==o.multi&&Wr()}else{var a=this.records.get(r);a?void 0===a.multi&&Wr():((a=qo(void 0,Ao,!0)).factory=function(){return Ze(a.multi)},this.records.set(r,a)),r=e,a.multi.push(e)}this.records.set(r,i)}},{key:"hydrate",value:function(e,t){var n;return t.value===Ro?function(e){throw new Error("Cannot instantiate cyclic dependency! ".concat(e))}(Ce(e)):t.value===Ao&&(t.value=Ro,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}},{key:"injectableDefInScope",value:function(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();function Uo(e){var t=pe(e),n=null!==t?t.factory:Ct(e);if(null!==n)return n;var r=me(e);if(null!==r)return r.factory;if(e instanceof qe)throw new Error("Token ".concat(Ce(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=ot(t,"?");throw new Error("Can't resolve all parameters for ".concat(Ce(e),": (").concat(n.join(", "),")."))}var r=function(e){var t=e&&(e[ve]||e[_e]||e[be]&&e[be]());if(t){var n=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\n')+'This will become an error in v10. Please add @Injectable() to the "'.concat(n,'" class.')),t}return null}(e);return null!==r?function(){return r.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function jo(e,t,n){var r,i=void 0;if(Wo(e)){var o=Te(e);return Ct(o)||Uo(o)}if(Bo(e))i=function(){return Te(e.useValue)};else if((r=e)&&r.useFactory)i=function(){return e.useFactory.apply(e,_toConsumableArray(Ze(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))i=function(){return Xe(Te(e.useExisting))};else{var a=Te(e&&(e.useClass||e.provide));if(a||function(e,t,n){var r="";throw e&&t&&(r=" - only instances of Provider and Type are allowed, got: [".concat(t.map((function(e){return e==n?"?"+n+"?":"..."})).join(", "),"]")),new Error("Invalid provider for the NgModule '".concat(Ce(e),"'")+r)}(t,n,e),!function(e){return!!e.deps}(e))return Ct(a)||Uo(a);i=function(){return _construct(a,_toConsumableArray(Ze(e.deps)))}}return i}function qo(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:n?[]:void 0}}function Bo(e){return null!==e&&"object"==typeof e&&He in e}function Wo(e){return"function"==typeof e}var zo=function(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=Lo(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)},Ho=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?zo(e,t,""):zo(e.providers,e.parent,e.name||"")}}]),e}();return e.THROW_IF_NOT_FOUND=We,e.NULL=new $e,e.\u0275prov=de({token:e,providedIn:"any",factory:function(){return Xe(Be)}}),e.__NG_ELEMENT_ID__=-1,e}(),Go=new qe("AnalyzeForEntryComponents"),Qo=new Map,Ko=new Set;function Yo(e){return"string"==typeof e?e:e.text()}function Xo(e,t){for(var n=e.styles,r=e.classes,i=0,o=0;o<t.length;o++){var a=t[o];"number"==typeof a?i=a:1==i?r=ke(r,a):2==i&&(n=ke(n,a+": "+t[++o]+";"))}null!==n&&(e.styles=n),null!==r&&(e.classes=r)}var Jo=null;function Zo(){if(!Jo){var e=Re.Symbol;if(e&&e.iterator)Jo=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Jo=r)}}return Jo}function $o(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}var ea=function(){function e(t){_classCallCheck(this,e),this.wrapped=t}return _createClass(e,null,[{key:"wrap",value:function(t){return new e(t)}},{key:"unwrap",value:function(t){return e.isWrapped(t)?t.wrapped:t}},{key:"isWrapped",value:function(t){return t instanceof e}}]),e}();function ta(e){return!!na(e)&&(Array.isArray(e)||!(e instanceof Map)&&Zo()in e)}function na(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function ra(e,t,n){return e[t]=n}function ia(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function oa(e,t,n,r){var i=ia(e,t,n);return ia(e,t+1,r)||i}function aa(e,t,n,r,i,o){var a=oa(e,t,n,r);return oa(e,t+2,i,o)||a}function sa(e,t,n,r){var i=Kt();return ia(i,an(),t)&&(Yt(),function(e,t,n,r,i,o){var a=Lt(e,t),s=t[11];if(null==r)Rt(s)?s.removeAttribute(a,n,o):a.removeAttribute(n);else{var u=null==i?Ln(r):i(r,e.tagName||"",n);Rt(s)?s.setAttribute(a,n,u,o):o?a.setAttributeNS(o,n,u):a.setAttribute(n,u)}}(_n(),i,e,t,n,r)),sa}function ua(e,t,n,r,i,o,a,s){var u=Kt(),c=Yt(),l=e+19,h=c.firstCreatePass?function(e,t,n,r,i,o,a,s,u){var c=t.consts,l=fi(t,n[6],e,0,a||null,zt(c,s));Ei(t,n,l,zt(c,u)),wn(t,l);var h=l.tViews=wi(2,-1,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c),d=Ci(0,null,2,-1,null,null);return d.injectorIndex=l.injectorIndex,h.node=d,null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(e,c,u,t,n,r,i,o,a):c.data[l];Zt(h,!1);var d=u[11].createComment("");po(c,u,d,h),qr(d,u),qi(u,u[l]=Li(d,u,d,h)),It(h)&&yi(c,u,h),null!=a&&bi(u,h,s)}function ca(e){return Ut(Gt.lFrame.contextLView,e)}function la(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce.Default,n=Kt();return null==n?Xe(e,t):Jn(Jt(),n,Te(e),t)}function ha(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;var n=e.attrs;if(n)for(var r=n.length,i=0;i<r;){var o=n[i];if(Pn(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===t)return n[i+1];i+=2}}return null}(Jt(),e)}function da(){throw new Error("invalid")}function fa(e,t,n){var r=Kt();return ia(r,an(),t)&&Si(Yt(),_n(),r,e,t,r[11],n,!1),fa}function pa(e,t,n,r,i){var o=i?"class":"style";Xi(e,n,t.inputs[o],o,r)}function ga(e,t,n,r){var i=Kt(),o=Yt(),a=19+e,s=i[11],u=i[a]=hi(t,s,Gt.lFrame.currentNamespace),c=o.firstCreatePass?function(e,t,n,r,i,o,a){var s=t.consts,u=zt(s,o),c=fi(t,n[6],e,3,i,u);return Ei(t,n,c,zt(s,a)),null!==c.mergedAttrs&&Xo(c,c.mergedAttrs),null!==t.queries&&t.queries.elementStart(t,c),c}(e,o,i,0,t,n,r):o.data[a];Zt(c,!0);var l=c.mergedAttrs;null!==l&&In(s,u,l);var h=c.classes;null!==h&&_o(s,u,h);var d=c.styles;null!==d&&bo(s,u,d),po(o,i,u,c),0===Gt.lFrame.elementDepthCount&&qr(u,i),Gt.lFrame.elementDepthCount++,It(c)&&(yi(o,i,c),function(e,t,n){if(Tt(t))for(var r=t.directiveEnd,i=t.directiveStart;i<r;i++){var o=e.data[i];o.contentQueries&&o.contentQueries(1,n[i],i)}}(o,c,i)),null!==r&&bi(i,c)}function ma(){var e=Jt();$t()?en():Zt(e=e.parent,!1);var t=e;Gt.lFrame.elementDepthCount--;var n=Yt();n.firstCreatePass&&(wn(n,e),Tt(e)&&n.queries.elementEnd(e)),null!==t.classes&&function(e){return 0!=(16&e.flags)}(t)&&pa(n,t,Kt(),t.classes,!0),null!==t.styles&&function(e){return 0!=(32&e.flags)}(t)&&pa(n,t,Kt(),t.styles,!1)}function va(e,t,n,r){ga(e,t,n,r),ma()}function ya(){return Kt()}function ba(e){return!!e&&"function"==typeof e.then}function _a(e){return!!e&&"function"==typeof e.subscribe}function wa(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=Kt(),o=Yt(),a=Jt();return function(e,t,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,u=It(r),c=e.firstCreatePass&&(e.cleanup||(e.cleanup=[])),l=Qi(t),h=!0;if(3===r.type){var d=Lt(r,t),f=s?s(d):lt,p=f.target||d,g=l.length,m=s?function(e){return s(Mt(e[r.index])).target}:r.index;if(Rt(n)){var v=null;if(!s&&u&&(v=function(e,t,n,r){var i=e.cleanup;if(null!=i)for(var o=0;o<i.length-1;o+=2){var a=i[o];if(a===n&&i[o+1]===r){var s=t[7],u=i[o+2];return s.length>u?s[u]:null}"string"==typeof a&&(o+=2)}return null}(e,t,i,r.index)),null!==v)(v.__ngLastListenerFn__||v).__ngNextListenerFn__=o,v.__ngLastListenerFn__=o,h=!1;else{o=ka(r,t,o,!1);var y=n.listen(f.name||p,i,o);l.push(o,y),c&&c.push(i,m,g,g+1)}}else o=ka(r,t,o,!0),p.addEventListener(i,o,a),l.push(o),c&&c.push(i,m,g,a)}var b,_=r.outputs;if(h&&null!==_&&(b=_[i])){var w=b.length;if(w)for(var C=0;C<w;C+=2){var k=t[b[C]][b[C+1]].subscribe(o),S=l.length;l.push(o,k),c&&c.push(i,r.index,S,-(S+1))}}}(o,i,i[11],a,e,t,n,r),wa}function Ca(e,t,n){try{return!1!==t(n)}catch(r){return Yi(e,r),!1}}function ka(e,t,n,r){return function i(o){if(o===Function)return n;var a=2&e.flags?jt(e.index,t):t;0==(32&t[2])&&Bi(a);for(var s=Ca(t,n,o),u=i.__ngNextListenerFn__;u;)s=Ca(t,u,o)&&s,u=u.__ngNextListenerFn__;return r&&!1===s&&(o.preventDefault(),o.returnValue=!1),s}}function Sa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(e){return(Gt.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Gt.lFrame.contextLView))[8]}(e)}function Ea(e,t){for(var n=null,r=function(e){var t=e.attrs;if(null!=t){var n=t.indexOf(5);if(0==(1&n))return t[n+1]}return null}(e),i=0;i<t.length;i++){var o=t[i];if("*"!==o){if(null===r?Xr(e,o,!0):Jr(r,o))return i}else n=i}return n}function Ta(e){var t=Kt()[16][6];if(!t.projection)for(var n=t.projection=ot(e?e.length:1,null),r=n.slice(),i=t.child;null!==i;){var o=e?Ea(i,e):0;null!==o&&(r[o]?r[o].projectionNext=i:n[o]=i,r[o]=i),i=i.next}}function xa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=Kt(),i=Yt(),o=fi(i,r[6],e,1,null,n||null);null===o.projection&&(o.projection=t),en(),function(e,t,n){yo(t[11],0,t,n,so(e,n,t),fo(n.parent||t[6],t))}(i,r,o)}var Ia=[];function Pa(e,t,n,r,i){for(var o=e[n+1],a=null===t,s=r?oi(o):si(o),u=!1;0!==s&&(!1===u||a);){var c=e[s+1];Oa(e[s],t)&&(u=!0,e[s+1]=r?ci(c):ai(c)),s=r?oi(c):si(c)}u&&(e[n+1]=r?ai(o):ci(o))}function Oa(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&st(e,t)>=0}function Da(e,t){return function(e,t,n,r){var i,o,a=Kt(),s=Yt(),u=sn(2);(s.firstUpdatePass&&function(e,t,n,r){var i=e.data;if(null===i[n+1]){var o=i[yn()+19],a=function(e,t){return t>=e.expandoStartIndex}(e,n);(function(e,t){return 0!=(16&e.flags)})(o)&&null===t&&!a&&(t=!1),t=function(e,t,n,r){var i=function(e){var t=Gt.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e),o=t.residualClasses;if(null===i)0===t.classBindings&&(n=Ra(n=Aa(null,e,t,n,!0),t.attrs,!0),o=null);else{var a=t.directiveStylingLast;if(-1===a||e[a]!==i)if(n=Aa(i,e,t,n,!0),null===o){var s=function(e,t,n){var r=t.classBindings;if(0!==si(r))return e[oi(r)]}(e,t);void 0!==s&&Array.isArray(s)&&function(e,t,n,r){e[oi(t.classBindings)]=r}(e,t,0,s=Ra(s=Aa(null,e,t,s[1],!0),t.attrs,!0))}else o=function(e,t,n){for(var r=void 0,i=t.directiveEnd,o=1+t.directiveStylingLast;o<i;o++)r=Ra(r,e[o].hostAttrs,!0);return Ra(r,t.attrs,!0)}(e,t)}return void 0!==o&&(t.residualClasses=o),n}(i,o,t),function(e,t,n,r,i,o){var a=t.classBindings,s=oi(a),u=si(a);e[r]=n;var c,l=!1;if(Array.isArray(n)){var h=n;(null===(c=h[1])||st(h,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){var d=oi(e[s+1]);e[r+1]=ii(d,s),0!==d&&(e[d+1]=ui(e[d+1],r)),e[s+1]=131071&e[s+1]|r<<17}else e[r+1]=ii(s,0),0!==s&&(e[s+1]=ui(e[s+1],r)),s=r;else e[r+1]=ii(u,0),0===s?s=r:e[u+1]=ui(e[u+1],r),u=r;l&&(e[r+1]=ai(e[r+1])),Pa(e,c,r,!0),Pa(e,c,r,!1),function(e,t,n,r,i){var o=e.residualClasses;null!=o&&"string"==typeof t&&st(o,t)>=0&&(n[r+1]=ci(n[r+1]))}(t,c,e,r),a=ii(s,u),t.classBindings=a}(i,o,t,n,a)}}(s,e,u),t!==ei&&ia(a,u,t))&&(null==n&&(i=null===(o=Gt.lFrame)?null:o.currentSanitizer)&&(n=i),function(e,t,n,r,i,o,a,s){if(3===t.type){var u=e.data,c=u[s+1];Ma(1==(1&c)?Na(u,t,n,i,si(c),!0):void 0)||(Ma(o)||2==(2&c)&&(o=Na(u,null,n,i,s,!0)),function(e,t,n,r,i){var o=Rt(e);i?o?e.addClass(n,r):n.classList.add(r):o?e.removeClass(n,r):n.classList.remove(r)}(r,0,Ft(yn(),n),i,o))}}(s,s.data[yn()+19],a,a[11],e,a[u+1]=function(e,t){return null==e||("function"==typeof t?e=t(e):"string"==typeof t?e+=t:"object"==typeof e&&(e=Ce(hr(e)))),e}(t,n),0,u))}(e,t,null),Da}function Aa(e,t,n,r,i){var o=null,a=n.directiveEnd,s=n.directiveStylingLast;for(-1===s?s=n.directiveStart:s++;s<a&&(r=Ra(r,(o=t[s]).hostAttrs,i),o!==e);)s++;return null!==e&&(n.directiveStylingLast=s),r}function Ra(e,t,n){var r,i,o,a,s=n?1:2,u=-1;if(null!==t)for(var c=0;c<t.length;c++){var l=t[c];"number"==typeof l?u=l:u===s&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),r=e,i=l,o=!!n||t[++c],a=void 0,(a=st(r,i))>=0?r[1|a]=o:function(e,t,n,r){var i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(r,a=~a,i,o))}return void 0===e?null:e}function Na(e,t,n,r,i,o){for(var a=null===t,s=void 0;i>0;){var u=e[i],c=Array.isArray(u),l=c?u[1]:u,h=null===l,d=n[i+1];d===ei&&(d=h?Ia:void 0);var f=h?at(d,r):l===r?d:void 0;if(c&&!Ma(f)&&(f=at(u,r)),Ma(f)&&(s=f,a))return s;var p=e[i+1];i=a?oi(p):si(p)}if(null!==t){var g=o?t.residualClasses:t.residualStyles;null!=g&&(s=at(g,r))}return s}function Ma(e){return void 0!==e}function Fa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Kt(),r=Yt(),i=e+19,o=r.firstCreatePass?fi(r,n[6],e,3,null,null):r.data[i],a=n[i]=function(e,t){return Rt(t)?t.createText(e):t.createTextNode(e)}(t,n[11]);po(r,n,a,o),Zt(o,!1)}function La(e){return Va("",e,""),La}function Va(e,t,n){var r=Kt(),i=function(e,t,n,r){return ia(e,an(),n)?t+Ln(n)+r:ei}(r,e,t,n);return i!==ei&&Ji(r,yn(),i),Va}function Ua(e,t,n,r,i){var o=Kt(),a=function(e,t,n,r,i,o){var a=oa(e,on(),n,i);return sn(2),a?t+Ln(n)+r+Ln(i)+o:ei}(o,e,t,n,r,i);return a!==ei&&Ji(o,yn(),a),Ua}function ja(e,t,n,r,i,o,a,s,u){var c=Kt(),l=function(e,t,n,r,i,o,a,s,u,c){var l=aa(e,on(),n,i,a,u);return sn(4),l?t+Ln(n)+r+Ln(i)+o+Ln(a)+s+Ln(u)+c:ei}(c,e,t,n,r,i,o,a,s,u);return l!==ei&&Ji(c,yn(),l),ja}function qa(e,t,n,r,i,o,a,s,u,c,l,h,d,f,p,g,m){var v=Kt(),y=function(e,t,n,r,i,o,a,s,u,c,l,h,d,f,p,g,m,v){var y=on(),b=aa(e,y,n,i,a,u);return b=aa(e,y+4,l,d,p,m)||b,sn(8),b?t+Ln(n)+r+Ln(i)+o+Ln(a)+s+Ln(u)+c+Ln(l)+h+Ln(d)+f+Ln(p)+g+Ln(m)+v:ei}(v,e,t,n,r,i,o,a,s,u,c,l,h,d,f,p,g,m);return y!==ei&&Ji(v,yn(),y),qa}function Ba(e,t,n){var r=Kt();return ia(r,an(),t)&&Si(Yt(),_n(),r,e,t,r[11],n,!0),Ba}function Wa(e,t){var n=qt(e)[1],r=n.data.length-1;wn(n,{directiveStart:r,directiveEnd:r+1})}function za(e){for(var t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0,r=[e];t;){var i=void 0;if(Pt(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);var o=e;o.inputs=Ha(e.inputs),o.declaredInputs=Ha(e.declaredInputs),o.outputs=Ha(e.outputs);var a=i.hostBindings;a&&Ka(e,a);var s=i.viewQuery,u=i.contentQueries;if(s&&Ga(e,s),u&&Qa(e,u),he(e.inputs,i.inputs),he(e.declaredInputs,i.declaredInputs),he(e.outputs,i.outputs),Pt(i)&&i.data.animation){var c=e.data;c.animation=(c.animation||[]).concat(i.data.animation)}o.afterContentChecked=o.afterContentChecked||i.afterContentChecked,o.afterContentInit=e.afterContentInit||i.afterContentInit,o.afterViewChecked=e.afterViewChecked||i.afterViewChecked,o.afterViewInit=e.afterViewInit||i.afterViewInit,o.doCheck=e.doCheck||i.doCheck,o.onDestroy=e.onDestroy||i.onDestroy,o.onInit=e.onInit||i.onInit}var l=i.features;if(l)for(var h=0;h<l.length;h++){var d=l[h];d&&d.ngInherit&&d(e),d===za&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){for(var t=0,n=null,r=e.length-1;r>=0;r--){var i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Dn(i.hostAttrs,n=Dn(n,i.hostAttrs))}}(r)}function Ha(e){return e===lt?{}:e===ht?[]:e}function Ga(e,t){var n=e.viewQuery;e.viewQuery=n?function(e,r){t(e,r),n(e,r)}:t}function Qa(e,t){var n=e.contentQueries;e.contentQueries=n?function(e,r,i){t(e,r,i),n(e,r,i)}:t}function Ka(e,t){var n=e.hostBindings;e.hostBindings=n?function(e,r){t(e,r),n(e,r)}:t}var Ya=function(){function e(t,n,r){_classCallCheck(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r}return _createClass(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}();function Xa(e){e.type.prototype.ngOnChanges&&(e.setInput=Ja,e.onChanges=function(){var e=Za(this),t=e&&e.current;if(t){var n=e.previous;if(n===lt)e.previous=t;else for(var r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}})}function Ja(e,t,n,r){var i=Za(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:lt,current:null}),o=i.current||(i.current={}),a=i.previous,s=this.declaredInputs[n],u=a[s];o[s]=new Ya(u&&u.currentValue,t,a===lt),e[r]=t}function Za(e){return e.__ngSimpleChanges__||null}function $a(e,t,n,r,i){if(e=Te(e),Array.isArray(e))for(var o=0;o<e.length;o++)$a(e[o],t,n,r,i);else{var a=Yt(),s=Kt(),u=Wo(e)?e:Te(e.provide),c=jo(e),l=Jt(),h=65535&l.providerIndexes,d=l.directiveStart,f=l.providerIndexes>>16;if(Wo(e)||!e.multi){var p=new xn(c,i,la),g=ns(u,t,i?h:h+f,d);-1===g?(Xn(Gn(l,s),a,u),es(a,e,t.length),t.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),n.push(p),s.push(p)):(n[g]=p,s[g]=p)}else{var m=ns(u,t,h+f,d),v=ns(u,t,h,h+f),y=m>=0&&n[m],b=v>=0&&n[v];if(i&&!b||!i&&!y){Xn(Gn(l,s),a,u);var _=function(e,t,n,r,i){var o=new xn(e,n,la);return o.multi=[],o.index=t,o.componentProviders=0,ts(o,i,r&&!n),o}(i?is:rs,n.length,i,r,c);!i&&b&&(n[v].providerFactory=_),es(a,e,t.length),t.push(u),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),n.push(_),s.push(_)}else es(a,e,m>-1?m:v),ts(n[i?v:m],c,!i&&r);!i&&r&&b&&n[v].componentProviders++}}}function es(e,t,n){if(Wo(t)||t.useClass){var r=(t.useClass||t).prototype.ngOnDestroy;r&&(e.destroyHooks||(e.destroyHooks=[])).push(n,r)}}function ts(e,t,n){e.multi.push(t),n&&e.componentProviders++}function ns(e,t,n,r){for(var i=n;i<r;i++)if(t[i]===e)return i;return-1}function rs(e,t,n,r){return os(this.multi,[])}function is(e,t,n,r){var i,o=this.multi;if(this.providerFactory){var a=this.providerFactory.componentProviders,s=tr(n,n[1],this.providerFactory.index,r);os(o,i=s.slice(0,a));for(var u=a;u<s.length;u++)i.push(s[u])}else os(o,i=[]);return i}function os(e,t){for(var n=0;n<e.length;n++)t.push((0,e[n])());return t}function as(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(e,t,n){var r=Yt();if(r.firstCreatePass){var i=Pt(e);$a(n,r.data,r.blueprint,i,!0),$a(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}}Xa.ngInherit=!0;var ss=function e(){_classCallCheck(this,e)},us=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(Ce(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),cs=function(){var e=function e(){_classCallCheck(this,e)};return e.NULL=new us,e}(),ls=function(){var e=function e(t){_classCallCheck(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=function(){return hs(e)},e}(),hs=function(e){return To(e,Jt(),Kt())},ds=function e(){_classCallCheck(this,e)},fs=function(){var e={Important:1,DashCase:2};return e[e.Important]="Important",e[e.DashCase]="DashCase",e}(),ps=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return gs()},e}(),gs=function(){var e=Kt(),t=jt(Jt().index,e);return function(e){var t=e[11];if(Rt(t))return t;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(St(t)?t:e)},ms=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275prov=de({token:e,providedIn:"root",factory:function(){return null}}),e}(),vs=new function e(t){_classCallCheck(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}("9.0.7"),ys=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return ta(e)}},{key:"create",value:function(e){return new _s(e)}}]),e}(),bs=function(e,t){return t},_s=function(){function e(t){_classCallCheck(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||bs}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var o=!n||t&&t.currentIndex<Ss(n,r,i)?t:n,a=Ss(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,c=s-r;if(u!=c){for(var l=0;l<u;l++){var h=l<i.length?i[l]:i[l]=0,d=h+l;c<=d&&d<u&&(i[l]=h+1)}i[o.previousIndex]=c-u}}a!==s&&e(o,a,s)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!ta(e))throw new Error("Error trying to diff '".concat(Ce(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(e)){this.length=e.length;for(var s=0;s<this.length;s++)r=e[s],i=this._trackByFn(s,r),null!==o&&$o(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),$o(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,i=e[Zo()]();!(r=i.next()).done;)t(r.value)}(e,(function(e){i=t._trackByFn(n,e),null!==o&&$o(o.trackById,i)?(a&&(o=t._verifyReinsertion(o,e,i,n)),$o(o.item,e)||t._addIdentityChange(o,e)):(o=t._mismatch(o,e,i,n),a=!0),o=o._next,n++})),this.length=n;return this._truncate(o),this.collection=e,this.isDirty}},{key:"_reset",value:function(){if(this.isDirty){var e,t;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?($o(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?($o(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new ws(t,n),i,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new ks),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ks),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}}]),e}(),ws=function e(t,n){_classCallCheck(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Cs=function(){function e(){_classCallCheck(this,e),this._head=null,this._tail=null}return _createClass(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&$o(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),ks=function(){function e(){_classCallCheck(this,e),this.map=new Map}return _createClass(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new Cs,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"clear",value:function(){this.map.clear()}},{key:"isEmpty",get:function(){return 0===this.map.size}}]),e}();function Ss(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var Es=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"supports",value:function(e){return e instanceof Map||na(e)}},{key:"create",value:function(){return new Ts}}]),e}(),Ts=function(){function e(){_classCallCheck(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return _createClass(e,[{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||na(e)))throw new Error("Error trying to diff '".concat(Ce(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}})),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new xs(e);return this._records.set(e,o),o.currentValue=t,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){$o(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach((function(n){return t(e[n],n)}))}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}}]),e}(),xs=function e(t){_classCallCheck(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null},Is=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t,n=this.factories.find((function(t){return t.supports(e)}));if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new ue,new ae]]}}}]),e}();return e.\u0275prov=de({token:e,providedIn:"root",factory:function(){return new e([new ys])}}),e}(),Ps=function(){var e=function(){function e(t){_classCallCheck(this,e),this.factories=t}return _createClass(e,[{key:"find",value:function(e){var t=this.factories.find((function(t){return t.supports(e)}));if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new ue,new ae]]}}}]),e}();return e.\u0275prov=de({token:e,providedIn:"root",factory:function(){return new e([new Es])}}),e}(),Os=[new Es],Ds=new Is([new ys]),As=new Ps(Os),Rs=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Ns(e,ls)},e}(),Ns=function(e,t){return xo(e,t,Jt(),Kt())},Ms=function(){var e=function e(){_classCallCheck(this,e)};return e.__NG_ELEMENT_ID__=function(){return Fs(e,ls)},e}(),Fs=function(e,t){return Io(e,t,Jt(),Kt())},Ls={},Vs=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).ngModule=e,n}return _inherits(t,e),_createClass(t,[{key:"resolveComponentFactory",value:function(e){var t=wt(e);return new qs(t,this.ngModule)}}]),t}(cs);function Us(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var js=new qe("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return Un}}),qs=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).componentDef=e,r.ngModule=n,r.componentType=e.type,r.selector=e.selectors.map($r).join(","),r.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],r.isBoundToModule=!!n,r}return _inherits(t,e),_createClass(t,[{key:"create",value:function(e,t,n,r){var i,o,a=(r=r||this.ngModule)?function(e,t){return{get:function(n,r,i){var o=e.get(n,Ls,i);return o!==Ls||r===Ls?o:t.get(n,r,i)}}}(e,r.injector):e,s=a.get(ds,Nt),u=a.get(ms,null),c=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=n?function(e,t,n){if(Rt(e))return e.selectRootElement(t,n===ct.ShadowDom);var r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(c,n,this.componentDef.encapsulation):hi(l,s.createRenderer(null,this.componentDef),function(e){var t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),d=this.componentDef.onPush?576:528,f="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),p={components:[],scheduler:Un,clean:Gi,playerHandler:null,flags:0},g=wi(0,-1,null,1,0,null,null,null,null,null),m=di(null,g,p,d,null,null,s,c,u,a);dn(m,null);try{var v=function(e,t,n,r,i,o){var a=n[1];n[19]=e;var s=fi(a,null,0,3,null,null),u=s.mergedAttrs=t.hostAttrs;null!==u&&(Xo(s,u),null!==e&&(In(i,e,u),null!==s.classes&&_o(i,e,s.classes),null!==s.styles&&bo(i,e,s.styles)));var c=r.createRenderer(e,t),l=di(n,_i(t),null,t.onPush?64:16,n[19],s,r,c,void 0);return a.firstCreatePass&&(Xn(Gn(s,n),a,t.type),Oi(a,s),Ai(s,n.length,1)),qi(n,l),n[19]=l}(h,this.componentDef,m,s,c);if(h)if(n)In(c,h,["ng-version",vs.full]);else{var y=function(e){for(var t=[],n=[],r=1,i=2;r<e.length;){var o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!Kr(i))break;i=o}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]),b=y.attrs,_=y.classes;b&&In(c,h,b),_&&_.length>0&&_o(c,h,_.join(" "))}o=Vt(m[1],0),t&&(o.projection=t.map((function(e){return Array.from(e)}))),i=function(e,t,n,r,i){var o=n[1],a=function(e,t,n){var r=Jt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Pi(e,r,1),Ri(e,t,n));var i=tr(t,e,t.length-1,r);qr(i,t);var o=Lt(r,t);return o&&qr(o,t),i}(o,n,t);r.components.push(a),e[8]=a,i&&i.forEach((function(e){return e(a,t)})),t.contentQueries&&t.contentQueries(1,a,n.length-1);var s=Jt();if(o.firstCreatePass&&(null!==t.hostBindings||null!==t.hostAttrs)){bn(s.index-19);var u=n[1];Ti(u,t),xi(u,n,t.hostVars),Ii(t,a)}return a}(v,this.componentDef,m,p,[Wa]),pi(g,m,null)}finally{vn()}var w=new Bs(this.componentType,i,To(ls,o,m),m,o);return n&&!f||(w.hostView._tViewNode.child=o),w}},{key:"inputs",get:function(){return Us(this.componentDef.inputs)}},{key:"outputs",get:function(){return Us(this.componentDef.outputs)}}]),t}(ss),Bs=function(e){function t(e,n,r,i,o){var a,s,u,c;return _classCallCheck(this,t),(a=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).location=r,a._rootLView=i,a._tNode=o,a.destroyCbs=[],a.instance=n,a.hostView=a.changeDetectorRef=new Eo(i),a.hostView._tViewNode=(s=i[1],u=i,null==(c=s.node)&&(s.node=c=Ci(0,null,2,-1,null,null)),u[6]=c),a.componentType=e,a}return _inherits(t,e),_createClass(t,[{key:"destroy",value:function(){this.destroyCbs&&(this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}},{key:"onDestroy",value:function(e){this.destroyCbs&&this.destroyCbs.push(e)}},{key:"injector",get:function(){return new ir(this._tNode,this._rootLView)}}]),t}(function(){return function e(){_classCallCheck(this,e)}}()),Ws=void 0,zs=["en",[["a","p"],["AM","PM"],Ws],[["AM","PM"],Ws,Ws],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ws,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ws,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ws,"{1} 'at' {0}",Ws],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],Hs={};function Gs(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),n=Qs(t);if(n)return n;var r=t.split("-")[0];if(n=Qs(r))return n;if("en"===r)return zs;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}function Qs(e){return e in Hs||(Hs[e]=Re.ng&&Re.ng.common&&Re.ng.common.locales&&Re.ng.common.locales[e]),Hs[e]}var Ks=function(){var e={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,PluralCase:19,ExtraData:20};return e[e.LocaleId]="LocaleId",e[e.DayPeriodsFormat]="DayPeriodsFormat",e[e.DayPeriodsStandalone]="DayPeriodsStandalone",e[e.DaysFormat]="DaysFormat",e[e.DaysStandalone]="DaysStandalone",e[e.MonthsFormat]="MonthsFormat",e[e.MonthsStandalone]="MonthsStandalone",e[e.Eras]="Eras",e[e.FirstDayOfWeek]="FirstDayOfWeek",e[e.WeekendRange]="WeekendRange",e[e.DateFormat]="DateFormat",e[e.TimeFormat]="TimeFormat",e[e.DateTimeFormat]="DateTimeFormat",e[e.NumberSymbols]="NumberSymbols",e[e.NumberFormats]="NumberFormats",e[e.CurrencyCode]="CurrencyCode",e[e.CurrencySymbol]="CurrencySymbol",e[e.CurrencyName]="CurrencyName",e[e.Currencies]="Currencies",e[e.PluralCase]="PluralCase",e[e.ExtraData]="ExtraData",e}();function Ys(e){var t;null==(t=e)&&function(e,t,n,r){throw new Error("ASSERTION ERROR: ".concat("Expected localeId to be defined")+" [Expected=> null != ".concat(t," <=Actual]"))}(0,t),"string"==typeof e&&e.toLowerCase().replace(/_/g,"-")}var Xs=new Map,Js=function(e){function t(e,n){var r;_classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._parent=n,r._bootstrapComponents=[],r.injector=_assertThisInitialized(r),r.destroyCbs=[],r.componentFactoryResolver=new Vs(_assertThisInitialized(r));var i=kt(e),o=e[Ve]||null;return o&&Ys(o),r._bootstrapComponents=Bn(i.bootstrap),r._r3Injector=Lo(e,n,[{provide:et,useValue:_assertThisInitialized(r)},{provide:cs,useValue:r.componentFactoryResolver}],Ce(e)),r._r3Injector._resolveInjectorDefTypes(),r.instance=r.get(e),r}return _inherits(t,e),_createClass(t,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ho.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ce.Default;return e===Ho||e===et||e===Be?this:this._r3Injector.get(e,t,n)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach((function(e){return e()})),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}}]),t}(et),Zs=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).moduleType=e,null!==kt(e)&&function e(t){if(null!==t.\u0275mod.id){var n=t.\u0275mod.id;(function(e,t,n){if(t&&t!==n)throw new Error("Duplicate module registered for ".concat(e," - ").concat(Ce(t)," vs ").concat(Ce(t.name)))})(n,Xs.get(n),t),Xs.set(n,t)}var r=t.\u0275mod.imports;r instanceof Function&&(r=r()),r&&r.forEach((function(t){return e(t)}))}(e),n}return _inherits(t,e),_createClass(t,[{key:"create",value:function(e){return new Js(this.moduleType,e)}}]),t}(tt);function $s(e,t,n,r){return nu(Kt(),rn(),e,t,n,r)}function eu(e,t,n,r,i){return ru(Kt(),rn(),e,t,n,r,i)}function tu(e,t){var n=e[t];return n===ei?void 0:n}function nu(e,t,n,r,i,o){var a=t+n;return ia(e,a,i)?ra(e,a+1,o?r.call(o,i):r(i)):tu(e,a+1)}function ru(e,t,n,r,i,o,a){var s=t+n;return oa(e,s,i,o)?ra(e,s+2,a?r.call(a,i,o):r(i,o)):tu(e,s+2)}function iu(e,t){var n,r=Yt(),i=e+19;r.firstCreatePass?(n=function(e,t){if(t)for(var n=t.length-1;n>=0;n--){var r=t[n];if(e===r.name)return r}throw new Error("The pipe '".concat(e,"' could not be found!"))}(t,r.pipeRegistry),r.data[i]=n,n.onDestroy&&(r.destroyHooks||(r.destroyHooks=[])).push(i,n.onDestroy)):n=r.data[i];var o=n.factory||(n.factory=Ct(n.type)),a=Ke(la),s=o();return Ke(a),function(e,t,n,r){var i=n+19;i>=e.data.length&&(e.data[i]=null,e.blueprint[i]=null),t[i]=r}(r,Kt(),e,s),s}function ou(e,t,n){var r=Kt(),i=Ut(r,e);return uu(r,su(r,e)?nu(r,rn(),t,i.transform,n,i):i.transform(n))}function au(e,t,n,r){var i=Kt(),o=Ut(i,e);return uu(i,su(i,e)?ru(i,rn(),t,o.transform,n,r,o):o.transform(n,r))}function su(e,t){return e[1].data[t+19].pure}function uu(e,t){return ea.isWrapped(t)&&(t=ea.unwrap(t),e[on()]=ei),t}var cu=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).__isAsync=n,e}return _inherits(t,e),_createClass(t,[{key:"emit",value:function(e){_get(_getPrototypeOf(t.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,n,r){var i,o=function(e){return null},a=function(){return null};e&&"object"==typeof e?(i=this.__isAsync?function(t){setTimeout((function(){return e.next(t)}))}:function(t){e.next(t)},e.error&&(o=this.__isAsync?function(t){setTimeout((function(){return e.error(t)}))}:function(t){e.error(t)}),e.complete&&(a=this.__isAsync?function(){setTimeout((function(){return e.complete()}))}:function(){e.complete()})):(i=this.__isAsync?function(t){setTimeout((function(){return e(t)}))}:function(t){e(t)},n&&(o=this.__isAsync?function(e){setTimeout((function(){return n(e)}))}:function(e){n(e)}),r&&(a=this.__isAsync?function(){setTimeout((function(){return r()}))}:function(){r()}));var s=_get(_getPrototypeOf(t.prototype),"subscribe",this).call(this,i,o,a);return e instanceof d&&e.add(s),s}}]),t}(I);function lu(){return this._results[Zo()]()}var hu=function(){function e(){_classCallCheck(this,e),this.dirty=!0,this._results=[],this.changes=new cu,this.length=0;var t=Zo(),n=e.prototype;n[t]||(n[t]=lu)}return _createClass(e,[{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e){this._results=function e(t,n){void 0===n&&(n=t);for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?(n===t&&(n=t.slice(0,r)),e(i,n)):n!==t&&n.push(i)}return n}(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}},{key:"notifyOnChanges",value:function(){this.changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}(),du=function(){function e(t){_classCallCheck(this,e),this.queryList=t,this.matches=null}return _createClass(e,[{key:"clone",value:function(){return new e(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),e}(),fu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,e),this.queries=t}return _createClass(e,[{key:"createEmbeddedView",value:function(t){var n=t.queries;if(null!==n){for(var r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[],o=0;o<r;o++){var a=n.getByIndex(o);i.push(this.queries[a.indexInDeclarationView].clone())}return new e(i)}return null}},{key:"insertView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"detachView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"dirtyQueriesWithMatches",value:function(e){for(var t=0;t<this.queries.length;t++)null!==Tu(e,t).matches&&this.queries[t].setDirty()}}]),e}(),pu=function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;_classCallCheck(this,e),this.predicate=t,this.descendants=n,this.isStatic=r,this.read=i},gu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,e),this.queries=t}return _createClass(e,[{key:"elementStart",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}},{key:"elementEnd",value:function(e){for(var t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}},{key:"embeddedTView",value:function(t){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new e(n):null}},{key:"template",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}},{key:"getByIndex",value:function(e){return this.queries[e]}},{key:"track",value:function(e){this.queries.push(e)}},{key:"length",get:function(){return this.queries.length}}]),e}(),mu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;_classCallCheck(this,e),this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return _createClass(e,[{key:"elementStart",value:function(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}},{key:"elementEnd",value:function(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(e,t){this.elementStart(e,t)}},{key:"embeddedTView",value:function(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}},{key:"isApplyingToNode",value:function(e){if(this._appliesToNextNode&&!1===this.metadata.descendants){for(var t=this._declarationNodeIndex,n=e.parent;null!==n&&4===n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(e,t){if(Array.isArray(this.metadata.predicate))for(var n=this.metadata.predicate,r=0;r<n.length;r++)this.matchTNodeWithReadOption(e,t,vu(t,n[r]));else{var i=this.metadata.predicate;i===Rs?0===t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,er(t,e,i,!1,!1))}}},{key:"matchTNodeWithReadOption",value:function(e,t,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===ls||r===Ms||r===Rs&&0===t.type)this.addMatch(t.index,-2);else{var i=er(t,e,r,!1,!1);null!==i&&this.addMatch(t.index,i)}else this.addMatch(t.index,n)}}},{key:"addMatch",value:function(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}]),e}();function vu(e,t){var n=e.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function yu(e,t,n,r){return-1===n?function(e,t){return 3===e.type||4===e.type?To(ls,e,t):0===e.type?xo(Rs,ls,e,t):null}(t,e):-2===n?function(e,t,n){return n===ls?To(ls,t,e):n===Rs?xo(Rs,ls,t,e):n===Ms?Io(Ms,ls,t,e):void 0}(e,t,r):tr(e,e[1],n,t)}function bu(e,t,n,r){var i=t[5].queries[r];if(null===i.matches){for(var o=e.data,a=n.matches,s=[],u=0;u<a.length;u+=2){var c=a[u];s.push(c<0?null:yu(t,o[c],a[u+1],n.metadata.read))}i.matches=s}return i.matches}function _u(e){var t=Kt(),n=Yt(),r=cn();ln(r+1);var i=Tu(n,r);if(e.dirty&&Bt(t)===i.metadata.isStatic){if(null===i.matches)e.reset([]);else{var o=i.crossesNgTemplate?function e(t,n,r,i){var o=t.queries.getByIndex(r),a=o.matches;if(null!==a)for(var s=bu(t,n,o,r),u=0;u<a.length;u+=2){var c=a[u];if(c>0)i.push(s[u/2]);else{for(var l=a[u+1],h=n[-c],d=9;d<h.length;d++){var f=h[d];f[17]===f[3]&&e(f[1],f,l,i)}if(null!==h[5])for(var p=h[5],g=0;g<p.length;g++){var m=p[g];e(m[1],m,l,i)}}}return i}(n,t,r,[]):bu(n,t,i,r);e.reset(o),e.notifyOnChanges()}return!0}return!1}function wu(e,t,n){!function(e,t,n,r,i,o){e.firstCreatePass&&(Eu(e,new pu(n,r,!0,i),-1),e.staticViewQueries=!0),Su(e,t)}(Yt(),Kt(),e,t,n)}function Cu(e,t,n,r){!function(e,t,n,r,i,o,a,s){e.firstCreatePass&&(Eu(e,new pu(n,r,!1,i),a.index),function(e,t){var n=e.contentQueries||(e.contentQueries=[]);t!==(e.contentQueries.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(e,s)),Su(e,t)}(Yt(),Kt(),t,n,r,0,Jt(),e)}function ku(){return e=Kt(),t=cn(),e[5].queries[t].queryList;var e,t}function Su(e,t){var n=new hu;!function(e,t,n,r){var i=Qi(t);i.push(n),e.firstCreatePass&&Ki(e).push(r,i.length-1)}(e,t,n,n.destroy),null===t[5]&&(t[5]=new fu),t[5].queries.push(new du(n))}function Eu(e,t,n){null===e.queries&&(e.queries=new gu),e.queries.track(new mu(t,n))}function Tu(e,t){return e.queries.getByIndex(t)}var xu=new qe("Application Initializer"),Iu=function(){var e=function(){function e(t){var n=this;_classCallCheck(this,e),this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((function(e,t){n.resolve=e,n.reject=t}))}return _createClass(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();ba(i)&&t.push(i)}Promise.all(t).then((function(){n()})).catch((function(t){e.reject(t)})),0===t.length&&n(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Xe(xu,8))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e}(),Pu=new qe("AppId"),Ou={provide:Pu,useFactory:function(){return"".concat(Du()).concat(Du()).concat(Du())},deps:[]};function Du(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var Au=new qe("Platform Initializer"),Ru=new qe("Platform ID"),Nu=new qe("appBootstrapListener"),Mu=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e}(),Fu=new qe("LocaleId"),Lu=new qe("DefaultCurrencyCode"),Vu=function e(t,n){_classCallCheck(this,e),this.ngModuleFactory=t,this.componentFactories=n},Uu=function(e){return new Zs(e)},ju=Uu,qu=function(e){return Promise.resolve(Uu(e))},Bu=function(e){var t=Uu(e),n=Bn(kt(e).declarations).reduce((function(e,t){var n=wt(t);return n&&e.push(new qs(n)),e}),[]);return new Vu(t,n)},Wu=Bu,zu=function(e){return Promise.resolve(Bu(e))},Hu=function(){var e=function(){function e(){_classCallCheck(this,e),this.compileModuleSync=ju,this.compileModuleAsync=qu,this.compileModuleAndAllComponentsSync=Wu,this.compileModuleAndAllComponentsAsync=zu}return _createClass(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e}(),Gu=new qe("compilerOptions"),Qu=Promise.resolve(0);function Ku(e){"undefined"==typeof Zone?Qu.then((function(){e&&e.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var Yu=function(){function e(t){var n,r,i=t.enableLongStackTrace,o=void 0!==i&&i,a=t.shouldCoalesceEventChangeDetection,s=void 0!==a&&a;if(_classCallCheck(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new cu(!1),this.onMicrotaskEmpty=new cu(!1),this.onStable=new cu(!1),this.onError=new cu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=s,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){var e=Re.requestAnimationFrame,t=Re.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);var r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,r=!!(n=this).shouldCoalesceEventChangeDetection&&n.nativeRequestAnimationFrame&&function(){!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Re,(function(){e.lastRequestAnimationFrameId=-1,$u(e),Zu(e)})),$u(e))}(n)},n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:r},onInvokeTask:function(e,t,i,o,a,s){try{return ec(n),e.invokeTask(i,o,a,s)}finally{r&&"eventTask"===o.type&&r(),tc(n)}},onInvoke:function(e,t,r,i,o,a,s){try{return ec(n),e.invoke(r,i,o,a,s)}finally{tc(n)}},onHasTask:function(e,t,r,i){e.hasTask(r,i),t===r&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,$u(n),Zu(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:function(e,t,r,i){return e.handleError(r,i),n.runOutsideAngular((function(){return n.onError.emit(i)})),!1}})}return _createClass(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,e,Ju,Xu,Xu);try{return i.runTask(o,t,n)}finally{i.cancelTask(o)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}();function Xu(){}var Ju={};function Zu(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular((function(){return e.onStable.emit(null)}))}finally{e.isStable=!0}}}function $u(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||e.shouldCoalesceEventChangeDetection&&-1!==e.lastRequestAnimationFrameId)}function ec(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function tc(e){e._nesting--,Zu(e)}var nc,rc=function(){function e(){_classCallCheck(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new cu,this.onMicrotaskEmpty=new cu,this.onStable=new cu,this.onError=new cu}return _createClass(e,[{key:"run",value:function(e,t,n){return e.apply(t,n)}},{key:"runGuarded",value:function(e,t,n){return e.apply(t,n)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,n,r){return e.apply(t,n)}}]),e}(),ic=function(){var e=function(){function e(t){var n=this;_classCallCheck(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run((function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}return _createClass(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular((function(){e._ngZone.onStable.subscribe({next:function(){Yu.assertNotInAngularZone(),Ku((function(){e._isZoneStable=!0,e._runCallbacksIfReady()}))}})}))}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())Ku((function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1}));else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter((function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)})),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}})):[]}},{key:"addCallback",value:function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout((function(){r._callbacks=r._callbacks.filter((function(e){return e.timeoutId!==i})),e(r._didWork,r.getPendingTasks())}),t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Xe(Yu))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e}(),oc=function(){var e=function(){function e(){_classCallCheck(this,e),this._applications=new Map,ac.addToWindow(this)}return _createClass(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return ac.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e}(),ac=new(function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),sc=function(e,t,n){var r=new Zs(n);if(0===Qo.size)return Promise.resolve(r);var i,o,a=(i=e.get(Gu,[]).concat(t).map((function(e){return e.providers})),o=[],i.forEach((function(e){return e&&o.push.apply(o,_toConsumableArray(e))})),o);if(0===a.length)return Promise.resolve(r);var s=function(){var e=Re.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}(),u=Ho.create({providers:a}).get(s.ResourceLoader);return function(e){var t=[],n=new Map;function r(e){var t=n.get(e);if(!t){var r=function(e){return Promise.resolve(u.get(e))}(e);n.set(e,t=r.then(Yo))}return t}return Qo.forEach((function(e,n){var i=[];e.templateUrl&&i.push(r(e.templateUrl).then((function(t){e.template=t})));var o=e.styleUrls,a=e.styles||(e.styles=[]),s=e.styles.length;o&&o.forEach((function(t,n){a.push(""),i.push(r(t).then((function(r){a[s+n]=r,o.splice(o.indexOf(t),1),0==o.length&&(e.styleUrls=void 0)})))}));var u=Promise.all(i).then((function(){return function(e){Ko.delete(e)}(n)}));t.push(u)})),Qo=new Map,Promise.all(t).then((function(){}))}().then((function(){return r}))},uc=new qe("AllowMultipleToken"),cc=function e(t,n){_classCallCheck(this,e),this.name=t,this.token=n};function lc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(t),i=new qe(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=hc();if(!o||o.injector.get(uc,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var a=n.concat(t).concat({provide:i,useValue:!0},{provide:Do,useValue:"platform"});!function(e){if(nc&&!nc.destroyed&&!nc.injector.get(uc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");nc=e.get(dc);var t=e.get(Au,null);t&&t.forEach((function(e){return e()}))}(Ho.create({providers:a,name:r}))}return function(e){var t=hc();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function hc(){return nc&&!nc.destroyed?nc:null}var dc=function(){var e=function(){function e(t){_classCallCheck(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return _createClass(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n,r,i=this,o=(n=t?t.ngZone:void 0,r=t&&t.ngZoneEventCoalescing||!1,"noop"===n?new rc:("zone.js"===n?void 0:n)||new Yu({enableLongStackTrace:gr(),shouldCoalesceEventChangeDetection:r})),a=[{provide:Yu,useValue:o}];return o.run((function(){var t=Ho.create({providers:a,parent:i.injector,name:e.moduleType.name}),n=e.create(t),r=n.injector.get(cr,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.onDestroy((function(){return mc(i._modules,n)})),o.runOutsideAngular((function(){return o.onError.subscribe({next:function(e){r.handleError(e)}})})),function(e,t,r){try{var o=((a=n.injector.get(Iu)).runInitializers(),a.donePromise.then((function(){return Ys(n.injector.get(Fu,"en-US")||"en-US"),i._moduleDoBootstrap(n),n})));return ba(o)?o.catch((function(n){throw t.runOutsideAngular((function(){return e.handleError(n)})),n})):o}catch(s){throw t.runOutsideAngular((function(){return e.handleError(s)})),s}var a}(r,o)}))}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=fc({},n);return sc(this.injector,r,e).then((function(e){return t.bootstrapModuleFactory(e,r)}))}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(gc);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach((function(e){return t.bootstrap(e)}));else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(Ce(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. ')+"Please define one of these.");e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach((function(e){return e.destroy()})),this._destroyListeners.forEach((function(e){return e()})),this._destroyed=!0}},{key:"injector",get:function(){return this._injector}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Xe(Ho))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e}();function fc(e,t){return Array.isArray(t)?t.reduce(fc,e):Object.assign(Object.assign({},e),t)}var pc,gc=((pc=function(){function e(t,n,r,i,o,a){var s=this;_classCallCheck(this,e),this._zone=t,this._console=n,this._injector=r,this._exceptionHandler=i,this._componentFactoryResolver=o,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=gr(),this._zone.onMicrotaskEmpty.subscribe({next:function(){s._zone.run((function(){s.tick()}))}});var u=new C((function(e){s._stable=s._zone.isStable&&!s._zone.hasPendingMacrotasks&&!s._zone.hasPendingMicrotasks,s._zone.runOutsideAngular((function(){e.next(s._stable),e.complete()}))})),c=new C((function(e){var t;s._zone.runOutsideAngular((function(){t=s._zone.onStable.subscribe((function(){Yu.assertNotInAngularZone(),Ku((function(){s._stable||s._zone.hasPendingMacrotasks||s._zone.hasPendingMicrotasks||(s._stable=!0,e.next(!0))}))}))}));var n=s._zone.onUnstable.subscribe((function(){Yu.assertInAngularZone(),s._stable&&(s._stable=!1,s._zone.runOutsideAngular((function(){e.next(!1)})))}));return function(){t.unsubscribe(),n.unsubscribe()}}));this.isStable=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Number.POSITIVE_INFINITY,i=null,o=t[t.length-1];return O(o)?(i=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(r=t.pop())):"number"==typeof o&&(r=t.pop()),null===i&&1===t.length&&t[0]instanceof C?t[0]:K(r)(Y(t,i))}(u,c.pipe((function(e){return X()((t=ne,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,ee);return r.source=e,r.subjectFactory=n,r})(e));var t})))}return _createClass(e,[{key:"bootstrap",value:function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof ss?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=n.isBoundToModule?void 0:this._injector.get(et),o=n.create(Ho.NULL,[],t||n.selector,i);o.onDestroy((function(){r._unloadComponent(o)}));var a=o.injector.get(ic,null);return a&&o.injector.get(oc).registerApplication(o.location.nativeElement,a),this._loadComponent(o),gr()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var t=!0,n=!1,r=void 0;try{for(var i,o=this._views[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)i.value.detectChanges()}catch(h){n=!0,r=h}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}if(this._enforceNoNewChanges){var a=!0,s=!1,u=void 0;try{for(var c,l=this._views[Symbol.iterator]();!(a=(c=l.next()).done);a=!0)c.value.checkNoChanges()}catch(h){s=!0,u=h}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}}}catch(d){this._zone.runOutsideAngular((function(){return e._exceptionHandler.handleError(d)}))}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;mc(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Nu,[]).concat(this._bootstrapListeners).forEach((function(t){return t(e)}))}},{key:"_unloadComponent",value:function(e){this.detachView(e.hostView),mc(this.components,e)}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach((function(e){return e.destroy()}))}},{key:"viewCount",get:function(){return this._views.length}}]),e}()).\u0275fac=function(e){return new(e||pc)(Xe(Yu),Xe(Mu),Xe(Ho),Xe(cr),Xe(cs),Xe(Iu))},pc.\u0275prov=de({token:pc,factory:pc.\u0275fac}),pc);function mc(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var vc=function e(){_classCallCheck(this,e)},yc=function e(){_classCallCheck(this,e)},bc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},_c=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this._compiler=t,this._config=n||bc}return _createClass(e,[{key:"load",value:function(e){return this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var t=this,r=_slicedToArray(e.split("#"),2),i=r[0],o=r[1];return void 0===o&&(o="default"),n("crnd")(i).then((function(e){return e[o]})).then((function(e){return wc(e,i,o)})).then((function(e){return t._compiler.compileModuleAsync(e)}))}},{key:"loadFactory",value:function(e){var t=_slicedToArray(e.split("#"),2),r=t[0],i=t[1],o="NgFactory";return void 0===i&&(i="default",o=""),n("crnd")(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then((function(e){return e[i+o]})).then((function(e){return wc(e,r,i)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Xe(Hu),Xe(yc,8))},e.\u0275prov=de({token:e,factory:e.\u0275fac}),e}();function wc(e,t,n){if(!e)throw new Error("Cannot find '".concat(n,"' in '").concat(t,"'"));return e}var Cc=lc(null,"core",[{provide:Ru,useValue:"unknown"},{provide:dc,deps:[Ho]},{provide:oc,deps:[]},{provide:Mu,deps:[]}]),kc=[{provide:gc,useClass:gc,deps:[Yu,Mu,Ho,cr,cs,Iu]},{provide:js,deps:[Yu],useFactory:function(e){var t=[];return e.onStable.subscribe((function(){for(;t.length;)t.pop()()})),function(e){t.push(e)}}},{provide:Iu,useClass:Iu,deps:[[new ae,xu]]},{provide:Hu,useClass:Hu,deps:[]},Ou,{provide:Is,useFactory:function(){return Ds},deps:[]},{provide:Ps,useFactory:function(){return As},deps:[]},{provide:Fu,useFactory:function(e){return Ys(e=e||"undefined"!=typeof $localize&&$localize.locale||"en-US"),e},deps:[[new oe(Fu),new ae,new ue]]},{provide:Lu,useValue:"USD"}],Sc=function(){var e=function e(t){_classCallCheck(this,e)};return e.\u0275mod=vt({type:e}),e.\u0275inj=fe({factory:function(t){return new(t||e)(Xe(gc))},providers:kc}),e}(),Ec=null;function Tc(){return Ec}var xc,Ic=new qe("DocumentToken"),Pc=((xc=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||xc)},xc.\u0275prov=de({factory:Oc,token:xc,providedIn:"platform"}),xc);function Oc(){return Xe(Rc)}var Dc,Ac=new qe("Location Initialized"),Rc=((Dc=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._doc=e,n._init(),n}return _inherits(t,e),_createClass(t,[{key:"_init",value:function(){this.location=Tc().getLocation(),this._history=Tc().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return Tc().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){Tc().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}},{key:"onHashChange",value:function(e){Tc().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}},{key:"pushState",value:function(e,t,n){Nc()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){Nc()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}}]),t}(Pc)).\u0275fac=function(e){return new(e||Dc)(Xe(Ic))},Dc.\u0275prov=de({factory:Mc,token:Dc,providedIn:"platform"}),Dc);function Nc(){return!!window.history.pushState}function Mc(){return new Rc(Xe(Ic))}function Fc(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function Lc(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Vc(e){return e&&"?"!==e[0]?"?"+e:e}var Uc,jc=((Uc=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Uc)},Uc.\u0275prov=de({factory:qc,token:Uc,providedIn:"root"}),Uc);function qc(e){var t=Xe(Ic).location;return new Gc(Xe(Pc),t&&t.origin||"")}var Bc,Wc,zc,Hc=new qe("appBaseHref"),Gc=((zc=function(e){function t(e,n){var r;if(_classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._platformLocation=e,null==n&&(n=r._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=n,_possibleConstructorReturn(r)}return _inherits(t,e),_createClass(t,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return Fc(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+Vc(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?"".concat(t).concat(n):t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+Vc(r));this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+Vc(r));this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),t}(jc)).\u0275fac=function(e){return new(e||zc)(Xe(Pc),Xe(Hc,8))},zc.\u0275prov=de({token:zc,factory:zc.\u0275fac}),zc),Qc=((Wc=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._platformLocation=e,r._baseHref="",null!=n&&(r._baseHref=n),r}return _inherits(t,e),_createClass(t,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=Fc(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+Vc(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+Vc(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),t}(jc)).\u0275fac=function(e){return new(e||Wc)(Xe(Pc),Xe(Hc,8))},Wc.\u0275prov=de({token:Wc,factory:Wc.\u0275fac}),Wc),Kc=((Bc=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._subject=new cu,this._urlChangeListeners=[],this._platformStrategy=t;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=Lc(Xc(i)),this._platformStrategy.onPopState((function(e){r._subject.emit({url:r.path(!0),pop:!0,state:e.state,type:e.type})}))}return _createClass(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+Vc(t))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,Xc(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Vc(t)),n)}},{key:"replaceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Vc(t)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this.subscribe((function(e){t._notifyUrlChangeListeners(e.url,e.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach((function(n){return n(e,t)}))}},{key:"subscribe",value:function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}]),e}()).\u0275fac=function(e){return new(e||Bc)(Xe(jc),Xe(Pc))},Bc.normalizeQueryParams=Vc,Bc.joinWithSlash=Fc,Bc.stripTrailingSlash=Lc,Bc.\u0275prov=de({factory:Yc,token:Bc,providedIn:"root"}),Bc);function Yc(){return new Kc(Xe(jc),Xe(Pc))}function Xc(e){return e.replace(/\/index.html$/,"")}var Jc={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},Zc=function(){var e={Decimal:0,Percent:1,Currency:2,Scientific:3};return e[e.Decimal]="Decimal",e[e.Percent]="Percent",e[e.Currency]="Currency",e[e.Scientific]="Scientific",e}(),$c=function(){var e={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return e[e.Zero]="Zero",e[e.One]="One",e[e.Two]="Two",e[e.Few]="Few",e[e.Many]="Many",e[e.Other]="Other",e}(),el=function(){var e={Format:0,Standalone:1};return e[e.Format]="Format",e[e.Standalone]="Standalone",e}(),tl=function(){var e={Narrow:0,Abbreviated:1,Wide:2,Short:3};return e[e.Narrow]="Narrow",e[e.Abbreviated]="Abbreviated",e[e.Wide]="Wide",e[e.Short]="Short",e}(),nl=function(){var e={Short:0,Medium:1,Long:2,Full:3};return e[e.Short]="Short",e[e.Medium]="Medium",e[e.Long]="Long",e[e.Full]="Full",e}(),rl=function(){var e={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};return e[e.Decimal]="Decimal",e[e.Group]="Group",e[e.List]="List",e[e.PercentSign]="PercentSign",e[e.PlusSign]="PlusSign",e[e.MinusSign]="MinusSign",e[e.Exponential]="Exponential",e[e.SuperscriptingExponent]="SuperscriptingExponent",e[e.PerMille]="PerMille",e[e.Infinity]="Infinity",e[e.NaN]="NaN",e[e.TimeSeparator]="TimeSeparator",e[e.CurrencyDecimal]="CurrencyDecimal",e[e.CurrencyGroup]="CurrencyGroup",e}();function il(e,t){return ll(Gs(e)[Ks.DateFormat],t)}function ol(e,t){return ll(Gs(e)[Ks.TimeFormat],t)}function al(e,t){return ll(Gs(e)[Ks.DateTimeFormat],t)}function sl(e,t){var n=Gs(e),r=n[Ks.NumberSymbols][t];if(void 0===r){if(t===rl.CurrencyDecimal)return n[Ks.NumberSymbols][rl.Decimal];if(t===rl.CurrencyGroup)return n[Ks.NumberSymbols][rl.Group]}return r}function ul(e,t){return Gs(e)[Ks.NumberFormats][t]}function cl(e){if(!e[Ks.ExtraData])throw new Error('Missing extra locale data for the locale "'.concat(e[Ks.LocaleId],'". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.'))}function ll(e,t){for(var n=t;n>-1;n--)if(void 0!==e[n])return e[n];throw new Error("Locale data API: locale data undefined")}function hl(e){var t=_slicedToArray(e.split(":"),2);return{hours:+t[0],minutes:+t[1]}}var dl=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,fl={},pl=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,gl=function(){var e={Short:0,ShortGMT:1,Long:2,Extended:3};return e[e.Short]="Short",e[e.ShortGMT]="ShortGMT",e[e.Long]="Long",e[e.Extended]="Extended",e}(),ml=function(){var e={FullYear:0,Month:1,Date:2,Hours:3,Minutes:4,Seconds:5,FractionalSeconds:6,Day:7};return e[e.FullYear]="FullYear",e[e.Month]="Month",e[e.Date]="Date",e[e.Hours]="Hours",e[e.Minutes]="Minutes",e[e.Seconds]="Seconds",e[e.FractionalSeconds]="FractionalSeconds",e[e.Day]="Day",e}(),vl=function(){var e={DayPeriods:0,Days:1,Months:2,Eras:3};return e[e.DayPeriods]="DayPeriods",e[e.Days]="Days",e[e.Months]="Months",e[e.Eras]="Eras",e}();function yl(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,(function(e,n){return null!=t&&n in t?t[n]:e}))),e}function bl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-",r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o="";(e<0||i&&e<=0)&&(i?e=1-e:(e=-e,o=n));for(var a=String(e);a.length<t;)a="0"+a;return r&&(a=a.substr(a.length-t)),o+a}function _l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return function(o,a){var s,u=function(e,t){switch(e){case ml.FullYear:return t.getFullYear();case ml.Month:return t.getMonth();case ml.Date:return t.getDate();case ml.Hours:return t.getHours();case ml.Minutes:return t.getMinutes();case ml.Seconds:return t.getSeconds();case ml.FractionalSeconds:return t.getMilliseconds();case ml.Day:return t.getDay();default:throw new Error('Unknown DateType value "'.concat(e,'".'))}}(e,o);if((n>0||u>-n)&&(u+=n),e===ml.Hours)0===u&&-12===n&&(u=12);else if(e===ml.FractionalSeconds)return s=t,bl(u,3).substr(0,s);var c=sl(a,rl.MinusSign);return bl(u,t,c,r,i)}}function wl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:el.Format,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(i,o){return function(e,t,n,r,i,o){switch(n){case vl.Months:return function(e,t,n){var r=Gs(e),i=ll([r[Ks.MonthsFormat],r[Ks.MonthsStandalone]],t);return ll(i,n)}(t,i,r)[e.getMonth()];case vl.Days:return function(e,t,n){var r=Gs(e),i=ll([r[Ks.DaysFormat],r[Ks.DaysStandalone]],t);return ll(i,n)}(t,i,r)[e.getDay()];case vl.DayPeriods:var a=e.getHours(),s=e.getMinutes();if(o){var u,c=function(e){var t=Gs(e);return cl(t),(t[Ks.ExtraData][2]||[]).map((function(e){return"string"==typeof e?hl(e):[hl(e[0]),hl(e[1])]}))}(t),l=function(e,t,n){var r=Gs(e);cl(r);var i=ll([r[Ks.ExtraData][0],r[Ks.ExtraData][1]],t)||[];return ll(i,n)||[]}(t,i,r);if(c.forEach((function(e,t){if(Array.isArray(e)){var n=e[0],r=n.hours,i=n.minutes,o=e[1],c=o.hours,h=o.minutes;a>=r&&s>=i&&(a<c||a===c&&s<h)&&(u=l[t])}else{var d=e.hours,f=e.minutes;d===a&&f===s&&(u=l[t])}})),u)return u}return function(e,t,n){var r=Gs(e),i=ll([r[Ks.DayPeriodsFormat],r[Ks.DayPeriodsStandalone]],t);return ll(i,n)}(t,i,r)[a<12?0:1];case vl.Eras:return function(e,t){return ll(Gs(e)[Ks.Eras],t)}(t,r)[e.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type ".concat(n))}}(i,o,e,t,n,r)}}function Cl(e){return function(t,n,r){var i=-1*r,o=sl(n,rl.MinusSign),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case gl.Short:return(i>=0?"+":"")+bl(a,2,o)+bl(Math.abs(i%60),2,o);case gl.ShortGMT:return"GMT"+(i>=0?"+":"")+bl(a,1,o);case gl.Long:return"GMT"+(i>=0?"+":"")+bl(a,2,o)+":"+bl(Math.abs(i%60),2,o);case gl.Extended:return 0===r?"Z":(i>=0?"+":"")+bl(a,2,o)+":"+bl(Math.abs(i%60),2,o);default:throw new Error('Unknown zone width "'.concat(e,'"'))}}}function kl(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){var i,o,a,s;if(t){var u=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,c=n.getDate();i=1+Math.floor((c+u)/7)}else{var l=(o=n.getFullYear(),a=new Date(o,0,1).getDay(),new Date(o,0,1+(a<=4?4:11)-a)),h=(s=n,new Date(s.getFullYear(),s.getMonth(),s.getDate()+(4-s.getDay()))).getTime()-l.getTime();i=1+Math.round(h/6048e5)}return bl(i,e,sl(r,rl.MinusSign))}}var Sl={};function El(e,t){e=e.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function Tl(e){return e instanceof Date&&!isNaN(e.valueOf())}var xl=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Il(e,t,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s="",u=!1;if(isFinite(e)){var c=function(e){var t,n,r,i,o,a=Math.abs(e)+"",s=0;for((n=a.indexOf("."))>-1&&(a=a.replace(".","")),(r=a.search(/e/i))>0?(n<0&&(n=r),n+=+a.slice(r+1),a=a.substring(0,r)):n<0&&(n=a.length),r=0;"0"===a.charAt(r);r++);if(r===(o=a.length))t=[0],n=1;else{for(o--;"0"===a.charAt(o);)o--;for(n-=r,t=[],i=0;r<=o;r++,i++)t[i]=Number(a.charAt(r))}return n>22&&(t=t.splice(0,21),s=n-1,n=1),{digits:t,exponent:s,integerLen:n}}(e);a&&(c=function(e){if(0===e.digits[0])return e;var t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===t?e.digits.push(0,0):1===t&&e.digits.push(0),e.integerLen+=2),e}(c));var l=t.minInt,h=t.minFrac,d=t.maxFrac;if(o){var f=o.match(xl);if(null===f)throw new Error("".concat(o," is not a valid digit info"));var p=f[1],g=f[3],m=f[5];null!=p&&(l=Ol(p)),null!=g&&(h=Ol(g)),null!=m?d=Ol(m):null!=g&&h>d&&(d=h)}!function(e,t,n){if(t>n)throw new Error("The minimum number of digits after fraction (".concat(t,") is higher than the maximum (").concat(n,")."));var r=e.digits,i=r.length-e.integerLen,o=Math.min(Math.max(t,i),n),a=o+e.integerLen,s=r[a];if(a>0){r.splice(Math.max(e.integerLen,a));for(var u=a;u<r.length;u++)r[u]=0}else{i=Math.max(0,i),e.integerLen=1,r.length=Math.max(1,a=o+1),r[0]=0;for(var c=1;c<a;c++)r[c]=0}if(s>=5)if(a-1<0){for(var l=0;l>a;l--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[a-1]++;for(;i<Math.max(0,o);i++)r.push(0);var h=0!==o,d=t+e.integerLen,f=r.reduceRight((function(e,t,n,r){return r[n]=(t+=e)<10?t:t-10,h&&(0===r[n]&&n>=d?r.pop():h=!1),t>=10?1:0}),0);f&&(r.unshift(f),e.integerLen++)}(c,h,d);var v=c.digits,y=c.integerLen,b=c.exponent,_=[];for(u=v.every((function(e){return!e}));y<l;y++)v.unshift(0);for(;y<0;y++)v.unshift(0);y>0?_=v.splice(y,v.length):(_=v,v=[0]);var w=[];for(v.length>=t.lgSize&&w.unshift(v.splice(-t.lgSize,v.length).join(""));v.length>t.gSize;)w.unshift(v.splice(-t.gSize,v.length).join(""));v.length&&w.unshift(v.join("")),s=w.join(sl(n,r)),_.length&&(s+=sl(n,i)+_.join("")),b&&(s+=sl(n,rl.Exponential)+"+"+b)}else s=sl(n,rl.Infinity);return s=e<0&&!u?t.negPre+s+t.negSuf:t.posPre+s+t.posSuf}function Pl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(";"),i=r[0],o=r[1],a=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],s=a[0],u=a[1]||"";n.posPre=s.substr(0,s.indexOf("#"));for(var c=0;c<u.length;c++){var l=u.charAt(c);"0"===l?n.minFrac=n.maxFrac=c+1:"#"===l?n.maxFrac=c+1:n.posSuf+=l}var h=s.split(",");if(n.gSize=h[1]?h[1].length:0,n.lgSize=h[2]||h[1]?(h[2]||h[1]).length:0,o){var d=i.length-n.posPre.length-n.posSuf.length,f=o.indexOf("#");n.negPre=o.substr(0,f).replace(/'/g,""),n.negSuf=o.substr(f+d).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}function Ol(e){var t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}var Dl,Al=function e(){_classCallCheck(this,e)},Rl=((Dl=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).locale=e,n}return _inherits(t,e),_createClass(t,[{key:"getPluralCategory",value:function(e,t){switch(function(e){return Gs(e)[Ks.PluralCase]}(t||this.locale)(e)){case $c.Zero:return"zero";case $c.One:return"one";case $c.Two:return"two";case $c.Few:return"few";case $c.Many:return"many";default:return"other"}}}]),t}(Al)).\u0275fac=function(e){return new(e||Dl)(Xe(Fu))},Dl.\u0275prov=de({token:Dl,factory:Dl.\u0275fac}),Dl);function Nl(e,t){t=encodeURIComponent(t);var n=!0,r=!1,i=void 0;try{for(var o,a=e.split(";")[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,u=s.indexOf("="),c=_slicedToArray(-1==u?[s,""]:[s.slice(0,u),s.slice(u+1)],2),l=c[0],h=c[1];if(l.trim()===t)return decodeURIComponent(h)}}catch(d){r=!0,i=d}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return null}var Ml,Fl,Ll,Vl=((Ml=function(){function e(t,n,r,i){_classCallCheck(this,e),this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return _createClass(e,[{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}},{key:"_applyKeyValueChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachChangedItem((function(e){return t._toggleClass(e.key,e.currentValue)})),e.forEachRemovedItem((function(e){e.previousValue&&t._toggleClass(e.key,!1)}))}},{key:"_applyIterableChanges",value:function(e){var t=this;e.forEachAddedItem((function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got ".concat(Ce(e.item)));t._toggleClass(e.item,!0)})),e.forEachRemovedItem((function(e){return t._toggleClass(e.item,!1)}))}},{key:"_applyClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!0)})):Object.keys(e).forEach((function(n){return t._toggleClass(n,!!e[n])})))}},{key:"_removeClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach((function(e){return t._toggleClass(e,!1)})):Object.keys(e).forEach((function(e){return t._toggleClass(e,!1)})))}},{key:"_toggleClass",value:function(e,t){var n=this;(e=e.trim())&&e.split(/\s+/g).forEach((function(e){t?n._renderer.addClass(n._ngEl.nativeElement,e):n._renderer.removeClass(n._ngEl.nativeElement,e)}))}},{key:"klass",set:function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(ta(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}}]),e}()).\u0275fac=function(e){return new(e||Ml)(la(Is),la(Ps),la(ls),la(ps))},Ml.\u0275dir=bt({type:Ml,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),Ml),Ul=function(){function e(t,n,r,i){_classCallCheck(this,e),this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}return _createClass(e,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),e}(),jl=((Fl=function(){function e(t,n,r){_classCallCheck(this,e),this._viewContainer=t,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return _createClass(e,[{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'. NgFor only supports binding to Iterables such as Arrays."))}}var t;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(e){var t=this,n=[];e.forEachOperation((function(e,r,i){if(null==e.previousIndex){var o=t._viewContainer.createEmbeddedView(t._template,new Ul(null,t._ngForOf,-1,-1),null===i?void 0:i),a=new ql(e,o);n.push(a)}else if(null==i)t._viewContainer.remove(null===r?void 0:r);else if(null!==r){var s=t._viewContainer.get(r);t._viewContainer.move(s,i);var u=new ql(e,s);n.push(u)}}));for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,o=this._viewContainer.length;i<o;i++){var a=this._viewContainer.get(i);a.context.index=i,a.context.count=o,a.context.ngForOf=this._ngForOf}e.forEachIdentityChange((function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item}))}},{key:"_perViewChange",value:function(e,t){e.context.$implicit=t.item}},{key:"ngForOf",set:function(e){this._ngForOf=e,this._ngForOfDirty=!0}},{key:"ngForTrackBy",set:function(e){gr()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn("trackBy must be a function, but received ".concat(JSON.stringify(e),". ")+"See https://angular.io/api/common/NgForOf#change-propagation for more information."),this._trackByFn=e},get:function(){return this._trackByFn}},{key:"ngForTemplate",set:function(e){e&&(this._template=e)}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}()).\u0275fac=function(e){return new(e||Fl)(la(Ms),la(Rs),la(Is))},Fl.\u0275dir=bt({type:Fl,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),Fl),ql=function e(t,n){_classCallCheck(this,e),this.record=t,this.view=n},Bl=((Ll=function(){function e(t,n){_classCallCheck(this,e),this._viewContainer=t,this._context=new Wl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return _createClass(e,[{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}},{key:"ngIf",set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}},{key:"ngIfThen",set:function(e){zl("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(e){zl("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}()).\u0275fac=function(e){return new(e||Ll)(la(Ms),la(Rs))},Ll.\u0275dir=bt({type:Ll,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),Ll),Wl=function e(){_classCallCheck(this,e),this.$implicit=null,this.ngIf=null};function zl(e,t){if(t&&!t.createEmbeddedView)throw new Error("".concat(e," must be a TemplateRef, but received '").concat(Ce(t),"'."))}function Hl(e,t){return Error("InvalidPipeArgument: '".concat(t,"' for pipe '").concat(Ce(e),"'"))}var Gl,Ql,Kl,Yl=((Kl=function(){function e(t){_classCallCheck(this,e),this.locale=t}return _createClass(e,[{key:"transform",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mediumDate",r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(null==t||""===t||t!=t)return null;try{return function(e,t,n,r){var i=function(e){if(Tl(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){e=e.trim();var t,n=parseFloat(e);if(!isNaN(e-n))return new Date(n);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){var r=_slicedToArray(e.split("-").map((function(e){return+e})),3),i=r[0],o=r[1],a=r[2];return new Date(i,o-1,a)}if(t=e.match(dl))return function(e){var t=new Date(0),n=0,r=0,i=e[8]?t.setUTCFullYear:t.setFullYear,o=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));var a=Number(e[4]||0)-n,s=Number(e[5]||0)-r,u=Number(e[6]||0),c=Math.round(1e3*parseFloat("0."+(e[7]||0)));return o.call(t,a,s,u,c),t}(t)}var s=new Date(e);if(!Tl(s))throw new Error('Unable to convert "'.concat(e,'" into a date'));return s}(e);t=function e(t,n){var r=function(e){return Gs(e)[Ks.LocaleId]}(t);if(fl[r]=fl[r]||{},fl[r][n])return fl[r][n];var i="";switch(n){case"shortDate":i=il(t,nl.Short);break;case"mediumDate":i=il(t,nl.Medium);break;case"longDate":i=il(t,nl.Long);break;case"fullDate":i=il(t,nl.Full);break;case"shortTime":i=ol(t,nl.Short);break;case"mediumTime":i=ol(t,nl.Medium);break;case"longTime":i=ol(t,nl.Long);break;case"fullTime":i=ol(t,nl.Full);break;case"short":var o=e(t,"shortTime"),a=e(t,"shortDate");i=yl(al(t,nl.Short),[o,a]);break;case"medium":var s=e(t,"mediumTime"),u=e(t,"mediumDate");i=yl(al(t,nl.Medium),[s,u]);break;case"long":var c=e(t,"longTime"),l=e(t,"longDate");i=yl(al(t,nl.Long),[c,l]);break;case"full":var h=e(t,"fullTime"),d=e(t,"fullDate");i=yl(al(t,nl.Full),[h,d])}return i&&(fl[r][n]=i),i}(n,t)||t;for(var o,a=[];t;){if(!(o=pl.exec(t))){a.push(t);break}var s=(a=a.concat(o.slice(1))).pop();if(!s)break;t=s}var u=i.getTimezoneOffset();r&&(u=El(r,u),i=function(e,t,n){var r=e.getTimezoneOffset();return function(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,-1*(El(t,r)-r))}(i,r));var c="";return a.forEach((function(e){var t=function(e){if(Sl[e])return Sl[e];var t;switch(e){case"G":case"GG":case"GGG":t=wl(vl.Eras,tl.Abbreviated);break;case"GGGG":t=wl(vl.Eras,tl.Wide);break;case"GGGGG":t=wl(vl.Eras,tl.Narrow);break;case"y":t=_l(ml.FullYear,1,0,!1,!0);break;case"yy":t=_l(ml.FullYear,2,0,!0,!0);break;case"yyy":t=_l(ml.FullYear,3,0,!1,!0);break;case"yyyy":t=_l(ml.FullYear,4,0,!1,!0);break;case"M":case"L":t=_l(ml.Month,1,1);break;case"MM":case"LL":t=_l(ml.Month,2,1);break;case"MMM":t=wl(vl.Months,tl.Abbreviated);break;case"MMMM":t=wl(vl.Months,tl.Wide);break;case"MMMMM":t=wl(vl.Months,tl.Narrow);break;case"LLL":t=wl(vl.Months,tl.Abbreviated,el.Standalone);break;case"LLLL":t=wl(vl.Months,tl.Wide,el.Standalone);break;case"LLLLL":t=wl(vl.Months,tl.Narrow,el.Standalone);break;case"w":t=kl(1);break;case"ww":t=kl(2);break;case"W":t=kl(1,!0);break;case"d":t=_l(ml.Date,1);break;case"dd":t=_l(ml.Date,2);break;case"E":case"EE":case"EEE":t=wl(vl.Days,tl.Abbreviated);break;case"EEEE":t=wl(vl.Days,tl.Wide);break;case"EEEEE":t=wl(vl.Days,tl.Narrow);break;case"EEEEEE":t=wl(vl.Days,tl.Short);break;case"a":case"aa":case"aaa":t=wl(vl.DayPeriods,tl.Abbreviated);break;case"aaaa":t=wl(vl.DayPeriods,tl.Wide);break;case"aaaaa":t=wl(vl.DayPeriods,tl.Narrow);break;case"b":case"bb":case"bbb":t=wl(vl.DayPeriods,tl.Abbreviated,el.Standalone,!0);break;case"bbbb":t=wl(vl.DayPeriods,tl.Wide,el.Standalone,!0);break;case"bbbbb":t=wl(vl.DayPeriods,tl.Narrow,el.Standalone,!0);break;case"B":case"BB":case"BBB":t=wl(vl.DayPeriods,tl.Abbreviated,el.Format,!0);break;case"BBBB":t=wl(vl.DayPeriods,tl.Wide,el.Format,!0);break;case"BBBBB":t=wl(vl.DayPeriods,tl.Narrow,el.Format,!0);break;case"h":t=_l(ml.Hours,1,-12);break;case"hh":t=_l(ml.Hours,2,-12);break;case"H":t=_l(ml.Hours,1);break;case"HH":t=_l(ml.Hours,2);break;case"m":t=_l(ml.Minutes,1);break;case"mm":t=_l(ml.Minutes,2);break;case"s":t=_l(ml.Seconds,1);break;case"ss":t=_l(ml.Seconds,2);break;case"S":t=_l(ml.FractionalSeconds,1);break;case"SS":t=_l(ml.FractionalSeconds,2);break;case"SSS":t=_l(ml.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=Cl(gl.Short);break;case"ZZZZZ":t=Cl(gl.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=Cl(gl.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=Cl(gl.Long);break;default:return null}return Sl[e]=t,t}(e);c+=t?t(i,n,u):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),c}(t,n,i||this.locale,r)}catch(o){throw Hl(e,o.message)}}}]),e}()).\u0275fac=function(e){return new(e||Kl)(la(Fu))},Kl.\u0275pipe=_t({name:"date",type:Kl,pure:!0}),Kl),Xl=((Ql=function(){function e(t){_classCallCheck(this,e),this._locale=t}return _createClass(e,[{key:"transform",value:function(t,n,r){if(Zl(t))return null;r=r||this._locale;try{return function(e,t,n){return Il(e,Pl(ul(t,Zc.Percent),sl(t,rl.MinusSign)),t,rl.Group,rl.Decimal,n,!0).replace(new RegExp("%","g"),sl(t,rl.PercentSign))}($l(t),r,n)}catch(i){throw Hl(e,i.message)}}}]),e}()).\u0275fac=function(e){return new(e||Ql)(la(Fu))},Ql.\u0275pipe=_t({name:"percent",type:Ql,pure:!0}),Ql),Jl=((Gl=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";_classCallCheck(this,e),this._locale=t,this._defaultCurrencyCode=n}return _createClass(e,[{key:"transform",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"symbol",i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(Zl(t))return null;o=o||this._locale,"boolean"==typeof r&&(console&&console.warn&&console.warn('Warning: the currency pipe has been changed in Angular v5. The symbolDisplay option (third parameter) is now a string instead of a boolean. The accepted values are "code", "symbol" or "symbol-narrow".'),r=r?"symbol":"code");var a=n||this._defaultCurrencyCode;"code"!==r&&(a="symbol"===r||"symbol-narrow"===r?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en",r=function(e){return Gs(e)[Ks.Currencies]}(n)[e]||Jc[e]||[],i=r[1];return"narrow"===t&&"string"==typeof i?i:r[0]||e}(a,"symbol"===r?"wide":"narrow",o):r);try{return function(e,t,n,r,i){var o=Pl(ul(t,Zc.Currency),sl(t,rl.MinusSign));return o.minFrac=function(e){var t,n=Jc[e];return n&&(t=n[2]),"number"==typeof t?t:2}(r),o.maxFrac=o.minFrac,Il(e,o,t,rl.CurrencyGroup,rl.CurrencyDecimal,i).replace("\xa4",n).replace("\xa4","").trim()}($l(t),o,a,n,i)}catch(s){throw Hl(e,s.message)}}}]),e}()).\u0275fac=function(e){return new(e||Gl)(la(Fu),la(Lu))},Gl.\u0275pipe=_t({name:"currency",type:Gl,pure:!0}),Gl);function Zl(e){return null==e||""===e||e!=e}function $l(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error("".concat(e," is not a number"));return e}var eh,th,nh,rh,ih,oh,ah=((th=function e(){_classCallCheck(this,e)}).\u0275mod=vt({type:th}),th.\u0275inj=fe({factory:function(e){return new(e||th)},providers:[{provide:Al,useClass:Rl}]}),th),sh=((eh=function e(){_classCallCheck(this,e)}).\u0275prov=de({token:eh,providedIn:"root",factory:function(){return new uh(Xe(Ic),window,Xe(cr))}}),eh),uh=function(){function e(t,n,r){_classCallCheck(this,e),this.document=t,this.window=n,this.errorHandler=r,this.offset=function(){return[0,0]}}return _createClass(e,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var t=this.document.querySelector("#".concat(e));if(t)return void this.scrollToElement(t);var n=this.document.querySelector("[name='".concat(e,"']"));if(n)return void this.scrollToElement(n)}catch(r){this.errorHandler.handleError(r)}}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"supportScrollRestoration",value:function(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}}}]),e}(),ch=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"getProperty",value:function(e,t){return e[t]}},{key:"log",value:function(e){window.console&&window.console.log&&window.console.log(e)}},{key:"logGroup",value:function(e){window.console&&window.console.group&&window.console.group(e)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){return e.parentNode&&e.parentNode.removeChild(e),e}},{key:"getValue",value:function(e){return e.value}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(e){var t,n=lh||(lh=document.querySelector("base"))?lh.getAttribute("href"):null;return null==n?null:(t=n,nh||(nh=document.createElement("a")),nh.setAttribute("href",t),"/"===nh.pathname.charAt(0)?nh.pathname:"/"+nh.pathname)}},{key:"resetBaseElement",value:function(){lh=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(e){return Nl(document.cookie,e)}}],[{key:"makeCurrent",value:function(){var e;e=new t,Ec||(Ec=e)}}]),t}(function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))}return _inherits(t,e),_createClass(t,[{key:"supportsDOMEvents",value:function(){return!0}}]),t}(function(){return function e(){_classCallCheck(this,e)}}())),lh=null,hh=new qe("TRANSITION_ID"),dh=[{provide:xu,useFactory:function(e,t,n){return function(){n.get(Iu).donePromise.then((function(){var n=Tc();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter((function(t){return t.getAttribute("ng-transition")===e})).forEach((function(e){return n.remove(e)}))}))}},deps:[hh,Ic,Ho],multi:!0}],fh=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addToWindow",value:function(e){Re.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},Re.getAllAngularTestabilities=function(){return e.getAllTestabilities()},Re.getAllAngularRootElements=function(){return e.getAllRootElements()},Re.frameworkStabilizers||(Re.frameworkStabilizers=[]),Re.frameworkStabilizers.push((function(e){var t=Re.getAllAngularTestabilities(),n=t.length,r=!1,i=function(t){r=r||t,0==--n&&e(r)};t.forEach((function(e){e.whenStable(i)}))}))}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?Tc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){var t;t=new e,ac=t}}]),e}(),ph=new qe("EventManagerPlugins"),gh=((rh=function(){function e(t,n){var r=this;_classCallCheck(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach((function(e){return e.manager=r})),this._plugins=t.slice().reverse()}return _createClass(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event ".concat(e))}}]),e}()).\u0275fac=function(e){return new(e||rh)(Xe(ph),Xe(Yu))},rh.\u0275prov=de({token:rh,factory:rh.\u0275fac}),rh),mh=function(){function e(t){_classCallCheck(this,e),this._doc=t}return _createClass(e,[{key:"addGlobalEventListener",value:function(e,t,n){var r=Tc().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(t));return this.addEventListener(r,t,n)}}]),e}(),vh=((oh=function(){function e(){_classCallCheck(this,e),this._stylesSet=new Set}return _createClass(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach((function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))})),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}()).\u0275fac=function(e){return new(e||oh)},oh.\u0275prov=de({token:oh,factory:oh.\u0275fac}),oh),yh=((ih=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._doc=e,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(e.head),n}return _inherits(t,e),_createClass(t,[{key:"_addStylesToHost",value:function(e,t){var n=this;e.forEach((function(e){var r=n._doc.createElement("style");r.textContent=e,n._styleNodes.add(t.appendChild(r))}))}},{key:"addHost",value:function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)}},{key:"removeHost",value:function(e){this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach((function(n){return t._addStylesToHost(e,n)}))}},{key:"ngOnDestroy",value:function(){this._styleNodes.forEach((function(e){return Tc().remove(e)}))}}]),t}(vh)).\u0275fac=function(e){return new(e||ih)(Xe(Ic))},ih.\u0275prov=de({token:ih,factory:ih.\u0275fac}),ih),bh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},_h=/%COMP%/g;function wh(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?wh(e,i,n):(i=i.replace(_h,e),n.push(i))}return n}function Ch(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var kh,Sh,Eh,Th,xh=((kh=function(){function e(t,n,r){_classCallCheck(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Ih(t)}return _createClass(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case ct.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new Ph(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case ct.Native:case ct.ShadowDom:return new Oh(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=wh(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||kh)(Xe(gh),Xe(yh),Xe(Pu))},kh.\u0275prov=de({token:kh,factory:kh.\u0275fac}),kh),Ih=function(){function e(t){_classCallCheck(this,e),this.eventManager=t,this.data=Object.create(null)}return _createClass(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(bh[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,r){if(r){t=r+":"+t;var i=bh[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var r=bh[n];r?e.removeAttributeNS(r,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,r){r&fs.DashCase?e.style.setProperty(t,n,r&fs.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&fs.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ch(n)):this.eventManager.addEventListener(e,t,Ch(n))}}]),e}(),Ph=function(e){function t(e,n,r,i){var o;_classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).component=r;var a,s=wh(i+"-"+r.id,r.styles,[]);return n.addStyles(s),o.contentAttr="_ngcontent-%COMP%".replace(_h,i+"-"+r.id),o.hostAttr=(a=i+"-"+r.id,"_nghost-%COMP%".replace(_h,a)),o}return _inherits(t,e),_createClass(t,[{key:"applyToHost",value:function(e){_get(_getPrototypeOf(t.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,n){var r=_get(_getPrototypeOf(t.prototype),"createElement",this).call(this,e,n);return _get(_getPrototypeOf(t.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),t}(Ih),Oh=function(e){function t(e,n,r,i){var o;_classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).sharedStylesHost=n,o.hostEl=r,o.component=i,o.shadowRoot=i.encapsulation===ct.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var a=wh(i.id,i.styles,[]),s=0;s<a.length;s++){var u=document.createElement("style");u.textContent=a[s],o.shadowRoot.appendChild(u)}return o}return _inherits(t,e),_createClass(t,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,n){return _get(_getPrototypeOf(t.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),n)}},{key:"insertBefore",value:function(e,n,r){return _get(_getPrototypeOf(t.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),n,r)}},{key:"removeChild",value:function(e,n){return _get(_getPrototypeOf(t.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),n)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(_get(_getPrototypeOf(t.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),t}(Ih),Dh=((Sh=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var r=this;return e.addEventListener(t,n,!1),function(){return r.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){return e.removeEventListener(t,n)}}]),t}(mh)).\u0275fac=function(e){return new(e||Sh)(Xe(Ic))},Sh.\u0275prov=de({token:Sh,factory:Sh.\u0275fac}),Sh),Ah=["alt","control","meta","shift"],Rh={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Nh={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Mh={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},Fh=((Eh=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))}return _inherits(t,e),_createClass(t,[{key:"supports",value:function(e){return null!=t.parseEventName(e)}},{key:"addEventListener",value:function(e,n,r){var i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular((function(){return Tc().onAndCancel(e,i.domEventName,o)}))}}],[{key:"parseEventName",value:function(e){var n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;var i=t._normalizeKey(n.pop()),o="";if(Ah.forEach((function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),o+=e+".")})),o+=i,0!=n.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a}},{key:"getEventFullKey",value:function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Nh.hasOwnProperty(t)&&(t=Nh[t]))}return Rh[t]||t}(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),Ah.forEach((function(r){r!=n&&(0,Mh[r])(e)&&(t+=r+".")})),t+=n}},{key:"eventCallback",value:function(e,n,r){return function(i){t.getEventFullKey(i)===e&&r.runGuarded((function(){return n(i)}))}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),t}(mh)).\u0275fac=function(e){return new(e||Eh)(Xe(Ic))},Eh.\u0275prov=de({token:Eh,factory:Eh.\u0275fac}),Eh),Lh=lc(Cc,"browser",[{provide:Ru,useValue:"browser"},{provide:Au,useValue:function(){ch.makeCurrent(),fh.init()},multi:!0},{provide:Ic,useFactory:function(){return function(e){Dt=e}(document),document},deps:[]}]),Vh=[[],{provide:Do,useValue:"root"},{provide:cr,useFactory:function(){return new cr},deps:[]},{provide:ph,useClass:Dh,multi:!0,deps:[Ic,Yu,Ru]},{provide:ph,useClass:Fh,multi:!0,deps:[Ic]},[],{provide:xh,useClass:xh,deps:[gh,yh,Pu]},{provide:ds,useExisting:xh},{provide:vh,useExisting:yh},{provide:yh,useClass:yh,deps:[Ic]},{provide:ic,useClass:ic,deps:[Yu]},{provide:gh,useClass:gh,deps:[ph,Yu]},[]],Uh=((Th=function(){function e(t){if(_classCallCheck(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return _createClass(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:Pu,useValue:t.appId},{provide:hh,useExisting:Pu},dh]}}}]),e}()).\u0275mod=vt({type:Th}),Th.\u0275inj=fe({factory:function(e){return new(e||Th)(Xe(Th,12))},providers:Vh,imports:[ah,Sc]}),Th);function jh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return O(r)?(t.pop(),B(t,r)):Y(t)}"undefined"!=typeof window&&window;var qh=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._value=e,n}return _inherits(t,e),_createClass(t,[{key:"_subscribe",value:function(e){var n=_get(_getPrototypeOf(t.prototype),"_subscribe",this).call(this,e);return n&&!n.closed&&e.next(this._value),n}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new E;return this._value}},{key:"next",value:function(e){_get(_getPrototypeOf(t.prototype),"next",this).call(this,this._value=e)}},{key:"value",get:function(){return this.getValue()}}]),t}(I),Bh=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),Wh={},zh=function(){function e(t){_classCallCheck(this,e),this.resultSelector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Hh(e,this.resultSelector))}}]),e}(),Hh=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.values.push(Wh),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(L(this,r,r,n))}}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,n,r,i){var o=this.values,a=this.toRespond?o[n]===Wh?--this.toRespond:this.toRespond:0;o[n]=t,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),t}(V),Gh=new C((function(e){return e.complete()}));function Qh(e){return e?function(e){return new C((function(t){return e.schedule((function(){return t.complete()}))}))}(e):Gh}function Kh(e){return new C((function(t){var n;try{n=e()}catch(r){return void t.error(r)}return(n?W(n):Qh()).subscribe(t)}))}function Yh(){return K(1)}function Xh(e,t){return function(n){return n.lift(new Jh(e,t))}}var Jh=function(){function e(t,n){_classCallCheck(this,e),this.predicate=t,this.thisArg=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Zh(e,this.predicate,this.thisArg))}}]),e}(),Zh=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).predicate=n,i.thisArg=r,i.count=0,i}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}]),t}(g),$h=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}();function ed(e){return function(t){return 0===e?Qh():t.lift(new td(e))}}var td=function(){function e(t){if(_classCallCheck(this,e),this.total=t,this.total<0)throw new $h}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new nd(e,this.total))}}]),e}(),nd=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).total=n,r.ring=new Array,r.count=0,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=t++%n;e.next(r[o])}e.complete()}}]),t}(g);function rd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ad;return function(t){return t.lift(new id(e))}}var id=function(){function e(t){_classCallCheck(this,e),this.errorFactory=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new od(e,this.errorFactory))}}]),e}(),od=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).errorFactory=n,r.hasValue=!1,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.hasValue=!0,this.destination.next(e)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}]),t}(g);function ad(){return new Bh}function sd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new ud(e))}}var ud=function(){function e(t){_classCallCheck(this,e),this.defaultValue=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new cd(e,this.defaultValue))}}]),e}(),cd=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).defaultValue=n,r.isEmpty=!0,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),t}(g);function ld(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Xh((function(t,n){return e(t,n,r)})):Q,ed(1),n?sd(t):rd((function(){return new Bh})))}}function hd(e){return function(t){var n=new dd(e),r=t.lift(n);return n.caught=r}}var dd=function(){function e(t){_classCallCheck(this,e),this.selector=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new fd(e,this.selector,this.caught))}}]),e}(),fd=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).selector=n,i.caught=r,i}return _inherits(t,e),_createClass(t,[{key:"error",value:function(e){if(!this.isStopped){var n;try{n=this.selector(e,this.caught)}catch(o){return void _get(_getPrototypeOf(t.prototype),"error",this).call(this,o)}this._unsubscribeAndRecycle();var r=new D(this,void 0,void 0);this.add(r);var i=L(this,n,void 0,void 0,r);i!==r&&this.add(i)}}}]),t}(V);function pd(e){return function(t){return 0===e?Qh():t.lift(new gd(e))}}var gd=function(){function e(t){if(_classCallCheck(this,e),this.total=t,this.total<0)throw new $h}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new md(e,this.total))}}]),e}(),md=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).total=n,r.count=0,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}]),t}(g);function vd(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Xh((function(t,n){return e(t,n,r)})):Q,pd(1),n?sd(t):rd((function(){return new Bh})))}}var yd=function(){function e(t,n,r){_classCallCheck(this,e),this.predicate=t,this.thisArg=n,this.source=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new bd(e,this.predicate,this.thisArg,this.source))}}]),e}(),bd=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||_assertThisInitialized(o),o}return _inherits(t,e),_createClass(t,[{key:"notifyComplete",value:function(e){this.destination.next(e),this.destination.complete()}},{key:"_next",value:function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(n){return void this.destination.error(n)}t||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),t}(g);function _d(e,t){return"function"==typeof t?function(n){return n.pipe(_d((function(n,r){return W(e(n,r)).pipe(U((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new wd(e))}}var wd=function(){function e(t){_classCallCheck(this,e),this.project=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Cd(e,this.project))}}]),e}(),Cd=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).project=n,r.index=0,r}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new D(this,t,n),o=this.destination;o.add(i),this.innerSubscription=L(this,e,void 0,void 0,i),this.innerSubscription!==i&&o.add(this.innerSubscription)}},{key:"_complete",value:function(){var e=this.innerSubscription;e&&!e.closed||_get(_getPrototypeOf(t.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=null}},{key:"notifyComplete",value:function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&_get(_getPrototypeOf(t.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}}]),t}(V);function kd(){return Yh()(jh.apply(void 0,arguments))}function Sd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return O(r)?(t.pop(),function(e){return kd(t,e,r)}):function(e){return kd(t,e)}}function Ed(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Td(e,t,n))}}var Td=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,e),this.accumulator=t,this.seed=n,this.hasSeed=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new xd(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),xd=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)}},{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}}]),t}(g);function Id(e,t){return z(e,t,1)}function Pd(e,t,n){return function(r){return r.lift(new Dd(e,t,n))}}var Od,Dd=function(){function e(t,n,r){_classCallCheck(this,e),this.nextOrObserver=t,this.error=n,this.complete=r}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Ad(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),Ad=function(e){function t(e,n,i,o){var a;return _classCallCheck(this,t),(a=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e)))._tapNext=y,a._tapError=y,a._tapComplete=y,a._tapError=i||y,a._tapComplete=o||y,r(n)?(a._context=_assertThisInitialized(a),a._tapNext=n):n&&(a._context=n,a._tapNext=n.next||y,a._tapError=n.error||y,a._tapComplete=n.complete||y),a}return _inherits(t,e),_createClass(t,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),t}(g),Rd=function(){function e(t){_classCallCheck(this,e),this.callback=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new Nd(e,this.callback))}}]),e}(),Nd=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).add(new d(n)),r}return _inherits(t,e),t}(g),Md=function e(t,n){_classCallCheck(this,e),this.id=t,this.url=n},Fd=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).navigationTrigger=i,r.restoredState=o,r}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),t}(Md),Ld=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).urlAfterRedirects=r,i}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),t}(Md),Vd=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).reason=r,i}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),t}(Md),Ud=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).error=r,i}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),t}(Md),jd=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).urlAfterRedirects=r,o.state=i,o}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(Md),qd=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).urlAfterRedirects=r,o.state=i,o}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(Md),Bd=function(e){function t(e,n,r,i,o){var a;return _classCallCheck(this,t),(a=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).urlAfterRedirects=r,a.state=i,a.shouldActivate=o,a}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),t}(Md),Wd=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).urlAfterRedirects=r,o.state=i,o}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(Md),zd=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).urlAfterRedirects=r,o.state=i,o}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),t}(Md),Hd=function(){function e(t){_classCallCheck(this,e),this.route=t}return _createClass(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),Gd=function(){function e(t){_classCallCheck(this,e),this.route=t}return _createClass(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),Qd=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Kd=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Yd=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Xd=function(){function e(t){_classCallCheck(this,e),this.snapshot=t}return _createClass(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Jd=function(){function e(t,n,r){_classCallCheck(this,e),this.routerEvent=t,this.position=n,this.anchor=r}return _createClass(e,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),e}(),Zd=((Od=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Od)},Od.\u0275cmp=ft({type:Od,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&va(0,"router-outlet")},directives:function(){return[lg]},encapsulation:2}),Od),$d=function(){function e(t){_classCallCheck(this,e),this.params=t||{}}return _createClass(e,[{key:"has",value:function(e){return this.params.hasOwnProperty(e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function ef(e){return new $d(e)}function tf(e){var t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function nf(e,t,n){var r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],s=e[o];if(a.startsWith(":"))i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}var rf=function e(t,n){_classCallCheck(this,e),this.routes=t,this.module=n};function of(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<e.length;n++){var r=e[n];af(r,sf(t,r))}}function af(e,t){if(!e)throw new Error("\n      Invalid configuration of route '".concat(t,"': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    "));if(Array.isArray(e))throw new Error("Invalid configuration of route '".concat(t,"': Array cannot be specified"));if(!e.component&&!e.children&&!e.loadChildren&&e.outlet&&"primary"!==e.outlet)throw new Error("Invalid configuration of route '".concat(t,"': a componentless route without children or loadChildren cannot have a named outlet set"));if(e.redirectTo&&e.children)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and children cannot be used together"));if(e.redirectTo&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and loadChildren cannot be used together"));if(e.children&&e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"': children and loadChildren cannot be used together"));if(e.redirectTo&&e.component)throw new Error("Invalid configuration of route '".concat(t,"': redirectTo and component cannot be used together"));if(e.path&&e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': path and matcher cannot be used together"));if(void 0===e.redirectTo&&!e.component&&!e.children&&!e.loadChildren)throw new Error("Invalid configuration of route '".concat(t,"'. One of the following must be provided: component, redirectTo, children or loadChildren"));if(void 0===e.path&&void 0===e.matcher)throw new Error("Invalid configuration of route '".concat(t,"': routes must have either a path or a matcher specified"));if("string"==typeof e.path&&"/"===e.path.charAt(0))throw new Error("Invalid configuration of route '".concat(t,"': path cannot start with a slash"));if(""===e.path&&void 0!==e.redirectTo&&void 0===e.pathMatch)throw new Error("Invalid configuration of route '{path: \"".concat(t,'", redirectTo: "').concat(e.redirectTo,"\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'."));if(void 0!==e.pathMatch&&"full"!==e.pathMatch&&"prefix"!==e.pathMatch)throw new Error("Invalid configuration of route '".concat(t,"': pathMatch can only be set to 'prefix' or 'full'"));e.children&&of(e.children,t)}function sf(e,t){return t?e||t.path?e&&!t.path?"".concat(e,"/"):!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function uf(e){var t=e.children&&e.children.map(uf),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Zd),n}function cf(e,t){var n,r=Object.keys(e),i=Object.keys(t);if(!r||!i||r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(!lf(e[n=r[o]],t[n]))return!1;return!0}function lf(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length==t.length&&e.every((function(e){return t.indexOf(e)>-1})):e===t}function hf(e){return Array.prototype.concat.apply([],e)}function df(e){return e.length>0?e[e.length-1]:null}function ff(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function pf(e){return _a(e)?e:ba(e)?W(Promise.resolve(e)):jh(e)}function gf(e,t,n){return n?function(e,t){return cf(e,t)}(e.queryParams,t.queryParams)&&function e(t,n){if(!bf(t.segments,n.segments))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(var r in n.children){if(!t.children[r])return!1;if(!e(t.children[r],n.children[r]))return!1}return!0}(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every((function(n){return lf(e[n],t[n])}))}(e.queryParams,t.queryParams)&&function e(t,n){return function t(n,r,i){if(n.segments.length>i.length)return!!bf(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!bf(n.segments,i))return!1;for(var o in r.children){if(!n.children[o])return!1;if(!e(n.children[o],r.children[o]))return!1}return!0}var a=i.slice(0,n.segments.length),s=i.slice(n.segments.length);return!!bf(n.segments,a)&&!!n.children.primary&&t(n.children.primary,r,s)}(t,n,n.segments)}(e.root,t.root)}var mf=function(){function e(t,n,r){_classCallCheck(this,e),this.root=t,this.queryParams=n,this.fragment=r}return _createClass(e,[{key:"toString",value:function(){return kf.serialize(this)}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=ef(this.queryParams)),this._queryParamMap}}]),e}(),vf=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.segments=t,this.children=n,this.parent=null,ff(n,(function(e,t){return e.parent=r}))}return _createClass(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"toString",value:function(){return Sf(this)}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}}]),e}(),yf=function(){function e(t,n){_classCallCheck(this,e),this.path=t,this.parameters=n}return _createClass(e,[{key:"toString",value:function(){return Of(this)}},{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=ef(this.parameters)),this._parameterMap}}]),e}();function bf(e,t){return e.length===t.length&&e.every((function(e,n){return e.path===t[n].path}))}function _f(e,t){var n=[];return ff(e.children,(function(e,r){"primary"===r&&(n=n.concat(t(e,r)))})),ff(e.children,(function(e,r){"primary"!==r&&(n=n.concat(t(e,r)))})),n}var wf=function e(){_classCallCheck(this,e)},Cf=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"parse",value:function(e){var t=new Mf(e);return new mf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){var t,n,r;return"".concat("/".concat(function e(t,n){if(!t.hasChildren())return Sf(t);if(n){var r=t.children.primary?e(t.children.primary,!1):"",i=[];return ff(t.children,(function(t,n){"primary"!==n&&i.push("".concat(n,":").concat(e(t,!1)))})),i.length>0?"".concat(r,"(").concat(i.join("//"),")"):r}var o=_f(t,(function(n,r){return"primary"===r?[e(t.children.primary,!1)]:["".concat(r,":").concat(e(n,!1))]}));return"".concat(Sf(t),"/(").concat(o.join("//"),")")}(e.root,!0)),(n=e.queryParams,r=Object.keys(n).map((function(e){var t=n[e];return Array.isArray(t)?t.map((function(t){return"".concat(Tf(e),"=").concat(Tf(t))})).join("&"):"".concat(Tf(e),"=").concat(Tf(t))})),r.length?"?".concat(r.join("&")):"")).concat("string"==typeof e.fragment?"#".concat((t=e.fragment,encodeURI(t))):"")}}]),e}(),kf=new Cf;function Sf(e){return e.segments.map((function(e){return Of(e)})).join("/")}function Ef(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Tf(e){return Ef(e).replace(/%3B/gi,";")}function xf(e){return Ef(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function If(e){return decodeURIComponent(e)}function Pf(e){return If(e.replace(/\+/g,"%20"))}function Of(e){return"".concat(xf(e.path)).concat((t=e.parameters,Object.keys(t).map((function(e){return";".concat(xf(e),"=").concat(xf(t[e]))})).join("")));var t}var Df=/^[^\/()?;=#]+/;function Af(e){var t=e.match(Df);return t?t[0]:""}var Rf=/^[^=?&#]+/,Nf=/^[^?&#]+/,Mf=function(){function e(t){_classCallCheck(this,e),this.url=t,this.remaining=t}return _createClass(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vf([],{}):new vf([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new vf(e,t)),n}},{key:"parseSegment",value:function(){var e=Af(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new yf(If(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=Af(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=Af(this.remaining);r&&(n=r,this.capture(n))}e[If(t)]=If(n)}}},{key:"parseQueryParam",value:function(e){var t=function(e){var t=e.match(Rf);return t?t[0]:""}(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=function(e){var t=e.match(Nf);return t?t[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=Pf(t),o=Pf(n);if(e.hasOwnProperty(i)){var a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(o)}else e[i]=o}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Af(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i="primary");var o=this.parseChildren();t[i]=1===Object.keys(o).length?o.primary:new vf([],o),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),Ff=function(){function e(t){_classCallCheck(this,e),this._root=t}return _createClass(e,[{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=Lf(e,this._root);return t?t.children.map((function(e){return e.value})):[]}},{key:"firstChild",value:function(e){var t=Lf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=Vf(e,this._root);return t.length<2?[]:t[t.length-2].children.map((function(e){return e.value})).filter((function(t){return t!==e}))}},{key:"pathFromRoot",value:function(e){return Vf(e,this._root).map((function(e){return e.value}))}},{key:"root",get:function(){return this._root.value}}]),e}();function Lf(e,t){if(e===t.value)return t;var n=!0,r=!1,i=void 0;try{for(var o,a=t.children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=Lf(e,o.value);if(s)return s}}catch(u){r=!0,i=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return null}function Vf(e,t){if(e===t.value)return[t];var n=!0,r=!1,i=void 0;try{for(var o,a=t.children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=Vf(e,o.value);if(s.length)return s.unshift(t),s}}catch(u){r=!0,i=u}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return[]}var Uf=function(){function e(t,n){_classCallCheck(this,e),this.value=t,this.children=n}return _createClass(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function jf(e){var t={};return e&&e.children.forEach((function(e){return t[e.value.outlet]=e})),t}var qf=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))).snapshot=n,Qf(_assertThisInitialized(r),e),r}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return this.snapshot.toString()}}]),t}(Ff);function Bf(e,t){var n=function(e,t){var n=new Hf([],{},{},"",{},"primary",t,null,e.root,-1,{});return new Gf("",new Uf(n,[]))}(e,t),r=new qh([new yf("",{})]),i=new qh({}),o=new qh({}),a=new qh({}),s=new qh(""),u=new Wf(r,i,a,s,o,"primary",t,n.root);return u.snapshot=n.root,new qf(new Uf(u,[]),n)}var Wf=function(){function e(t,n,r,i,o,a,s,u){_classCallCheck(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this._futureSnapshot=u}return _createClass(e,[{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}},{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(U((function(e){return ef(e)})))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(U((function(e){return ef(e)})))),this._queryParamMap}}]),e}();function zf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=e.pathFromRoot,r=0;if("always"!==t)for(r=n.length-1;r>=1;){var i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(e){return e.reduce((function(e,t){return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}}),{params:{},data:{},resolve:{}})}(n.slice(r))}var Hf=function(){function e(t,n,r,i,o,a,s,u,c,l,h){_classCallCheck(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=h}return _createClass(e,[{key:"toString",value:function(){return"Route(url:'".concat(this.url.map((function(e){return e.toString()})).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=ef(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=ef(this.queryParams)),this._queryParamMap}}]),e}(),Gf=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n))).url=e,Qf(_assertThisInitialized(r),n),r}return _inherits(t,e),_createClass(t,[{key:"toString",value:function(){return Kf(this._root)}}]),t}(Ff);function Qf(e,t){t.value._routerState=e,t.children.forEach((function(t){return Qf(e,t)}))}function Kf(e){var t=e.children.length>0?" { ".concat(e.children.map(Kf).join(", ")," } "):"";return"".concat(e.value).concat(t)}function Yf(e){if(e.snapshot){var t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,cf(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),cf(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!cf(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),cf(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Xf(e,t){var n,r;return cf(e.params,t.params)&&bf(n=e.url,r=t.url)&&n.every((function(e,t){return cf(e.parameters,r[t].parameters)}))&&!(!e.parent!=!t.parent)&&(!e.parent||Xf(e.parent,t.parent))}function Jf(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Zf(e,t,n,r,i){var o={};return r&&ff(r,(function(e,t){o[t]=Array.isArray(e)?e.map((function(e){return"".concat(e)})):"".concat(e)})),new mf(n.root===e?t:function e(t,n,r){var i={};return ff(t.children,(function(t,o){i[o]=t===n?r:e(t,n,r)})),new vf(t.segments,i)}(n.root,e,t),o,i)}var $f=function(){function e(t,n,r){if(_classCallCheck(this,e),this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Jf(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find((function(e){return"object"==typeof e&&null!=e&&e.outlets}));if(i&&i!==df(r))throw new Error("{outlets:{}} has to be the last command")}return _createClass(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),ep=function e(t,n,r){_classCallCheck(this,e),this.segmentGroup=t,this.processChildren=n,this.index=r};function tp(e){return"object"==typeof e&&null!=e&&e.outlets?e.outlets.primary:"".concat(e)}function np(e,t,n){if(e||(e=new vf([],{})),0===e.segments.length&&e.hasChildren())return rp(e,t,n);var r=function(e,t,n){for(var r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};i<e.segments.length;){if(r>=n.length)return o;var a=e.segments[i],s=tp(n[r]),u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&u&&"object"==typeof u&&void 0===u.outlets){if(!sp(s,u,a))return o;r+=2}else{if(!sp(s,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){var o=new vf(e.segments.slice(0,r.pathIndex),{});return o.children.primary=new vf(e.segments.slice(r.pathIndex),e.children),rp(o,0,i)}return r.match&&0===i.length?new vf(e.segments,{}):r.match&&!e.hasChildren()?ip(e,t,n):r.match?rp(e,0,i):ip(e,t,n)}function rp(e,t,n){if(0===n.length)return new vf(e.segments,{});var r=function(e){return"object"!=typeof e[0]?{primary:e}:void 0===e[0].outlets?{primary:e}:e[0].outlets}(n),i={};return ff(r,(function(n,r){null!==n&&(i[r]=np(e.children[r],t,n))})),ff(e.children,(function(e,t){void 0===r[t]&&(i[t]=e)})),new vf(e.segments,i)}function ip(e,t,n){for(var r=e.segments.slice(0,t),i=0;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){var o=op(n[i].outlets);return new vf(r,o)}if(0===i&&Jf(n[0]))r.push(new yf(e.segments[t].path,n[0])),i++;else{var a=tp(n[i]),s=i<n.length-1?n[i+1]:null;a&&s&&Jf(s)?(r.push(new yf(a,ap(s))),i+=2):(r.push(new yf(a,{})),i++)}}return new vf(r,{})}function op(e){var t={};return ff(e,(function(e,n){null!==e&&(t[n]=ip(new vf([],{}),0,e))})),t}function ap(e){var t={};return ff(e,(function(e,n){return t[n]="".concat(e)})),t}function sp(e,t,n){return e==n.path&&cf(t,n.parameters)}var up=function(){function e(t,n,r,i){_classCallCheck(this,e),this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}return _createClass(e,[{key:"activate",value:function(e){var t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Yf(this.futureState.root),this.activateChildRoutes(t,n,e)}},{key:"deactivateChildRoutes",value:function(e,t,n){var r=this,i=jf(t);e.children.forEach((function(e){var t=e.value.outlet;r.deactivateRoutes(e,i[t],n),delete i[t]})),ff(i,(function(e,t){r.deactivateRouteAndItsChildren(e,n)}))}},{key:"deactivateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var n=t.getContext(e.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:r,route:e,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){var n=this,r=t.getContext(e.value.outlet);if(r){var i=jf(e),o=e.value.component?r.children:t;ff(i,(function(e,t){return n.deactivateRouteAndItsChildren(e,o)})),r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated())}}},{key:"activateChildRoutes",value:function(e,t,n){var r=this,i=jf(t);e.children.forEach((function(e){r.activateRoutes(e,i[e.value.outlet],n),r.forwardEvent(new Xd(e.value.snapshot))})),e.children.length&&this.forwardEvent(new Kd(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(Yf(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,n);else if(r.component){var a=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),cp(s.route)}else{var u=function(e){for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=u?u.module.componentFactoryResolver:null;a.attachRef=null,a.route=r,a.resolver=c,a.outlet&&a.outlet.activateWith(r,c),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,n)}}]),e}();function cp(e){Yf(e.value),e.children.forEach(cp)}function lp(e){return"function"==typeof e}function hp(e){return e instanceof mf}var dp=function e(t){_classCallCheck(this,e),this.segmentGroup=t||null},fp=function e(t){_classCallCheck(this,e),this.urlTree=t};function pp(e){return new C((function(t){return t.error(new dp(e))}))}function gp(e){return new C((function(t){return t.error(new fp(e))}))}function mp(e){return new C((function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))}))}var vp=function(){function e(t,n,r,i,o){_classCallCheck(this,e),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(et)}return _createClass(e,[{key:"apply",value:function(){var e=this;return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(U((function(t){return e.createUrlTree(t,e.urlTree.queryParams,e.urlTree.fragment)}))).pipe(hd((function(t){if(t instanceof fp)return e.allowRedirects=!1,e.match(t.urlTree);if(t instanceof dp)throw e.noMatchError(t);throw t})))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,"primary").pipe(U((function(n){return t.createUrlTree(n,e.queryParams,e.fragment)}))).pipe(hd((function(e){if(e instanceof dp)throw t.noMatchError(e);throw e})))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(e,t,n){var r=e.segments.length>0?new vf([],{primary:e}):e;return new mf(r,t,n)}},{key:"expandSegmentGroup",value:function(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(U((function(e){return new vf([],e)}))):this.expandSegment(e,n,t,n.segments,r,!0)}},{key:"expandChildren",value:function(e,t,n){var r=this;return function(n,i){if(0===Object.keys(n).length)return jh({});var o=[],a=[],s={};return ff(n,(function(n,i){var u,c,l=(u=i,c=n,r.expandSegmentGroup(e,t,c,u)).pipe(U((function(e){return s[i]=e})));"primary"===i?o.push(l):a.push(l)})),jh.apply(null,o.concat(a)).pipe(Yh(),ld(),U((function(){return s})))}(n.children)}},{key:"expandSegment",value:function(e,t,n,r,i,o){var a=this;return jh.apply(void 0,_toConsumableArray(n)).pipe(U((function(s){return a.expandSegmentAgainstRoute(e,t,n,s,r,i,o).pipe(hd((function(e){if(e instanceof dp)return jh(null);throw e})))})),Yh(),vd((function(e){return!!e})),hd((function(e,n){if(e instanceof Bh||"EmptyError"===e.name){if(a.noLeftoversInUrl(t,r,i))return jh(new vf([],{}));throw new dp(t)}throw e})))}},{key:"noLeftoversInUrl",value:function(e,t,n){return 0===t.length&&!e.children[n]}},{key:"expandSegmentAgainstRoute",value:function(e,t,n,r,i,o,a){return wp(r)!==o?pp(t):void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o):pp(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?gp(o):this.lineralizeSegments(n,o).pipe(z((function(n){var o=new vf(n,{});return i.expandSegment(e,o,t,n,r,!1)})))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,o){var a=this,s=yp(t,r,i),u=s.matched,c=s.consumedSegments,l=s.lastChild,h=s.positionalParamSegments;if(!u)return pp(t);var d=this.applyRedirectCommands(c,r.redirectTo,h);return r.redirectTo.startsWith("/")?gp(d):this.lineralizeSegments(r,d).pipe(z((function(r){return a.expandSegment(e,t,n,r.concat(i.slice(l)),o,!1)})))}},{key:"matchSegmentAgainstRoute",value:function(e,t,n,r){var i=this;if("**"===n.path)return n.loadChildren?this.configLoader.load(e.injector,n).pipe(U((function(e){return n._loadedConfig=e,new vf(r,{})}))):jh(new vf(r,{}));var o=yp(t,n,r),a=o.matched,s=o.consumedSegments,u=o.lastChild;if(!a)return pp(t);var c=r.slice(u);return this.getChildConfig(e,n,r).pipe(z((function(e){var n=e.module,r=e.routes,o=function(e,t,n,r){return n.length>0&&function(e,t,n){return n.some((function(n){return _p(e,t,n)&&"primary"!==wp(n)}))}(e,n,r)?{segmentGroup:bp(new vf(t,function(e,t){var n={};n.primary=t;var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;""===u.path&&"primary"!==wp(u)&&(n[wp(u)]=new vf([],{}))}}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(r,new vf(n,e.children)))),slicedSegments:[]}:0===n.length&&function(e,t,n){return n.some((function(n){return _p(e,t,n)}))}(e,n,r)?{segmentGroup:bp(new vf(e.segments,function(e,t,n,r){var i={},o=!0,a=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;_p(e,t,l)&&!r[wp(l)]&&(i[wp(l)]=new vf([],{}))}}catch(h){a=!0,s=h}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}return Object.assign(Object.assign({},r),i)}(e,n,r,e.children))),slicedSegments:n}:{segmentGroup:e,slicedSegments:n}}(t,s,c,r),a=o.segmentGroup,u=o.slicedSegments;return 0===u.length&&a.hasChildren()?i.expandChildren(n,r,a).pipe(U((function(e){return new vf(s,e)}))):0===r.length&&0===u.length?jh(new vf(s,{})):i.expandSegment(n,a,r,u,"primary",!0).pipe(U((function(e){return new vf(s.concat(e.segments),e.children)})))})))}},{key:"getChildConfig",value:function(e,t,n){var r=this;return t.children?jh(new rf(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?jh(t._loadedConfig):function(e,t,n){var r,i=t.canLoad;return i&&0!==i.length?W(i).pipe(U((function(r){var i,o=e.get(r);if(function(e){return e&&lp(e.canLoad)}(o))i=o.canLoad(t,n);else{if(!lp(o))throw new Error("Invalid CanLoad guard");i=o(t,n)}return pf(i)}))).pipe(Yh(),(r=function(e){return!0===e},function(e){return e.lift(new yd(r,void 0,e))})):jh(!0)}(e.injector,t,n).pipe(z((function(n){return n?r.configLoader.load(e.injector,t).pipe(U((function(e){return t._loadedConfig=e,e}))):function(e){return new C((function(t){return t.error(tf("Cannot load children because the guard of the route \"path: '".concat(e.path,"'\" returned false")))}))}(t)}))):jh(new rf([],e))}},{key:"lineralizeSegments",value:function(e,t){for(var n=[],r=t.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return jh(n);if(r.numberOfChildren>1||!r.children.primary)return mp(e.redirectTo);r=r.children.primary}}},{key:"applyRedirectCommands",value:function(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,n,r){var i=this.createSegmentGroup(e,t.root,n,r);return new mf(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var n={};return ff(e,(function(e,r){if("string"==typeof e&&e.startsWith(":")){var i=e.substring(1);n[r]=t[i]}else n[r]=e})),n}},{key:"createSegmentGroup",value:function(e,t,n,r){var i=this,o=this.createSegments(e,t.segments,n,r),a={};return ff(t.children,(function(t,o){a[o]=i.createSegmentGroup(e,t,n,r)})),new vf(o,a)}},{key:"createSegments",value:function(e,t,n,r){var i=this;return t.map((function(t){return t.path.startsWith(":")?i.findPosParam(e,t,r):i.findOrReturn(t,n)}))}},{key:"findPosParam",value:function(e,t,n){var r=n[t.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return r}},{key:"findOrReturn",value:function(e,t){var n=0,r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;if(u.path===e.path)return t.splice(n),u;n++}}catch(c){i=!0,o=c}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return e}}]),e}();function yp(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};var r=(t.matcher||nf)(n,e,t);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function bp(e){if(1===e.numberOfChildren&&e.children.primary){var t=e.children.primary;return new vf(e.segments.concat(t.segments),t.children)}return e}function _p(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function wp(e){return e.outlet||"primary"}var Cp=function e(t){_classCallCheck(this,e),this.path=t,this.route=this.path[this.path.length-1]},kp=function e(t,n){_classCallCheck(this,e),this.component=t,this.route=n};function Sp(e,t,n){var r=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function Ep(e,t,n){var r=jf(e),i=e.value;ff(r,(function(e,r){Ep(e,i.component?t?t.children.getContext(r):null:t,n)})),n.canDeactivateChecks.push(new kp(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}var Tp=Symbol("INITIAL_VALUE");function xp(){return _d((function(e){return(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=null,i=null;return O(t[t.length-1])&&(i=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),Y(t,i).lift(new zh(r))}).apply(void 0,_toConsumableArray(e.map((function(e){return e.pipe(pd(1),Sd(Tp))})))).pipe(Ed((function(e,t){var n=!1;return t.reduce((function(e,r,i){if(e!==Tp)return e;if(r===Tp&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||hp(r))return r}return e}),e)}),Tp),Xh((function(e){return e!==Tp})),U((function(e){return hp(e)?e:!0===e})),pd(1))}))}function Ip(e,t){return null!==e&&t&&t(new Yd(e)),jh(!0)}function Pp(e,t){return null!==e&&t&&t(new Qd(e)),jh(!0)}function Op(e,t,n){var r=t.routeConfig?t.routeConfig.canActivate:null;return r&&0!==r.length?jh(r.map((function(r){return Kh((function(){var i,o=Sp(r,t,n);if(function(e){return e&&lp(e.canActivate)}(o))i=pf(o.canActivate(t,e));else{if(!lp(o))throw new Error("Invalid CanActivate guard");i=pf(o(t,e))}return i.pipe(vd())}))}))).pipe(xp()):jh(!0)}function Dp(e,t,n){var r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map((function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)})).filter((function(e){return null!==e})).map((function(t){return Kh((function(){return jh(t.guards.map((function(i){var o,a=Sp(i,t.node,n);if(function(e){return e&&lp(e.canActivateChild)}(a))o=pf(a.canActivateChild(r,e));else{if(!lp(a))throw new Error("Invalid CanActivateChild guard");o=pf(a(r,e))}return o.pipe(vd())}))).pipe(xp())}))}));return jh(i).pipe(xp())}var Ap=function e(){_classCallCheck(this,e)},Rp=function(){function e(t,n,r,i,o,a){_classCallCheck(this,e),this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a}return _createClass(e,[{key:"recognize",value:function(){try{var e=Fp(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,"primary"),n=new Hf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Uf(n,t),i=new Gf(this.url,r);return this.inheritParamsAndData(i._root),jh(i)}catch(o){return new C((function(e){return e.error(o)}))}}},{key:"inheritParamsAndData",value:function(e){var t=this,n=e.value,r=zf(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach((function(e){return t.inheritParamsAndData(e)}))}},{key:"processSegmentGroup",value:function(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}},{key:"processChildren",value:function(e,t){var n,r=this,i=_f(t,(function(t,n){return r.processSegmentGroup(e,t,n)}));return n={},i.forEach((function(e){var t=n[e.value.outlet];if(t){var r=t.url.map((function(e){return e.toString()})).join("/"),i=e.value.url.map((function(e){return e.toString()})).join("/");throw new Error("Two segments cannot have the same outlet name: '".concat(r,"' and '").concat(i,"'."))}n[e.value.outlet]=e.value})),i.sort((function(e,t){return"primary"===e.value.outlet?-1:"primary"===t.value.outlet?1:e.value.outlet.localeCompare(t.value.outlet)})),i}},{key:"processSegment",value:function(e,t,n,r){var i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;try{return this.processSegmentAgainstRoute(c,t,n,r)}catch(l){if(!(l instanceof Ap))throw l}}}catch(h){o=!0,a=h}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}if(this.noLeftoversInUrl(t,n,r))return[];throw new Ap}},{key:"noLeftoversInUrl",value:function(e,t,n){return 0===t.length&&!e.children[n]}},{key:"processSegmentAgainstRoute",value:function(e,t,n,r){if(e.redirectTo)throw new Ap;if((e.outlet||"primary")!==r)throw new Ap;var i,o=[],a=[];if("**"===e.path){var s=n.length>0?df(n).parameters:{};i=new Hf(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Up(e),r,e.component,e,Np(t),Mp(t)+n.length,jp(e))}else{var u=function(e,t,n){if(""===t.path){if("full"===t.pathMatch&&(e.hasChildren()||n.length>0))throw new Ap;return{consumedSegments:[],lastChild:0,parameters:{}}}var r=(t.matcher||nf)(n,e,t);if(!r)throw new Ap;var i={};ff(r.posParams,(function(e,t){i[t]=e.path}));var o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(t,e,n);o=u.consumedSegments,a=n.slice(u.lastChild),i=new Hf(o,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Up(e),r,e.component,e,Np(t),Mp(t)+o.length,jp(e))}var c=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),l=Fp(t,o,a,c,this.relativeLinkResolution),h=l.segmentGroup,d=l.slicedSegments;if(0===d.length&&h.hasChildren()){var f=this.processChildren(c,h);return[new Uf(i,f)]}if(0===c.length&&0===d.length)return[new Uf(i,[])];var p=this.processSegment(c,h,d,"primary");return[new Uf(i,p)]}}]),e}();function Np(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function Mp(e){for(var t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function Fp(e,t,n,r,i){if(n.length>0&&function(e,t,n){return n.some((function(n){return Lp(e,t,n)&&"primary"!==Vp(n)}))}(e,n,r)){var o=new vf(t,function(e,t,n,r){var i={};i.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;var o=!0,a=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;if(""===l.path&&"primary"!==Vp(l)){var h=new vf([],{});h._sourceSegment=e,h._segmentIndexShift=t.length,i[Vp(l)]=h}}}catch(d){a=!0,s=d}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}return i}(e,t,r,new vf(n,e.children)));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some((function(n){return Lp(e,t,n)}))}(e,n,r)){var a=new vf(e.segments,function(e,t,n,r,i,o){var a={},s=!0,u=!1,c=void 0;try{for(var l,h=r[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){var d=l.value;if(Lp(e,n,d)&&!i[Vp(d)]){var f=new vf([],{});f._sourceSegment=e,f._segmentIndexShift="legacy"===o?e.segments.length:t.length,a[Vp(d)]=f}}}catch(p){u=!0,c=p}finally{try{s||null==h.return||h.return()}finally{if(u)throw c}}return Object.assign(Object.assign({},i),a)}(e,t,n,r,e.children,i));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:n}}var s=new vf(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function Lp(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Vp(e){return e.outlet||"primary"}function Up(e){return e.data||{}}function jp(e){return e.resolve||{}}function qp(e,t,n,r){var i=Sp(e,t,r);return pf(i.resolve?i.resolve(t,n):i(t,n))}function Bp(e){return function(t){return t.pipe(_d((function(t){var n=e(t);return n?W(n).pipe(U((function(){return t}))):W([t])})))}}var Wp=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}(),zp=new qe("ROUTES"),Hp=function(){function e(t,n,r,i){_classCallCheck(this,e),this.loader=t,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return _createClass(e,[{key:"load",value:function(e,t){var n=this;return this.onLoadStartListener&&this.onLoadStartListener(t),this.loadModuleFactory(t.loadChildren).pipe(U((function(r){n.onLoadEndListener&&n.onLoadEndListener(t);var i=r.create(e);return new rf(hf(i.injector.get(zp)).map(uf),i)})))}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?W(this.loader.load(e)):pf(e()).pipe(z((function(e){return e instanceof tt?jh(e):W(t.compiler.compileModuleAsync(e))})))}}]),e}(),Gp=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function Qp(e){throw e}function Kp(e,t,n){return t.parse("/")}function Yp(e,t){return jh(null)}var Xp,Jp,Zp,$p=((Zp=function(){function e(t,n,r,i,o,a,s,u){var c=this;_classCallCheck(this,e),this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new I,this.errorHandler=Qp,this.malformedUriErrorHandler=Kp,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Yp,afterPreactivation:Yp},this.urlHandlingStrategy=new Gp,this.routeReuseStrategy=new Wp,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(et),this.console=o.get(Mu);var l=o.get(Yu);this.isNgZoneEnabled=l instanceof Yu,this.resetConfig(u),this.currentUrlTree=new mf(new vf([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Hp(a,s,(function(e){return c.triggerEvent(new Hd(e))}),(function(e){return c.triggerEvent(new Gd(e))})),this.routerState=Bf(this.currentUrlTree,this.rootComponentType),this.transitions=new qh({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return _createClass(e,[{key:"setupNavigations",value:function(e){var t=this,n=this.events;return e.pipe(Xh((function(e){return 0!==e.id})),U((function(e){return Object.assign(Object.assign({},e),{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})})),_d((function(e){var r,i,o,a,s=!1,u=!1;return jh(e).pipe(Pd((function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign(Object.assign({},t.lastSuccessfulNavigation),{previousNavigation:null}):null}})),_d((function(e){var r,i,o,a,s=!t.navigated||e.extractedUrl.toString()!==t.browserUrlTree.toString();if(("reload"===t.onSameUrlNavigation||s)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return jh(e).pipe(_d((function(e){var r=t.transitions.getValue();return n.next(new Fd(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),r!==t.transitions.getValue()?Gh:[e]})),_d((function(e){return Promise.resolve(e)})),(r=t.ngModule.injector,i=t.configLoader,o=t.urlSerializer,a=t.config,function(e){return e.pipe(_d((function(e){return function(e,t,n,r,i){return new vp(e,t,n,r,i).apply()}(r,i,o,e.extractedUrl,a).pipe(U((function(t){return Object.assign(Object.assign({},e),{urlAfterRedirects:t})})))})))}),Pd((function(e){t.currentNavigation=Object.assign(Object.assign({},t.currentNavigation),{finalUrl:e.urlAfterRedirects})})),function(e,n,r,i,o){return function(r){return r.pipe(z((function(r){return function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";return new Rp(e,t,n,r,i,o).recognize()}(e,n,r.urlAfterRedirects,(a=r.urlAfterRedirects,t.serializeUrl(a)),i,o).pipe(U((function(e){return Object.assign(Object.assign({},r),{targetSnapshot:e})})));var a})))}}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),Pd((function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),Pd((function(e){var r=new jd(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(r)})));if(s&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var u=e.id,c=e.extractedUrl,l=e.source,h=e.restoredState,d=e.extras,f=new Fd(u,t.serializeUrl(c),l,h);n.next(f);var p=Bf(c,t.rootComponentType).snapshot;return jh(Object.assign(Object.assign({},e),{targetSnapshot:p,urlAfterRedirects:c,extras:Object.assign(Object.assign({},d),{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Gh})),Bp((function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,o=e.rawUrl,a=e.extras,s=a.skipLocationChange,u=a.replaceUrl;return t.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})})),Pd((function(e){var n=new qd(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})),U((function(e){return Object.assign(Object.assign({},e),{guards:(n=e.targetSnapshot,r=e.currentSnapshot,i=t.rootContexts,o=n._root,function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=jf(n);return t.children.forEach((function(t){!function(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=t.value,s=n?n.value:null,u=r?r.getContext(t.value.outlet):null;if(s&&a.routeConfig===s.routeConfig){var c=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!bf(e.url,t.url);case"pathParamsOrQueryParamsChange":return!bf(e.url,t.url)||!cf(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xf(e,t)||!cf(e.queryParams,t.queryParams);case"paramsChange":default:return!Xf(e,t)}}(s,a,a.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new Cp(i)):(a.data=s.data,a._resolvedData=s._resolvedData),e(t,n,a.component?u?u.children:null:r,i,o),c&&o.canDeactivateChecks.push(new kp(u&&u.outlet&&u.outlet.component||null,s))}else s&&Ep(n,u,o),o.canActivateChecks.push(new Cp(i)),e(t,null,a.component?u?u.children:null:r,i,o)}(t,a[t.value.outlet],r,i.concat([t.value]),o),delete a[t.value.outlet]})),ff(a,(function(e,t){return Ep(e,r.getContext(t),o)})),o}(o,r?r._root:null,i,[o.value]))});var n,r,i,o})),function(e,t){return function(n){return n.pipe(z((function(n){var r=n.targetSnapshot,i=n.currentSnapshot,o=n.guards,a=o.canActivateChecks,s=o.canDeactivateChecks;return 0===s.length&&0===a.length?jh(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return W(e).pipe(z((function(e){return function(e,t,n,r,i){var o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?jh(o.map((function(o){var a,s=Sp(o,t,i);if(function(e){return e&&lp(e.canDeactivate)}(s))a=pf(s.canDeactivate(e,t,n,r));else{if(!lp(s))throw new Error("Invalid CanDeactivate guard");a=pf(s(e,t,n,r))}return a.pipe(vd())}))).pipe(xp()):jh(!0)}(e.component,e.route,n,t,r)})),vd((function(e){return!0!==e}),!0))}(s,r,i,e).pipe(z((function(n){return n&&"boolean"==typeof n?function(e,t,n,r){return W(t).pipe(Id((function(t){return W([Pp(t.route.parent,r),Ip(t.route,r),Dp(e,t.path,n),Op(e,t.route,n)]).pipe(Yh(),vd((function(e){return!0!==e}),!0))})),vd((function(e){return!0!==e}),!0))}(r,a,e,t):jh(n)})),U((function(e){return Object.assign(Object.assign({},n),{guardsResult:e})})))})))}}(t.ngModule.injector,(function(e){return t.triggerEvent(e)})),Pd((function(e){if(hp(e.guardsResult)){var n=tf('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw n.url=e.guardsResult,n}})),Pd((function(e){var n=new Bd(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(n)})),Xh((function(e){if(!e.guardsResult){t.resetUrlToCurrentUrlTree();var r=new Vd(e.id,t.serializeUrl(e.extractedUrl),"");return n.next(r),e.resolve(!1),!1}return!0})),Bp((function(e){if(e.guards.canActivateChecks.length)return jh(e).pipe(Pd((function(e){var n=new Wd(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})),(n=t.paramsInheritanceStrategy,r=t.ngModule.injector,function(e){return e.pipe(z((function(e){var t=e.targetSnapshot,i=e.guards.canActivateChecks;return i.length?W(i).pipe(Id((function(e){return function(e,t,n,r){return function(e,t,n,r){var i=Object.keys(e);if(0===i.length)return jh({});if(1===i.length){var o=i[0];return qp(e[o],t,n,r).pipe(U((function(e){return _defineProperty({},o,e)})))}var a={};return W(i).pipe(z((function(i){return qp(e[i],t,n,r).pipe(U((function(e){return a[i]=e,e})))}))).pipe(ld(),U((function(){return a})))}(e._resolve,e,t,r).pipe(U((function(t){return e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),zf(e,n).resolve),null})))}(e.route,t,n,r)})),function(e,t){return arguments.length>=2?function(n){return b(Ed(e,t),ed(1),sd(t))(n)}:function(t){return b(Ed((function(t,n,r){return e(t,n,r+1)})),ed(1))(t)}}((function(e,t){return e})),U((function(t){return e}))):jh(e)})))}),Pd((function(e){var n=new zd(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)})));var n,r})),Bp((function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,o=e.rawUrl,a=e.extras,s=a.skipLocationChange,u=a.replaceUrl;return t.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!s,replaceUrl:!!u})})),U((function(e){var n=function(e,t,n){var r=function e(t,n,r){if(r&&t.shouldReuseRoute(n.value,r.value.snapshot)){var i=r.value;i._futureSnapshot=n.value;var o=function(t,n,r){return n.children.map((function(n){var i=!0,o=!1,a=void 0;try{for(var s,u=r.children[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(t.shouldReuseRoute(c.value.snapshot,n.value))return e(t,n,c)}}catch(l){o=!0,a=l}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return e(t,n)}))}(t,n,r);return new Uf(i,o)}var a=t.retrieve(n.value);if(a){var s=a.route;return function e(t,n){if(t.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=t.value;for(var r=0;r<t.children.length;++r)e(t.children[r],n.children[r])}(n,s),s}var u,c=new Wf(new qh((u=n.value).url),new qh(u.params),new qh(u.queryParams),new qh(u.fragment),new qh(u.data),u.outlet,u.component,u),l=n.children.map((function(n){return e(t,n)}));return new Uf(c,l)}(e,t._root,n?n._root:void 0);return new qf(r,t)}(t.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:n})})),Pd((function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(t.currentUrlTree,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)})),(i=t.rootContexts,o=t.routeReuseStrategy,a=function(e){return t.triggerEvent(e)},U((function(e){return new up(o,e.targetRouterState,e.currentRouterState,a).activate(i),e}))),Pd({next:function(){s=!0},complete:function(){s=!0}}),(r=function(){if(!s&&!u){t.resetUrlToCurrentUrlTree();var r=new Vd(e.id,t.serializeUrl(e.extractedUrl),"Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId));n.next(r),e.resolve(!1)}t.currentNavigation=null},function(e){return e.lift(new Rd(r))}),hd((function(r){if(u=!0,(s=r)&&s.ngNavigationCancelingError){var i=hp(r.url);i||(t.navigated=!0,t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));var o=new Vd(e.id,t.serializeUrl(e.extractedUrl),r.message);n.next(o),i?setTimeout((function(){var n=t.urlHandlingStrategy.merge(r.url,t.rawUrlTree);return t.scheduleNavigation(n,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})}),0):e.resolve(!1)}else{t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);var a=new Ud(e.id,t.serializeUrl(e.extractedUrl),r);n.next(a);try{e.resolve(t.errorHandler(r))}catch(c){e.reject(c)}}var s;return Gh})))})))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe((function(t){var n=e.parseUrl(t.url),r="popstate"===t.type?"popstate":"hashchange",i=t.state&&t.state.navigationId?t.state:null;setTimeout((function(){e.scheduleNavigation(n,r,i,{replaceUrl:!0})}),0)})))}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){of(e),this.config=e.map(uf),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.relativeTo,r=t.queryParams,i=t.fragment,o=t.preserveQueryParams,a=t.queryParamsHandling,s=t.preserveFragment;gr()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");var u=n||this.routerState.root,c=s?this.currentUrlTree.fragment:i,l=null;if(a)switch(a){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}else l=o?this.currentUrlTree.queryParams:r||null;return null!==l&&(l=this.removeEmptyProps(l)),function(e,t,n,r,i){if(0===n.length)return Zf(t.root,t.root,t,r,i);var o=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new $f(!0,0,e);var t=0,n=!1,r=e.reduce((function(e,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var o={};return ff(r.outlets,(function(e,t){o[t]="string"==typeof e?e.split("/"):e})),[].concat(_toConsumableArray(e),[{outlets:o}])}if(r.segmentPath)return[].concat(_toConsumableArray(e),[r.segmentPath])}return"string"!=typeof r?[].concat(_toConsumableArray(e),[r]):0===i?(r.split("/").forEach((function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))})),e):[].concat(_toConsumableArray(e),[r])}),[]);return new $f(n,t,r)}(n);if(o.toRoot())return Zf(t.root,new vf([],{}),t,r,i);var a=function(e,t,n){if(e.isAbsolute)return new ep(t.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new ep(n.snapshot._urlSegment,!0,0);var r=Jf(e.commands[0])?0:1;return function(e,t,n){for(var r=e,i=t,o=n;o>i;){if(o-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new ep(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(o,t,e),s=a.processChildren?rp(a.segmentGroup,a.index,o.commands):np(a.segmentGroup,a.index,o.commands);return Zf(a.segmentGroup,s,t,r,i)}(u,this.currentUrlTree,e,l,c)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};gr()&&this.isNgZoneEnabled&&!Yu.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");var n=hp(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(e){for(var t=0;t<e.length;t++){var n=e[t];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(t))}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(e){var t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}},{key:"isActive",value:function(e,t){if(hp(e))return gf(this.currentUrlTree,e,t);var n=this.parseUrl(e);return gf(this.currentUrlTree,n,t)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return null!=r&&(t[n]=r),t}),{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe((function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.events.next(new Ld(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,e.currentNavigation=null,t.resolve(!0)}),(function(t){e.console.warn("Unhandled Navigation Error: ")}))}},{key:"scheduleNavigation",value:function(e,t,n,r,i){var o,a,s,u=this.getTransition();if(u&&"imperative"!==t&&"imperative"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(u&&"hashchange"==t&&"popstate"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);if(u&&"popstate"==t&&"hashchange"===u.source&&u.rawUrl.toString()===e.toString())return Promise.resolve(!0);i?(o=i.resolve,a=i.reject,s=i.promise):s=new Promise((function(e,t){o=e,a=t}));var c=++this.navigationId;return this.setTransition({id:c,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:o,reject:a,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch((function(e){return Promise.reject(e)}))}},{key:"setBrowserUrl",value:function(e,t,n,r){var i=this.urlSerializer.serialize(e);r=r||{},this.location.isCurrentPathEqualTo(i)||t?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}},{key:"resetStateAndUrl",value:function(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}}]),e}()).\u0275fac=function(e){da()},Zp.\u0275dir=bt({type:Zp}),Zp),eg=((Jp=function(){function e(t,n,r,i,o){_classCallCheck(this,e),this.router=t,this.route=n,this.commands=[],null==r&&i.setAttribute(o.nativeElement,"tabindex","0")}return _createClass(e,[{key:"onClick",value:function(){var e={skipLocationChange:ng(this.skipLocationChange),replaceUrl:ng(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}},{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"preserveQueryParams",set:function(e){gr()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=e}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:ng(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:ng(this.preserveFragment)})}}]),e}()).\u0275fac=function(e){return new(e||Jp)(la($p),la(Wf),ha("tabindex"),la(ps),la(ls))},Jp.\u0275dir=bt({type:Jp,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&wa("click",(function(){return t.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"}}),Jp),tg=((Xp=function(){function e(t,n,r){var i=this;_classCallCheck(this,e),this.router=t,this.route=n,this.locationStrategy=r,this.commands=[],this.subscription=t.events.subscribe((function(e){e instanceof Ld&&i.updateTargetUrlAndHref()}))}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.updateTargetUrlAndHref()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(e,t,n,r){if(0!==e||t||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var i={skipLocationChange:ng(this.skipLocationChange),replaceUrl:ng(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"preserveQueryParams",set:function(e){gr()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=e}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:ng(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:ng(this.preserveFragment)})}}]),e}()).\u0275fac=function(e){return new(e||Xp)(la($p),la(Wf),la(jc))},Xp.\u0275dir=bt({type:Xp,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&wa("click",(function(e){return t.onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)})),2&e&&(Ba("href",t.href,Ur),sa("target",t.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[Xa]}),Xp);function ng(e){return""===e||!!e}var rg,ig,og,ag,sg=((rg=function(){function e(t,n,r,i,o){var a=this;_classCallCheck(this,e),this.router=t,this.element=n,this.renderer=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=t.events.subscribe((function(e){e instanceof Ld&&a.update()}))}return _createClass(e,[{key:"ngAfterContentInit",value:function(){var e=this;this.links.changes.subscribe((function(t){return e.update()})),this.linksWithHrefs.changes.subscribe((function(t){return e.update()})),this.update()}},{key:"ngOnChanges",value:function(e){this.update()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"update",value:function(){var e=this;this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then((function(){var t=e.hasActiveLinks();e.isActive!==t&&(e.isActive=t,e.classes.forEach((function(n){t?e.renderer.addClass(e.element.nativeElement,n):e.renderer.removeClass(e.element.nativeElement,n)})))}))}},{key:"isLinkActive",value:function(e){var t=this;return function(n){return e.isActive(n.urlTree,t.routerLinkActiveOptions.exact)}}},{key:"hasActiveLinks",value:function(){var e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}},{key:"routerLinkActive",set:function(e){var t=Array.isArray(e)?e:e.split(" ");this.classes=t.filter((function(e){return!!e}))}}]),e}()).\u0275fac=function(e){return new(e||rg)(la($p),la(ls),la(ps),la(eg,8),la(tg,8))},rg.\u0275dir=bt({type:rg,selectors:[["","routerLinkActive",""]],contentQueries:function(e,t,n){var r;1&e&&(Cu(n,eg,!0),Cu(n,tg,!0)),2&e&&(_u(r=ku())&&(t.links=r),_u(r=ku())&&(t.linksWithHrefs=r))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[Xa]}),rg),ug=function e(){_classCallCheck(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new cg,this.attachRef=null},cg=function(){function e(){_classCallCheck(this,e),this.contexts=new Map}return _createClass(e,[{key:"onChildOutletCreated",value:function(e,t){var n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new ug,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),lg=((ig=function(){function e(t,n,r,i,o){_classCallCheck(this,e),this.parentContexts=t,this.location=n,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new cu,this.deactivateEvents=new cu,this.name=i||"primary",t.onChildOutletCreated(this.name,this)}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new hg(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}}]),e}()).\u0275fac=function(e){return new(e||ig)(la(cg),la(Ms),la(cs),ha("name"),la(Po))},ig.\u0275dir=bt({type:ig,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),ig),hg=function(){function e(t,n,r){_classCallCheck(this,e),this.route=t,this.childContexts=n,this.parent=r}return _createClass(e,[{key:"get",value:function(e,t){return e===Wf?this.route:e===cg?this.childContexts:this.parent.get(e,t)}}]),e}(),dg=function e(){_classCallCheck(this,e)},fg=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"preload",value:function(e,t){return jh(null)}}]),e}(),pg=((ag=function(){function e(t,n,r,i,o){_classCallCheck(this,e),this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=new Hp(n,r,(function(e){return t.triggerEvent(new Hd(e))}),(function(e){return t.triggerEvent(new Gd(e))}))}return _createClass(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(Xh((function(e){return e instanceof Ld})),Id((function(){return e.preload()}))).subscribe((function(){}))}},{key:"preload",value:function(){var e=this.injector.get(et);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;if(u.loadChildren&&!u.canLoad&&u._loadedConfig){var c=u._loadedConfig;n.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?n.push(this.preloadConfig(e,u)):u.children&&n.push(this.processRoutes(e,u.children))}}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return W(n).pipe(K(),U((function(e){})))}},{key:"preloadConfig",value:function(e,t){var n=this;return this.preloadingStrategy.preload(t,(function(){return n.loader.load(e.injector,t).pipe(z((function(e){return t._loadedConfig=e,n.processRoutes(e.module,e.routes)})))}))}}]),e}()).\u0275fac=function(e){return new(e||ag)(Xe($p),Xe(vc),Xe(Hu),Xe(Ho),Xe(dg))},ag.\u0275prov=de({token:ag,factory:ag.\u0275fac}),ag),gg=((og=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,e),this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return _createClass(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof Fd?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ld&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))}))}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe((function(t){t instanceof Jd&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))}))}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new Jd(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){da()},og.\u0275dir=bt({type:og}),og),mg=new qe("ROUTER_CONFIGURATION"),vg=new qe("ROUTER_FORROOT_GUARD"),yg=[Kc,{provide:wf,useClass:Cf},{provide:$p,useFactory:function(e,t,n,r,i,o,a){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,l=new $p(null,e,t,n,r,i,o,hf(a));if(u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),s.errorHandler&&(l.errorHandler=s.errorHandler),s.malformedUriErrorHandler&&(l.malformedUriErrorHandler=s.malformedUriErrorHandler),s.enableTracing){var h=Tc();l.events.subscribe((function(e){h.logGroup("Router Event: ".concat(e.constructor.name)),h.log(e.toString()),h.log(e),h.logGroupEnd()}))}return s.onSameUrlNavigation&&(l.onSameUrlNavigation=s.onSameUrlNavigation),s.paramsInheritanceStrategy&&(l.paramsInheritanceStrategy=s.paramsInheritanceStrategy),s.urlUpdateStrategy&&(l.urlUpdateStrategy=s.urlUpdateStrategy),s.relativeLinkResolution&&(l.relativeLinkResolution=s.relativeLinkResolution),l},deps:[wf,cg,Kc,Ho,vc,Hu,zp,mg,[function(){return function e(){_classCallCheck(this,e)}}(),new ae],[function(){return function e(){_classCallCheck(this,e)}}(),new ae]]},cg,{provide:Wf,useFactory:function(e){return e.routerState.root},deps:[$p]},{provide:vc,useClass:_c},pg,fg,function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"preload",value:function(e,t){return t().pipe(hd((function(){return jh(null)})))}}]),e}(),{provide:mg,useValue:{enableTracing:!1}}];function bg(){return new cc("Router",$p)}var _g,wg=((_g=function(){function e(t,n){_classCallCheck(this,e)}return _createClass(e,null,[{key:"forRoot",value:function(t,n){return{ngModule:e,providers:[yg,Eg(t),{provide:vg,useFactory:Sg,deps:[[$p,new ae,new ue]]},{provide:mg,useValue:n||{}},{provide:jc,useFactory:kg,deps:[Pc,[new oe(Hc),new ae],mg]},{provide:gg,useFactory:Cg,deps:[$p,sh,mg]},{provide:dg,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:fg},{provide:cc,multi:!0,useFactory:bg},[xg,{provide:xu,multi:!0,useFactory:Ig,deps:[xg]},{provide:Gg,useFactory:Pg,deps:[xg]},{provide:Nu,multi:!0,useExisting:Gg}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[Eg(t)]}}}]),e}()).\u0275mod=vt({type:_g}),_g.\u0275inj=fe({factory:function(e){return new(e||_g)(Xe(vg,8),Xe($p,8))}}),_g);function Cg(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new gg(e,t,n)}function kg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new Qc(e,t):new Gc(e,t)}function Sg(e){if(e)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Eg(e){return[{provide:Go,multi:!0,useValue:e},{provide:zp,multi:!0,useValue:e}]}var Tg,xg=((Tg=function(){function e(t){_classCallCheck(this,e),this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new I}return _createClass(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(Ac,Promise.resolve(null)).then((function(){var t=null,n=new Promise((function(e){return t=e})),r=e.injector.get($p),i=e.injector.get(mg);if(e.isLegacyDisabled(i)||e.isLegacyEnabled(i))t(!0);else if("disabled"===i.initialNavigation)r.setUpLocationChangeListener(),t(!0);else{if("enabled"!==i.initialNavigation)throw new Error("Invalid initialNavigation options: '".concat(i.initialNavigation,"'"));r.hooks.afterPreactivation=function(){return e.initNavigation?jh(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},r.initialNavigation()}return n}))}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(mg),n=this.injector.get(pg),r=this.injector.get(gg),i=this.injector.get($p),o=this.injector.get(gc);e===o.components[0]&&(this.isLegacyEnabled(t)?i.initialNavigation():this.isLegacyDisabled(t)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"isLegacyEnabled",value:function(e){return"legacy_enabled"===e.initialNavigation||!0===e.initialNavigation||void 0===e.initialNavigation}},{key:"isLegacyDisabled",value:function(e){return"legacy_disabled"===e.initialNavigation||!1===e.initialNavigation}}]),e}()).\u0275fac=function(e){return new(e||Tg)(Xe(Ho))},Tg.\u0275prov=de({token:Tg,factory:Tg.\u0275fac}),Tg);function Ig(e){return e.appInitializer.bind(e)}function Pg(e){return e.bootstrapListener.bind(e)}var Og,Dg,Ag,Rg,Ng,Mg,Fg,Lg,Vg,Ug,jg,qg,Bg,Wg,zg,Hg,Gg=new qe("Router Initializer"),Qg=((Ag=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Ag)},Ag.\u0275cmp=ft({type:Ag,selectors:[["app-home"]],decls:14,vars:0,consts:[[1,"card"],["src","assets/profile.png","alt","Profile picture of sam",1,"card-img-top"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"],["routerLink","/cv","routerLinkActive","active",1,"sam-navbar--link"]],template:function(e,t){1&e&&(ga(0,"div",0),va(1,"img",1),ga(2,"div",2),ga(3,"h5",3),Fa(4,"Sam Merante"),ma(),ga(5,"h6",4),Fa(6,"Software Developer"),ma(),ga(7,"p",5),Fa(8," I am a York University graduate with a bachelor degree in Computer Science from the Lassonde School of Engineering. I have several years of programming experience in languages such as Java, AngularJS/2+, C++, Python, C#, C, among other languages. "),ma(),ga(9,"p",5),Fa(10," Please visit my "),ga(11,"a",6),Fa(12,"CV"),ma(),Fa(13," for a full detail of my experience. "),ma(),ma(),ma())},directives:[tg,sg],styles:[".card[_ngcontent-%COMP%]{width:90%;margin:0 auto 32px}.card-img-top[_ngcontent-%COMP%]{width:80px;margin:8px auto}"]}),Ag),Kg=((Dg=function(){function e(){_classCallCheck(this,e),this.toggleCards=[!0,!1,!1,!1,!1]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"toggleCard",value:function(e){var t=this;this.toggleCards.forEach((function(n,r){t.toggleCards[r]=!1,r===e&&(t.toggleCards[r]=!0)}))}}]),e}()).\u0275fac=function(e){return new(e||Dg)},Dg.\u0275cmp=ft({type:Dg,selectors:[["app-cv"]],decls:242,vars:10,consts:[[1,"sam-title"],[1,"card","mb-3"],[1,"card-header"],[1,"nav","nav-tabs","card-header-tabs"],[1,"nav-item"],[3,"ngClass","click"],[1,"card-body",3,"hidden"],[1,"list-group","list-group-flush"],[1,"list-group-item","list-title"],[1,"list-group-item"],[1,"row"],[1,"col-sm-6","list-bold"],[1,"col-sm-6","text-right"],[1,"row",2,"margin-top","32px"],[1,"list-title"],[1,"list-group-item","list-bold"],[1,"list-group","list-group"],["target","_blank","href","https://play.google.com/store/apps/developer?id=0110+Studios&hl=en",1,"card-link"],[1,"row",2,"margin-top","16px"],["target","_blank","href","https://www.udemy.com/certificate/UC-03Z43GPF/",1,"card-link"],["target","_blank","href","https://www.udemy.com/certificate/UC-CROAYZBT/",1,"card-link"]],template:function(e,t){1&e&&(ga(0,"h1",0),Fa(1,"Sam Merante's Curriculum Vitae"),ma(),ga(2,"div",1),ga(3,"div",2),ga(4,"ul",3),ga(5,"li",4),ga(6,"a",5),wa("click",(function(){return t.toggleCard(0)})),Fa(7,"Developer Experience"),ma(),ma(),ga(8,"li",4),ga(9,"a",5),wa("click",(function(){return t.toggleCard(1)})),Fa(10,"Employment Experience"),ma(),ma(),ga(11,"li",4),ga(12,"a",5),wa("click",(function(){return t.toggleCard(2)})),Fa(13,"Education"),ma(),ma(),ga(14,"li",4),ga(15,"a",5),wa("click",(function(){return t.toggleCard(3)})),Fa(16,"Interests"),ma(),ma(),ga(17,"li",4),ga(18,"a",5),wa("click",(function(){return t.toggleCard(4)})),Fa(19,"Honours & Achievements"),ma(),ma(),ma(),ma(),ga(20,"div",6),ga(21,"ul",7),ga(22,"li",8),Fa(23,"Languages"),ma(),ga(24,"li",9),Fa(25,"AngularJS/Angular2-7"),ma(),ga(26,"li",9),Fa(27,"JavaScript/HTML5"),ma(),ga(28,"li",9),Fa(29,"Java"),ma(),ga(30,"li",9),Fa(31,"Java for Android"),ma(),ga(32,"li",9),Fa(33,"C#"),ma(),ga(34,"li",9),Fa(35,"C++"),ma(),ga(36,"li",9),Fa(37,"Python"),ma(),ga(38,"li",9),Fa(39,"C"),ma(),ga(40,"li",9),Fa(41,"Eiffel"),ma(),ga(42,"li",9),Fa(43,"Prolog"),ma(),ma(),ga(44,"ul",7),ga(45,"li",8),Fa(46,"Tech Stack"),ma(),ga(47,"li",9),Fa(48,"Front end: JS, AngularJs, Angular "),ma(),ga(49,"li",9),Fa(50,"Back end: Java EE, C#"),ma(),ga(51,"li",9),Fa(52,"Databases: SQL, Oracle"),ma(),ga(53,"li",9),Fa(54,"Machine Learning, AI, Natural Language Processing (NLP)"),ma(),ga(55,"li",9),Fa(56,"BDD (Behavior Driven Development), TDD (Test Driven Development) in Java and Angular "),ma(),ga(57,"li",9),Fa(58,"Source Control: GIT (Bitbucket, Github)"),ma(),ga(59,"li",9),Fa(60,"Project Management: Confluence, JIRA"),ma(),ga(61,"li",9),Fa(62,"Agile methodologies"),ma(),ga(63,"li",9),Fa(64,"Dev Ops: Jenkins "),ma(),ga(65,"li",9),Fa(66,"Source Control: GIT (Bitbucket, Github)"),ma(),ma(),ma(),ga(67,"div",6),ga(68,"div",10),ga(69,"div",11),Fa(70," CAPCO - Software Consultant "),ma(),ga(71,"div",12),Fa(72," June 2018 - Present "),ma(),ma(),ga(73,"ul",7),ga(74,"li",9),Fa(75,"Worked at a NA bank creating a design system built for front end with angular."),ma(),ga(76,"li",9),Fa(77,"Created reusable and scalable software including common components to be used throughout the online space"),ma(),ma(),ga(78,"div",13),ga(79,"div",11),Fa(80," Toronto-Dominion Bank (TD Canada Trust) "),ma(),ga(81,"div",12),Fa(82," May 2017 - June 2018 "),ma(),ma(),ga(83,"ul",7),ga(84,"li",9),Fa(85,"Worked on a large project involving many different teams on web applications, in Java HTML, and Java script using the angular framework to provide the best user experience."),ma(),ga(86,"li",9),Fa(87,"Created and won second place in a hackathon challenge for TD where I programmed an application from scratch in Java Spring Boot and Angular 6, to innovate the onboarding process."),ma(),ga(88,"li",9),Fa(89,"Developed project and time management skills by working with the agile framework in a fast paced environment meeting critical timeframes given."),ma(),ga(90,"li",9),Fa(91,"Led a group of software developers when given the task of delivering defects and error fixes in a timely manner while ensuring that deadlines were met while producing quality code."),ma(),ga(92,"li",9),Fa(93,"Experienced in delivering quality assurance; wrote Gherkin feature files and behaviour driven development (BDD) test cases using the selenium framework in Java."),ma(),ga(94,"li",9),Fa(95,"Took initiative by training and mentoring new developers; running weekly check in meetings to discuss achievements, events, and news within the technology community."),ma(),ga(96,"li",9),Fa(97,"Managed deployments of the applications to servers using Jenkins to ensure builds are meeting test, security, and automation script completion in preparation for production."),ma(),ma(),ga(98,"div",13),ga(99,"div",11),Fa(100," Real Programming for Kids "),ma(),ga(101,"div",12),Fa(102," April 2015 \u2013 June 2017 "),ma(),ma(),ga(103,"ul",7),ga(104,"li",9),Fa(105,"Managed a class of 4 students from grades 1 \u2013 12 to develop computer science skills which led them be critical problem solvers and analytical thinkers."),ma(),ga(106,"li",9),Fa(107,"Demonstrated leadership skills, and teamwork skills, when faced with problems such as fixing bugs. I supported my team members by communicating my ideas with them to find errors, fix them, and inform management to prevent for future errors."),ma(),ga(108,"li",9),Fa(109,"Developed project and time management skills by working with the agile framework in a fast paced environment meeting critical timeframes given."),ma(),ga(110,"li",9),Fa(111,"Innovated the way classes are taught by allowing students to create their own games from scratch rather than following a set plan, which allowed for more development of programming skills in addition to facilitating creativity."),ma(),ga(112,"li",9),Fa(113,"Showed initiative by creating a program for my team that automates the process of creating report cards, which significantly reduced the time required to complete them"),ma(),ma(),ma(),ga(114,"div",6),ga(115,"div",10),ga(116,"div",14),Fa(117," E-Health Project, Software Design Course "),ma(),ma(),ga(118,"ul",7),ga(119,"li",15),Fa(120," Final Grade: B "),ma(),ga(121,"li",9),Fa(122," Designed an E-Health System to keep track of Doctors, Patients, Medicine, and Prescriptions with a Design by Contract approach using Eiffel. Implemented the system using maps and set data structures along with sorting algorithms. As a result the system prevented dangerous prescription/interactions and ensured safe practices in hospitals. "),ma(),ma(),ga(123,"div",13),ga(124,"div",14),Fa(125," Data Structure Designs "),ma(),ma(),ga(126,"ul",7),ga(127,"li",15),Fa(128," Final Grade: A "),ma(),ga(129,"li",9),Fa(130," Implemented a variety of data structure techniques to solve real world problems such as a Priority Queue to organize patients waiting in an emergency triage. "),ma(),ma(),ga(131,"div",13),ga(132,"div",14),Fa(133," Asymptotic Analysis "),ma(),ma(),ga(134,"ul",7),ga(135,"li",15),Fa(136," Final Grade: B+ "),ma(),ga(137,"li",9),Fa(138," Analyzed problems based on time/space complexity and determined which data structures will be best suited to solve the problem most efficiently. Problems involved the use of programming techniques such as dynamic programming, greedy algorithms, and memoization. "),ma(),ma(),ga(139,"div",13),ga(140,"div",14),Fa(141," Software Courses "),ma(),ma(),ga(142,"ul",16),ga(143,"li",9),Fa(144," Software Tools "),ma(),ga(145,"li",9),Fa(146," AI and Logic Programming "),ma(),ga(147,"li",9),Fa(148," Computer Organization "),ma(),ga(149,"li",9),Fa(150," Computer Security "),ma(),ga(151,"li",9),Fa(152," Computers, Information and Society "),ma(),ga(153,"li",9),Fa(154," Design and Analysis of Algorithms "),ma(),ga(155,"li",9),Fa(156," Differential Calculus with Applications "),ma(),ga(157,"li",9),Fa(158," Digital Media "),ma(),ga(159,"li",9),Fa(160," Discrete Math "),ma(),ga(161,"li",9),Fa(162," Fundamentals of Data Structures "),ma(),ga(163,"li",9),Fa(164," Integral Calculus with Applications "),ma(),ga(165,"li",9),Fa(166," Mathematical Logic for Computer Science "),ma(),ga(167,"li",9),Fa(168," Net-centric Computing "),ma(),ga(169,"li",9),Fa(170," Operating System Fundamentals "),ma(),ga(171,"li",9),Fa(172," Probability "),ma(),ga(173,"li",9),Fa(174," Professional Practice in Computing "),ma(),ga(175,"li",9),Fa(176," Research Directions in Computing "),ma(),ga(177,"li",9),Fa(178," Software Design "),ma(),ga(179,"li",9),Fa(180," Software Tools "),ma(),ga(181,"li",9),Fa(182," Theory of Computation "),ma(),ma(),ma(),ga(183,"div",6),ga(184,"ul",7),ga(185,"li",9),Fa(186,"Self improvement"),ma(),ga(187,"li",9),Fa(188,"Web development & design"),ma(),ga(189,"li",9),Fa(190,"Learning new frameworks and programming languages"),ma(),ga(191,"li",9),Fa(192,"Reading books"),ma(),ga(193,"li",9),Fa(194,"Playing and creating video games"),ma(),ga(195,"li",9),Fa(196,"Keeping active and healthy"),ma(),ma(),ga(197,"div",13),ga(198,"div",11),Fa(199," Application Development - Android "),ma(),ma(),ga(200,"ul",7),ga(201,"li",9),Fa(202," I enjoy developing mobile games and apps for the android platform, check out my "),ga(203,"a",17),Fa(204,"Google Play developer account."),ma(),ma(),ma(),ga(205,"div",13),ga(206,"div",11),Fa(207," Volunteer Experience "),ma(),ma(),ga(208,"ul",7),ga(209,"li",9),Fa(210," Helped mentor youth at risk by teaching social and school skills. "),ma(),ma(),ma(),ga(211,"div",6),ga(212,"div",10),ga(213,"div",11),Fa(214," Ontario Scholar "),ma(),ma(),ga(215,"ul",7),ga(216,"li",9),Fa(217," Awarded to students who have obtained an average of 80% or above in any six Grade 12 University Courses. "),ma(),ma(),ga(218,"div",18),ga(219,"div",11),Fa(220," York University Entrance Scholarship "),ma(),ma(),ga(221,"ul",7),ga(222,"li",9),Fa(223," Awarded to students with an average of 90% or above upon graduating from Grade 12. "),ma(),ma(),ga(224,"div",18),ga(225,"div",11),Fa(226," Spring Boot Expert "),ma(),ma(),ga(227,"ul",7),ga(228,"li",9),Fa(229," Award upon completion of spring boot "),ga(230,"a",19),Fa(231,"Udemy course"),ma(),Fa(232,". "),ma(),ma(),ga(233,"div",18),ga(234,"div",11),Fa(235," React "),ma(),ma(),ga(236,"ul",7),ga(237,"li",9),Fa(238," Award upon completion of React Basic "),ga(239,"a",20),Fa(240,"Udemy course"),ma(),Fa(241,". "),ma(),ma(),ma(),ma()),2&e&&(ni(6),fa("ngClass",t.toggleCards[0]?"nav-link active":"nav-link"),ni(3),fa("ngClass",t.toggleCards[1]?"nav-link active":"nav-link"),ni(3),fa("ngClass",t.toggleCards[2]?"nav-link active":"nav-link"),ni(3),fa("ngClass",t.toggleCards[3]?"nav-link active":"nav-link"),ni(3),fa("ngClass",t.toggleCards[4]?"nav-link active":"nav-link"),ni(2),fa("hidden",!t.toggleCards[0]),ni(47),fa("hidden",!t.toggleCards[1]),ni(47),fa("hidden",!t.toggleCards[2]),ni(69),fa("hidden",!t.toggleCards[3]),ni(28),fa("hidden",!t.toggleCards[4]))},directives:[Vl],styles:[".card[_ngcontent-%COMP%]{width:90%;margin:16px auto}.list-group-item[_ngcontent-%COMP%]{background-color:transparent}.small[_ngcontent-%COMP%]{font-size:1rem}.list-title[_ngcontent-%COMP%]{width:80%;margin:0 auto;text-align:center}.list-bold[_ngcontent-%COMP%], .list-title[_ngcontent-%COMP%]{font-weight:700}.nav-link[_ngcontent-%COMP%]{font-size:1.25rem}.nav-link[_ngcontent-%COMP%]:hover{cursor:pointer}.card-header[_ngcontent-%COMP%]:first-child{position:relative;padding-left:0;left:-1px}.card-header[_ngcontent-%COMP%]   .card-header-tabs[_ngcontent-%COMP%]{margin-left:0}@media screen and (max-width:768px){.nav-item[_ngcontent-%COMP%]{display:block;width:100%}}"]}),Dg),Yg=((Og=function(){function e(){_classCallCheck(this,e),this.expanded=[!0,!1,!1]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"expand",value:function(e){var t=this;this.expanded.forEach((function(n,r){e===r&&(t.expanded[r]=!t.expanded[r])}))}}]),e}()).\u0275fac=function(e){return new(e||Og)},Og.\u0275cmp=ft({type:Og,selectors:[["app-projects"]],decls:98,vars:9,consts:[[1,"sam-title"],[1,"accordion"],[1,"card"],[1,"card-header",3,"click"],[1,"chevron"],[1,"collapse","show"],[1,"card-body"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"bold"],["alt","PJ.png","src","assets/PJ.png",1,"img-responsive",2,"width","64px","margin-right","8px"],[1,"card-text"],["target","_blank","href","https://play.google.com/store/apps/details?id=runner.android&hl=en",1,"card-link"],["alt","CC.png","src","assets/CC.png",1,"img-responsive",2,"width","64px","margin-right","8px"],[1,"card-text",2,"margin-top","16px"],["target","_blank","href","https://play.google.com/store/apps/details?id=com.studios0110.CardCounter.android&hl=en",1,"card-link"],["alt","CJ.png","src","assets/CJ.png",1,"img-responsive",2,"width","64px","margin-right","8px"],["target","_blank","href","https://play.google.com/store/apps/details?id=com.studios0110.CliffJumper.android&hl=en",1,"card-link"],["alt","DC.png","src","assets/DC.png",1,"img-responsive",2,"width","64px","margin-right","8px"],["target","_blank","href","https://play.google.com/store/apps/details?id=com.studios0110.ballin.android&hl=en",1,"card-link"],["alt","S.png","src","assets/S.png",1,"img-responsive",2,"width","64px","margin-right","8px"],["target","_blank","href","https://play.google.com/store/apps/details?id=com.studios.catAndMouse.android&hl=en",1,"card-link"],[1,"row"],[1,"col-sm-6","bold"],[1,"col-sm-6","text-right"]],template:function(e,t){1&e&&(ga(0,"h1",0),Fa(1,"Projects"),ma(),ga(2,"div",1),ga(3,"div",2),ga(4,"div",3),wa("click",(function(){return t.expand(0)})),Fa(5," Android Applications "),va(6,"span",4),ma(),ga(7,"div",5),ga(8,"div",6),ga(9,"ul",7),ga(10,"li",8),ga(11,"span",9),va(12,"img",10),Fa(13," Portal Jumper"),ma(),ga(14,"p",11),Fa(15," Free to play side scroller arcade style game "),ga(16,"a",12),Fa(17,"Portal Jumper"),ma(),Fa(18," for the android platform. "),ma(),ma(),ga(19,"li",8),ga(20,"span",9),va(21,"img",13),Fa(22," Card Counter"),ma(),ga(23,"p",14),Fa(24," Free application to keep track of count in the game blackjack "),ga(25,"a",15),Fa(26,"Card Counter"),ma(),Fa(27," for the android platform. "),ma(),ma(),ga(28,"li",8),ga(29,"span",9),va(30,"img",16),Fa(31," Cliff Jumper"),ma(),ga(32,"p",14),Fa(33," Free platformer game "),ga(34,"a",17),Fa(35,"Cliff Jumper"),ma(),Fa(36," for the android platform. "),ma(),ma(),ga(37,"li",8),ga(38,"span",9),va(39,"img",18),Fa(40," Doodle Cannon"),ma(),ga(41,"p",14),Fa(42," Free puzzle game "),ga(43,"a",19),Fa(44,"Doodle Cannon"),ma(),Fa(45," for the android platform. "),ma(),ma(),ga(46,"li",8),ga(47,"span",9),va(48,"img",20),Fa(49," Slithery"),ma(),ga(50,"p",14),Fa(51," Free top down fluid snake game "),ga(52,"a",21),Fa(53,"Slithery"),ma(),Fa(54," for the android platform. "),ma(),ma(),ma(),ma(),ma(),ma(),ga(55,"div",2),ga(56,"div",3),wa("click",(function(){return t.expand(1)})),Fa(57," Enterprise Applications "),va(58,"span",4),ma(),ga(59,"div",6),ga(60,"ul",7),ga(61,"li",8),ga(62,"div",22),ga(63,"div",23),Fa(64," Major North American Bank - Personal Lending Application "),ma(),ga(65,"div",24),Fa(66," August 2017 \u2013 July 2018 "),ma(),ma(),ga(67,"p",11),Fa(68," Worked on an online application allowing a customer to apply for an unsecured loan with auto approval and auto funding. Agile development with Angular JS front end and Java back end. Technology stack: Angular, Java, Jboss, Node, Maven, Bower, SASS, Jenkins, Oracale, Splunk, Jira, confluence, BitBucket. "),ma(),ma(),ma(),ga(69,"ul",7),ga(70,"li",8),ga(71,"div",22),ga(72,"div",23),Fa(73," Major North American Bank - Components Library "),ma(),ma(),ga(74,"p",11),Fa(75," Worked on a reusable, scalable and accessible, common component library including design and functional front end Components. "),ma(),ma(),ma(),ma(),ma(),ga(76,"div",2),ga(77,"div",3),wa("click",(function(){return t.expand(2)})),Fa(78," Personal Applications "),va(79,"span",4),ma(),ga(80,"div",6),ga(81,"ul",7),ga(82,"li",8),ga(83,"div",22),ga(84,"div",23),Fa(85," Video Game Programming - PC "),ma(),ga(86,"div",24),Fa(87," August 2012 \u2013 Current "),ma(),ma(),ga(88,"p",11),Fa(89," Worked on and continue working on game applications for the PC as a personal hobby, including games written in Java, C++, C#, and in the unity game engine. "),ma(),ma(),ga(90,"li",8),ga(91,"div",22),ga(92,"div",23),Fa(93," Website Design & Development "),ma(),ga(94,"div",24),Fa(95," August 2012 \u2013 Current "),ma(),ma(),ga(96,"p",11),Fa(97," I enjoy working on website design and development using Javascript and front end frameworks, and using Java and related framekworks for the backend. "),ma(),ma(),ma(),ma(),ma(),ma()),2&e&&(ni(4),sa("expanded",t.expanded[0]),ni(2),sa("expanded",t.expanded[0]),ni(2),sa("expanded",t.expanded[0]),ni(48),sa("expanded",t.expanded[1]),ni(2),sa("expanded",t.expanded[1]),ni(1),sa("expanded",t.expanded[1]),ni(18),sa("expanded",t.expanded[2]),ni(2),sa("expanded",t.expanded[2]),ni(1),sa("expanded",t.expanded[2]))},styles:['label[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block;pointer-events:none}.body[_ngcontent-%COMP%]{min-height:100vh}a[_ngcontent-%COMP%]{position:relative}a[_ngcontent-%COMP%]:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a[_ngcontent-%COMP%]:focus{position:relative;outline:none}a[_ngcontent-%COMP%]:focus:after{width:100%}.sam-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6[_ngcontent-%COMP%]{padding:8px}@media screen and (max-width:575px){.card-link[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;margin:0}}.card[_ngcontent-%COMP%]{width:95%;margin:0 auto}.bold[_ngcontent-%COMP%]{font-weight:700}.card-header[expanded=true][_ngcontent-%COMP%]{background:transparent}.card-header[_ngcontent-%COMP%]:hover{cursor:pointer}.card-body[_ngcontent-%COMP%]{transition:all .5s ease;-webkit-transition:all .3s ease;-moz-transition:all .3s ease;-o-transition:all .3s ease;visibility:collapse;max-height:0;padding:0}.card-body[expanded=true][_ngcontent-%COMP%]{max-height:500px;overflow-y:scroll;visibility:visible;border-top:1px solid #aaa9a9}.chevron[_ngcontent-%COMP%]{transition:all .5s ease;-webkit-transition:all .3s ease;-moz-transition:all .3s ease;-o-transition:all .3s ease;display:inline-block;width:16px;height:16px;border-top:3px solid #aaa9a9;border-right:3px solid #aaa9a9;transform:rotate(-45deg);position:relative;top:6px;right:-9px}.chevron[expanded=false][_ngcontent-%COMP%]{transform:rotate(135deg);top:-1px}']}),Og),Xg=["card1"],Jg=["card2"],Zg=["card3"],$g=["card4"],em=["card5"],tm=["card6"],nm=["card7"],rm=["card8"],im=["card9"],om=["card10"],am=["card11"],sm=["card12"],um=["card13"],cm=["card14"],lm=["card15"],hm=["card16"],dm=["card17"],fm=["card18"],pm=["card19"],gm=["card20"],mm=["card21"],vm=((Rg=function(){function e(t){_classCallCheck(this,e),this.renderer=t}return _createClass(e,[{key:"ngOnInit",value:function(){this.scrollCardsIntoView()}},{key:"onScroll",value:function(){this.scrollCardsIntoView()}},{key:"scrollCardsIntoView",value:function(){var e=this;this.card1.nativeElement.getBoundingClientRect().top+this.card1.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card1.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card1.nativeElement,"card__show--come-in")}),100)),this.card2.nativeElement.getBoundingClientRect().top+this.card2.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card2.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card2.nativeElement,"card__show--come-in")}),100)),this.card3.nativeElement.getBoundingClientRect().top+this.card3.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card3.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card3.nativeElement,"card__show--come-in")}),100)),this.card4.nativeElement.getBoundingClientRect().top+this.card4.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card4.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card4.nativeElement,"card__show--come-in")}),100)),this.card5.nativeElement.getBoundingClientRect().top+this.card5.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card5.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card5.nativeElement,"card__show--come-in")}),100)),this.card6.nativeElement.getBoundingClientRect().top+this.card6.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card6.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card6.nativeElement,"card__show--come-in")}),100)),this.card7.nativeElement.getBoundingClientRect().top+this.card7.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card7.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card7.nativeElement,"card__show--come-in")}),100)),this.card8.nativeElement.getBoundingClientRect().top+this.card8.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card8.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card8.nativeElement,"card__show--come-in")}),100)),this.card9.nativeElement.getBoundingClientRect().top+this.card9.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card9.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card9.nativeElement,"card__show--come-in")}),100)),this.card10.nativeElement.getBoundingClientRect().top+this.card10.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card10.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card10.nativeElement,"card__show--come-in")}),100)),this.card11.nativeElement.getBoundingClientRect().top+this.card11.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card11.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card11.nativeElement,"card__show--come-in")}),100)),this.card12.nativeElement.getBoundingClientRect().top+this.card12.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card12.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card12.nativeElement,"card__show--come-in")}),100)),this.card13.nativeElement.getBoundingClientRect().top+this.card13.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card13.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card13.nativeElement,"card__show--come-in")}),100)),this.card14.nativeElement.getBoundingClientRect().top+this.card14.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card14.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card14.nativeElement,"card__show--come-in")}),100)),this.card15.nativeElement.getBoundingClientRect().top+this.card15.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card15.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card15.nativeElement,"card__show--come-in")}),100)),this.card16.nativeElement.getBoundingClientRect().top+this.card16.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card16.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card16.nativeElement,"card__show--come-in")}),100)),this.card17.nativeElement.getBoundingClientRect().top+this.card17.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card17.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card17.nativeElement,"card__show--come-in")}),100)),this.card18.nativeElement.getBoundingClientRect().top+this.card18.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card18.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card18.nativeElement,"card__show--come-in")}),100)),this.card19.nativeElement.getBoundingClientRect().top+this.card19.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card19.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card19.nativeElement,"card__show--come-in")}),100)),this.card20.nativeElement.getBoundingClientRect().top+this.card20.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card20.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card20.nativeElement,"card__show--come-in")}),100)),this.card21.nativeElement.getBoundingClientRect().top+this.card21.nativeElement.getBoundingClientRect().height/2<=window.innerHeight&&(this.renderer.addClass(this.card21.nativeElement,"card__show"),setTimeout((function(){e.renderer.addClass(e.card21.nativeElement,"card__show--come-in")}),100))}}]),e}()).\u0275fac=function(e){return new(e||Rg)(la(ps))},Rg.\u0275cmp=ft({type:Rg,selectors:[["app-code"]],viewQuery:function(e,t){var n;1&e&&(wu(Xg,!0),wu(Jg,!0),wu(Zg,!0),wu($g,!0),wu(em,!0),wu(tm,!0),wu(nm,!0),wu(rm,!0),wu(im,!0),wu(om,!0),wu(am,!0),wu(sm,!0),wu(um,!0),wu(cm,!0),wu(lm,!0),wu(hm,!0),wu(dm,!0),wu(fm,!0),wu(pm,!0),wu(gm,!0),wu(mm,!0)),2&e&&(_u(n=ku())&&(t.card1=n.first),_u(n=ku())&&(t.card2=n.first),_u(n=ku())&&(t.card3=n.first),_u(n=ku())&&(t.card4=n.first),_u(n=ku())&&(t.card5=n.first),_u(n=ku())&&(t.card6=n.first),_u(n=ku())&&(t.card7=n.first),_u(n=ku())&&(t.card8=n.first),_u(n=ku())&&(t.card9=n.first),_u(n=ku())&&(t.card10=n.first),_u(n=ku())&&(t.card11=n.first),_u(n=ku())&&(t.card12=n.first),_u(n=ku())&&(t.card13=n.first),_u(n=ku())&&(t.card14=n.first),_u(n=ku())&&(t.card15=n.first),_u(n=ku())&&(t.card16=n.first),_u(n=ku())&&(t.card17=n.first),_u(n=ku())&&(t.card18=n.first),_u(n=ku())&&(t.card19=n.first),_u(n=ku())&&(t.card20=n.first),_u(n=ku())&&(t.card21=n.first))},hostBindings:function(e,t){1&e&&wa("scroll",(function(e){return t.onScroll(e.target)}),!1,jn)},decls:246,vars:0,consts:[[1,"sam-title"],[1,"card","card__show","card__show--come-in"],["card8",""],[2,"margin","16px auto","width","95%"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-sm-6"],[1,"col-sm-6","text-right"],["target","_blank","href","assets/src/BubbleSort.java"],["card9",""],["target","_blank","href","assets/src/InsertionSort.java"],[1,"card"],["card10",""],["target","_blank","href","assets/src/SelectionSort.java"],["card11",""],["target","_blank","href","assets/src/MergeSort.java"],["card12",""],["target","_blank","href","assets/src/Quicksort.java"],["card13",""],["target","_blank","href","assets/src/MyArrayList.java"],["card14",""],["target","_blank","href","assets/src/MyLinkedList.java"],["card15",""],["target","_blank","href","assets/src/MyStack.java"],["card16",""],["target","_blank","href","assets/src/MyQueue.java"],["card17",""],["target","_blank","href","assets/src/MyPQ.java"],["card18",""],["target","_blank","href","assets/src/MyHashMap.java"],["card19",""],["target","_blank","href","assets/src/MyGraph.java"],["card20",""],["target","_blank","href","assets/src/Encryption.c"],["card21",""],["target","_blank","href","assets/src/FactorialExample/index.html"],["card1",""],["target","_blank","href","assets/src/Pong.txt"],["target","_blank","href","assets/src/Pong.jar","download",""],["card2",""],["target","_blank","href","assets/src/AirHockey.txt"],["target","_blank","href","assets/src/Airhockey.jar","download",""],["card3",""],["target","_blank","href","assets/src/SnakeHead.java"],["target","_blank","href","assets/src/Snake.jar","download",""],["card4",""],["target","_blank","href","assets/src/Robocalypse.jar","download",""],["card5",""],["target","_blank","href","assets/src/SnowBallFight.zip","download",""],["card6",""],["target","_blank","href","assets/src/Ghosts.zip","download",""],["card7",""],["target","_blank","href","assets/src/Window.java"],["target","_blank","href","assets/src/CircleCollider.jar","download",""]],template:function(e,t){1&e&&(ga(0,"h1",0),Fa(1,"Sample Code Snippets"),ma(),ga(2,"div",1,2),ga(4,"h4",3),Fa(5,"Sorting"),ma(),ga(6,"div",4),Fa(7," Bubble Sort "),ma(),ga(8,"div",5),ga(9,"div",6),ga(10,"div",7),Fa(11," Sorting algorithm - O(n^2) "),ma(),ga(12,"div",8),ga(13,"a",9),Fa(14,"BubbleSort.java"),ma(),ma(),ma(),ma(),ma(),ga(15,"div",1,10),ga(17,"div",4),Fa(18," Insertion Sort "),ma(),ga(19,"div",5),ga(20,"div",6),ga(21,"div",7),Fa(22," Sorting algorithm - O(n^2) "),ma(),ga(23,"div",8),ga(24,"a",11),Fa(25,"InsertionSort.java"),ma(),ma(),ma(),ma(),ma(),ga(26,"div",12,13),ga(28,"div",4),Fa(29," Selection Sort "),ma(),ga(30,"div",5),ga(31,"div",6),ga(32,"div",7),Fa(33," Sorting algorithm - O(n^2) "),ma(),ga(34,"div",8),ga(35,"a",14),Fa(36,"SelectionSort.java"),ma(),ma(),ma(),ma(),ma(),ga(37,"div",12,15),ga(39,"div",4),Fa(40," Merge Sort "),ma(),ga(41,"div",5),ga(42,"div",6),ga(43,"div",7),Fa(44," Sorting algorithm - O(n*log(n)) "),ma(),ga(45,"div",8),ga(46,"a",16),Fa(47,"MergeSort.java"),ma(),ma(),ma(),ma(),ma(),ga(48,"div",12,17),ga(50,"div",4),Fa(51," QuickSort Sort "),ma(),ga(52,"div",5),ga(53,"div",6),ga(54,"div",7),Fa(55," Sorting algorithm - O(n*log(n)) "),ma(),ga(56,"div",8),ga(57,"a",18),Fa(58,"QuickSort.java"),ma(),ma(),ma(),ma(),ma(),ga(59,"div",12,19),ga(61,"h4",3),Fa(62,"Data Structures"),ma(),ga(63,"div",4),Fa(64," ArrayList "),ma(),ga(65,"div",5),ga(66,"div",6),ga(67,"div",7),Fa(68," A dynamically sizable array "),ma(),ga(69,"div",8),ga(70,"a",20),Fa(71,"ArrayList.java"),ma(),ma(),ma(),ma(),ma(),ga(72,"div",12,21),ga(74,"div",4),Fa(75," LinkedList "),ma(),ga(76,"div",5),ga(77,"div",6),ga(78,"div",7),Fa(79," A linked list of nodes with references to each node from the previous "),ma(),ga(80,"div",8),ga(81,"a",22),Fa(82,"LinkedList.java"),ma(),ma(),ma(),ma(),ma(),ga(83,"div",12,23),ga(85,"div",4),Fa(86," Stack "),ma(),ga(87,"div",5),ga(88,"div",6),ga(89,"div",7),Fa(90," A 'FILO' (first in last out) list, like a stack of paper "),ma(),ga(91,"div",8),ga(92,"a",24),Fa(93,"Stack.java"),ma(),ma(),ma(),ma(),ma(),ga(94,"div",12,25),ga(96,"div",4),Fa(97," Queue "),ma(),ga(98,"div",5),ga(99,"div",6),ga(100,"div",7),Fa(101," A 'FIFO' (first in first out) list, like a line of people "),ma(),ga(102,"div",8),ga(103,"a",26),Fa(104,"Queue.java"),ma(),ma(),ma(),ma(),ma(),ga(105,"div",12,27),ga(107,"div",4),Fa(108," Priority Queue "),ma(),ga(109,"div",5),ga(110,"div",6),ga(111,"div",7),Fa(112," A Queue sorted based on given priorities of each node, like in an emergency triage center at a hosiptal. "),ma(),ga(113,"div",8),ga(114,"a",28),Fa(115,"PriorityQueue.java"),ma(),ma(),ma(),ma(),ma(),ga(116,"div",12,29),ga(118,"div",4),Fa(119," Hash Map "),ma(),ga(120,"div",5),ga(121,"div",6),ga(122,"div",7),Fa(123," A dynamically sizable and quick lookup array based on hashed indecies of each element. "),ma(),ga(124,"div",8),ga(125,"a",30),Fa(126,"HashMap.java"),ma(),ma(),ma(),ma(),ma(),ga(127,"div",12,31),ga(129,"div",4),Fa(130," Graph "),ma(),ga(131,"div",5),ga(132,"div",6),ga(133,"div",7),Fa(134," A datastructure with Lists of vertices, along with lists of edges. Each vertex can have connections to other verticies through neighbouring edges. "),ma(),ga(135,"div",8),ga(136,"a",32),Fa(137,"Graph.java"),ma(),ma(),ma(),ma(),ma(),ga(138,"div",12,33),ga(140,"h4",3),Fa(141,"Other"),ma(),ga(142,"div",4),Fa(143," Simple Encryption "),ma(),ga(144,"div",5),ga(145,"div",6),ga(146,"div",7),Fa(147," A simple encryption written in C for text files. "),ma(),ga(148,"div",8),ga(149,"a",34),Fa(150,"Encryption.c"),ma(),ma(),ma(),ma(),ma(),ga(151,"div",12,35),ga(153,"div",4),Fa(154," Factorial Recursion and memoization "),ma(),ga(155,"div",5),ga(156,"div",6),ga(157,"div",7),Fa(158," A simple example of factorial recursion and memoization "),ma(),ga(159,"div",8),ga(160,"a",36),Fa(161,"FactorialExample.index"),ma(),ma(),ma(),ma(),ma(),ga(162,"div",12,37),ga(164,"h4",3),Fa(165,"Games"),ma(),ga(166,"div",4),Fa(167," Pong "),ma(),ga(168,"div",5),ga(169,"div",6),ga(170,"div",7),ga(171,"a",38),Fa(172,"Pong.txt"),ma(),ma(),ga(173,"div",8),ga(174,"a",39),Fa(175,"Pong.jar"),ma(),ma(),ma(),ma(),ma(),ga(176,"div",12,40),ga(178,"div",4),Fa(179," Air Hockey "),ma(),ga(180,"div",5),ga(181,"div",6),ga(182,"div",7),ga(183,"a",41),Fa(184,"AirHockey.txt"),ma(),ma(),ga(185,"div",8),ga(186,"a",42),Fa(187,"AirHockey.jar"),ma(),ma(),ma(),ma(),ma(),ga(188,"div",12,43),ga(190,"div",4),Fa(191," Snake "),ma(),ga(192,"div",5),ga(193,"div",6),ga(194,"div",7),ga(195,"a",44),Fa(196,"Snake.java"),ma(),ma(),ga(197,"div",8),ga(198,"a",45),Fa(199,"Snake.jar"),ma(),ma(),ma(),ma(),ma(),ga(200,"div",12,46),ga(202,"div",4),Fa(203," Robocalypse "),ma(),ga(204,"div",5),ga(205,"div",6),ga(206,"div",7),Fa(207," Top Down shooter/Survival game "),ma(),ga(208,"div",8),ga(209,"a",47),Fa(210,"Robocalypse.jar"),ma(),ma(),ma(),ma(),ma(),ga(211,"div",12,48),ga(213,"div",4),Fa(214," Snowball Fight "),ma(),ga(215,"div",5),ga(216,"div",6),ga(217,"div",7),Fa(218," Top Down multiplayer snowball fight game "),ma(),ga(219,"div",8),ga(220,"a",49),Fa(221,"SnowBallFight.zip"),ma(),ma(),ma(),ma(),ma(),ga(222,"div",12,50),ga(224,"div",4),Fa(225," Ghost Survival "),ma(),ga(226,"div",5),ga(227,"div",6),ga(228,"div",7),Fa(229," Top Down shooter/horror game "),ma(),ga(230,"div",8),ga(231,"a",51),Fa(232,"Ghosts.zip"),ma(),ma(),ma(),ma(),ma(),ga(233,"div",12,52),ga(235,"div",4),Fa(236," Circle Collider "),ma(),ga(237,"div",5),ga(238,"div",6),ga(239,"div",7),Fa(240," Simple algorithm to check for collision between two circles : "),ga(241,"a",53),Fa(242,"Collider.java"),ma(),ma(),ga(243,"div",8),ga(244,"a",54),Fa(245,"Collider.Jar"),ma(),ma(),ma(),ma(),ma())},styles:[".card[_ngcontent-%COMP%]{width:95%;margin:32px auto;visibility:hidden;color:#000;border:0;box-shadow:1px 1px 10px 1px hsla(0,0%,53.3%,.43);transform:translateX(-100vw)}.card-header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #d3d3d3;border-top:1px solid #d3d3d3}.card__show[_ngcontent-%COMP%]{visibility:visible;transition:all 1s ease;-webkit-transition:all 1s ease;-moz-transition:all 1s ease;-o-transition:all 1s ease}.card__show--come-in[_ngcontent-%COMP%]{background-color:#fff;visibility:visible;transform:translateX(0)}.break[_ngcontent-%COMP%]{width:100%;height:100vh;background-color:#fff}a[_ngcontent-%COMP%]{color:#00008b}"]}),Rg),ym=[[["documentation-header"]],[["documentation-body"]]],bm=["documentation-header","documentation-body"],_m=["*"],wm=((Fg=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Fg)},Fg.\u0275cmp=ft({type:Fg,selectors:[["sam-documentation"]],ngContentSelectors:bm,decls:5,vars:0,consts:[[1,"documentation"],[1,"documentation--header"],[1,"documentation--body"]],template:function(e,t){1&e&&(Ta(ym),ga(0,"div",0),ga(1,"div",1),xa(2),ma(),ga(3,"div",2),xa(4,1),ma(),ma())},styles:[".documentation{display:block;position:relative;margin:24px auto;width:95%;color:#000;border:0;box-shadow:1px 1px 10px 1px hsla(0,0%,53.3%,.43)}.documentation--header{font-weight:400;line-height:1.5;text-align:center;font-size:2rem;color:#495057;padding:8px;background-color:#fff;border-bottom:1px solid #d3d3d3;border-top:1px solid #d3d3d3}.documentation--body{position:relative}"],encapsulation:2}),Fg),Cm=((Mg=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Mg)},Mg.\u0275cmp=ft({type:Mg,selectors:[["documentation-header"]],ngContentSelectors:_m,decls:1,vars:0,template:function(e,t){1&e&&(Ta(),xa(0))},encapsulation:2}),Mg),km=((Ng=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||Ng)},Ng.\u0275cmp=ft({type:Ng,selectors:[["documentation-body"]],ngContentSelectors:_m,decls:1,vars:0,template:function(e,t){1&e&&(Ta(),xa(0))},encapsulation:2}),Ng),Sm=["sam-cta",""],Em=["*"],Tm=((Lg=function(){function e(t,n){_classCallCheck(this,e),this.elRef=t,this.render=n,this.type="primary",this.small=!1}return _createClass(e,[{key:"ngOnInit",value:function(){"secondary"===this.type?this.render.addClass(this.elRef.nativeElement,"sam-btn--secondary"):"tertiary"===this.type&&this.render.addClass(this.elRef.nativeElement,"sam-btn--tertiary")}},{key:"onHover",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Lg)(la(ls),la(ps))},Lg.\u0275cmp=ft({type:Lg,selectors:[["","sam-cta",""]],hostVars:4,hostBindings:function(e,t){1&e&&wa("mouseover",(function(){return t.onHover()})),2&e&&Da("sam-btn",t.type)("sam-btn--small",t.small)},inputs:{type:"type",small:"small"},attrs:Sm,ngContentSelectors:Em,decls:1,vars:0,template:function(e,t){1&e&&(Ta(),xa(0))},styles:['label>*{display:block;pointer-events:none}.body{min-height:100vh}a{position:relative}a:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a:focus{position:relative;outline:none}a:focus:after{width:100%}.sam-title{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6{padding:8px}@media screen and (max-width:575px){.card-link,.date{display:block;width:100%;text-align:center;margin:0}}.sam-btn{font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;position:relative;min-height:52px;min-width:132px;padding:8px 16px;background:#fff;border:1px solid rgba(2,127,230,.36);border-radius:.25rem;cursor:pointer}.sam-btn:before{width:0;height:100%;bottom:0;left:50%;border-bottom:2px solid #027fe6;border-top:2px solid #027fe6}.sam-btn:after,.sam-btn:before{content:"";position:absolute;border-radius:0;transition:all .5s ease-in-out}.sam-btn:after{width:100%;height:0;top:50%;left:0;border-left:2px solid #027fe6;border-right:2px solid #027fe6}.sam-btn:focus{outline:none;box-shadow:4px 4px 15px 0 rgba(0,0,0,.47)}.sam-btn:focus:before{left:0;width:100%;border-radius:.25rem}.sam-btn:focus:after{top:0;height:100%;border-radius:.25rem}.sam-btn:hover{outline:none;box-shadow:4px 4px 15px 0 rgba(0,0,0,.47)}.sam-btn:hover:before{left:0;width:100%;border-radius:.25rem}.sam-btn:hover:after{top:0;height:100%;border-radius:.25rem}.sam-btn:active{background:#027fe6;color:#fff}.sam-btn:disabled{background:#f1f1f1;cursor:not-allowed;border:#000}.sam-btn--secondary{background:#027fe6;border:0;color:#fff}.sam-btn--secondary:before{border-top:2px solid #fff;border-bottom:2px solid #fff}.sam-btn--secondary:after{border-left:2px solid #fff;border-right:2px solid #fff}.sam-btn--secondary:active{background:#fff;color:#027fe6}.sam-btn--small{min-height:21px;padding:4px 8px;font-size:.75rem;margin-left:0}.sam-btn--tertiary{border:0;line-height:1;padding:4px;min-height:0;margin:8px 12px 8px 0}'],encapsulation:2}),Lg),xm=["*"],Im=((Ug=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"hasValue",value:function(){var e=document.getElementById(this.field_id);return!!(e&&e.value&&e.value.match(/[^\s*$]/g))&&e.value.match(/[^\s*$]/g).length>0}}]),e}()).\u0275fac=function(e){return new(e||Ug)},Ug.\u0275cmp=ft({type:Ug,selectors:[["sam-input-wrapper"]],inputs:{field_id:"field_id",label:"label"},ngContentSelectors:xm,decls:4,vars:3,consts:[[1,"sam-input-wrapper"],[1,"sam-input-wrapper--label",3,"for"]],template:function(e,t){1&e&&(Ta(),ga(0,"span",0),xa(1),ga(2,"label",1),Fa(3),ma(),ma()),2&e&&(ni(2),fa("for",t.field_id),sa("hasVal",t.hasValue()),ni(1),La(t.label))},styles:['label>*{display:block;pointer-events:none}.body{min-height:100vh}a{position:relative}a:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a:focus{position:relative;outline:none}a:focus:after{width:100%}.sam-title{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6{padding:8px}@media screen and (max-width:575px){.card-link,.date{display:block;width:100%;text-align:center;margin:0}}.sam-input-wrapper{display:block;position:relative;margin:24px 24px 24px 0;width:100%}.sam-input-wrapper:before{width:0;height:100%;bottom:0;left:50%;border-bottom:2px solid #027fe6;border-top:2px solid #027fe6}.sam-input-wrapper:after,.sam-input-wrapper:before{content:"";position:absolute;border-radius:0;transition:all .5s ease-in-out}.sam-input-wrapper:after{width:100%;height:0;top:50%;left:0;border-left:2px solid #027fe6;border-right:2px solid #027fe6}.sam-input-wrapper:focus-within{outline:none}.sam-input-wrapper:focus-within:before{left:0;width:100%;border-radius:.25rem}.sam-input-wrapper:focus-within:after{top:0;height:100%;border-radius:.25rem}.sam-input-wrapper--field{display:inline-block;width:100%;height:calc(2.25rem + 2px);padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;background-color:#fff;border:0;border-bottom:2px solid rgba(2,127,230,.36);transition:all .5s ease-in-out;color:#5e6770}.sam-input-wrapper--field:focus{-webkit-appearance:none;outline:none}.sam-input-wrapper--field[invalid=true]{border:2px solid red}.sam-input-wrapper--field:focus+.sam-input-wrapper--label{top:-28px;left:-15px;transform:scale(.75);color:#027fe6}.sam-input-wrapper--field:focus+.sam-input-wrapper--label[invalid=true]{color:red}.sam-input-wrapper--field:disabled{background:#f1f1f1;cursor:not-allowed;border-bottom:2px solid #7a7a7a}.sam-input-wrapper--field:disabled+.sam-input-wrapper--label{cursor:not-allowed;color:#000}.sam-input-wrapper--label{position:absolute;top:0;left:0;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;transition:all .25s ease-in-out}.sam-input-wrapper--label[invalid=true]{color:red}.sam-input-wrapper--label[hasVal=true]{top:-28px;left:-15px;transform:scale(.75);color:#5e6770}textarea{min-height:calc(2.25rem + 2px)}'],encapsulation:2}),Ug),Pm=((Vg=function(){function e(){_classCallCheck(this,e),this.default=!0}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Vg)},Vg.\u0275dir=bt({type:Vg,selectors:[["","sam-input",""]],hostVars:2,hostBindings:function(e,t){2&e&&Da("sam-input-wrapper--field",t.default)},inputs:{default:"default"}}),Vg),Om=["*"],Dm=((qg=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||qg)},qg.\u0275cmp=ft({type:qg,selectors:[["sam-checkbox"]],hostVars:2,hostBindings:function(e,t){2&e&&Da("sam-checkbox-wrapper",!0)},inputs:{field_id:"field_id",label:"label"},ngContentSelectors:Om,decls:3,vars:2,consts:[[1,"sam-checkbox--label",3,"for"]],template:function(e,t){1&e&&(Ta(),xa(0),ga(1,"label",0),Fa(2),ma()),2&e&&(ni(1),fa("for",t.field_id),ni(1),La(t.label))},styles:['label>*{display:block;pointer-events:none}.body{min-height:100vh}a{position:relative}a:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a:focus{position:relative;outline:none}a:focus:after{width:100%}.sam-title{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6{padding:8px}@media screen and (max-width:575px){.card-link,.date{display:block;width:100%;text-align:center;margin:0}}.sam-checkbox-wrapper{cursor:pointer;display:inline-block;position:relative;min-height:32px}.sam-checkbox--field{cursor:pointer;position:absolute;opacity:0}.sam-checkbox--field:focus+.sam-checkbox--label:before{outline:2px solid rgba(2,127,230,.42)}.sam-checkbox--field:disabled+.sam-checkbox--label{color:#aaa9a9;cursor:not-allowed}.sam-checkbox--field:disabled+.sam-checkbox--label:before{background:#aaa9a9}.sam-checkbox--field[checked=true]+.sam-checkbox--label:before{border:2px solid #027fe6}.sam-checkbox--field[checked=true]+.sam-checkbox--label:after{content:"";display:block;position:absolute;top:calc(50% - 19px);left:-16px;width:64px;height:32px;border-bottom:6px solid #027fe6;border-left:6px solid #027fe6;transform:rotate(-45deg) scale(.4)}.sam-checkbox--label{font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;cursor:pointer;display:inline-block;position:relative;left:0;margin:0;line-height:2;padding-left:40px;transition:all .25s ease-in-out}.sam-checkbox--label:before{width:32px;top:calc(50% - 16px);left:0;margin-bottom:0;border:1px solid #aaa9a9;background:#fff}.sam-checkbox--label:after,.sam-checkbox--label:before{transition:all .25s ease-in-out;content:"";display:block;position:absolute;height:32px}.sam-checkbox--label:after{top:calc(50% - 19px);left:-16px;width:64px;transform:rotate(-45deg) scale(.4)}'],encapsulation:2}),qg),Am=((jg=function(){function e(){_classCallCheck(this,e),this.default=!0}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||jg)},jg.\u0275dir=bt({type:jg,selectors:[["","sam-checkbox",""]],hostVars:2,hostBindings:function(e,t){2&e&&Da("sam-checkbox--field",t.default)},inputs:{default:"default"}}),jg),Rm=["*"],Nm=((Wg=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Wg)},Wg.\u0275cmp=ft({type:Wg,selectors:[["sam-toggle"]],hostVars:2,hostBindings:function(e,t){2&e&&Da("sam-toggle-wrapper",!0)},inputs:{field_id:"field_id",label:"label"},ngContentSelectors:Rm,decls:4,vars:2,consts:[[1,"sam-toggle--label",3,"for"],[1,"sam-toggle--label__icon"]],template:function(e,t){1&e&&(Ta(),xa(0),ga(1,"label",0),va(2,"span",1),Fa(3),ma()),2&e&&(ni(1),fa("for",t.field_id),ni(2),Va(" ",t.label,"\n"))},styles:['label>*{display:block;pointer-events:none}.body{min-height:100vh}a{position:relative}a:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a:focus{position:relative;outline:none}a:focus:after{width:100%}.sam-title{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6{padding:8px}@media screen and (max-width:575px){.card-link,.date{display:block;width:100%;text-align:center;margin:0}}.sam-toggle-wrapper{cursor:pointer;display:inline-block;position:relative;min-height:42px}.sam-toggle--field{cursor:pointer;position:absolute;opacity:0}.sam-toggle--field:focus+.sam-toggle--label:before{border:2px solid #027fe6}.sam-toggle--field:disabled+.sam-toggle--label{color:#aaa9a9;cursor:not-allowed}.sam-toggle--field:disabled+.sam-toggle--label:before{background:#aaa9a9}.sam-toggle--field[checked=true]+.sam-toggle--label:before{background:#fff}.sam-toggle--field[checked=true]+.sam-toggle--label:after{top:calc(50% - 17.5px);width:34px;height:34px;left:40px;border:0;background:#027fe6;box-shadow:0 0 5px 2px rgba(2,127,230,.36)}.sam-toggle--field[checked=true]+.sam-toggle--label .sam-toggle--label__icon{top:calc(50% - 16.5px);width:34px;height:34px;left:40px}.sam-toggle--field[checked=true]+.sam-toggle--label .sam-toggle--label__icon:before{left:18px;top:7px;border-right:2px solid #fff;transform:rotate(30deg)}.sam-toggle--field[checked=true]+.sam-toggle--label .sam-toggle--label__icon:after{height:10px;top:17px;left:10px;border-left:2px solid #fff}.sam-toggle--label{font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;cursor:pointer;display:inline-block;position:relative;left:0;margin:0;line-height:2.5;padding-left:88px}.sam-toggle--label:before{width:80px;height:42px;top:calc(50% - 21px);left:0;margin-bottom:0}.sam-toggle--label:after,.sam-toggle--label:before{content:"";display:block;position:absolute;border:1px solid #aaa9a9;background:#fcfafa;border-radius:50px;transition:all .25s ease-in-out}.sam-toggle--label:after{top:calc(50% - 12px);left:4px;width:24px;height:24px;box-shadow:0 0 5px 2px #aaa9a9}.sam-toggle--label__icon{display:block;position:absolute;top:calc(50% - 13px);left:4px;width:24px;height:24px;transition:all .25s ease-in-out}.sam-toggle--label__icon:before{border-right:2px solid #aaa9a9;transform:rotate(45deg)}.sam-toggle--label__icon:after,.sam-toggle--label__icon:before{content:"";display:block;position:absolute;height:20px;top:calc(50% - 9px);left:calc(50% - 1px);z-index:1;transition:all .25s ease-in-out;border-radius:50px}.sam-toggle--label__icon:after{border-left:2px solid #aaa9a9;transform:rotate(-45deg)}'],encapsulation:2}),Wg),Mm=((Bg=function(){function e(){_classCallCheck(this,e),this.default=!0}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Bg)},Bg.\u0275dir=bt({type:Bg,selectors:[["","sam-toggle",""]],hostVars:2,hostBindings:function(e,t){2&e&&Da("sam-toggle--field",t.default)},inputs:{default:"default"}}),Bg),Fm=["*"],Lm=((Hg=function(){function e(){_classCallCheck(this,e),this.disabled=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"click",value:function(){this.checked=!0}}]),e}()).\u0275fac=function(e){return new(e||Hg)},Hg.\u0275cmp=ft({type:Hg,selectors:[["sam-radio-btn"]],hostVars:4,hostBindings:function(e,t){2&e&&Da("sam-radio-btn",!0)("sam-radio-btn-disabled",t.disabled)},inputs:{label:"label",id:"id",disabled:"disabled"},ngContentSelectors:Fm,decls:7,vars:3,consts:[[1,"sam-radio-container"],[1,"radio-btn"],[1,"sam-radio-label"],[1,"sr-only"]],template:function(e,t){1&e&&(Ta(),ga(0,"label",0),va(1,"span",1),xa(2),ga(3,"span",2),ga(4,"span",3),Fa(5),ma(),Fa(6),ma(),ma()),2&e&&(ni(1),sa("checked",t.checked),ni(4),La(t.groupLabel),ni(1),La(t.label))},styles:['label>*{display:block;pointer-events:none}.body{min-height:100vh}a{position:relative}a:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a:focus{position:relative;outline:none}a:focus:after{width:100%}.sam-title{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6{padding:8px}@media screen and (max-width:575px){.card-link,.date{display:block;width:100%;text-align:center;margin:0}}.sam-radio-btn{display:inline-block;padding:0 16px 16px 0}@media screen and (max-width:425px){.sam-radio-btn{display:block}}.sam-radio-group{display:block;width:100%}.sam-radio-container{cursor:pointer;position:relative;margin:0;padding:0;display:inline-block;width:100%}.sam-radio-container input{position:absolute;opacity:0;display:inline}.sam-radio-container .sam-radio-label{display:inline;margin-left:40px;cursor:pointer;display:inline-block}.sam-group-label,.sam-radio-container .sam-radio-label{font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300}.sam-group-label{display:block;padding-bottom:8px;font-weight:500}.radio-btn{position:absolute;display:inline-block;width:32px;height:32px;top:calc(50% - 16px);border:1px solid #929191;border-radius:50px;vertical-align:middle;transition:all .25s ease-in-out}.radio-btn:after,.radio-btn:before{content:"";display:block;position:absolute;width:0;height:0;background:#027fe6;border-radius:50px;top:50%;left:50%;transition:all .25s ease-in-out}.radio-btn[checked=true]{border:2px solid #027fe6}.radio-btn[checked=true]:before{width:12px;height:12px;border:2px solid #027fe6;top:calc(50% - 6px);left:calc(50% - 6px);width:14px;height:14px;border:1px solid #929191;top:calc(50% - 7px);left:calc(50% - 7px)}.sam-radio-btn-disabled,.sam-radio-btn-disabled .sam-radio-container{cursor:not-allowed}.sam-radio-btn-disabled .sam-radio-label{color:#929191}.sam-radio-btn-disabled .radio-btn{background:rgba(146,145,145,.49);cursor:not-allowed}'],encapsulation:2}),Hg),Vm=((zg=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngAfterContentInit",value:function(){var e=this;this.comps.forEach((function(t){t.groupLabel=e.groupLabel}))}},{key:"check",value:function(e){this.comps.forEach((function(t){t.checked=!1,t.id===e&&(t.checked=!0)}))}}]),e}()).\u0275fac=function(e){return new(e||zg)},zg.\u0275cmp=ft({type:zg,selectors:[["sam-radio-group"]],contentQueries:function(e,t,n){var r;1&e&&Cu(n,Lm,!1),2&e&&_u(r=ku())&&(t.comps=r)},hostVars:2,hostBindings:function(e,t){2&e&&Da("sam-radio-group",!0)},inputs:{groupLabel:"groupLabel"},ngContentSelectors:Fm,decls:3,vars:1,consts:[[1,"sam-group-label"]],template:function(e,t){1&e&&(Ta(),ga(0,"span",0),Fa(1),ma(),xa(2)),2&e&&(ni(1),La(t.groupLabel))},styles:['label>*{display:block;pointer-events:none}.body{min-height:100vh}a{position:relative}a:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a:focus{position:relative;outline:none}a:focus:after{width:100%}.sam-title{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6{padding:8px}@media screen and (max-width:575px){.card-link,.date{display:block;width:100%;text-align:center;margin:0}}.sam-radio-btn{display:inline-block;padding:0 16px 16px 0}@media screen and (max-width:425px){.sam-radio-btn{display:block}}.sam-radio-group{display:block;width:100%}.sam-radio-container{cursor:pointer;position:relative;margin:0;padding:0;display:inline-block;width:100%}.sam-radio-container input{position:absolute;opacity:0;display:inline}.sam-radio-container .sam-radio-label{display:inline;margin-left:40px;cursor:pointer;display:inline-block}.sam-group-label,.sam-radio-container .sam-radio-label{font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300}.sam-group-label{display:block;padding-bottom:8px;font-weight:500}.radio-btn{position:absolute;display:inline-block;width:32px;height:32px;top:calc(50% - 16px);border:1px solid #929191;border-radius:50px;vertical-align:middle;transition:all .25s ease-in-out}.radio-btn:after,.radio-btn:before{content:"";display:block;position:absolute;width:0;height:0;background:#027fe6;border-radius:50px;top:50%;left:50%;transition:all .25s ease-in-out}.radio-btn[checked=true]{border:2px solid #027fe6}.radio-btn[checked=true]:before{width:12px;height:12px;border:2px solid #027fe6;top:calc(50% - 6px);left:calc(50% - 6px);width:14px;height:14px;border:1px solid #929191;top:calc(50% - 7px);left:calc(50% - 7px)}.sam-radio-btn-disabled,.sam-radio-btn-disabled .sam-radio-container{cursor:not-allowed}.sam-radio-btn-disabled .sam-radio-label{color:#929191}.sam-radio-btn-disabled .radio-btn{background:rgba(146,145,145,.49);cursor:not-allowed}'],encapsulation:2}),zg),Um=["tooltipContainer"];function jm(e,t){1&e&&va(0,"span",7)}var qm,Bm,Wm,zm,Hm,Gm=["*"],Qm=0,Km=((qm=function(){function e(t){_classCallCheck(this,e),this.renderer=t,this.tooltipId="sam-tooltip-"+ ++Qm,this.tooltipLabel="Label "+Qm,this.tooltipAriaLabel=this.tooltipLabel+". Open tooltip",this.contentOpen=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"closeTooltip",value:function(){this.contentOpen=!1}},{key:"onScroll",value:function(){this.updateContainerPos()}},{key:"updateContainerPos",value:function(){var e=document.getElementById(this.tooltipId).getBoundingClientRect().top,t=window.innerHeight;this.renderer.setStyle(this.tooltipContainer.nativeElement,"bottom",t-e+16+"px");var n=document.getElementById(this.tooltipId).getBoundingClientRect().left,r=this.tooltipContainer.nativeElement.getBoundingClientRect().width;this.renderer.setStyle(this.tooltipContainer.nativeElement,"left",n-r/2+"px")}},{key:"toggleTooltip",value:function(){var e=this;this.contentOpen=!this.contentOpen,this.contentOpen?setTimeout((function(){e.updateContainerPos()})):document.getElementById(this.tooltipId).focus()}}]),e}()).\u0275fac=function(e){return new(e||qm)(la(ps))},qm.\u0275cmp=ft({type:qm,selectors:[["sam-tooltip"]],viewQuery:function(e,t){var n;1&e&&wu(Um,!0),2&e&&_u(n=ku())&&(t.tooltipContainer=n.first)},hostAttrs:[1,"sam-tooltip"],hostBindings:function(e,t){1&e&&wa("scroll",(function(e){return t.onScroll(e.target)}),!1,jn)},inputs:{tooltipId:"tooltipId",tooltipLabel:"tooltipLabel",tooltipAriaLabel:"tooltipAriaLabel"},ngContentSelectors:Gm,decls:9,vars:6,consts:[[1,"sam-tooltip--label",3,"for","innerHtml"],[1,"sam-tooltip--btn",3,"id","click"],["class","sam-tooltip--chevron",4,"ngIf"],["role","tooltip","aria-live","assertive",1,"sam-tooltip--container",3,"hidden"],["tooltipContainer",""],[1,"sr-only"],["aria-hidden","true",1,"sam-tooltip--container__close",3,"click"],[1,"sam-tooltip--chevron"]],template:function(e,t){1&e&&(Ta(),va(0,"label",0),ga(1,"button",1),wa("click",(function(){return t.toggleTooltip()})),ua(2,jm,1,0,"span",2),ma(),ga(3,"div",3,4),ga(5,"span",5),Fa(6,"Tooltip popup"),ma(),xa(7),ga(8,"button",6),wa("click",(function(){return t.toggleTooltip()})),ma(),ma()),2&e&&(fa("for",t.tooltipId)("innerHtml",t.tooltipLabel,Vr),ni(1),fa("id",t.tooltipId),sa("aria-label",t.tooltipAriaLabel),ni(1),fa("ngIf",t.contentOpen),ni(1),fa("hidden",!t.contentOpen))},directives:[Bl],styles:['label>*{display:block;pointer-events:none}.body{min-height:100vh}a{position:relative}a:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a:focus{position:relative;outline:none}a:focus:after{width:100%}.sam-title{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6{padding:8px}@media screen and (max-width:575px){.card-link,.date{display:block;width:100%;text-align:center;margin:0}}.sam-tooltip{display:block;position:relative;width:100%;height:100%;padding:8px 4px;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300}.sam-tooltip--label{display:inline;cursor:pointer}.sam-tooltip--btn{display:inline-block;position:relative;transition:all .15s ease-in-out;cursor:pointer;width:32px;height:32px;outline:0;color:#027fe6;background:#fff;border:1px solid #027fe6;border-radius:50%;margin-left:8px}.sam-tooltip--btn:active,.sam-tooltip--btn:hover{color:#fff;border:1px solid #fff;background:#027fe6}.sam-tooltip--btn:focus{outline:none}.sam-tooltip--btn:before{transition:all .15s ease-in-out;content:"";position:absolute;top:0;left:0;width:100%;height:100%;border:0 solid #027fe6;border-radius:50%}.sam-tooltip--btn:before:active,.sam-tooltip--btn:before:hover{border:1px solid #fff}.sam-tooltip--btn:focus:before{border:1px solid #027fe6;width:calc(100% + 8px);height:calc(100% + 8px);top:-4px;left:-4px}.sam-tooltip--btn:after{content:"?"}.sam-tooltip--container{display:block;position:fixed;min-width:128px;min-height:56px;background:#fff;border-radius:10px;bottom:calc(100% + 8px);box-shadow:1px 1px 10px 1px hsla(0,0%,53.3%,.43);padding:16px 24px 16px 16px;margin:0 16px;z-index:9999}.sam-tooltip--container__close{position:absolute;top:0;right:0;color:#027fe6;background:transparent;outline:0;border:0;width:32px;height:32px;cursor:pointer}.sam-tooltip--container__close:after{content:"x";padding:0 4px}.sam-tooltip--container__close:focus{outline:0}.sam-tooltip--container__close:focus:after{border:1px solid #027fe6}.sam-tooltip--chevron{display:inline-block;position:absolute;box-shadow:1px 1px 10px 1px hsla(0,0%,53.3%,.43);height:16px;left:calc(50% - 8px);bottom:calc(100% + 9px);z-index:9998}.sam-tooltip--chevron,.sam-tooltip--chevron:before{background:#fff;width:16px;transform:rotate(135deg)}.sam-tooltip--chevron:before{content:"";position:relative;display:block;border-radius:10px;height:35px;top:-4px;left:-6px}'],encapsulation:2}),qm),Ym=[[["sam-modal-header"]],[["sam-modal-body"]],[["sam-modal-footer"]]],Xm=["sam-modal-header","sam-modal-body","sam-modal-footer"],Jm=["*"],Zm=((Hm=function(){function e(t){_classCallCheck(this,e),this.renderer=t,this.opened=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"open",value:function(){var e=this;setTimeout((function(){e.opened=!0,e.renderer.addClass(document.querySelector("body"),"modal-open")}))}},{key:"close",value:function(){this.opened=!1,this.renderer.removeClass(document.querySelector("body"),"modal-open")}}]),e}()).\u0275fac=function(e){return new(e||Hm)(la(ps))},Hm.\u0275cmp=ft({type:Hm,selectors:[["sam-modal"]],hostVars:4,hostBindings:function(e,t){2&e&&Da("sam-modal-wrapper",!0)("sam-modal-wrapper-open",t.opened)},inputs:{imgURL:"imgURL"},ngContentSelectors:Xm,decls:7,vars:0,consts:[[1,"overlay",3,"click"],[1,"sam-modal-container"],["tabindex","0","role","button","aria-label","close modal window",1,"sam-modal-close",3,"click","keyup.enter","keyup.space"]],template:function(e,t){1&e&&(Ta(Ym),ga(0,"span",0),wa("click",(function(){return t.close()})),ma(),ga(1,"div",1),va(2,"span",1),xa(3),xa(4,1),xa(5,2),ga(6,"span",2),wa("click",(function(){return t.close()}))("keyup.enter",(function(){return t.close()}))("keyup.space",(function(){return t.close()})),ma(),ma())},styles:['label>*{display:block;pointer-events:none}.body{min-height:100vh}a{position:relative}a:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a:focus{position:relative;outline:none}a:focus:after{width:100%}.sam-title{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6{padding:8px}@media screen and (max-width:575px){.card-link,.date{display:block;width:100%;text-align:center;margin:0}}.sam-modal-wrapper{position:fixed;opacity:0;width:0;height:0;left:-9999px;top:-9999px;transition:opacity .5s ease-in-out}.modal-open{overflow:hidden}.overlay{background-color:rgba(0,0,0,.71);display:block;position:absolute}.overlay,.sam-modal-wrapper-open{top:0;left:0;width:100%;height:100%}.sam-modal-wrapper-open{opacity:1;display:flex;position:fixed;z-index:9999}.sam-modal-wrapper-open .sam-modal-container{display:block;position:relative;max-height:75vh;width:50vw;margin:auto;background:#fff;overflow-x:hidden;overflow-y:scroll;border:1px solid #7a7a7a;border-radius:10px;text-align:left}@media screen and (max-width:768px){.sam-modal-wrapper-open .sam-modal-container{width:80vw}}.sam-modal-wrapper-open .sam-modal-header{display:block;font-size:1rem;font-weight:400;color:#495057;font-weight:300;text-align:center;border-bottom:1px solid #7a7a7a;padding:16px 32px;font-size:24px;line-height:1.5;background-color:rgba(0,0,0,.03)}@media screen and (max-width:575px){.sam-modal-wrapper-open .sam-modal-header{padding-top:32px}}.sam-modal-wrapper-open .sam-modal-body{border-bottom:1px solid #7a7a7a;padding:16px}.sam-modal-wrapper-open .sam-modal-body,.sam-modal-wrapper-open .sam-modal-footer{display:block;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300}.sam-modal-close{position:absolute;display:block;width:32px;height:32px;top:6px;right:6px;border-radius:10px;cursor:pointer}.sam-modal-close:before{left:-10px;border-right:2px solid #7a7a7a;transform:rotate(45deg)}.sam-modal-close:after,.sam-modal-close:before{content:"";position:absolute;top:-10px;display:inline-block;width:32px;height:32px}.sam-modal-close:after{left:11px;border-left:2px solid #7a7a7a;transform:rotate(-45deg)}.sam-modal-close:focus{border:none;outline:2px solid #027fe6}'],encapsulation:2}),Hm),$m=((zm=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||zm)},zm.\u0275cmp=ft({type:zm,selectors:[["sam-modal-header"]],hostVars:2,hostBindings:function(e,t){2&e&&Da("sam-modal-header",!0)},ngContentSelectors:Jm,decls:1,vars:0,template:function(e,t){1&e&&(Ta(),xa(0))},styles:['label>*{display:block;pointer-events:none}.body{min-height:100vh}a{position:relative}a:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a:focus{position:relative;outline:none}a:focus:after{width:100%}.sam-title{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6{padding:8px}@media screen and (max-width:575px){.card-link,.date{display:block;width:100%;text-align:center;margin:0}}.sam-modal-wrapper{position:fixed;opacity:0;width:0;height:0;left:-9999px;top:-9999px;transition:opacity .5s ease-in-out}.modal-open{overflow:hidden}.overlay{background-color:rgba(0,0,0,.71);display:block;position:absolute}.overlay,.sam-modal-wrapper-open{top:0;left:0;width:100%;height:100%}.sam-modal-wrapper-open{opacity:1;display:flex;position:fixed;z-index:9999}.sam-modal-wrapper-open .sam-modal-container{display:block;position:relative;max-height:75vh;width:50vw;margin:auto;background:#fff;overflow-x:hidden;overflow-y:scroll;border:1px solid #7a7a7a;border-radius:10px;text-align:left}@media screen and (max-width:768px){.sam-modal-wrapper-open .sam-modal-container{width:80vw}}.sam-modal-wrapper-open .sam-modal-header{display:block;font-size:1rem;font-weight:400;color:#495057;font-weight:300;text-align:center;border-bottom:1px solid #7a7a7a;padding:16px 32px;font-size:24px;line-height:1.5;background-color:rgba(0,0,0,.03)}@media screen and (max-width:575px){.sam-modal-wrapper-open .sam-modal-header{padding-top:32px}}.sam-modal-wrapper-open .sam-modal-body{border-bottom:1px solid #7a7a7a;padding:16px}.sam-modal-wrapper-open .sam-modal-body,.sam-modal-wrapper-open .sam-modal-footer{display:block;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300}.sam-modal-close{position:absolute;display:block;width:32px;height:32px;top:6px;right:6px;border-radius:10px;cursor:pointer}.sam-modal-close:before{left:-10px;border-right:2px solid #7a7a7a;transform:rotate(45deg)}.sam-modal-close:after,.sam-modal-close:before{content:"";position:absolute;top:-10px;display:inline-block;width:32px;height:32px}.sam-modal-close:after{left:11px;border-left:2px solid #7a7a7a;transform:rotate(-45deg)}.sam-modal-close:focus{border:none;outline:2px solid #027fe6}'],encapsulation:2}),zm),ev=((Wm=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Wm)},Wm.\u0275cmp=ft({type:Wm,selectors:[["sam-modal-body"]],hostVars:2,hostBindings:function(e,t){2&e&&Da("sam-modal-body",!0)},ngContentSelectors:Jm,decls:1,vars:0,template:function(e,t){1&e&&(Ta(),xa(0))},styles:['label>*{display:block;pointer-events:none}.body{min-height:100vh}a{position:relative}a:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a:focus{position:relative;outline:none}a:focus:after{width:100%}.sam-title{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6{padding:8px}@media screen and (max-width:575px){.card-link,.date{display:block;width:100%;text-align:center;margin:0}}.sam-modal-wrapper{position:fixed;opacity:0;width:0;height:0;left:-9999px;top:-9999px;transition:opacity .5s ease-in-out}.modal-open{overflow:hidden}.overlay{background-color:rgba(0,0,0,.71);display:block;position:absolute}.overlay,.sam-modal-wrapper-open{top:0;left:0;width:100%;height:100%}.sam-modal-wrapper-open{opacity:1;display:flex;position:fixed;z-index:9999}.sam-modal-wrapper-open .sam-modal-container{display:block;position:relative;max-height:75vh;width:50vw;margin:auto;background:#fff;overflow-x:hidden;overflow-y:scroll;border:1px solid #7a7a7a;border-radius:10px;text-align:left}@media screen and (max-width:768px){.sam-modal-wrapper-open .sam-modal-container{width:80vw}}.sam-modal-wrapper-open .sam-modal-header{display:block;font-size:1rem;font-weight:400;color:#495057;font-weight:300;text-align:center;border-bottom:1px solid #7a7a7a;padding:16px 32px;font-size:24px;line-height:1.5;background-color:rgba(0,0,0,.03)}@media screen and (max-width:575px){.sam-modal-wrapper-open .sam-modal-header{padding-top:32px}}.sam-modal-wrapper-open .sam-modal-body{border-bottom:1px solid #7a7a7a;padding:16px}.sam-modal-wrapper-open .sam-modal-body,.sam-modal-wrapper-open .sam-modal-footer{display:block;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300}.sam-modal-close{position:absolute;display:block;width:32px;height:32px;top:6px;right:6px;border-radius:10px;cursor:pointer}.sam-modal-close:before{left:-10px;border-right:2px solid #7a7a7a;transform:rotate(45deg)}.sam-modal-close:after,.sam-modal-close:before{content:"";position:absolute;top:-10px;display:inline-block;width:32px;height:32px}.sam-modal-close:after{left:11px;border-left:2px solid #7a7a7a;transform:rotate(-45deg)}.sam-modal-close:focus{border:none;outline:2px solid #027fe6}'],encapsulation:2}),Wm),tv=((Bm=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Bm)},Bm.\u0275cmp=ft({type:Bm,selectors:[["sam-modal-footer"]],hostVars:2,hostBindings:function(e,t){2&e&&Da("sam-modal-footer",!0)},ngContentSelectors:Jm,decls:1,vars:0,template:function(e,t){1&e&&(Ta(),xa(0))},styles:['label>*{display:block;pointer-events:none}.body{min-height:100vh}a{position:relative}a:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a:focus{position:relative;outline:none}a:focus:after{width:100%}.sam-title{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6{padding:8px}@media screen and (max-width:575px){.card-link,.date{display:block;width:100%;text-align:center;margin:0}}.sam-modal-wrapper{position:fixed;opacity:0;width:0;height:0;left:-9999px;top:-9999px;transition:opacity .5s ease-in-out}.modal-open{overflow:hidden}.overlay{background-color:rgba(0,0,0,.71);display:block;position:absolute}.overlay,.sam-modal-wrapper-open{top:0;left:0;width:100%;height:100%}.sam-modal-wrapper-open{opacity:1;display:flex;position:fixed;z-index:9999}.sam-modal-wrapper-open .sam-modal-container{display:block;position:relative;max-height:75vh;width:50vw;margin:auto;background:#fff;overflow-x:hidden;overflow-y:scroll;border:1px solid #7a7a7a;border-radius:10px;text-align:left}@media screen and (max-width:768px){.sam-modal-wrapper-open .sam-modal-container{width:80vw}}.sam-modal-wrapper-open .sam-modal-header{display:block;font-size:1rem;font-weight:400;color:#495057;font-weight:300;text-align:center;border-bottom:1px solid #7a7a7a;padding:16px 32px;font-size:24px;line-height:1.5;background-color:rgba(0,0,0,.03)}@media screen and (max-width:575px){.sam-modal-wrapper-open .sam-modal-header{padding-top:32px}}.sam-modal-wrapper-open .sam-modal-body{border-bottom:1px solid #7a7a7a;padding:16px}.sam-modal-wrapper-open .sam-modal-body,.sam-modal-wrapper-open .sam-modal-footer{display:block;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300}.sam-modal-close{position:absolute;display:block;width:32px;height:32px;top:6px;right:6px;border-radius:10px;cursor:pointer}.sam-modal-close:before{left:-10px;border-right:2px solid #7a7a7a;transform:rotate(45deg)}.sam-modal-close:after,.sam-modal-close:before{content:"";position:absolute;top:-10px;display:inline-block;width:32px;height:32px}.sam-modal-close:after{left:11px;border-left:2px solid #7a7a7a;transform:rotate(-45deg)}.sam-modal-close:focus{border:none;outline:2px solid #027fe6}'],encapsulation:2}),Bm);function nv(e,t){if(1&e&&(ga(0,"div",2),va(1,"img",3),ma()),2&e){var n=Sa();sa("placement",n.placement),ni(1),fa("src",n.imgSrc,Ur)}}var rv,iv,ov,av,sv=[[["card-header"]],[["card-body"]],[["card-footer"]]],uv=["card-header","card-body","card-footer"],cv=["*"],lv=((av=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||av)},av.\u0275cmp=ft({type:av,selectors:[["sam-card"]],hostVars:2,hostBindings:function(e,t){2&e&&Da("sam-card",!0)},inputs:{imgSrc:"imgSrc",placement:"placement"},ngContentSelectors:uv,decls:5,vars:3,consts:[[1,"sam-card--wrapper"],["class","sam-card--img",4,"ngIf"],[1,"sam-card--img"],[1,"",3,"src"]],template:function(e,t){1&e&&(Ta(sv),ga(0,"div",0),ua(1,nv,2,2,"div",1),xa(2),xa(3,1),xa(4,2),ma()),2&e&&(sa("imgSrc",!!t.imgSrc)("placement",t.placement),ni(1),fa("ngIf",t.imgSrc))},directives:[Bl],styles:['label>*{display:block;pointer-events:none}.body{min-height:100vh}a{position:relative}a:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a:focus{position:relative;outline:none}a:focus:after{width:100%}.sam-title{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6{padding:8px}@media screen and (max-width:575px){.card-link,.date{display:block;width:100%;text-align:center;margin:0}}.sam-card{font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;position:relative;margin:16px auto;padding:32px;text-align:center;display:block}.sam-card--wrapper{position:relative;box-shadow:1px 1px 10px 1px hsla(0,0%,53.3%,.43);background:#fff;min-width:250px;max-width:350px;margin:0 auto;display:grid;grid-template-areas:"header header header header header header" "body body body body body body" "footer footer footer footer footer footer"}.sam-card--wrapper[imgsrc=true]{grid-template-areas:"img img img img img img" "header header header header header header" "body body body body body body" "footer footer footer footer footer footer"}.sam-card--wrapper[placement=left]{grid-template-areas:"img img header header header header" "img img body body body body" "img img footer footer footer footer";max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content}@media screen and (max-width:575px){.sam-card--wrapper[placement=left]{grid-template-areas:"img img img img img img" "header header header header header header" "body body body body body body" "footer footer footer footer footer footer"}}.sam-card--wrapper[placement=right]{grid-template-areas:"header header header header img img " "body body body body img img" "footer footer footer footer img img";max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content}@media screen and (max-width:575px){.sam-card--wrapper[placement=right]{grid-template-areas:"img img img img img img" "header header header header header header" "body body body body body body" "footer footer footer footer footer footer"}}.sam-card--wrapper[placement=bottom]{grid-template-areas:"header header header header header header" "body body body body body body" "footer footer footer footer footer footer" "img img img img img img"}.sam-card--img{grid-area:img;position:relative;top:0;left:0;height:200px;width:100%}.sam-card--img img{display:block;position:absolute;height:100%;width:100%;left:0;top:0}.sam-card--img[placement=left],.sam-card--img[placement=right]{height:100%;width:200px;display:inline-block}@media screen and (max-width:575px){.sam-card--img[placement=left],.sam-card--img[placement=right]{height:200px;width:100%;grid-area:img}}.sam-card--header{grid-area:header;top:0;left:0;text-align:center;font-size:1.6rem;padding:8px;font-weight:500}.sam-card--body{grid-area:body;display:block;text-align:left;top:0;left:0;padding:0 16px}.sam-card--footer{grid-area:footer;border-top:1px solid hsla(0,0%,53.3%,.43);display:block;top:0;left:0;padding:8px;text-align:center;font-size:.85rem}'],encapsulation:2}),av),hv=((ov=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ov)},ov.\u0275cmp=ft({type:ov,selectors:[["card-header"]],hostVars:2,hostBindings:function(e,t){2&e&&Da("sam-card--header",!0)},ngContentSelectors:cv,decls:1,vars:0,template:function(e,t){1&e&&(Ta(),xa(0))},styles:['label>*{display:block;pointer-events:none}.body{min-height:100vh}a{position:relative}a:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a:focus{position:relative;outline:none}a:focus:after{width:100%}.sam-title{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6{padding:8px}@media screen and (max-width:575px){.card-link,.date{display:block;width:100%;text-align:center;margin:0}}.sam-card{font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;position:relative;margin:16px auto;padding:32px;text-align:center;display:block}.sam-card--wrapper{position:relative;box-shadow:1px 1px 10px 1px hsla(0,0%,53.3%,.43);background:#fff;min-width:250px;max-width:350px;margin:0 auto;display:grid;grid-template-areas:"header header header header header header" "body body body body body body" "footer footer footer footer footer footer"}.sam-card--wrapper[imgsrc=true]{grid-template-areas:"img img img img img img" "header header header header header header" "body body body body body body" "footer footer footer footer footer footer"}.sam-card--wrapper[placement=left]{grid-template-areas:"img img header header header header" "img img body body body body" "img img footer footer footer footer";max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content}@media screen and (max-width:575px){.sam-card--wrapper[placement=left]{grid-template-areas:"img img img img img img" "header header header header header header" "body body body body body body" "footer footer footer footer footer footer"}}.sam-card--wrapper[placement=right]{grid-template-areas:"header header header header img img " "body body body body img img" "footer footer footer footer img img";max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content}@media screen and (max-width:575px){.sam-card--wrapper[placement=right]{grid-template-areas:"img img img img img img" "header header header header header header" "body body body body body body" "footer footer footer footer footer footer"}}.sam-card--wrapper[placement=bottom]{grid-template-areas:"header header header header header header" "body body body body body body" "footer footer footer footer footer footer" "img img img img img img"}.sam-card--img{grid-area:img;position:relative;top:0;left:0;height:200px;width:100%}.sam-card--img img{display:block;position:absolute;height:100%;width:100%;left:0;top:0}.sam-card--img[placement=left],.sam-card--img[placement=right]{height:100%;width:200px;display:inline-block}@media screen and (max-width:575px){.sam-card--img[placement=left],.sam-card--img[placement=right]{height:200px;width:100%;grid-area:img}}.sam-card--header{grid-area:header;top:0;left:0;text-align:center;font-size:1.6rem;padding:8px;font-weight:500}.sam-card--body{grid-area:body;display:block;text-align:left;top:0;left:0;padding:0 16px}.sam-card--footer{grid-area:footer;border-top:1px solid hsla(0,0%,53.3%,.43);display:block;top:0;left:0;padding:8px;text-align:center;font-size:.85rem}'],encapsulation:2}),ov),dv=((iv=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||iv)},iv.\u0275cmp=ft({type:iv,selectors:[["card-body"]],hostVars:2,hostBindings:function(e,t){2&e&&Da("sam-card--body",!0)},ngContentSelectors:cv,decls:1,vars:0,template:function(e,t){1&e&&(Ta(),xa(0))},styles:['label>*{display:block;pointer-events:none}.body{min-height:100vh}a{position:relative}a:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a:focus{position:relative;outline:none}a:focus:after{width:100%}.sam-title{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6{padding:8px}@media screen and (max-width:575px){.card-link,.date{display:block;width:100%;text-align:center;margin:0}}.sam-card{font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;position:relative;margin:16px auto;padding:32px;text-align:center;display:block}.sam-card--wrapper{position:relative;box-shadow:1px 1px 10px 1px hsla(0,0%,53.3%,.43);background:#fff;min-width:250px;max-width:350px;margin:0 auto;display:grid;grid-template-areas:"header header header header header header" "body body body body body body" "footer footer footer footer footer footer"}.sam-card--wrapper[imgsrc=true]{grid-template-areas:"img img img img img img" "header header header header header header" "body body body body body body" "footer footer footer footer footer footer"}.sam-card--wrapper[placement=left]{grid-template-areas:"img img header header header header" "img img body body body body" "img img footer footer footer footer";max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content}@media screen and (max-width:575px){.sam-card--wrapper[placement=left]{grid-template-areas:"img img img img img img" "header header header header header header" "body body body body body body" "footer footer footer footer footer footer"}}.sam-card--wrapper[placement=right]{grid-template-areas:"header header header header img img " "body body body body img img" "footer footer footer footer img img";max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content}@media screen and (max-width:575px){.sam-card--wrapper[placement=right]{grid-template-areas:"img img img img img img" "header header header header header header" "body body body body body body" "footer footer footer footer footer footer"}}.sam-card--wrapper[placement=bottom]{grid-template-areas:"header header header header header header" "body body body body body body" "footer footer footer footer footer footer" "img img img img img img"}.sam-card--img{grid-area:img;position:relative;top:0;left:0;height:200px;width:100%}.sam-card--img img{display:block;position:absolute;height:100%;width:100%;left:0;top:0}.sam-card--img[placement=left],.sam-card--img[placement=right]{height:100%;width:200px;display:inline-block}@media screen and (max-width:575px){.sam-card--img[placement=left],.sam-card--img[placement=right]{height:200px;width:100%;grid-area:img}}.sam-card--header{grid-area:header;top:0;left:0;text-align:center;font-size:1.6rem;padding:8px;font-weight:500}.sam-card--body{grid-area:body;display:block;text-align:left;top:0;left:0;padding:0 16px}.sam-card--footer{grid-area:footer;border-top:1px solid hsla(0,0%,53.3%,.43);display:block;top:0;left:0;padding:8px;text-align:center;font-size:.85rem}'],encapsulation:2}),iv),fv=((rv=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||rv)},rv.\u0275cmp=ft({type:rv,selectors:[["card-footer"]],hostVars:2,hostBindings:function(e,t){2&e&&Da("sam-card--footer",!0)},ngContentSelectors:cv,decls:1,vars:0,template:function(e,t){1&e&&(Ta(),xa(0))},styles:['label>*{display:block;pointer-events:none}.body{min-height:100vh}a{position:relative}a:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a:focus{position:relative;outline:none}a:focus:after{width:100%}.sam-title{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6{padding:8px}@media screen and (max-width:575px){.card-link,.date{display:block;width:100%;text-align:center;margin:0}}.sam-card{font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;position:relative;margin:16px auto;padding:32px;text-align:center;display:block}.sam-card--wrapper{position:relative;box-shadow:1px 1px 10px 1px hsla(0,0%,53.3%,.43);background:#fff;min-width:250px;max-width:350px;margin:0 auto;display:grid;grid-template-areas:"header header header header header header" "body body body body body body" "footer footer footer footer footer footer"}.sam-card--wrapper[imgsrc=true]{grid-template-areas:"img img img img img img" "header header header header header header" "body body body body body body" "footer footer footer footer footer footer"}.sam-card--wrapper[placement=left]{grid-template-areas:"img img header header header header" "img img body body body body" "img img footer footer footer footer";max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content}@media screen and (max-width:575px){.sam-card--wrapper[placement=left]{grid-template-areas:"img img img img img img" "header header header header header header" "body body body body body body" "footer footer footer footer footer footer"}}.sam-card--wrapper[placement=right]{grid-template-areas:"header header header header img img " "body body body body img img" "footer footer footer footer img img";max-width:-webkit-min-content;max-width:-moz-min-content;max-width:min-content}@media screen and (max-width:575px){.sam-card--wrapper[placement=right]{grid-template-areas:"img img img img img img" "header header header header header header" "body body body body body body" "footer footer footer footer footer footer"}}.sam-card--wrapper[placement=bottom]{grid-template-areas:"header header header header header header" "body body body body body body" "footer footer footer footer footer footer" "img img img img img img"}.sam-card--img{grid-area:img;position:relative;top:0;left:0;height:200px;width:100%}.sam-card--img img{display:block;position:absolute;height:100%;width:100%;left:0;top:0}.sam-card--img[placement=left],.sam-card--img[placement=right]{height:100%;width:200px;display:inline-block}@media screen and (max-width:575px){.sam-card--img[placement=left],.sam-card--img[placement=right]{height:200px;width:100%;grid-area:img}}.sam-card--header{grid-area:header;top:0;left:0;text-align:center;font-size:1.6rem;padding:8px;font-weight:500}.sam-card--body{grid-area:body;display:block;text-align:left;top:0;left:0;padding:0 16px}.sam-card--footer{grid-area:footer;border-top:1px solid hsla(0,0%,53.3%,.43);display:block;top:0;left:0;padding:8px;text-align:center;font-size:.85rem}'],encapsulation:2}),rv);function pv(e,t){if(1&e&&(ga(0,"span",12),Fa(1),iu(2,"date"),ma()),2&e){var n=Sa();ni(1),La(au(2,1,n.date,"MMM"))}}function gv(e,t){if(1&e&&(ga(0,"span",12),Fa(1),iu(2,"date"),ma()),2&e){var n=Sa();ni(1),La(au(2,1,n.date,"yyyy"))}}function mv(e,t){if(1&e&&(ga(0,"span",12),Fa(1),iu(2,"date"),iu(3,"date"),ma()),2&e){var n=Sa();ni(1),Ua("",au(2,2,n.years[0],"yyyy")," - ",au(3,5,n.years[11],"yyyy"),"")}}function vv(e,t){1&e&&(ga(0,"div",4),ga(1,"span",13),Fa(2,"Sun"),ma(),ga(3,"span",13),Fa(4,"Mon"),ma(),ga(5,"span",13),Fa(6,"Tue"),ma(),ga(7,"span",13),Fa(8,"Wed"),ma(),ga(9,"span",13),Fa(10,"Thu"),ma(),ga(11,"span",13),Fa(12,"Fri"),ma(),ga(13,"span",13),Fa(14,"Sat"),ma(),ma())}function yv(e,t){if(1&e){var n=ya();ga(0,"button",18),wa("click",(function(){Xt(n);var e=t.$implicit;return Sa(3).selectDate(e)}))("keydown",(function(e){Xt(n);var r=t.$implicit;return Sa(3).onKeyDown(e,r)})),iu(1,"date"),Fa(2),iu(3,"date"),ma()}if(2&e){var r=t.$implicit,i=Sa(3);fa("id",r)("tabindex",i.wasLastSelected(r)?0:-1),sa("aria-checked",r.getDate()===i.selectedDate.getDate()&&r.getMonth()===i.selectedDate.getMonth())("selectedDate",r.getDate()===i.selectedDate.getDate()&&r.getMonth()===i.selectedDate.getMonth())("aria-label",au(1,7,r,"fullDate"))("notInMonth",r.getMonth()!==i.date.getMonth()),ni(2),Va("",au(3,10,r,"dd")," ")}}function bv(e,t){if(1&e&&(ga(0,"div",16),ua(1,yv,4,13,"button",17),ma()),2&e){var n=t.index,r=Sa(2);ni(1),fa("ngForOf",r.getDaysFromWeek(n))}}function _v(e,t){if(1&e&&(ga(0,"div",14),ua(1,bv,2,1,"div",15),ma()),2&e){var n=Sa();ni(1),fa("ngForOf",n.weeks)}}function wv(e,t){if(1&e){var n=ya();ga(0,"button",20),wa("click",(function(){Xt(n);var e=t.$implicit;return Sa(2).selectDate(e)})),iu(1,"date"),Fa(2),iu(3,"date"),ma()}if(2&e){var r=t.$implicit,i=Sa(2);fa("id",r),sa("aria-checked",r.getMonth()===i.selectedDate.getMonth()&&r.getFullYear()===i.selectedDate.getFullYear())("selectedDate",r.getMonth()===i.selectedDate.getMonth()&&r.getFullYear()===i.selectedDate.getFullYear())("aria-label",au(1,5,r,"fullDate")),ni(2),Va("",au(3,8,r,"MMM")," ")}}function Cv(e,t){if(1&e&&(ga(0,"div",14),ua(1,wv,4,11,"button",19),ma()),2&e){var n=Sa();ni(1),fa("ngForOf",n.months)}}function kv(e,t){if(1&e){var n=ya();ga(0,"button",22),wa("click",(function(){Xt(n);var e=t.$implicit;return Sa(2).selectDate(e)})),iu(1,"date"),Fa(2),iu(3,"date"),ma()}if(2&e){var r=t.$implicit,i=Sa(2);sa("selectedDate",r.getFullYear()===i.selectedDate.getFullYear())("aria-label",au(1,3,r,"fullDate")),ni(2),Va("",au(3,6,r,"yyyy")," ")}}function Sv(e,t){if(1&e&&(ga(0,"div",14),ua(1,kv,4,9,"button",21),ma()),2&e){var n=Sa();ni(1),fa("ngForOf",n.years)}}var Ev,Tv=function(e){return e[e.days=0]="days",e[e.months=1]="months",e[e.years=2]="years",e}({}),xv=((Ev=function(){function e(){_classCallCheck(this,e),this.selectedDate=new Date,this.dateChange=new cu,this.date=new Date,this.open=!1,this.weeks=[],this.weekDays=[],this.years=[],this.months=[],this.view=Tv.days}return _createClass(e,[{key:"ngOnInit",value:function(){this.weekDays=this.getWeeksInMonth(this.date.getMonth(),this.date.getFullYear()),this.initYears(this.date),this.initMonths(this.date),this.lastSelectedDate=this.date}},{key:"initYears",value:function(e){this.years=[];for(var t=-6,n=0;n<12;n++)this.years.push(new Date(e.getFullYear()+t,0,1)),t++}},{key:"initMonths",value:function(e){this.months=[];for(var t=0;t<12;t++)this.months.push(new Date(e.getFullYear(),t,1))}},{key:"getWeeksInMonth",value:function(e,t){this.weeks=[];for(var n=new Date(t,e,1),r=new Date(t,e+1,0).getDate(),i=0,o=0,a=7-n.getDay();o<=r;){for(var s=[],u=0;u<7;u++){var c=new Date(this.date.getFullYear(),this.date.getMonth(),o+u);0==i&&(c=new Date(this.date.getFullYear(),this.date.getMonth(),o+u-(n.getDay()-1))),s.push(c)}this.weeks.push(s),o=a+1,(a+=7)>r&&(a=r),i++}return this.weeks}},{key:"clicked",value:function(){this.open=!this.open}},{key:"onChange",value:function(){this.dateChange.emit(this.selectedDate)}},{key:"selectLeft",value:function(){this.view===Tv.days?(this.date=new Date(this.date.getFullYear(),this.date.getMonth()-1,this.date.getDate()),this.weekDays=this.getWeeksInMonth(this.date.getMonth(),this.date.getFullYear()),this.onChange()):this.view===Tv.months?(this.date=new Date(this.date.getFullYear()-1,0,1),this.initMonths(this.date)):this.view===Tv.years&&(this.date=new Date(this.date.getFullYear()-7,0,1),this.initYears(this.date))}},{key:"selectRight",value:function(){this.view===Tv.days?(this.date=new Date(this.date.getFullYear(),this.date.getMonth()+1,this.date.getDate()),this.weekDays=this.getWeeksInMonth(this.date.getMonth(),this.date.getFullYear()),this.onChange()):this.view===Tv.months?(this.date=new Date(this.date.getFullYear()+1,0,1),this.onChange()):this.view===Tv.years&&(this.date=new Date(this.date.getFullYear()+7,0,1),this.initYears(this.date))}},{key:"selectDate",value:function(e){var t=this;this.date=new Date(e.getFullYear(),e.getMonth(),e.getDate()),this.weekDays=this.getWeeksInMonth(this.date.getMonth(),this.date.getFullYear()),this.initYears(this.date),this.initMonths(this.date),this.view===Tv.months?this.view=Tv.days:this.view===Tv.years?this.view=Tv.months:(this.selectedDate=this.date,this.onChange(),this.open=!1),this.lastSelectedDate=this.date,setTimeout((function(){document.getElementById(""+t.lastSelectedDate).focus()}),0)}},{key:"getDaysFromWeek",value:function(e){return this.weekDays[e]}},{key:"changeView",value:function(){this.view===Tv.days?this.view=Tv.months:this.view===Tv.months&&(this.view=Tv.years)}},{key:"wasLastSelected",value:function(e){return e.getDate()===this.lastSelectedDate.getDate()&&e.getMonth()===this.lastSelectedDate.getMonth()}},{key:"onKeyDown",value:function(e,t){var n,r=this;switch(e.key){case"ArrowDown":case"Down":e.preventDefault(),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()+7);break;case"ArrowUp":case"Up":e.preventDefault(),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()-7);break;case"ArrowLeft":case"Left":e.preventDefault(),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()-1);break;case"ArrowRight":case"Right":e.preventDefault(),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1)}n&&document.getElementById(""+n)?(document.getElementById(""+n).focus(),this.lastSelectedDate=n):n&&(n<this.date?this.selectLeft():this.selectRight(),setTimeout((function(){r.lastSelectedDate=n,document.getElementById(""+n).focus()}),0))}}]),e}()).\u0275fac=function(e){return new(e||Ev)},Ev.\u0275cmp=ft({type:Ev,selectors:[["sam-datepicker"]],hostAttrs:[1,"sam-datepicker-component"],inputs:{selectedDate:["date","selectedDate"]},outputs:{dateChange:"dateChange"},decls:24,vars:13,consts:[[1,"sam-date-wrapper"],["type","string",1,"sam-date-input",3,"value","change","click"],["src","assets/calendar.png","tabindex","0","role","button","aria-label","Open datepicker","role","checkbox",1,"datepicker-icon",3,"keydown.enter","keydown.space","click"],[1,"sam-datepicker"],[1,"sam-datepicker--header"],["id","navigateLeft","tabindex","0","aria-describedby","navigateLeft dateView",1,"sam-datepicker--header__left",3,"click"],[1,"sr-only"],["id","datePickerView","aria-describedby","dateView datePickerView",1,"sam-datepicker--header__date",3,"click"],["id","dateView",4,"ngIf"],["id","navigateRight","aria-describedby","dateView navigateRight","tabindex","0",1,"sam-datepicker--header__right",3,"click"],["class","sam-datepicker--header",4,"ngIf"],["class","sam-datepicker--body",4,"ngIf"],["id","dateView"],[1,"sam-datepicker--header__day"],[1,"sam-datepicker--body"],["class","sam-datepicker--week",4,"ngFor","ngForOf"],[1,"sam-datepicker--week"],["class","sam-datepicker--week__d","role","checkbox",3,"id","tabindex","click","keydown",4,"ngFor","ngForOf"],["role","checkbox",1,"sam-datepicker--week__d",3,"id","tabindex","click","keydown"],["class","sam-datepicker--week__m",3,"id","click",4,"ngFor","ngForOf"],[1,"sam-datepicker--week__m",3,"id","click"],["class","sam-datepicker--week__y",3,"click",4,"ngFor","ngForOf"],[1,"sam-datepicker--week__y",3,"click"]],template:function(e,t){1&e&&(ga(0,"span",0),ga(1,"input",1),wa("change",(function(){return t.onChange()}))("click",(function(){return t.clicked()})),iu(2,"date"),ma(),ga(3,"img",2),wa("keydown.enter",(function(){return t.clicked()}))("keydown.space",(function(){return t.clicked()}))("click",(function(){return t.clicked()})),ma(),ma(),ga(4,"div",3),ga(5,"div",4),ga(6,"button",5),wa("click",(function(){return t.selectLeft()})),ga(7,"span",6),Fa(8,"Navigate left button"),ma(),Fa(9," < "),ma(),ga(10,"button",7),wa("click",(function(){return t.changeView()})),ga(11,"span",6),Fa(12,"Click to change the datepicker view"),ma(),ua(13,pv,3,4,"span",8),ua(14,gv,3,4,"span",8),ua(15,mv,4,8,"span",8),ma(),ga(16,"button",9),wa("click",(function(){return t.selectRight()})),ga(17,"span",6),Fa(18,"Navigate right button"),ma(),Fa(19," > "),ma(),ma(),ua(20,vv,15,0,"div",10),ua(21,_v,2,1,"div",11),ua(22,Cv,2,1,"div",11),ua(23,Sv,2,1,"div",11),ma()),2&e&&(ni(1),fa("value",au(2,10,t.selectedDate,"EEE, MMM dd, yyyy")),ni(2),sa("aria-checked",t.open),ni(1),sa("open",t.open),ni(9),fa("ngIf",0==t.view),ni(1),fa("ngIf",1==t.view),ni(1),fa("ngIf",2==t.view),ni(5),fa("ngIf",0==t.view),ni(1),fa("ngIf",0==t.view),ni(1),fa("ngIf",1==t.view),ni(1),fa("ngIf",2==t.view))},directives:[Bl,jl],pipes:[Yl],styles:['label[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block;pointer-events:none}.body[_ngcontent-%COMP%]{min-height:100vh}a[_ngcontent-%COMP%]{position:relative}a[_ngcontent-%COMP%]:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a[_ngcontent-%COMP%]:focus{position:relative;outline:none}a[_ngcontent-%COMP%]:focus:after{width:100%}.sam-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6[_ngcontent-%COMP%]{padding:8px}@media screen and (max-width:575px){.card-link[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;margin:0}}.sam-datepicker-component[_ngcontent-%COMP%]{position:relative}.sam-date-input[_ngcontent-%COMP%]::-webkit-datepicker-picker-indicator, .sam-date-input[_ngcontent-%COMP%]::-webkit-datetime-edit, .sam-date-input[_ngcontent-%COMP%]::-webkit-datetime-edit-day-field, .sam-date-input[_ngcontent-%COMP%]::-webkit-datetime-edit-fields-wrapper, .sam-date-input[_ngcontent-%COMP%]::-webkit-datetime-edit-month-field, .sam-date-input[_ngcontent-%COMP%]::-webkit-datetime-edit-text, .sam-date-input[_ngcontent-%COMP%]::-webkit-datetime-edit-year-field, .sam-date-input[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}input.sam-date-input[_ngcontent-%COMP%]{width:calc(100% - 50px);height:100%;text-align:center;border:none;cursor:pointer;border-radius:10px;z-index:2;position:absolute}.sam-date-wrapper[_ngcontent-%COMP%], input.sam-date-input[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300}.sam-date-wrapper[_ngcontent-%COMP%]{width:280px;height:48px;display:inline-block;border:1px solid #7a7a7a;border-radius:10px;position:relative}.sam-date-wrapper[_ngcontent-%COMP%]:active, .sam-date-wrapper[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{outline:none;background-color:#e6e3e3}.datepicker-icon[_ngcontent-%COMP%]{display:inline-block;box-sizing:content-box;position:relative;width:46px;height:44px;border-left:0;cursor:pointer;z-index:2;background:#fff;border-radius:10px;float:right}.datepicker-icon[_ngcontent-%COMP%]:focus, .datepicker-icon[_ngcontent-%COMP%]:hover{background-color:#e6e3e3;border-radius:10px}.sam-datepicker[_ngcontent-%COMP%]{position:absolute;width:280px;max-height:0;border:1px solid #7a7a7a;border-radius:10px;padding-top:48px;top:8px;background-color:#fff;z-index:1;transition:all .25s ease-in-out}.sam-datepicker[_ngcontent-%COMP%], .sam-datepicker[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:hidden}.sam-datepicker--header[_ngcontent-%COMP%]{width:100%;height:32px;background:#fcfafa;border-radius:10px}.sam-datepicker--header__day[_ngcontent-%COMP%]{color:#495057;width:14.285%}.sam-datepicker--header__day[_ngcontent-%COMP%], .sam-datepicker--header__left[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;display:inline-block;text-align:center}.sam-datepicker--header__left[_ngcontent-%COMP%]{border:0;outline:0;padding:0;background-color:transparent;color:#495057;line-height:2;height:32px;color:#027fe6;width:28%;cursor:pointer;transition:background-color .25s ease-in-out}.sam-datepicker--header__left[_ngcontent-%COMP%]:focus, .sam-datepicker--header__left[_ngcontent-%COMP%]:hover{background-color:#e6e3e3}.sam-datepicker--header__right[_ngcontent-%COMP%]{border:0;outline:0;padding:0;background-color:transparent;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;text-align:center;line-height:2;height:32px;display:inline-block;width:28%;color:#027fe6;cursor:pointer;transition:background-color .25s ease-in-out}.sam-datepicker--header__right[_ngcontent-%COMP%]:focus, .sam-datepicker--header__right[_ngcontent-%COMP%]:hover{background-color:#e6e3e3}.sam-datepicker--header__date[_ngcontent-%COMP%]{border:0;outline:0;padding:0;background-color:transparent;display:inline-block;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;text-align:center;line-height:2;width:44%;height:32px;cursor:pointer;color:#027fe6;transition:background-color .25s ease-in-out}.sam-datepicker--header__date[_ngcontent-%COMP%]:focus, .sam-datepicker--header__date[_ngcontent-%COMP%]:hover{background-color:#e6e3e3}.sam-datepicker--body[_ngcontent-%COMP%], .sam-datepicker--week[_ngcontent-%COMP%]{display:block;width:100%}.sam-datepicker--week[_ngcontent-%COMP%]{height:42px}.sam-datepicker--week__y[_ngcontent-%COMP%]{border:0;outline:0;padding:0;background-color:transparent;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;line-height:3.5;height:84px;width:25%;cursor:pointer}.sam-datepicker--week__y[_ngcontent-%COMP%]:focus, .sam-datepicker--week__y[_ngcontent-%COMP%]:hover{background-color:#e6e3e3;border-radius:8px}.sam-datepicker--week__y[selectedDate=true][_ngcontent-%COMP%]{background-color:#027fe6;color:#fff;border-radius:8px}.sam-datepicker--week__y[selectedDate=true][_ngcontent-%COMP%]:focus{background-color:#024175}.sam-datepicker--week__y[_ngcontent-%COMP%]:focus{border:1px solid #001b31}.sam-datepicker--week__m[_ngcontent-%COMP%]{border:0;outline:0;padding:0;background-color:transparent;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;line-height:3.5;height:84px;width:25%;cursor:pointer}.sam-datepicker--week__m[_ngcontent-%COMP%]:focus, .sam-datepicker--week__m[_ngcontent-%COMP%]:hover{background-color:#e6e3e3;border-radius:8px}.sam-datepicker--week__m[selectedDate=true][_ngcontent-%COMP%]{background-color:#027fe6;color:#fff;border-radius:8px}.sam-datepicker--week__m[selectedDate=true][_ngcontent-%COMP%]:focus{background-color:#024175}.sam-datepicker--week__m[_ngcontent-%COMP%]:focus{border:1px solid #001b31}.sam-datepicker--week__d[_ngcontent-%COMP%]{border:0;outline:0;padding:0;background-color:transparent;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;line-height:2.5;display:inline-block;width:14.28%;height:100%;text-align:center;cursor:pointer;border-radius:8px;transition:background-color .25s ease-in-out}.sam-datepicker--week__d[_ngcontent-%COMP%]:focus, .sam-datepicker--week__d[_ngcontent-%COMP%]:hover{background-color:#e6e3e3}.sam-datepicker--week__d[inRange=true][_ngcontent-%COMP%]{background-color:#6dbdff;color:#fff;border-radius:0}.sam-datepicker--week__d[selectedDate=true][_ngcontent-%COMP%]{background-color:#027fe6;color:#fff}.sam-datepicker--week__d[selectedDate=true][_ngcontent-%COMP%]:focus{background-color:#024175}.sam-datepicker--week__d[_ngcontent-%COMP%]:focus{border:1px solid #001b31}.sam-datepicker--week__d[notInMonth=true][_ngcontent-%COMP%]{color:#e6e3e3}.sam-datepicker--week__d[notInMonth=true][_ngcontent-%COMP%]:focus, .sam-datepicker--week__d[notInMonth=true][_ngcontent-%COMP%]:hover{background-color:#e6e3e3;color:#fff}.sam-datepicker--week__d[notInMonth=true][selectedDate=true][_ngcontent-%COMP%]{background-color:rgba(2,127,230,.42);color:#fff;border-radius:8px}.sam-datepicker[open=true][_ngcontent-%COMP%]{visibility:visible;display:block;max-height:364px}.sam-datepicker[open=true][_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .sam-datepicker[open=true][_ngcontent-%COMP%]   *[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:visible}']}),Ev);function Iv(e,t){if(1&e&&(ga(0,"span",12),Fa(1),iu(2,"date"),ma()),2&e){var n=Sa();ni(1),La(au(2,1,n.date,"MMM"))}}function Pv(e,t){if(1&e&&(ga(0,"span",12),Fa(1),iu(2,"date"),ma()),2&e){var n=Sa();ni(1),La(au(2,1,n.date,"yyyy"))}}function Ov(e,t){if(1&e&&(ga(0,"span",12),Fa(1),iu(2,"date"),iu(3,"date"),ma()),2&e){var n=Sa();ni(1),Ua("",au(2,2,n.years[0],"yyyy")," - ",au(3,5,n.years[11],"yyyy"),"")}}function Dv(e,t){1&e&&(ga(0,"div",4),ga(1,"span",13),Fa(2,"Sun"),ma(),ga(3,"span",13),Fa(4,"Mon"),ma(),ga(5,"span",13),Fa(6,"Tue"),ma(),ga(7,"span",13),Fa(8,"Wed"),ma(),ga(9,"span",13),Fa(10,"Thu"),ma(),ga(11,"span",13),Fa(12,"Fri"),ma(),ga(13,"span",13),Fa(14,"Sat"),ma(),ma())}function Av(e,t){if(1&e){var n=ya();ga(0,"button",18),wa("click",(function(){Xt(n);var e=t.$implicit;return Sa(3).selectDate(e)}))("keydown",(function(e){Xt(n);var r=t.$implicit;return Sa(3).onKeyDown(e,r)})),iu(1,"date"),Fa(2),iu(3,"date"),ma()}if(2&e){var r=t.$implicit,i=Sa(3);fa("id",r)("tabindex",i.wasLastSelected(r)?0:-1),sa("aria-checked",i.dSelected(r))("selectedDate",i.dSelected(r))("inRange",i.inRange(r))("aria-label",au(1,8,r,"fullDate"))("notInMonth",r.getMonth()!==i.date.getMonth()),ni(2),Va("",au(3,11,r,"dd")," ")}}function Rv(e,t){if(1&e&&(ga(0,"div",16),ua(1,Av,4,14,"button",17),ma()),2&e){var n=t.index,r=Sa(2);ni(1),fa("ngForOf",r.getDaysFromWeek(n))}}function Nv(e,t){if(1&e&&(ga(0,"div",14),ua(1,Rv,2,1,"div",15),ma()),2&e){var n=Sa();ni(1),fa("ngForOf",n.weeks)}}function Mv(e,t){if(1&e){var n=ya();ga(0,"button",20),wa("click",(function(){Xt(n);var e=t.$implicit;return Sa(2).selectDate(e)})),iu(1,"date"),Fa(2),iu(3,"date"),ma()}if(2&e){var r=t.$implicit,i=Sa(2);fa("id",r),sa("aria-checked",r.getMonth()===i.lastSelectedDate.getMonth()&&r.getFullYear()===i.lastSelectedDate.getFullYear())("selectedDate",r.getMonth()===i.lastSelectedDate.getMonth()&&r.getFullYear()===i.lastSelectedDate.getFullYear())("aria-label",au(1,5,r,"fullDate")),ni(2),Va("",au(3,8,r,"MMM")," ")}}function Fv(e,t){if(1&e&&(ga(0,"div",14),ua(1,Mv,4,11,"button",19),ma()),2&e){var n=Sa();ni(1),fa("ngForOf",n.months)}}function Lv(e,t){if(1&e){var n=ya();ga(0,"button",22),wa("click",(function(){Xt(n);var e=t.$implicit;return Sa(2).selectDate(e)})),iu(1,"date"),Fa(2),iu(3,"date"),ma()}if(2&e){var r=t.$implicit,i=Sa(2);sa("selectedDate",r.getFullYear()===i.lastSelectedDate.getFullYear())("aria-label",au(1,3,r,"fullDate")),ni(2),Va("",au(3,6,r,"yyyy")," ")}}function Vv(e,t){if(1&e&&(ga(0,"div",14),ua(1,Lv,4,9,"button",21),ma()),2&e){var n=Sa();ni(1),fa("ngForOf",n.years)}}var Uv,jv,qv=function(e){return e[e.days=0]="days",e[e.months=1]="months",e[e.years=2]="years",e}({}),Bv=((jv=function(){function e(){_classCallCheck(this,e),this.selectedFromDate=new Date,this.fromDateChange=new cu,this.selectedToDate=new Date,this.toDateChange=new cu,this.date=new Date,this.open=!1,this.weeks=[],this.weekDays=[],this.years=[],this.months=[],this.view=qv.days}return _createClass(e,[{key:"ngOnInit",value:function(){this.weekDays=this.getWeeksInMonth(this.date.getMonth(),this.date.getFullYear()),this.initYears(this.date),this.initMonths(this.date),this.lastSelectedDate=this.date,this.selectingDate=0}},{key:"initYears",value:function(e){this.years=[];for(var t=-6,n=0;n<12;n++)this.years.push(new Date(e.getFullYear()+t,0,1)),t++}},{key:"initMonths",value:function(e){this.months=[];for(var t=0;t<12;t++)this.months.push(new Date(e.getFullYear(),t,1))}},{key:"getWeeksInMonth",value:function(e,t){this.weeks=[];for(var n=new Date(t,e,1),r=new Date(t,e+1,0).getDate(),i=0,o=0,a=7-n.getDay();o<=r;){for(var s=[],u=0;u<7;u++){var c=new Date(this.date.getFullYear(),this.date.getMonth(),o+u);0==i&&(c=new Date(this.date.getFullYear(),this.date.getMonth(),o+u-(n.getDay()-1))),s.push(c)}this.weeks.push(s),o=a+1,(a+=7)>r&&(a=r),i++}return this.weeks}},{key:"clicked",value:function(){this.open=!this.open}},{key:"onChange",value:function(){0===this.selectingDate?(this.selectingDate=1,this.fromDateChange.emit(this.selectedFromDate)):1===this.selectingDate&&(this.selectingDate=0,this.toDateChange.emit(this.selectedToDate))}},{key:"selectLeft",value:function(){this.view===qv.days?(this.date=new Date(this.date.getFullYear(),this.date.getMonth()-1,this.date.getDate()),this.weekDays=this.getWeeksInMonth(this.date.getMonth(),this.date.getFullYear()),this.onChange()):this.view===qv.months?(this.date=new Date(this.date.getFullYear()-1,0,1),this.initMonths(this.date)):this.view===qv.years&&(this.date=new Date(this.date.getFullYear()-7,0,1),this.initYears(this.date))}},{key:"selectRight",value:function(){this.view===qv.days?(this.date=new Date(this.date.getFullYear(),this.date.getMonth()+1,this.date.getDate()),this.weekDays=this.getWeeksInMonth(this.date.getMonth(),this.date.getFullYear()),this.onChange()):this.view===qv.months?(this.date=new Date(this.date.getFullYear()+1,0,1),this.onChange()):this.view===qv.years&&(this.date=new Date(this.date.getFullYear()+7,0,1),this.initYears(this.date))}},{key:"selectDate",value:function(e){var t=this;this.date=new Date(e.getFullYear(),e.getMonth(),e.getDate()),this.weekDays=this.getWeeksInMonth(this.date.getMonth(),this.date.getFullYear()),this.initYears(this.date),this.initMonths(this.date),this.view===qv.months?this.view=qv.days:this.view===qv.years?this.view=qv.months:(0==this.selectingDate?this.selectedFromDate=this.date:this.selectedToDate=this.date,this.onChange(),this.open=!1),this.lastSelectedDate=this.date,setTimeout((function(){document.getElementById(""+t.lastSelectedDate).focus()}),0)}},{key:"getDaysFromWeek",value:function(e){return this.weekDays[e]}},{key:"changeView",value:function(){this.view===qv.days?this.view=qv.months:this.view===qv.months&&(this.view=qv.years)}},{key:"wasLastSelected",value:function(e){return e.getDate()===this.lastSelectedDate.getDate()&&e.getMonth()===this.lastSelectedDate.getMonth()}},{key:"onKeyDown",value:function(e,t){var n,r=this;switch(e.key){case"ArrowDown":case"Down":e.preventDefault(),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()+7);break;case"ArrowUp":case"Up":e.preventDefault(),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()-7);break;case"ArrowLeft":case"Left":e.preventDefault(),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()-1);break;case"ArrowRight":case"Right":e.preventDefault(),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1)}n&&document.getElementById(""+n)?(document.getElementById(""+n).focus(),this.lastSelectedDate=n):n&&(n<this.date?this.selectLeft():this.selectRight(),setTimeout((function(){r.lastSelectedDate=n,document.getElementById(""+n).focus()}),0))}},{key:"dSelected",value:function(e){return e.getDate()===this.selectedFromDate.getDate()&&e.getMonth()===this.selectedFromDate.getMonth()||e.getDate()===this.selectedToDate.getDate()&&e.getMonth()===this.selectedToDate.getMonth()}},{key:"inRange",value:function(e){return this.selectedFromDate<=e&&e<=this.selectedToDate}}]),e}()).\u0275fac=function(e){return new(e||jv)},jv.\u0275cmp=ft({type:jv,selectors:[["sam-datepicker-range"]],hostAttrs:[1,"sam-datepicker-component"],inputs:{selectedFromDate:["fromDate","selectedFromDate"],selectedToDate:["toDate","selectedToDate"]},outputs:{fromDateChange:"fromDateChange",toDateChange:"toDateChange"},decls:24,vars:13,consts:[[1,"sam-date-wrapper"],["type","string",1,"sam-date-input",3,"value","change","click"],["src","assets/calendar.png","tabindex","0","role","button","aria-label","Open datepicker","role","checkbox",1,"datepicker-icon",3,"keydown.enter","keydown.space","click"],[1,"sam-datepicker"],[1,"sam-datepicker--header"],["id","navigateLeft","tabindex","0","aria-describedby","navigateLeft dateView",1,"sam-datepicker--header__left",3,"click"],[1,"sr-only"],["id","datePickerView","aria-describedby","dateView datePickerView",1,"sam-datepicker--header__date",3,"click"],["id","dateView",4,"ngIf"],["id","navigateRight","aria-describedby","dateView navigateRight","tabindex","0",1,"sam-datepicker--header__right",3,"click"],["class","sam-datepicker--header",4,"ngIf"],["class","sam-datepicker--body",4,"ngIf"],["id","dateView"],[1,"sam-datepicker--header__day"],[1,"sam-datepicker--body"],["class","sam-datepicker--week",4,"ngFor","ngForOf"],[1,"sam-datepicker--week"],["class","sam-datepicker--week__d","role","checkbox",3,"id","tabindex","click","keydown",4,"ngFor","ngForOf"],["role","checkbox",1,"sam-datepicker--week__d",3,"id","tabindex","click","keydown"],["class","sam-datepicker--week__m",3,"id","click",4,"ngFor","ngForOf"],[1,"sam-datepicker--week__m",3,"id","click"],["class","sam-datepicker--week__y",3,"click",4,"ngFor","ngForOf"],[1,"sam-datepicker--week__y",3,"click"]],template:function(e,t){1&e&&(ga(0,"span",0),ga(1,"input",1),wa("change",(function(){return t.onChange()}))("click",(function(){return t.clicked()})),iu(2,"date"),ma(),ga(3,"img",2),wa("keydown.enter",(function(){return t.clicked()}))("keydown.space",(function(){return t.clicked()}))("click",(function(){return t.clicked()})),ma(),ma(),ga(4,"div",3),ga(5,"div",4),ga(6,"button",5),wa("click",(function(){return t.selectLeft()})),ga(7,"span",6),Fa(8,"Navigate left button"),ma(),Fa(9," < "),ma(),ga(10,"button",7),wa("click",(function(){return t.changeView()})),ga(11,"span",6),Fa(12,"Click to change the datepicker view"),ma(),ua(13,Iv,3,4,"span",8),ua(14,Pv,3,4,"span",8),ua(15,Ov,4,8,"span",8),ma(),ga(16,"button",9),wa("click",(function(){return t.selectRight()})),ga(17,"span",6),Fa(18,"Navigate right button"),ma(),Fa(19," > "),ma(),ma(),ua(20,Dv,15,0,"div",10),ua(21,Nv,2,1,"div",11),ua(22,Fv,2,1,"div",11),ua(23,Vv,2,1,"div",11),ma()),2&e&&(ni(1),fa("value",au(2,10,t.lastSelectedDate,"EEE, MMM dd, yyyy")),ni(2),sa("aria-checked",t.open),ni(1),sa("open",t.open),ni(9),fa("ngIf",0==t.view),ni(1),fa("ngIf",1==t.view),ni(1),fa("ngIf",2==t.view),ni(5),fa("ngIf",0==t.view),ni(1),fa("ngIf",0==t.view),ni(1),fa("ngIf",1==t.view),ni(1),fa("ngIf",2==t.view))},directives:[Bl,jl],pipes:[Yl],styles:['label[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block;pointer-events:none}.body[_ngcontent-%COMP%]{min-height:100vh}a[_ngcontent-%COMP%]{position:relative}a[_ngcontent-%COMP%]:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a[_ngcontent-%COMP%]:focus{position:relative;outline:none}a[_ngcontent-%COMP%]:focus:after{width:100%}.sam-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6[_ngcontent-%COMP%]{padding:8px}@media screen and (max-width:575px){.card-link[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;margin:0}}.sam-datepicker-component[_ngcontent-%COMP%]{position:relative}.sam-date-input[_ngcontent-%COMP%]::-webkit-datepicker-picker-indicator, .sam-date-input[_ngcontent-%COMP%]::-webkit-datetime-edit, .sam-date-input[_ngcontent-%COMP%]::-webkit-datetime-edit-day-field, .sam-date-input[_ngcontent-%COMP%]::-webkit-datetime-edit-fields-wrapper, .sam-date-input[_ngcontent-%COMP%]::-webkit-datetime-edit-month-field, .sam-date-input[_ngcontent-%COMP%]::-webkit-datetime-edit-text, .sam-date-input[_ngcontent-%COMP%]::-webkit-datetime-edit-year-field, .sam-date-input[_ngcontent-%COMP%]::-webkit-inner-spin-button{display:none}input.sam-date-input[_ngcontent-%COMP%]{width:calc(100% - 50px);height:100%;text-align:center;border:none;cursor:pointer;border-radius:10px;z-index:2;position:absolute}.sam-date-wrapper[_ngcontent-%COMP%], input.sam-date-input[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300}.sam-date-wrapper[_ngcontent-%COMP%]{width:280px;height:48px;display:inline-block;border:1px solid #7a7a7a;border-radius:10px;position:relative}.sam-date-wrapper[_ngcontent-%COMP%]:active, .sam-date-wrapper[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus{outline:none;background-color:#e6e3e3}.datepicker-icon[_ngcontent-%COMP%]{display:inline-block;box-sizing:content-box;position:relative;width:46px;height:44px;border-left:0;cursor:pointer;z-index:2;background:#fff;border-radius:10px;float:right}.datepicker-icon[_ngcontent-%COMP%]:focus, .datepicker-icon[_ngcontent-%COMP%]:hover{background-color:#e6e3e3;border-radius:10px}.sam-datepicker[_ngcontent-%COMP%]{position:absolute;width:280px;max-height:0;border:1px solid #7a7a7a;border-radius:10px;padding-top:48px;top:8px;background-color:#fff;z-index:1;transition:all .25s ease-in-out}.sam-datepicker[_ngcontent-%COMP%], .sam-datepicker[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:hidden}.sam-datepicker--header[_ngcontent-%COMP%]{width:100%;height:32px;background:#fcfafa;border-radius:10px}.sam-datepicker--header__day[_ngcontent-%COMP%]{color:#495057;width:14.285%}.sam-datepicker--header__day[_ngcontent-%COMP%], .sam-datepicker--header__left[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;display:inline-block;text-align:center}.sam-datepicker--header__left[_ngcontent-%COMP%]{border:0;outline:0;padding:0;background-color:transparent;color:#495057;line-height:2;height:32px;color:#027fe6;width:28%;cursor:pointer;transition:background-color .25s ease-in-out}.sam-datepicker--header__left[_ngcontent-%COMP%]:focus, .sam-datepicker--header__left[_ngcontent-%COMP%]:hover{background-color:#e6e3e3}.sam-datepicker--header__right[_ngcontent-%COMP%]{border:0;outline:0;padding:0;background-color:transparent;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;text-align:center;line-height:2;height:32px;display:inline-block;width:28%;color:#027fe6;cursor:pointer;transition:background-color .25s ease-in-out}.sam-datepicker--header__right[_ngcontent-%COMP%]:focus, .sam-datepicker--header__right[_ngcontent-%COMP%]:hover{background-color:#e6e3e3}.sam-datepicker--header__date[_ngcontent-%COMP%]{border:0;outline:0;padding:0;background-color:transparent;display:inline-block;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;text-align:center;line-height:2;width:44%;height:32px;cursor:pointer;color:#027fe6;transition:background-color .25s ease-in-out}.sam-datepicker--header__date[_ngcontent-%COMP%]:focus, .sam-datepicker--header__date[_ngcontent-%COMP%]:hover{background-color:#e6e3e3}.sam-datepicker--body[_ngcontent-%COMP%], .sam-datepicker--week[_ngcontent-%COMP%]{display:block;width:100%}.sam-datepicker--week[_ngcontent-%COMP%]{height:42px}.sam-datepicker--week__y[_ngcontent-%COMP%]{border:0;outline:0;padding:0;background-color:transparent;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;line-height:3.5;height:84px;width:25%;cursor:pointer}.sam-datepicker--week__y[_ngcontent-%COMP%]:focus, .sam-datepicker--week__y[_ngcontent-%COMP%]:hover{background-color:#e6e3e3;border-radius:8px}.sam-datepicker--week__y[selectedDate=true][_ngcontent-%COMP%]{background-color:#027fe6;color:#fff;border-radius:8px}.sam-datepicker--week__y[selectedDate=true][_ngcontent-%COMP%]:focus{background-color:#024175}.sam-datepicker--week__y[_ngcontent-%COMP%]:focus{border:1px solid #001b31}.sam-datepicker--week__m[_ngcontent-%COMP%]{border:0;outline:0;padding:0;background-color:transparent;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;line-height:3.5;height:84px;width:25%;cursor:pointer}.sam-datepicker--week__m[_ngcontent-%COMP%]:focus, .sam-datepicker--week__m[_ngcontent-%COMP%]:hover{background-color:#e6e3e3;border-radius:8px}.sam-datepicker--week__m[selectedDate=true][_ngcontent-%COMP%]{background-color:#027fe6;color:#fff;border-radius:8px}.sam-datepicker--week__m[selectedDate=true][_ngcontent-%COMP%]:focus{background-color:#024175}.sam-datepicker--week__m[_ngcontent-%COMP%]:focus{border:1px solid #001b31}.sam-datepicker--week__d[_ngcontent-%COMP%]{border:0;outline:0;padding:0;background-color:transparent;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;line-height:2.5;display:inline-block;width:14.28%;height:100%;text-align:center;cursor:pointer;border-radius:8px;transition:background-color .25s ease-in-out}.sam-datepicker--week__d[_ngcontent-%COMP%]:focus, .sam-datepicker--week__d[_ngcontent-%COMP%]:hover{background-color:#e6e3e3}.sam-datepicker--week__d[inRange=true][_ngcontent-%COMP%]{background-color:#6dbdff;color:#fff;border-radius:0}.sam-datepicker--week__d[selectedDate=true][_ngcontent-%COMP%]{background-color:#027fe6;color:#fff}.sam-datepicker--week__d[selectedDate=true][_ngcontent-%COMP%]:focus{background-color:#024175}.sam-datepicker--week__d[_ngcontent-%COMP%]:focus{border:1px solid #001b31}.sam-datepicker--week__d[notInMonth=true][_ngcontent-%COMP%]{color:#e6e3e3}.sam-datepicker--week__d[notInMonth=true][_ngcontent-%COMP%]:focus, .sam-datepicker--week__d[notInMonth=true][_ngcontent-%COMP%]:hover{background-color:#e6e3e3;color:#fff}.sam-datepicker--week__d[notInMonth=true][selectedDate=true][_ngcontent-%COMP%]{background-color:rgba(2,127,230,.42);color:#fff;border-radius:8px}.sam-datepicker[open=true][_ngcontent-%COMP%]{visibility:visible;display:block;max-height:364px}.sam-datepicker[open=true][_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .sam-datepicker[open=true][_ngcontent-%COMP%]   *[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:visible}']}),jv),Wv=((Uv=function(){function e(){_classCallCheck(this,e),this.disabled=!0,this.checkVal1=!1,this.checkVal2=!1,this.checkVal3=!1,this.toggleVal1=!1,this.toggleVal2=!1,this.toggleVal3=!1,this.toggleVal4=!1,this.maleChecked=!1,this.selectedDate=new Date,this.selectedToDate=new Date,this.selectedFromDate=new Date,this.date=new Date}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Uv)},Uv.\u0275cmp=ft({type:Uv,selectors:[["app-components"]],decls:293,vars:64,consts:[[1,"text-center"],[1,"sam-title"],[1,"lead"],[1,"container-fluid"],[1,"row","p-4"],[1,"col-sm-4","p-1","text-center"],["sam-cta",""],["sam-cta","","type","secondary"],["sam-cta","","type","tertiary"],["sam-cta","","small","true"],["sam-cta","","small","true","type","secondary"],["sam-cta","","small","true","type","tertiary"],[1,"row"],[1,"col-sm-4"],["field_id","userName","label","User name"],["sam-input","","id","userName","aria-label","Please enter your user name to register"],["field_id","password","label","Password"],["sam-input","","id","password","type","password","aria-label","Please enter your password to register"],["field_id","disabled","label","Disabled"],["sam-input","","id","disabled","aria-label","Please enter your password to register",3,"disabled"],[1,"col-sm-4","pb-2"],["sam-cta","",3,"click"],[1,"pb-1","pt-1","col-sm-4",2,"margin","auto 0"],["label","Agree to terms and conditions","field_id","checkbox"],["sam-checkbox","","id","checkbox","type","checkbox","aria-label","Please check here to agree to terms and conditions",3,"click","keydown.enter"],["label","This is a super long wrapping label to show placement of checkbox and label when text wraps","field_id","checkbox2"],["sam-checkbox","","id","checkbox2","type","checkbox","aria-label","Please check here to agree to terms and conditions",3,"click","keydown.enter"],["label","I am a disabled checkbox","field_id","checkbox3"],["sam-checkbox","","id","checkbox3","disabled","true","type","checkbox","aria-label","Please check here to agree to terms and conditions",3,"click","keydown.enter"],["label","Lock Credit Card","field_id","toggle1"],["sam-toggle","","id","toggle1","type","checkbox","role","switch","aria-label","Lock credit card toggle switch",3,"click"],["label","Long wrapping label to show placement of toggle and label","field_id","toggle2"],["sam-toggle","","id","toggle2","type","checkbox","role","switch","aria-label","Lock credit card toggle switch",3,"click"],["label","Disabled toggle","field_id","toggle3"],["sam-toggle","","disabled","true","id","toggle3","type","checkbox","role","switch","aria-label","Lock credit card toggle switch",3,"click"],[1,"pb-1","pt-1","col-sm-6"],["groupLabel","Please select a gender"],["r1",""],["id","male","label","Male"],["type","radio","id","male","name","gender","value","male",3,"click"],["id","female","label","Female"],["type","radio","id","female","name","gender","value","female",3,"click"],["id","other","label","Other"],["type","radio","id","other","name","gender","value","other",3,"click"],["groupLabel","Please select the type of label you like"],["r2",""],["id","short","label","Short"],["type","radio","id","short","name","gender","value","short",3,"click"],["id","long","label","I like super super super super super super super super super super super super long labels"],["type","radio","id","long","name","gender","value","long",3,"click"],["id","disabled","label","Disabled labels",3,"disabled"],["type","radio","id","disabled","name","gender","disabled","","value","disabled",3,"click"],[1,"col-sm-6","text-center"],["tooltipLabel","Default tooltip","tooltipAriaLabel","This is a default tooltip"],["tooltipAriaLabel","This is a tooltip with a long wrapping label","tooltipLabel","Super long long long long long long wrapping label"],[1,"p-5","col-sm-12","text-center"],["modal",""],[1,"col-sm-6"],["field_id","modalName","label","User name"],["sam-input","","id","modalName","aria-label","Please enter your user name to register"],["field_id","modalPW","label","Password"],["sam-input","","id","modalPW","type","password","aria-label","Please enter your password to register"],["r3",""],[1,"col-sm-12","pt-3","pb-3"],["label","Agree to terms and conditions","field_id","modalCheckbox"],["sam-checkbox","","id","modalCheckbox","type","checkbox","aria-label","Please check here to agree to terms and conditions",3,"click","keydown.enter"],[1,"col-sm-3"],[1,"card-footer","text-muted"],[1,"col-sm-10"],["target","_blank","href","https://github.com/smerante/",1,"card-link"],["target","_blank","href","https://bitbucket.org/Sammer95/",1,"card-link"],["target","_blank","href","https://www.linkedin.com/in/sam-merante/",1,"card-link"],[1,"col-sm-2"],[1,"date"],["imgSrc","http://robertwimer.com/wp-content/uploads/2018/06/Matrix-Code.jpg"],[1,"col-sm-12"],["placement","left","imgSrc","http://robertwimer.com/wp-content/uploads/2018/06/Matrix-Code.jpg"],["placement","right","imgSrc","http://robertwimer.com/wp-content/uploads/2018/06/Matrix-Code.jpg"],["placement","bottom","imgSrc","http://robertwimer.com/wp-content/uploads/2018/06/Matrix-Code.jpg"],[3,"date","dateChange"],[3,"fromDate","toDate","fromDateChange","toDateChange"]],template:function(e,t){if(1&e){var n=ya();ga(0,"div",0),ga(1,"h1",1),Fa(2,"Custom Components"),ma(),ga(3,"p",2),Fa(4,"These are all custom components, styled and built myself."),ma(),ga(5,"p",2),Fa(6,"Feel free to checkout my github page in the footer below to use any components or styles"),ma(),ma(),ga(7,"sam-documentation"),ga(8,"documentation-header"),Fa(9,"CTA'S"),ma(),ga(10,"documentation-body"),ga(11,"div",3),ga(12,"div",4),ga(13,"div",5),ga(14,"button",6),Fa(15,"Primary"),ma(),ma(),ga(16,"div",5),ga(17,"button",7),Fa(18,"Secondary"),ma(),ma(),ga(19,"div",5),ga(20,"button",8),Fa(21,"Tertiary"),ma(),ma(),ma(),ga(22,"div",4),ga(23,"div",5),ga(24,"button",9),Fa(25,"Primary small"),ma(),ma(),ga(26,"div",5),ga(27,"button",10),Fa(28,"Secondary small"),ma(),ma(),ga(29,"div",5),ga(30,"button",11),Fa(31,"Tertiary small"),ma(),ma(),ma(),ma(),ma(),ma(),ga(32,"sam-documentation"),ga(33,"documentation-header"),Fa(34,"Inputs"),ma(),ga(35,"documentation-body"),ga(36,"div",3),ga(37,"div",12),ga(38,"div",13),ga(39,"sam-input-wrapper",14),va(40,"input",15),ma(),ma(),ga(41,"div",13),ga(42,"sam-input-wrapper",16),va(43,"input",17),ma(),ma(),ga(44,"div",13),ga(45,"sam-input-wrapper",18),va(46,"input",19),ma(),ma(),ma(),ga(47,"div",12),va(48,"div",13),va(49,"div",13),ga(50,"div",20),ga(51,"button",21),wa("click",(function(){return t.disabled=!t.disabled})),Fa(52,"Toggle"),ma(),ma(),ma(),ma(),ma(),ma(),ga(53,"sam-documentation"),ga(54,"documentation-header"),Fa(55,"Checkbox"),ma(),ga(56,"documentation-body"),ga(57,"div",3),ga(58,"div",12),ga(59,"div",22),ga(60,"sam-checkbox",23),ga(61,"input",24),wa("click",(function(){return t.checkVal1=!t.checkVal1}))("keydown.enter",(function(){return t.checkVal1=!t.checkVal1})),ma(),ma(),ma(),ga(62,"div",22),ga(63,"sam-checkbox",25),ga(64,"input",26),wa("click",(function(){return t.checkVal2=!t.checkVal2}))("keydown.enter",(function(){return t.checkVal2=!t.checkVal2})),ma(),ma(),ma(),ga(65,"div",22),ga(66,"sam-checkbox",27),ga(67,"input",28),wa("click",(function(){return t.checkVal3=!t.checkVal3}))("keydown.enter",(function(){return t.checkVal3=!t.checkVal3})),ma(),ma(),ma(),ma(),ma(),ma(),ma(),ga(68,"sam-documentation"),ga(69,"documentation-header"),Fa(70,"Toggle"),ma(),ga(71,"documentation-body"),ga(72,"div",3),ga(73,"div",12),ga(74,"div",22),ga(75,"sam-toggle",29),ga(76,"input",30),wa("click",(function(){return t.toggleVal1=!t.toggleVal1})),ma(),ma(),ma(),ga(77,"div",22),ga(78,"sam-toggle",31),ga(79,"input",32),wa("click",(function(){return t.toggleVal2=!t.toggleVal2})),ma(),ma(),ma(),ga(80,"div",22),ga(81,"sam-toggle",33),ga(82,"input",34),wa("click",(function(){return t.toggleVal3=!t.toggleVal3})),ma(),ma(),ma(),ma(),ma(),ma(),ma(),ga(83,"sam-documentation"),ga(84,"documentation-header"),Fa(85,"Radio Buttons"),ma(),ga(86,"documentation-body"),ga(87,"div",3),ga(88,"div",12),ga(89,"div",35),ga(90,"sam-radio-group",36,37),ga(92,"sam-radio-btn",38),ga(93,"input",39),wa("click",(function(){return Xt(n),ca(91).check("male")})),ma(),ma(),ga(94,"sam-radio-btn",40),ga(95,"input",41),wa("click",(function(){return Xt(n),ca(91).check("female")})),ma(),ma(),ga(96,"sam-radio-btn",42),ga(97,"input",43),wa("click",(function(){return Xt(n),ca(91).check("other")})),ma(),ma(),ma(),ma(),ga(98,"div",35),ga(99,"sam-radio-group",44,45),ga(101,"sam-radio-btn",46),ga(102,"input",47),wa("click",(function(){return Xt(n),ca(100).check("short")})),ma(),ma(),ga(103,"sam-radio-btn",48),ga(104,"input",49),wa("click",(function(){return Xt(n),ca(100).check("long")})),ma(),ma(),ga(105,"sam-radio-btn",50),ga(106,"input",51),wa("click",(function(){return Xt(n),ca(100).check("disabled")})),ma(),ma(),ma(),ma(),ma(),ma(),ma(),ma(),ga(107,"sam-documentation"),ga(108,"documentation-header"),Fa(109,"Tooltips"),ma(),ga(110,"documentation-body"),ga(111,"div",3),ga(112,"div",12),ga(113,"div",52),ga(114,"sam-tooltip",53),Fa(115," Lorem ipsum dolor sit amet "),ma(),ma(),ga(116,"div",52),ga(117,"sam-tooltip",54),Fa(118," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore "),ma(),ma(),ma(),ma(),ma(),ma(),ga(119,"sam-documentation"),ga(120,"documentation-header"),Fa(121,"Modal Windows"),ma(),ga(122,"documentation-body"),ga(123,"div",3),ga(124,"div",12),ga(125,"div",55),ga(126,"button",21),wa("click",(function(){return Xt(n),ca(129).open()})),Fa(127,"Open Modal"),ma(),ga(128,"sam-modal",null,56),ga(130,"sam-modal-header"),Fa(131,"Sign Up Modal Example"),ma(),ga(132,"sam-modal-body"),ga(133,"div",3),ga(134,"div",12),ga(135,"div",57),ga(136,"sam-input-wrapper",58),va(137,"input",59),ma(),ma(),ga(138,"div",57),ga(139,"sam-input-wrapper",60),va(140,"input",61),ma(),ma(),ma(),ga(141,"sam-radio-group",36,62),ga(143,"sam-radio-btn",38),ga(144,"input",39),wa("click",(function(){return Xt(n),ca(142).check("male")})),ma(),ma(),ga(145,"sam-radio-btn",40),ga(146,"input",41),wa("click",(function(){return Xt(n),ca(142).check("female")})),ma(),ma(),ga(147,"sam-radio-btn",42),ga(148,"input",43),wa("click",(function(){return Xt(n),ca(142).check("other")})),ma(),ma(),ma(),ga(149,"div",12),ga(150,"div",63),ga(151,"sam-checkbox",64),ga(152,"input",65),wa("click",(function(){return t.toggleVal4=!t.toggleVal4}))("keydown.enter",(function(){return t.toggleVal4=!t.toggleVal4})),ma(),ma(),ma(),ma(),ga(153,"div",12),va(154,"div",66),ga(155,"div",66),ga(156,"button",21),wa("click",(function(){return Xt(n),ca(129).close()})),Fa(157,"Save"),ma(),ma(),ga(158,"div",66),ga(159,"button",21),wa("click",(function(){return Xt(n),ca(129).close()})),Fa(160,"Cancel"),ma(),ma(),va(161,"div",66),ma(),ma(),ma(),ga(162,"sam-modal-footer"),ga(163,"div",67),ga(164,"div",12),ga(165,"div",68),ga(166,"a",69),Fa(167,"GitHub"),ma(),ga(168,"a",70),Fa(169,"Bitbucket"),ma(),ga(170,"a",71),Fa(171,"Linked In"),ma(),ma(),ga(172,"div",72),ga(173,"span",73),Fa(174),iu(175,"date"),ma(),ma(),ma(),ma(),ma(),ma(),ma(),ma(),ma(),ma(),ma(),ga(176,"sam-documentation"),ga(177,"documentation-header"),Fa(178,"Cards"),ma(),ga(179,"documentation-body"),ga(180,"div",12),ga(181,"div",57),ga(182,"sam-card"),ga(183,"card-header"),Fa(184," Default Card "),ma(),ga(185,"card-body"),ga(186,"p"),Fa(187,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. "),ma(),ga(188,"p"),Fa(189," Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. "),ma(),ma(),ga(190,"card-footer"),ga(191,"a",69),Fa(192,"GitHub"),ma(),ga(193,"a",70),Fa(194,"Bitbucket"),ma(),ga(195,"a",71),Fa(196,"Linked In"),ma(),ma(),ma(),ma(),ga(197,"div",57),ga(198,"sam-card",74),ga(199,"card-header"),Fa(200," With Image "),ma(),ga(201,"card-body"),ga(202,"p"),Fa(203,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. "),ma(),ma(),ga(204,"card-footer"),ga(205,"a",69),Fa(206,"GitHub"),ma(),ga(207,"a",70),Fa(208,"Bitbucket"),ma(),ga(209,"a",71),Fa(210,"Linked In"),ma(),ma(),ma(),ma(),ma(),ga(211,"div",12),ga(212,"div",75),ga(213,"sam-card",76),ga(214,"card-header"),Fa(215," Placement Left "),ma(),ga(216,"card-body"),ga(217,"p"),Fa(218,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. "),ma(),ma(),ga(219,"card-footer"),ga(220,"a",69),Fa(221,"GitHub"),ma(),ga(222,"a",70),Fa(223,"Bitbucket"),ma(),ga(224,"a",71),Fa(225,"Linked In"),ma(),ma(),ma(),ma(),ga(226,"div",75),ga(227,"sam-card",77),ga(228,"card-header"),Fa(229," Placement Right "),ma(),ga(230,"card-body"),ga(231,"p"),Fa(232,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. "),ma(),ma(),ga(233,"card-footer"),ga(234,"a",69),Fa(235,"GitHub"),ma(),ga(236,"a",70),Fa(237,"Bitbucket"),ma(),ga(238,"a",71),Fa(239,"Linked In"),ma(),ma(),ma(),ma(),ma(),ga(240,"div",12),ga(241,"div",75),ga(242,"sam-card",78),ga(243,"card-header"),Fa(244," Placement Bottom "),ma(),ga(245,"card-body"),ga(246,"p"),Fa(247,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. "),ma(),ma(),ga(248,"card-footer"),ga(249,"a",69),Fa(250,"GitHub"),ma(),ga(251,"a",70),Fa(252,"Bitbucket"),ma(),ga(253,"a",71),Fa(254,"Linked In"),ma(),ma(),ma(),ma(),ma(),ma(),ma(),ga(255,"sam-documentation"),ga(256,"documentation-header"),Fa(257,"Date Picker"),ma(),ga(258,"documentation-body"),ga(259,"div",3),ga(260,"div",12),ga(261,"div",75),ga(262,"h2"),Fa(263,"Standard datepicker"),ma(),ma(),ma(),ga(264,"div",12),ga(265,"div",57),ga(266,"sam-datepicker",79),wa("dateChange",(function(e){return t.selectedDate=e})),ma(),ma(),ga(267,"div",57),ga(268,"pre"),Fa(269),iu(270,"date"),iu(271,"date"),iu(272,"date"),iu(273,"date"),ma(),ma(),ma(),ma(),ga(274,"div",3),ga(275,"div",12),ga(276,"div",75),ga(277,"h2"),Fa(278,"Range datepicker"),ma(),ma(),ma(),ga(279,"div",12),ga(280,"div",57),ga(281,"pre"),Fa(282),iu(283,"date"),iu(284,"date"),iu(285,"date"),iu(286,"date"),iu(287,"date"),iu(288,"date"),iu(289,"date"),iu(290,"date"),ma(),ma(),ga(291,"div",57),ga(292,"sam-datepicker-range",80),wa("fromDateChange",(function(e){return t.selectedFromDate=e}))("toDateChange",(function(e){return t.selectedToDate=e})),ma(),ma(),ma(),ma(),ma(),ma()}2&e&&(ni(46),fa("disabled",t.disabled),ni(15),sa("checked",!0===t.checkVal1||null),ni(3),sa("checked",!0===t.checkVal2||null),ni(3),sa("checked",!0===t.checkVal3||null),ni(9),sa("checked",!0===t.toggleVal1||null),ni(3),sa("checked",!0===t.toggleVal2||null),ni(3),sa("checked",!0===t.toggleVal3||null),ni(23),fa("disabled",!0),ni(47),sa("checked",!0===t.toggleVal4||null),ni(22),La(au(175,25,t.date,"MM-dd-yyyy")),ni(92),fa("date",t.selectedDate),ni(3),ja("    Model: {\t\n      Year: ",au(270,28,t.selectedDate,"yyyy"),"\n      Month: ",au(271,31,t.selectedDate,"MM"),"\n      Day: ",au(272,34,t.selectedDate,"dd"),"\n      Date: ",au(273,37,t.selectedDate,"fullDate"),"\n    }\t\n            "),ni(13),qa("      Model: {\t\n      From:\n        Year: ",au(283,40,t.selectedFromDate,"yyyy"),"\n        Month: ",au(284,43,t.selectedFromDate,"MM"),"\n        Day: ",au(285,46,t.selectedFromDate,"dd"),"\n        Date: ",au(286,49,t.selectedFromDate,"fullDate"),"\n\n      To:\n        Year: ",au(287,52,t.selectedToDate,"yyyy"),"\n        Month: ",au(288,55,t.selectedToDate,"MM"),"\n        Day: ",au(289,58,t.selectedToDate,"dd"),"\n        Date: ",au(290,61,t.selectedToDate,"fullDate"),"\n      }\t\n              "),ni(10),fa("fromDate",t.selectedFromDate)("toDate",t.selectedToDate))},directives:[wm,Cm,km,Tm,Im,Pm,Dm,Am,Nm,Mm,Vm,Lm,Km,Zm,$m,ev,tv,lv,hv,dv,fv,xv,Bv],pipes:[Yl],styles:['label[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block;pointer-events:none}.body[_ngcontent-%COMP%]{min-height:100vh}a[_ngcontent-%COMP%]{position:relative}a[_ngcontent-%COMP%]:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a[_ngcontent-%COMP%]:focus{position:relative;outline:none}a[_ngcontent-%COMP%]:focus:after{width:100%}.sam-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6[_ngcontent-%COMP%]{padding:8px}@media screen and (max-width:575px){.card-link[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;margin:0}}']}),Uv);function zv(e,t){return new C((function(n){var r=e.length;if(0!==r)for(var i=new Array(r),o=0,a=0,s=function(s){var u=W(e[s]),c=!1;n.add(u.subscribe({next:function(e){c||(c=!0,a++),i[s]=e},error:function(e){return n.error(e)},complete:function(){++o!==r&&c||(a===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},u=0;u<r;u++)s(u);else n.complete()}))}var Hv,Gv,Qv,Kv,Yv=new qe("NgValueAccessor"),Xv={provide:Yv,useExisting:Ee((function(){return Jv})),multi:!0},Jv=((Hv=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||Hv)(la(ps),la(ls))},Hv.\u0275dir=bt({type:Hv,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(e,t){1&e&&wa("change",(function(e){return t.onChange(e.target.checked)}))("blur",(function(){return t.onTouched()}))},features:[as([Xv])]}),Hv),Zv={provide:Yv,useExisting:Ee((function(){return ey})),multi:!0},$v=new qe("CompositionEventMode"),ey=((Kv=function(){function e(t,n,r){var i;_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._compositionMode=r,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(i=Tc()?Tc().getUserAgent():"",!/android (\d+)/.test(i.toLowerCase())))}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_handleInput",value:function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}]),e}()).\u0275fac=function(e){return new(e||Kv)(la(ps),la(ls),la($v,8))},Kv.\u0275dir=bt({type:Kv,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&wa("input",(function(e){return t._handleInput(e.target.value)}))("blur",(function(){return t.onTouched()}))("compositionstart",(function(){return t._compositionStart()}))("compositionend",(function(e){return t._compositionEnd(e.target.value)}))},features:[as([Zv])]}),Kv),ty=((Qv=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"reset",value:function(e){this.control&&this.control.reset(e)}},{key:"hasError",value:function(e,t){return!!this.control&&this.control.hasError(e,t)}},{key:"getError",value:function(e,t){return this.control?this.control.getError(e,t):null}},{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}}]),e}()).\u0275fac=function(e){return new(e||Qv)},Qv.\u0275dir=bt({type:Qv}),Qv),ny=((Gv=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),t}(ty)).\u0275fac=function(e){return ry(e||Gv)},Gv.\u0275dir=bt({type:Gv,features:[za]}),Gv),ry=or(ny);function iy(){throw new Error("unimplemented")}var oy,ay,sy=function(e){function t(){var e;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments)))._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}return _inherits(t,e),_createClass(t,[{key:"validator",get:function(){return iy()}},{key:"asyncValidator",get:function(){return iy()}}]),t}(ty),uy=function(){function e(t){_classCallCheck(this,e),this._cd=t}return _createClass(e,[{key:"ngClassUntouched",get:function(){return!!this._cd.control&&this._cd.control.untouched}},{key:"ngClassTouched",get:function(){return!!this._cd.control&&this._cd.control.touched}},{key:"ngClassPristine",get:function(){return!!this._cd.control&&this._cd.control.pristine}},{key:"ngClassDirty",get:function(){return!!this._cd.control&&this._cd.control.dirty}},{key:"ngClassValid",get:function(){return!!this._cd.control&&this._cd.control.valid}},{key:"ngClassInvalid",get:function(){return!!this._cd.control&&this._cd.control.invalid}},{key:"ngClassPending",get:function(){return!!this._cd.control&&this._cd.control.pending}}]),e}(),cy=((ay=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))}return _inherits(t,e),t}(uy)).\u0275fac=function(e){return new(e||ay)(la(sy,2))},ay.\u0275dir=bt({type:ay,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&Da("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[za]}),ay),ly=((oy=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))}return _inherits(t,e),t}(uy)).\u0275fac=function(e){return new(e||oy)(la(ny,2))},oy.\u0275dir=bt({type:oy,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(e,t){2&e&&Da("ng-untouched",t.ngClassUntouched)("ng-touched",t.ngClassTouched)("ng-pristine",t.ngClassPristine)("ng-dirty",t.ngClassDirty)("ng-valid",t.ngClassValid)("ng-invalid",t.ngClassInvalid)("ng-pending",t.ngClassPending)},features:[za]}),oy);function hy(e){return null==e||0===e.length}var dy=new qe("NgValidators"),fy=new qe("NgAsyncValidators"),py=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,gy=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"min",value:function(e){return function(t){if(hy(t.value)||hy(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}},{key:"max",value:function(e){return function(t){if(hy(t.value)||hy(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}},{key:"required",value:function(e){return hy(e.value)?{required:!0}:null}},{key:"requiredTrue",value:function(e){return!0===e.value?null:{required:!0}}},{key:"email",value:function(e){return hy(e.value)?null:py.test(e.value)?null:{email:!0}}},{key:"minLength",value:function(e){return function(t){if(hy(t.value))return null;var n=t.value?t.value.length:0;return n<e?{minlength:{requiredLength:e,actualLength:n}}:null}}},{key:"maxLength",value:function(e){return function(t){var n=t.value?t.value.length:0;return n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}},{key:"pattern",value:function(t){return t?("string"==typeof t?(r="","^"!==t.charAt(0)&&(r+="^"),r+=t,"$"!==t.charAt(t.length-1)&&(r+="$"),n=new RegExp(r)):(r=t.toString(),n=t),function(e){if(hy(e.value))return null;var t=e.value;return n.test(t)?null:{pattern:{requiredPattern:r,actualValue:t}}}):e.nullValidator;var n,r}},{key:"nullValidator",value:function(e){return null}},{key:"compose",value:function(e){if(!e)return null;var t=e.filter(my);return 0==t.length?null:function(e){return yy(function(e,t){return t.map((function(t){return t(e)}))}(e,t))}}},{key:"composeAsync",value:function(e){if(!e)return null;var t=e.filter(my);return 0==t.length?null:function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];if(u(r))return zv(r,null);if(c(r)&&Object.getPrototypeOf(r)===Object.prototype){var i=Object.keys(r);return zv(i.map((function(e){return r[e]})),i)}}if("function"==typeof t[t.length-1]){var o=t.pop();return zv(t=1===t.length&&u(t[0])?t[0]:t,null).pipe(U((function(e){return o.apply(void 0,_toConsumableArray(e))})))}return zv(t,null)}(function(e,t){return t.map((function(t){return t(e)}))}(e,t).map(vy)).pipe(U(yy))}}}]),e}();function my(e){return null!=e}function vy(e){var t=ba(e)?W(e):e;if(!_a(t))throw new Error("Expected validator to return Promise or Observable.");return t}function yy(e){var t={};return e.forEach((function(e){t=null!=e?Object.assign(Object.assign({},t),e):t})),0===Object.keys(t).length?null:t}function by(e){return e.validate?function(t){return e.validate(t)}:e}function _y(e){return e.validate?function(t){return e.validate(t)}:e}var wy,Cy,ky,Sy,Ey,Ty,xy={provide:Yv,useExisting:Ee((function(){return Iy})),multi:!0},Iy=((wy=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||wy)(la(ps),la(ls))},wy.\u0275dir=bt({type:wy,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,t){1&e&&wa("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[as([xy])]}),wy),Py={provide:Yv,useExisting:Ee((function(){return Dy})),multi:!0},Oy=((ky=function(){function e(){_classCallCheck(this,e),this._accessors=[]}return _createClass(e,[{key:"add",value:function(e,t){this._accessors.push([e,t])}},{key:"remove",value:function(e){for(var t=this._accessors.length-1;t>=0;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)}},{key:"select",value:function(e){var t=this;this._accessors.forEach((function(n){t._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)}))}},{key:"_isSameGroup",value:function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name}}]),e}()).\u0275fac=function(e){return new(e||ky)},ky.\u0275prov=de({token:ky,factory:ky.\u0275fac}),ky),Dy=((Cy=function(){function e(t,n,r,i){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._registry=r,this._injector=i,this.onChange=function(){},this.onTouched=function(){}}return _createClass(e,[{key:"ngOnInit",value:function(){this._control=this._injector.get(sy),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}}},{key:"fireUncheck",value:function(e){this.writeValue(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_checkName",value:function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}},{key:"_throwNameError",value:function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}]),e}()).\u0275fac=function(e){return new(e||Cy)(la(ps),la(ls),la(Oy),la(Ho))},Cy.\u0275dir=bt({type:Cy,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,t){1&e&&wa("change",(function(){return t.onChange()}))("blur",(function(){return t.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[as([Py])]}),Cy),Ay={provide:Yv,useExisting:Ee((function(){return Ry})),multi:!0},Ry=((Sy=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return _createClass(e,[{key:"writeValue",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))}},{key:"registerOnChange",value:function(e){this.onChange=function(t){e(""==t?null:parseFloat(t))}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}}]),e}()).\u0275fac=function(e){return new(e||Sy)(la(ps),la(ls))},Sy.\u0275dir=bt({type:Sy,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(e,t){1&e&&wa("change",(function(e){return t.onChange(e.target.value)}))("input",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},features:[as([Ay])]}),Sy),Ny='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',My='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',Fy='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',Ly=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"controlParentException",value:function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ".concat(Ny))}},{key:"ngModelGroupException",value:function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '.concat(My,"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ").concat(Fy))}},{key:"missingFormException",value:function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ".concat(Ny))}},{key:"groupParentException",value:function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ".concat(My))}},{key:"arrayParentException",value:function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}},{key:"disabledAttrWarning",value:function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}},{key:"ngModelWarning",value:function(e){console.warn("\n    It looks like you're using ngModel on the same form field as ".concat(e,". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/").concat("formControl"===e?"FormControlDirective":"FormControlName","#use-with-ngmodel\n    "))}}]),e}(),Vy={provide:Yv,useExisting:Ee((function(){return Uy})),multi:!0},Uy=((Ey=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=$o}return _createClass(e,[{key:"writeValue",value:function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var n=function(e,t){return null==e?"".concat(t):(t&&"object"==typeof t&&(t="Object"),"".concat(e,": ").concat(t).slice(0,50))}(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){t.value=t._getOptionValue(n),e(t.value)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r),e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t):e}},{key:"compareWith",set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received ".concat(JSON.stringify(e)));this._compareWith=e}}]),e}()).\u0275fac=function(e){return new(e||Ey)(la(ps),la(ls))},Ey.\u0275dir=bt({type:Ey,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,t){1&e&&wa("change",(function(e){return t.onChange(e.target.value)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[as([Vy])]}),Ey),jy={provide:Yv,useExisting:Ee((function(){return qy})),multi:!0},qy=((Ty=function(){function e(t,n){_classCallCheck(this,e),this._renderer=t,this._elementRef=n,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=$o}return _createClass(e,[{key:"writeValue",value:function(e){var t,n=this;if(this.value=e,Array.isArray(e)){var r=e.map((function(e){return n._getOptionId(e)}));t=function(e,t){e._setSelected(r.indexOf(t.toString())>-1)}}else t=function(e,t){e._setSelected(!1)};this._optionMap.forEach(t)}},{key:"registerOnChange",value:function(e){var t=this;this.onChange=function(n){var r=[];if(n.hasOwnProperty("selectedOptions"))for(var i=n.selectedOptions,o=0;o<i.length;o++){var a=i.item(o),s=t._getOptionValue(a.value);r.push(s)}else for(var u=n.options,c=0;c<u.length;c++){var l=u.item(c);if(l.selected){var h=t._getOptionValue(l.value);r.push(h)}}t.value=r,e(r)}}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)}},{key:"_registerOption",value:function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t}},{key:"_getOptionId",value:function(e){for(var t=0,n=Array.from(this._optionMap.keys());t<n.length;t++){var r=n[t];if(this._compareWith(this._optionMap.get(r)._value,e))return r}return null}},{key:"_getOptionValue",value:function(e){var t=function(e){return e.split(":")[0]}(e);return this._optionMap.has(t)?this._optionMap.get(t)._value:e}},{key:"compareWith",set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received ".concat(JSON.stringify(e)));this._compareWith=e}}]),e}()).\u0275fac=function(e){return new(e||Ty)(la(ps),la(ls))},Ty.\u0275dir=bt({type:Ty,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,t){1&e&&wa("change",(function(e){return t.onChange(e.target)}))("blur",(function(){return t.onTouched()}))},inputs:{compareWith:"compareWith"},features:[as([jy])]}),Ty);function By(e,t){return[].concat(_toConsumableArray(t.path),[e])}function Wy(e,t){e||Qy(t,"Cannot find control with"),t.valueAccessor||Qy(t,"No value accessor for form control with"),e.validator=gy.compose([e.validator,t.validator]),e.asyncValidator=gy.composeAsync([e.asyncValidator,t.asyncValidator]),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange((function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&zy(e,t)}))}(e,t),function(e,t){e.registerOnChange((function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)}))}(e,t),function(e,t){t.valueAccessor.registerOnTouched((function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&zy(e,t),"submit"!==e.updateOn&&e.markAsTouched()}))}(e,t),t.valueAccessor.setDisabledState&&e.registerOnDisabledChange((function(e){t.valueAccessor.setDisabledState(e)})),t._rawValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))})),t._rawAsyncValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange((function(){return e.updateValueAndValidity()}))}))}function zy(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Hy(e,t){null==e&&Qy(t,"Cannot find control with"),e.validator=gy.compose([e.validator,t.validator]),e.asyncValidator=gy.composeAsync([e.asyncValidator,t.asyncValidator])}function Gy(e){return Qy(e,"There is no FormControl instance attached to form control element with")}function Qy(e,t){var n;throw n=e.path.length>1?"path: '".concat(e.path.join(" -> "),"'"):e.path[0]?"name: '".concat(e.path,"'"):"unspecified name attribute",new Error("".concat(t," ").concat(n))}function Ky(e){return null!=e?gy.compose(e.map(by)):null}function Yy(e){return null!=e?gy.composeAsync(e.map(_y)):null}function Xy(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!$o(t,n.currentValue)}var Jy=[Jv,Ry,Iy,Uy,qy,Dy];function Zy(e,t){e._syncPendingControls(),t.forEach((function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)}))}function $y(e,t){if(!t)return null;Array.isArray(t)||Qy(e,"Value accessor was not provided as an array for form control with");var n=void 0,r=void 0,i=void 0;return t.forEach((function(t){var o;t.constructor===ey?n=t:(o=t,Jy.some((function(e){return o.constructor===e}))?(r&&Qy(e,"More than one built-in value accessor matches form control with"),r=t):(i&&Qy(e,"More than one custom value accessor matches form control with"),i=t))})),i||r||n||(Qy(e,"No valid value accessor for form control with"),null)}function eb(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function tb(e){var t=rb(e)?e.validators:e;return Array.isArray(t)?Ky(t):t||null}function nb(e,t){var n=rb(t)?t.asyncValidators:e;return Array.isArray(n)?Yy(n):n||null}function rb(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var ib,ob,ab,sb,ub,cb,lb,hb,db,fb,pb,gb,mb,vb=function(){function e(t,n){_classCallCheck(this,e),this.validator=t,this.asyncValidator=n,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return _createClass(e,[{key:"setValidators",value:function(e){this.validator=tb(e)}},{key:"setAsyncValidators",value:function(e){this.asyncValidator=nb(e)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(e){return e.markAllAsTouched()}))}},{key:"markAsUntouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(e){e.markAsUntouched({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"markAsDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}},{key:"markAsPristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(e){e.markAsPristine({onlySelf:!0})})),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"markAsPending",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((function(t){t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!0)}))}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status="VALID",this._forEachChild((function(t){t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach((function(e){return e(!1)}))}},{key:"_updateAncestors",value:function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(e){this._parent=e}},{key:"updateValueAndValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}},{key:"_updateTreeValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild((function(t){return t._updateTreeValidity(e)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(e){var t=this;if(this.asyncValidator){this.status="PENDING";var n=vy(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe((function(n){return t.setErrors(n,{emitEvent:e})}))}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}},{key:"setErrors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}},{key:"get",value:function(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;var r=e;return t.forEach((function(e){r=r instanceof bb?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof _b&&r.at(e)||null})),r}(this,e)}},{key:"getError",value:function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}},{key:"hasError",value:function(e,t){return!!this.getError(e,t)}},{key:"_updateControlsErrors",value:function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}},{key:"_initObservables",value:function(){this.valueChanges=new cu,this.statusChanges=new cu}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(e){return this._anyControls((function(t){return t.status===e}))}},{key:"_anyControlsDirty",value:function(){return this._anyControls((function(e){return e.dirty}))}},{key:"_anyControlsTouched",value:function(){return this._anyControls((function(e){return e.touched}))}},{key:"_updatePristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"_updateTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"_isBoxedValue",value:function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}},{key:"_registerOnCollectionChange",value:function(e){this._onCollectionChange=e}},{key:"_setUpdateStrategy",value:function(e){rb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}},{key:"_parentMarkedDirty",value:function(e){return!e&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"root",get:function(){for(var e=this;e._parent;)e=e._parent;return e}}]),e}(),yb=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,tb(r),nb(i,r))))._onChange=[],e._applyFormState(n),e._setUpdateStrategy(r),e.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),e._initObservables(),e}return _inherits(t,e),_createClass(t,[{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach((function(e){return e(t.value,!1!==n.emitViewToModelChange)})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(e,t)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(e){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(e){this._onChange.push(e)}},{key:"_clearChangeFns",value:function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}}},{key:"registerOnDisabledChange",value:function(e){this._onDisabledChange.push(e)}},{key:"_forEachChild",value:function(e){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}]),t}(vb),bb=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,tb(n),nb(r,n)))).controls=e,i._initObservables(),i._setUpdateStrategy(n),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return _inherits(t,e),_createClass(t,[{key:"registerControl",value:function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}},{key:"addControl",value:function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),Object.keys(e).forEach((function(r){t._throwIfControlMissing(r),t.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(e).forEach((function(r){t.controls[r]&&t.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this._reduceChildren({},(function(e,t,n){return e[n]=t instanceof yb?t.value:t.getRawValue(),e}))}},{key:"_syncPendingControls",value:function(){var e=this._reduceChildren(!1,(function(e,t){return!!t._syncPendingControls()||e}));return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: ".concat(e,"."))}},{key:"_forEachChild",value:function(e){var t=this;Object.keys(this.controls).forEach((function(n){return e(t.controls[n],n)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)}))}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(e){var t=this,n=!1;return this._forEachChild((function(r,i){n=n||t.contains(i)&&e(r)})),n}},{key:"_reduceValue",value:function(){var e=this;return this._reduceChildren({},(function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t}))}},{key:"_reduceChildren",value:function(e,t){var n=e;return this._forEachChild((function(e,r){n=t(n,e,r)})),n}},{key:"_allControlsDisabled",value:function(){for(var e=0,t=Object.keys(this.controls);e<t.length;e++){var n=t[e];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))}))}}]),t}(vb),_b=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,tb(n),nb(r,n)))).controls=e,i._initObservables(),i._setUpdateStrategy(n),i._setUpControls(),i.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),i}return _inherits(t,e),_createClass(t,[{key:"at",value:function(e){return this.controls[e]}},{key:"push",value:function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()}},{key:"removeAt",value:function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),this.updateValueAndValidity()}},{key:"setControl",value:function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange((function(){})),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),e.forEach((function(e,r){t._throwIfControlMissing(r),t.at(r).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach((function(e,r){t.at(r)&&t.at(r).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})})),this.updateValueAndValidity(n)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})})),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this.controls.map((function(e){return e instanceof yb?e.value:e.getRawValue()}))}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild((function(e){return e._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var e=this.controls.reduce((function(e,t){return!!t._syncPendingControls()||e}),!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index ".concat(e))}},{key:"_forEachChild",value:function(e){this.controls.forEach((function(t,n){e(t,n)}))}},{key:"_updateValue",value:function(){var e=this;this.value=this.controls.filter((function(t){return t.enabled||e.disabled})).map((function(e){return e.value}))}},{key:"_anyControls",value:function(e){return this.controls.some((function(t){return t.enabled&&e(t)}))}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild((function(t){return e._registerControl(t)}))}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild((function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))}))}},{key:"_allControlsDisabled",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.controls[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){if(r.value.enabled)return!1}}catch(o){t=!0,n=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}},{key:"length",get:function(){return this.controls.length}}]),t}(vb),wb={provide:ny,useExisting:Ee((function(){return kb}))},Cb=Promise.resolve(null),kb=((ob=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).submitted=!1,r._directives=[],r.ngSubmit=new cu,r.form=new bb({},Ky(e),Yy(n)),r}return _inherits(t,e),_createClass(t,[{key:"ngAfterViewInit",value:function(){this._setUpdateStrategy()}},{key:"addControl",value:function(e){var t=this;Cb.then((function(){var n=t._findContainer(e.path);e.control=n.registerControl(e.name,e.control),Wy(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)}))}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){var t=this;Cb.then((function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name),eb(t._directives,e)}))}},{key:"addFormGroup",value:function(e){var t=this;Cb.then((function(){var n=t._findContainer(e.path),r=new bb({});Hy(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})}))}},{key:"removeFormGroup",value:function(e){var t=this;Cb.then((function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)}))}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){var n=this;Cb.then((function(){n.form.get(e.path).setValue(t)}))}},{key:"setValue",value:function(e){this.control.setValue(e)}},{key:"onSubmit",value:function(e){return this.submitted=!0,Zy(this.form,this._directives),this.ngSubmit.emit(e),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}},{key:"_findContainer",value:function(e){return e.pop(),e.length?this.form.get(e):this.form}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"controls",get:function(){return this.form.controls}}]),t}(ny)).\u0275fac=function(e){return new(e||ob)(la(dy,10),la(fy,10))},ob.\u0275dir=bt({type:ob,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&wa("submit",(function(e){return t.onSubmit(e)}))("reset",(function(){return t.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[as([wb]),za]}),ob),Sb=((ib=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"ngOnInit",value:function(){this._checkParentType(),this.formDirective.addFormGroup(this)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeFormGroup(this)}},{key:"_checkParentType",value:function(){}},{key:"control",get:function(){return this.formDirective.getFormGroup(this)}},{key:"path",get:function(){return By(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return Ky(this._validators)}},{key:"asyncValidator",get:function(){return Yy(this._asyncValidators)}}]),t}(ny)).\u0275fac=function(e){return Eb(e||ib)},ib.\u0275dir=bt({type:ib,features:[za]}),ib),Eb=or(Sb),Tb=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"modelParentException",value:function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '.concat(Ny,'\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '))}},{key:"formGroupNameException",value:function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ".concat(My,"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ").concat(Fy))}},{key:"missingNameException",value:function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}},{key:"modelGroupParentException",value:function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ".concat(My,"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ").concat(Fy))}}]),e}(),xb={provide:ny,useExisting:Ee((function(){return Ib}))},Ib=((ab=function(e){function t(e,n,r){var i;return _classCallCheck(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._parent=e,i._validators=n,i._asyncValidators=r,i}return _inherits(t,e),_createClass(t,[{key:"_checkParentType",value:function(){this._parent instanceof t||this._parent instanceof kb||Tb.modelGroupParentException()}}]),t}(Sb)).\u0275fac=function(e){return new(e||ab)(la(ny,5),la(dy,10),la(fy,10))},ab.\u0275dir=bt({type:ab,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[as([xb]),za]}),ab),Pb={provide:sy,useExisting:Ee((function(){return Db}))},Ob=Promise.resolve(null),Db=((ub=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).control=new yb,o._registered=!1,o.update=new cu,o._parent=e,o._rawValidators=n||[],o._rawAsyncValidators=r||[],o.valueAccessor=$y(_assertThisInitialized(o),i),o}return _inherits(t,e),_createClass(t,[{key:"ngOnChanges",value:function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),Xy(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"_setUpControl",value:function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}},{key:"_isStandalone",value:function(){return!this._parent||!(!this.options||!this.options.standalone)}},{key:"_setUpStandalone",value:function(){Wy(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}},{key:"_checkForErrors",value:function(){this._isStandalone()||this._checkParentType(),this._checkName()}},{key:"_checkParentType",value:function(){!(this._parent instanceof Ib)&&this._parent instanceof Sb?Tb.formGroupNameException():this._parent instanceof Ib||this._parent instanceof kb||Tb.modelParentException()}},{key:"_checkName",value:function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Tb.missingNameException()}},{key:"_updateValue",value:function(e){var t=this;Ob.then((function(){t.control.setValue(e,{emitViewToModelChange:!1})}))}},{key:"_updateDisabled",value:function(e){var t=this,n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;Ob.then((function(){r&&!t.control.disabled?t.control.disable():!r&&t.control.disabled&&t.control.enable()}))}},{key:"path",get:function(){return this._parent?By(this.name,this._parent):[this.name]}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"validator",get:function(){return Ky(this._rawValidators)}},{key:"asyncValidator",get:function(){return Yy(this._rawAsyncValidators)}}]),t}(sy)).\u0275fac=function(e){return new(e||ub)(la(ny,9),la(dy,10),la(fy,10),la(Yv,10))},ub.\u0275dir=bt({type:ub,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[as([Pb]),za,Xa]}),ub),Ab=((sb=function e(){_classCallCheck(this,e)}).\u0275fac=function(e){return new(e||sb)},sb.\u0275dir=bt({type:sb,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),sb),Rb=new qe("NgModelWithFormControlWarning"),Nb={provide:sy,useExisting:Ee((function(){return Mb}))},Mb=((cb=function(e){function t(e,n,r,i){var o;return _classCallCheck(this,t),(o=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._ngModelWarningConfig=i,o.update=new cu,o._ngModelWarningSent=!1,o._rawValidators=e||[],o._rawAsyncValidators=n||[],o.valueAccessor=$y(_assertThisInitialized(o),r),o}return _inherits(t,e),_createClass(t,[{key:"ngOnChanges",value:function(e){var n,r;this._isControlChanged(e)&&(Wy(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),Xy(e,this.viewModel)&&(n=t,r=this._ngModelWarningConfig,gr()&&"never"!==r&&((null!==r&&"once"!==r||n._ngModelWarningSentOnce)&&("always"!==r||this._ngModelWarningSent)||(Ly.ngModelWarning("formControl"),n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.form.setValue(this.model),this.viewModel=this.model)}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"_isControlChanged",value:function(e){return e.hasOwnProperty("form")}},{key:"isDisabled",set:function(e){Ly.disabledAttrWarning()}},{key:"path",get:function(){return[]}},{key:"validator",get:function(){return Ky(this._rawValidators)}},{key:"asyncValidator",get:function(){return Yy(this._rawAsyncValidators)}},{key:"control",get:function(){return this.form}}]),t}(sy)).\u0275fac=function(e){return new(e||cb)(la(dy,10),la(fy,10),la(Yv,10),la(Rb,8))},cb.\u0275dir=bt({type:cb,selectors:[["","formControl",""]],inputs:{isDisabled:["disabled","isDisabled"],form:["formControl","form"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[as([Nb]),za,Xa]}),cb._ngModelWarningSentOnce=!1,cb),Fb={provide:ny,useExisting:Ee((function(){return Lb}))},Lb=((pb=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)))._validators=e,r._asyncValidators=n,r.submitted=!1,r.directives=[],r.form=null,r.ngSubmit=new cu,r}return _inherits(t,e),_createClass(t,[{key:"ngOnChanges",value:function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}},{key:"addControl",value:function(e){var t=this.form.get(e.path);return Wy(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){eb(this.directives,e)}},{key:"addFormGroup",value:function(e){var t=this.form.get(e.path);Hy(t,e),t.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormGroup",value:function(e){}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"addFormArray",value:function(e){var t=this.form.get(e.path);Hy(t,e),t.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormArray",value:function(e){}},{key:"getFormArray",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){this.form.get(e.path).setValue(t)}},{key:"onSubmit",value:function(e){return this.submitted=!0,Zy(this.form,this.directives),this.ngSubmit.emit(e),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_updateDomValue",value:function(){var e=this;this.directives.forEach((function(t){var n=e.form.get(t.path);t.control!==n&&(function(e,t){t.valueAccessor.registerOnChange((function(){return Gy(t)})),t.valueAccessor.registerOnTouched((function(){return Gy(t)})),t._rawValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)})),t._rawAsyncValidators.forEach((function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)})),e&&e._clearChangeFns()}(t.control,t),n&&Wy(n,t),t.control=n)})),this.form._updateTreeValidity({emitEvent:!1})}},{key:"_updateRegistrations",value:function(){var e=this;this.form._registerOnCollectionChange((function(){return e._updateDomValue()})),this._oldForm&&this._oldForm._registerOnCollectionChange((function(){})),this._oldForm=this.form}},{key:"_updateValidators",value:function(){var e=Ky(this._validators);this.form.validator=gy.compose([this.form.validator,e]);var t=Yy(this._asyncValidators);this.form.asyncValidator=gy.composeAsync([this.form.asyncValidator,t])}},{key:"_checkFormPresent",value:function(){this.form||Ly.missingFormException()}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}}]),t}(ny)).\u0275fac=function(e){return new(e||pb)(la(dy,10),la(fy,10))},pb.\u0275dir=bt({type:pb,selectors:[["","formGroup",""]],hostBindings:function(e,t){1&e&&wa("submit",(function(e){return t.onSubmit(e)}))("reset",(function(){return t.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[as([Fb]),za,Xa]}),pb),Vb=((fb=function e(){_classCallCheck(this,e)}).\u0275mod=vt({type:fb}),fb.\u0275inj=fe({factory:function(e){return new(e||fb)}}),fb),Ub=((db=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"group",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._reduceControls(e),r=null,i=null,o=void 0;return null!=t&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(r=null!=t.validators?t.validators:null,i=null!=t.asyncValidators?t.asyncValidators:null,o=null!=t.updateOn?t.updateOn:void 0):(r=null!=t.validator?t.validator:null,i=null!=t.asyncValidator?t.asyncValidator:null)),new bb(n,{asyncValidators:i,updateOn:o,validators:r})}},{key:"control",value:function(e,t,n){return new yb(e,t,n)}},{key:"array",value:function(e,t,n){var r=this,i=e.map((function(e){return r._createControl(e)}));return new _b(i,t,n)}},{key:"_reduceControls",value:function(e){var t=this,n={};return Object.keys(e).forEach((function(r){n[r]=t._createControl(e[r])})),n}},{key:"_createControl",value:function(e){return e instanceof yb||e instanceof bb||e instanceof _b?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}]),e}()).\u0275fac=function(e){return new(e||db)},db.\u0275prov=de({token:db,factory:db.\u0275fac}),db),jb=((hb=function e(){_classCallCheck(this,e)}).\u0275mod=vt({type:hb}),hb.\u0275inj=fe({factory:function(e){return new(e||hb)},providers:[Oy],imports:[Vb]}),hb),qb=((lb=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"withConfig",value:function(t){return{ngModule:e,providers:[{provide:Rb,useValue:t.warnOnNgModelWithFormControl}]}}}]),e}()).\u0275mod=vt({type:lb}),lb.\u0275inj=fe({factory:function(e){return new(e||lb)},providers:[Ub,Oy],imports:[Vb]}),lb),Bb=n("iqUP"),Wb=((mb=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"signupUser",value:function(e,t,n){var r=this;return Bb.auth().createUserWithEmailAndPassword(e,t).then((function(e){return console.log("create user: ",e),e.user.updateProfile({displayName:n}).then((function(){r.verifyEmail()}))}))}},{key:"verifyEmail",value:function(){var e=this;return Bb.auth().currentUser.sendEmailVerification().then((function(t){return e.email=Bb.auth().currentUser.email,Bb.auth().currentUser.getIdToken().then((function(t){e.token=t})),console.log("Sending verifcation email :",e.email),t}))}},{key:"isVerified",value:function(){var e=this,t=!!Bb.auth().currentUser&&Bb.auth().currentUser.emailVerified;return t&&(this.email=Bb.auth().currentUser.email,Bb.auth().currentUser.getIdToken().then((function(t){e.token=t}))),console.log("logged in: ",t?Bb.auth().currentUser:""),t}},{key:"signInUser",value:function(e,t){var n=this;return Bb.auth().signInWithEmailAndPassword(e,t).then((function(){console.log("user email verified ",n.isVerified()),n.isSignedIn=!0}))}},{key:"logout",value:function(){Bb.auth().signOut()}}]),e}()).\u0275fac=function(e){return new(e||mb)},mb.\u0275prov=de({token:mb,factory:mb.\u0275fac,providedIn:"root"}),mb),zb=((gb=function(){function e(t,n){_classCallCheck(this,e),this.auth=t,this.router=n}return _createClass(e,[{key:"ngOnInit",value:function(){this.submitted=!1,this.registeredEmail=!1,this.errorMessage="",this.registerForm=new bb({firstName:new yb(""),lastName:new yb(""),email:new yb("",[gy.required,gy.email]),password:new yb("",[gy.required,gy.minLength(6)])})}},{key:"submit",value:function(){var e=this;this.submitted=!0,this.errorMessage="",this.registerForm.invalid?setTimeout((function(){document.querySelector('input[invalid="true"]').focus()}),0):this.auth.signupUser(this.registerForm.value.email,this.registerForm.value.password,this.registerForm.value.firstName+" "+this.registerForm.value.lastName).then((function(){e.registeredEmail=!0})).catch((function(t){var n=t&&t.message?t.message:"Unkown error";console.log(n),e.errorMessage=n}))}}]),e}()).\u0275fac=function(e){return new(e||gb)(la(Wb),la($p))},gb.\u0275cmp=ft({type:gb,selectors:[["register-user"]],decls:51,vars:27,consts:[[1,"container"],[1,"card"],[1,"card-header"],[1,"display-5","text-center"],[1,"card-body",3,"hidden"],["aria-live","assertive",1,"invalid-alert"],[1,"invalid-message"],[3,"formGroup"],[1,"row"],[1,"col-sm-6","input-container"],[1,"inputWrapper"],["id","firstName","type","name","aria-label","Optional: Please enter your first name to register",1,"formInput",3,"formControl"],["for","firstName",1,"floating-label"],["id","lastName","type","name","aria-label","Optional: Please enter your last name to register",1,"formInput",3,"formControl"],["for","lastName",1,"floating-label"],["id","email","type","email","aria-label","Please enter your email to register",1,"formInput",3,"formControl"],["for","email",1,"floating-label"],["id","password","type","password","aria-label","Please enter your password to register",1,"formInput",3,"formControl"],["for","password",1,"floating-label"],[1,"col-sm-12"],["sam-cta","",3,"disabled","click"],[1,"card-title","text-center"],[1,"card-title"]],template:function(e,t){1&e&&(ga(0,"div",0),ga(1,"div",1),ga(2,"div",2),ga(3,"h1",3),Fa(4),ma(),ma(),ga(5,"div",4),ga(6,"div",5),ga(7,"span",6),Fa(8," - Please enter an email "),ma(),ga(9,"span",6),Fa(10," - Please enter a valid email "),ma(),ga(11,"span",6),Fa(12," - Please enter a password "),ma(),ga(13,"span",6),Fa(14),ma(),ga(15,"span",6),Fa(16),ma(),ma(),ga(17,"form",7),ga(18,"div",8),ga(19,"div",9),ga(20,"span",10),va(21,"input",11),ga(22,"label",12),Fa(23,"First Name: Optional"),ma(),ma(),ma(),ga(24,"div",9),ga(25,"span",10),va(26,"input",13),ga(27,"label",14),Fa(28,"Last Name: Optional"),ma(),ma(),ma(),ma(),ga(29,"div",8),ga(30,"div",9),ga(31,"span",10),va(32,"input",15),ga(33,"label",16),Fa(34,"Email"),ma(),ma(),ma(),ga(35,"div",9),ga(36,"span",10),va(37,"input",17),ga(38,"label",18),Fa(39,"Password"),ma(),ma(),ma(),ma(),ga(40,"div",8),ga(41,"div",19),ga(42,"button",20),wa("click",(function(){return t.submit()})),Fa(43,"Register"),ma(),ma(),ma(),ma(),ma(),ga(44,"div",4),ga(45,"h1",21),Fa(46),ma(),ga(47,"p",22),Fa(48," You should recieve a verification link in your email shortly. "),ma(),ga(49,"p",22),Fa(50," Once your email is verified please login to view components. "),ma(),ma(),ma(),ma()),2&e&&(ni(4),La(t.registeredEmail?"Thank You":"Register"),ni(1),fa("hidden",t.registeredEmail),sa("loading",t.submitted&&t.registerForm.valid&&""===t.errorMessage),ni(1),sa("invalid",t.submitted&&(t.registerForm.invalid||""!==t.errorMessage)),ni(1),sa("invalid",t.submitted&&t.registerForm.get("email").errors&&t.registerForm.get("email").errors.required),ni(2),sa("invalid",t.submitted&&t.registerForm.get("email").errors&&t.registerForm.get("email").errors.email),ni(2),sa("invalid",t.submitted&&t.registerForm.get("password").errors&&t.registerForm.get("password").errors.required),ni(2),sa("invalid",t.submitted&&t.registerForm.get("password").errors&&t.registerForm.get("password").errors.minlength&&t.registerForm.get("password").errors.minlength.actualLength<t.registerForm.get("password").errors.minlength.requiredLength),ni(1),Va(" - Please enter a valid password, min length required ",t.registerForm.get("password").errors&&t.registerForm.get("password").errors.minlength?t.registerForm.get("password").errors.minlength.requiredLength:" "," "),ni(1),sa("invalid",t.submitted&&""!==t.errorMessage),ni(1),Va(" ",t.errorMessage," "),ni(1),fa("formGroup",t.registerForm),ni(4),fa("formControl",t.registerForm.get("firstName")),ni(1),sa("hasVal",""!==t.registerForm.get("firstName").value),ni(4),fa("formControl",t.registerForm.get("lastName")),ni(1),sa("hasVal",""!==t.registerForm.get("lastName").value),ni(5),fa("formControl",t.registerForm.get("email")),sa("invalid",t.submitted&&t.registerForm.get("email").invalid),ni(1),sa("invalid",t.submitted&&t.registerForm.get("email").invalid)("hasVal",""!==t.registerForm.get("email").value),ni(4),fa("formControl",t.registerForm.get("password")),sa("invalid",t.submitted&&t.registerForm.get("password").invalid),ni(1),sa("invalid",t.submitted&&t.registerForm.get("password").invalid)("hasVal",""!==t.registerForm.get("password").value),ni(4),fa("disabled",t.submitted&&t.registerForm.invalid),ni(2),fa("hidden",!t.registeredEmail),ni(2),Va("Thank You",t.registerForm.get("name")?" "+t.registerForm.get("name").value+",":",",""))},directives:[Ab,ly,Lb,ey,cy,Mb,Tm],styles:['label>*{display:block;pointer-events:none}.body{min-height:100vh}a{position:relative}a:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a:focus{position:relative;outline:none}a:focus:after{width:100%}.sam-title{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6{padding:8px}@media screen and (max-width:575px){.card-link,.date{display:block;width:100%;text-align:center;margin:0}}.container{padding-top:16px}.floating-label{position:absolute;top:0;left:0;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;transition:all .25s ease-in-out}.floating-label[invalid=true]{color:red}.input-container{padding:18px}.formInput{display:inline-block;width:100%;height:calc(2.25rem + 2px);padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;background-color:#fff;border:0;border-bottom:2px solid #aaa9a9;transition:all .5s ease-in-out}.formInput:focus{-webkit-appearance:none;outline:none}.formInput[invalid=true]{border:2px solid #fc0303}.formInput:focus+.floating-label{top:-28px;left:-15px;transform:scale(.75);color:#027fe6}.formInput:focus+.floating-label[invalid=true]{color:#fc0303}.floating-label[hasVal=true]{top:-28px;left:-15px;transform:scale(.75);color:#495057}.inputWrapper{display:block;position:relative;width:100%;height:100%}.inputWrapper:before{width:0;height:100%;bottom:0;left:50%;border-bottom:2px solid #027fe6;border-top:2px solid #027fe6}.inputWrapper:after,.inputWrapper:before{content:"";position:absolute;border-radius:0;transition:all .5s ease-in-out}.inputWrapper:after{width:100%;height:0;top:50%;left:0;border-left:2px solid #027fe6;border-right:2px solid #027fe6}.inputWrapper:focus-within{outline:none}.inputWrapper:focus-within:before{left:0;width:100%;border-radius:.25rem}.inputWrapper:focus-within:after{top:0;height:100%;border-radius:.25rem}.invalid-message{display:none}.invalid-message[invalid=true]{display:block}.invalid-alert{display:none}.invalid-alert[invalid=true]{display:block;border:1px solid #fc0303;padding:8px 16px;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;color:#fc0303}.card-title{font-size:1.25rem}@-webkit-keyframes rotating{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes rotating{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.card-body[loading=true]{position:relative}.card-body[loading=true]:before{content:"Loading...";color:#fff;text-align:center;position:absolute;padding-top:43px;width:100%;height:100%;top:0;left:0;background:#000;z-index:9999;cursor:not-allowed}.card-body[loading=true]:after{content:"";position:absolute;width:90px;height:90px;top:8px;left:calc(50% - 45px);border:4px solid #027fe6;border-right:0;border-bottom:0;border-radius:50%;z-index:9999;cursor:not-allowed;-webkit-animation:rotating 1s linear infinite;animation:rotating 1s linear infinite}'],encapsulation:2}),gb);function Hb(e,t){if(1&e){var n=ya();ga(0,"span"),ga(1,"a",19),wa("click",(function(){return Xt(n),Sa().resendVerication()})),Fa(2,"Send verification email again"),ma(),ma()}}var Gb,Qb=((Gb=function(){function e(t,n){_classCallCheck(this,e),this.auth=t,this.router=n}return _createClass(e,[{key:"ngOnInit",value:function(){this.submitted=!1,this.errorMessage="",this.loginForm=new bb({email:new yb("",[gy.required,gy.email]),password:new yb("",gy.required)})}},{key:"submit",value:function(){var e=this;if(this.submitted=!0,this.errorMessage="",this.loginForm.invalid)setTimeout((function(){document.querySelector('input[invalid="true"]').focus()}),0);else{var t=this.loginForm.value.email,n=this.loginForm.value.password;console.log("siging in user: ",t),this.auth.signInUser(t,n).then((function(){e.auth.isVerified()?e.router.navigate(["/forum/authenticated"]):e.errorMessage="User not verified yet"})).catch((function(t){var n=t&&t.message?t.message:"Unkown error";console.log(n),e.errorMessage=n}))}}},{key:"resendVerication",value:function(){this.auth.verifyEmail(),this.errorMessage="Please check email for verification link"}},{key:"goTo",value:function(e){this.router.navigate(["/"+e])}}]),e}()).\u0275fac=function(e){return new(e||Gb)(la(Wb),la($p))},Gb.\u0275cmp=ft({type:Gb,selectors:[["app-login"]],decls:35,vars:17,consts:[[1,"container"],[1,"card"],[1,"card-header"],[1,"display-5","text-center"],[1,"card-body"],["aria-live","assertive",1,"invalid-alert"],[1,"invalid-message"],[4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-sm-6","input-container"],[1,"inputWrapper"],["id","email","type","email","aria-label","Please enter your email to register",1,"formInput",3,"formControl"],["for","email",1,"floating-label"],["id","password","type","password","aria-label","Please enter your password to register",1,"formInput",3,"formControl"],["for","password",1,"floating-label"],[1,"col-sm-6"],["sam-cta","",3,"disabled","click"],["sam-cta","",3,"click"],["tabindex","0",2,"cursor","pointer",3,"click"]],template:function(e,t){1&e&&(ga(0,"div",0),ga(1,"div",1),ga(2,"div",2),ga(3,"h1",3),Fa(4,"Login"),ma(),ma(),ga(5,"div",4),ga(6,"div",5),ga(7,"span",6),Fa(8," - Please enter an email "),ma(),ga(9,"span",6),Fa(10," - Please enter a valid email "),ma(),ga(11,"span",6),Fa(12," - Please enter a password "),ma(),ga(13,"span",6),Fa(14),ua(15,Hb,3,0,"span",7),ma(),ma(),ga(16,"form",8),ga(17,"div",9),ga(18,"div",10),ga(19,"span",11),va(20,"input",12),ga(21,"label",13),Fa(22,"Email"),ma(),ma(),ma(),ga(23,"div",10),ga(24,"span",11),va(25,"input",14),ga(26,"label",15),Fa(27,"Password"),ma(),ma(),ma(),ma(),ga(28,"div",9),ga(29,"div",16),ga(30,"button",17),wa("click",(function(){return t.submit()})),Fa(31,"Login"),ma(),ma(),ga(32,"div",16),ga(33,"button",18),wa("click",(function(){return t.goTo("register")})),Fa(34,"Register"),ma(),ma(),ma(),ma(),ma(),ma(),ma()),2&e&&(ni(6),sa("invalid",t.submitted&&(t.loginForm.invalid||""!==t.errorMessage)),ni(1),sa("invalid",t.submitted&&t.loginForm.get("email").errors&&t.loginForm.get("email").errors.required),ni(2),sa("invalid",t.submitted&&t.loginForm.get("email").errors&&t.loginForm.get("email").errors.email),ni(2),sa("invalid",t.submitted&&t.loginForm.get("password").errors&&t.loginForm.get("password").errors.required),ni(2),sa("invalid",""!==t.errorMessage),ni(1),Va(" ",t.errorMessage," "),ni(1),fa("ngIf","User not verified yet"===t.errorMessage),ni(1),fa("formGroup",t.loginForm),ni(4),fa("formControl",t.loginForm.get("email")),sa("invalid",t.submitted&&t.loginForm.get("email").invalid),ni(1),sa("invalid",t.submitted&&t.loginForm.get("email").invalid)("hasVal",""!==t.loginForm.get("email").value),ni(4),fa("formControl",t.loginForm.get("password")),sa("invalid",t.submitted&&t.loginForm.get("password").invalid),ni(1),sa("invalid",t.submitted&&t.loginForm.get("password").invalid)("hasVal",""!==t.loginForm.get("password").value),ni(4),fa("disabled",t.submitted&&t.loginForm.invalid))},directives:[Bl,Ab,ly,Lb,ey,cy,Mb,Tm],styles:['label[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block;pointer-events:none}.body[_ngcontent-%COMP%]{min-height:100vh}a[_ngcontent-%COMP%]{position:relative}a[_ngcontent-%COMP%]:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a[_ngcontent-%COMP%]:focus{position:relative;outline:none}a[_ngcontent-%COMP%]:focus:after{width:100%}.sam-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}@media screen and (max-width:575px){.card-link[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;margin:0}}.container[_ngcontent-%COMP%]{padding-top:16px}.floating-label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;transition:all .25s ease-in-out}.floating-label[invalid=true][_ngcontent-%COMP%]{color:#fc0303}.input-container[_ngcontent-%COMP%]{padding:18px}.formInput[_ngcontent-%COMP%]{display:inline-block;width:100%;height:calc(2.25rem + 2px);padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;background-color:#fff;border:0;border-bottom:2px solid rgba(2,127,230,.36);transition:all .5s ease-in-out}.formInput[_ngcontent-%COMP%]:focus{-webkit-appearance:none;outline:none}.formInput[invalid=true][_ngcontent-%COMP%]{border:2px solid #fc0303}.formInput[_ngcontent-%COMP%]:focus + .floating-label[_ngcontent-%COMP%]{top:-28px;left:-15px;transform:scale(.75);color:#027fe6}.formInput[_ngcontent-%COMP%]:focus + .floating-label[invalid=true][_ngcontent-%COMP%]{color:#fc0303}.floating-label[hasVal=true][_ngcontent-%COMP%]{top:-28px;left:-15px;transform:scale(.75);color:#495057}.inputWrapper[_ngcontent-%COMP%]{display:block;position:relative;width:100%;height:100%}.inputWrapper[_ngcontent-%COMP%]:before{width:0;height:100%;bottom:0;left:50%;border-bottom:2px solid #027fe6;border-top:2px solid #027fe6}.inputWrapper[_ngcontent-%COMP%]:after, .inputWrapper[_ngcontent-%COMP%]:before{content:"";position:absolute;border-radius:0;transition:all .5s ease-in-out}.inputWrapper[_ngcontent-%COMP%]:after{width:100%;height:0;top:50%;left:0;border-left:2px solid #027fe6;border-right:2px solid #027fe6}.inputWrapper[_ngcontent-%COMP%]:focus-within{outline:none}.inputWrapper[_ngcontent-%COMP%]:focus-within:before{left:0;width:100%;border-radius:.25rem}.inputWrapper[_ngcontent-%COMP%]:focus-within:after{top:0;height:100%;border-radius:.25rem}.invalid-message[_ngcontent-%COMP%]{display:none}.invalid-message[invalid=true][_ngcontent-%COMP%]{display:block}.invalid-alert[_ngcontent-%COMP%]{display:none}.invalid-alert[invalid=true][_ngcontent-%COMP%]{display:block;border:1px solid #fc0303;padding:8px 16px;margin-bottom:32px;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;color:#fc0303}.col-sm-6[_ngcontent-%COMP%]{padding:8px}']}),Gb),Kb=function e(){_classCallCheck(this,e)},Yb=function e(){_classCallCheck(this,e)},Xb=function(){function e(t){var n=this;_classCallCheck(this,e),this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){n.headers=new Map,t.split("\n").forEach((function(e){var t=e.indexOf(":");if(t>0){var r=e.slice(0,t),i=r.toLowerCase(),o=e.slice(t+1).trim();n.maybeSetNormalizedName(r,i),n.headers.has(i)?n.headers.get(i).push(o):n.headers.set(i,[o])}}))}:function(){n.headers=new Map,Object.keys(t).forEach((function(e){var r=t[e],i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(i,r),n.maybeSetNormalizedName(e,i))}))}:this.headers=new Map}return _createClass(e,[{key:"has",value:function(e){return this.init(),this.headers.has(e.toLowerCase())}},{key:"get",value:function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(e){return this.init(),this.headers.get(e.toLowerCase())||null}},{key:"append",value:function(e,t){return this.clone({name:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({name:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({name:e,value:t,op:"d"})}},{key:"maybeSetNormalizedName",value:function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}},{key:"init",value:function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach((function(e){return t.applyUpdate(e)})),this.lazyUpdate=null))}},{key:"copyFrom",value:function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach((function(n){t.headers.set(n,e.headers.get(n)),t.normalizedNames.set(n,e.normalizedNames.get(n))}))}},{key:"clone",value:function(t){var n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}},{key:"applyUpdate",value:function(e){var t=e.name.toLowerCase();switch(e.op){case"a":case"s":var n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);var r=("a"===e.op?this.headers.get(t):void 0)||[];r.push.apply(r,_toConsumableArray(n)),this.headers.set(t,r);break;case"d":var i=e.value;if(i){var o=this.headers.get(t);if(!o)return;0===(o=o.filter((function(e){return-1===i.indexOf(e)}))).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}},{key:"forEach",value:function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach((function(n){return e(t.normalizedNames.get(n),t.headers.get(n))}))}}]),e}(),Jb=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"encodeKey",value:function(e){return Zb(e)}},{key:"encodeValue",value:function(e){return Zb(e)}},{key:"decodeKey",value:function(e){return decodeURIComponent(e)}},{key:"decodeValue",value:function(e){return decodeURIComponent(e)}}]),e}();function Zb(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var $b=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck(this,e),this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new Jb,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(e,t){var n=new Map;return e.length>0&&e.split("&").forEach((function(e){var r=e.indexOf("="),i=_slicedToArray(-1==r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],2),o=i[0],a=i[1],s=n.get(o)||[];s.push(a),n.set(o,s)})),n}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach((function(e){var r=n.fromObject[e];t.map.set(e,Array.isArray(r)?r:[r])}))):this.map=null}return _createClass(e,[{key:"has",value:function(e){return this.init(),this.map.has(e)}},{key:"get",value:function(e){this.init();var t=this.map.get(e);return t?t[0]:null}},{key:"getAll",value:function(e){return this.init(),this.map.get(e)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(e,t){return this.clone({param:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({param:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({param:e,value:t,op:"d"})}},{key:"toString",value:function(){var e=this;return this.init(),this.keys().map((function(t){var n=e.encoder.encodeKey(t);return e.map.get(t).map((function(t){return n+"="+e.encoder.encodeValue(t)})).join("&")})).filter((function(e){return""!==e})).join("&")}},{key:"clone",value:function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([t]),n}},{key:"init",value:function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach((function(t){return e.map.set(t,e.cloneFrom.map.get(t))})),this.updates.forEach((function(t){switch(t.op){case"a":case"s":var n=("a"===t.op?e.map.get(t.param):void 0)||[];n.push(t.value),e.map.set(t.param,n);break;case"d":if(void 0===t.value){e.map.delete(t.param);break}var r=e.map.get(t.param)||[],i=r.indexOf(t.value);-1!==i&&r.splice(i,1),r.length>0?e.map.set(t.param,r):e.map.delete(t.param)}})),this.cloneFrom=this.updates=null)}}]),e}();function e_(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function t_(e){return"undefined"!=typeof Blob&&e instanceof Blob}function n_(e){return"undefined"!=typeof FormData&&e instanceof FormData}var r_=function(){function e(t,n,r,i){var o;if(_classCallCheck(this,e),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.params&&(this.params=o.params)),this.headers||(this.headers=new Xb),this.params){var a=this.params.toString();if(0===a.length)this.urlWithParams=n;else{var s=n.indexOf("?");this.urlWithParams=n+(-1===s?"?":s<n.length-1?"&":"")+a}}else this.params=new $b,this.urlWithParams=n}return _createClass(e,[{key:"serializeBody",value:function(){return null===this.body?null:e_(this.body)||t_(this.body)||n_(this.body)||"string"==typeof this.body?this.body:this.body instanceof $b?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body?null:n_(this.body)?null:t_(this.body)?this.body.type||null:e_(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof $b?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress,u=t.headers||this.headers,c=t.params||this.params;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((function(e,n){return e.set(n,t.setHeaders[n])}),u)),t.setParams&&(c=Object.keys(t.setParams).reduce((function(e,n){return e.set(n,t.setParams[n])}),c)),new e(n,r,o,{params:c,headers:u,reportProgress:s,responseType:i,withCredentials:a})}}]),e}(),i_=function(){var e={Sent:0,UploadProgress:1,ResponseHeader:2,DownloadProgress:3,Response:4,User:5};return e[e.Sent]="Sent",e[e.UploadProgress]="UploadProgress",e[e.ResponseHeader]="ResponseHeader",e[e.DownloadProgress]="DownloadProgress",e[e.Response]="Response",e[e.User]="User",e}(),o_=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";_classCallCheck(this,e),this.headers=t.headers||new Xb,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300},a_=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n))).type=i_.ResponseHeader,e}return _inherits(t,e),_createClass(t,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),t}(o_),s_=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n))).type=i_.Response,e.body=void 0!==n.body?n.body:null,e}return _inherits(t,e),_createClass(t,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),t}(o_),u_=function(e){function t(e){var n;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,0,"Unknown Error"))).name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for ".concat(e.url||"(unknown url)"):"Http failure response for ".concat(e.url||"(unknown url)",": ").concat(e.status," ").concat(e.statusText),n.error=e.error||null,n}return _inherits(t,e),t}(o_);function c_(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var l_,h_,d_,f_,p_,g_,m_,v_,y_,b_,__,w_,C_=((l_=function(){function e(t){_classCallCheck(this,e),this.handler=t}return _createClass(e,[{key:"request",value:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof r_)n=e;else{var o=void 0;o=i.headers instanceof Xb?i.headers:new Xb(i.headers);var a=void 0;i.params&&(a=i.params instanceof $b?i.params:new $b({fromObject:i.params})),n=new r_(e,t,void 0!==i.body?i.body:null,{headers:o,params:a,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}var s=jh(n).pipe(Id((function(e){return r.handler.handle(e)})));if(e instanceof r_||"events"===i.observe)return s;var u=s.pipe(Xh((function(e){return e instanceof s_})));switch(i.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return u.pipe(U((function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body})));case"blob":return u.pipe(U((function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body})));case"text":return u.pipe(U((function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body})));case"json":default:return u.pipe(U((function(e){return e.body})))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type ".concat(i.observe,"}"))}}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",e,t)}},{key:"head",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",e,t)}},{key:"jsonp",value:function(e,t){return this.request("JSONP",e,{params:(new $b).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",e,t)}},{key:"patch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",e,c_(n,t))}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",e,c_(n,t))}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",e,c_(n,t))}}]),e}()).\u0275fac=function(e){return new(e||l_)(Xe(Kb))},l_.\u0275prov=de({token:l_,factory:l_.\u0275fac}),l_),k_=function(){function e(t,n){_classCallCheck(this,e),this.next=t,this.interceptor=n}return _createClass(e,[{key:"handle",value:function(e){return this.interceptor.intercept(e,this.next)}}]),e}(),S_=new qe("HTTP_INTERCEPTORS"),E_=((h_=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"intercept",value:function(e,t){return t.handle(e)}}]),e}()).\u0275fac=function(e){return new(e||h_)},h_.\u0275prov=de({token:h_,factory:h_.\u0275fac}),h_),T_=/^\)\]\}',?\n/,x_=function e(){_classCallCheck(this,e)},I_=((f_=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"build",value:function(){return new XMLHttpRequest}}]),e}()).\u0275fac=function(e){return new(e||f_)},f_.\u0275prov=de({token:f_,factory:f_.\u0275fac}),f_),P_=((d_=function(){function e(t){_classCallCheck(this,e),this.xhrFactory=t}return _createClass(e,[{key:"handle",value:function(e){var t=this;if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new C((function(n){var r=t.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((function(e,t){return r.setRequestHeader(e,t.join(","))})),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){var i=e.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(e.responseType){var o=e.responseType.toLowerCase();r.responseType="json"!==o?o:"text"}var a=e.serializeBody(),s=null,u=function(){if(null!==s)return s;var t=1223===r.status?204:r.status,n=r.statusText||"OK",i=new Xb(r.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(r)||e.url;return s=new a_({headers:i,status:t,statusText:n,url:o})},c=function(){var t=u(),i=t.headers,o=t.status,a=t.statusText,s=t.url,c=null;204!==o&&(c=void 0===r.response?r.responseText:r.response),0===o&&(o=c?200:0);var l=o>=200&&o<300;if("json"===e.responseType&&"string"==typeof c){var h=c;c=c.replace(T_,"");try{c=""!==c?JSON.parse(c):null}catch(d){c=h,l&&(l=!1,c={error:d,text:c})}}l?(n.next(new s_({body:c,headers:i,status:o,statusText:a,url:s||void 0})),n.complete()):n.error(new u_({error:c,headers:i,status:o,statusText:a,url:s||void 0}))},l=function(e){var t=u().url,i=new u_({error:e,status:r.status||0,statusText:r.statusText||"Unknown Error",url:t||void 0});n.error(i)},h=!1,d=function(t){h||(n.next(u()),h=!0);var i={type:i_.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(i.total=t.total),"text"===e.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},f=function(e){var t={type:i_.UploadProgress,loaded:e.loaded};e.lengthComputable&&(t.total=e.total),n.next(t)};return r.addEventListener("load",c),r.addEventListener("error",l),e.reportProgress&&(r.addEventListener("progress",d),null!==a&&r.upload&&r.upload.addEventListener("progress",f)),r.send(a),n.next({type:i_.Sent}),function(){r.removeEventListener("error",l),r.removeEventListener("load",c),e.reportProgress&&(r.removeEventListener("progress",d),null!==a&&r.upload&&r.upload.removeEventListener("progress",f)),r.abort()}}))}}]),e}()).\u0275fac=function(e){return new(e||d_)(Xe(x_))},d_.\u0275prov=de({token:d_,factory:d_.\u0275fac}),d_),O_=new qe("XSRF_COOKIE_NAME"),D_=new qe("XSRF_HEADER_NAME"),A_=function e(){_classCallCheck(this,e)},R_=((w_=function(){function e(t,n,r){_classCallCheck(this,e),this.doc=t,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return _createClass(e,[{key:"getToken",value:function(){if("server"===this.platform)return null;var e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Nl(e,this.cookieName),this.lastCookieString=e),this.lastToken}}]),e}()).\u0275fac=function(e){return new(e||w_)(Xe(Ic),Xe(Ru),Xe(O_))},w_.\u0275prov=de({token:w_,factory:w_.\u0275fac}),w_),N_=((__=function(){function e(t,n){_classCallCheck(this,e),this.tokenService=t,this.headerName=n}return _createClass(e,[{key:"intercept",value:function(e,t){var n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);var r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}]),e}()).\u0275fac=function(e){return new(e||__)(Xe(A_),Xe(D_))},__.\u0275prov=de({token:__,factory:__.\u0275fac}),__),M_=((b_=function(){function e(t,n){_classCallCheck(this,e),this.backend=t,this.injector=n,this.chain=null}return _createClass(e,[{key:"handle",value:function(e){if(null===this.chain){var t=this.injector.get(S_,[]);this.chain=t.reduceRight((function(e,t){return new k_(e,t)}),this.backend)}return this.chain.handle(e)}}]),e}()).\u0275fac=function(e){return new(e||b_)(Xe(Yb),Xe(Ho))},b_.\u0275prov=de({token:b_,factory:b_.\u0275fac}),b_),F_=((y_=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"disable",value:function(){return{ngModule:e,providers:[{provide:N_,useClass:E_}]}}},{key:"withOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:e,providers:[t.cookieName?{provide:O_,useValue:t.cookieName}:[],t.headerName?{provide:D_,useValue:t.headerName}:[]]}}}]),e}()).\u0275mod=vt({type:y_}),y_.\u0275inj=fe({factory:function(e){return new(e||y_)},providers:[N_,{provide:S_,useExisting:N_,multi:!0},{provide:A_,useClass:R_},{provide:O_,useValue:"XSRF-TOKEN"},{provide:D_,useValue:"X-XSRF-TOKEN"}]}),y_),L_=((v_=function e(){_classCallCheck(this,e)}).\u0275mod=vt({type:v_}),v_.\u0275inj=fe({factory:function(e){return new(e||v_)},providers:[C_,{provide:Kb,useClass:M_},P_,{provide:Yb,useExisting:P_},I_,{provide:x_,useExisting:I_}],imports:[[F_.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),v_),V_=((m_=function(){function e(t){_classCallCheck(this,e),this.httpClient=t}return _createClass(e,[{key:"postMessage",value:function(e,t){var n=(new $b).append("auth",t);return this.httpClient.post("https://sam-merante.firebaseio.com/messages.json",e,{observe:"body",responseType:"json",params:n})}},{key:"getMessage",value:function(){return this.httpClient.get("https://sam-merante.firebaseio.com/messages.json",{observe:"body",responseType:"json"})}}]),e}()).\u0275fac=function(e){return new(e||m_)(Xe(C_))},m_.\u0275prov=de({token:m_,factory:m_.\u0275fac,providedIn:"root"}),m_),U_=((g_=function(){function e(t,n,r){_classCallCheck(this,e),this.messageService=t,this.authSerivce=n,this.router=r}return _createClass(e,[{key:"ngOnInit",value:function(){this.messageForm=new bb({message:new yb("",gy.required)})}},{key:"submitMessage",value:function(){if(this.messageForm.valid){var e={message:this.messageForm.get("message").value,date:new Date,email:this.authSerivce.email};this.messageService.postMessage(e,this.authSerivce.token).subscribe((function(e){console.log(e)})),this.messageForm.reset()}}}]),e}()).\u0275fac=function(e){return new(e||g_)(la(V_),la(Wb),la($p))},g_.\u0275cmp=ft({type:g_,selectors:[["compnents-authenticated"]],decls:9,vars:2,consts:[[1,"container",3,"formGroup","submit"],[1,"row"],[1,"col-sm-12"],["field_id","messagePost","label","Message"],["sam-input","","id","messagePost","aria-label","Enter a message to post in the forum",3,"formControl"],[1,"col-sm-12","text-center"],["sam-cta","","type","submit"]],template:function(e,t){1&e&&(ga(0,"form",0),wa("submit",(function(){return t.submitMessage()})),ga(1,"div",1),ga(2,"div",2),ga(3,"sam-input-wrapper",3),va(4,"textarea",4),ma(),ma(),ma(),ga(5,"div",1),ga(6,"div",5),ga(7,"button",6),Fa(8,"Post"),ma(),ma(),ma(),ma()),2&e&&(fa("formGroup",t.messageForm),ni(4),fa("formControl",t.messageForm.get("message")))},directives:[Ab,ly,Lb,Im,ey,Pm,cy,Mb,Tm],styles:[""]}),g_),j_=((p_=function(){function e(t,n){_classCallCheck(this,e),this.auth=t,this.router=n}return _createClass(e,[{key:"canActivate",value:function(e,t){var n=this.auth.isVerified();return n||this.router.navigate(["/home"]),n}}]),e}()).\u0275fac=function(e){return new(e||p_)(Xe(Wb),Xe($p))},p_.\u0275prov=de({token:p_,factory:p_.\u0275fac,providedIn:"root"}),p_);function q_(e,t){if(1&e&&(ga(0,"div",12),ga(1,"div",2),ga(2,"div",13),Fa(3),iu(4,"date"),iu(5,"date"),ma(),ga(6,"div",14),Fa(7),ma(),ma(),ga(8,"div",2),ga(9,"div",15),Fa(10),ma(),ma(),ma()),2&e){var n=t.$implicit;ni(3),Ua(" ",au(4,4,n.date,"MMM d, yyyy")," - ",au(5,7,n.date,"shortTime")," "),ni(4),Va(" ",n.email," "),ni(3),Va(" ",n.message," ")}}var B_,W_,z_=((B_=function(){function e(t,n,r,i){_classCallCheck(this,e),this.auth=t,this.router=n,this.route=r,this.messageService=i}return _createClass(e,[{key:"ngOnInit",value:function(){this.loggedIn=this.auth.isVerified(),console.log("user verified and logged in :",this.loggedIn),this.loggedIn&&this.router.navigate(["authenticated"],{relativeTo:this.route}),this.messages=[],this.reloadMessages()}},{key:"goTo",value:function(e){this.router.navigate(["/"+e])}},{key:"logout",value:function(){this.auth.logout()}},{key:"reloadMessages",value:function(){var e=this;this.messageService.getMessage().subscribe((function(t){t&&(e.messages=[],console.log(t),Object.keys(t).forEach((function(n){e.messages.push(Object.assign(Object.assign({},t[n]),{key:n}))})),e.messages.reverse())}))}}]),e}()).\u0275fac=function(e){return new(e||B_)(la(Wb),la($p),la(Wf),la(V_))},B_.\u0275cmp=ft({type:B_,selectors:[["app-forum"]],decls:26,vars:2,consts:[[1,"sam-title"],[1,"container"],[1,"row"],[1,"col-sm-6"],["sam-cta","",3,"click"],["src","assets/reload.png","alt","reload",1,"reload"],["class","container messageWrapper",4,"ngFor","ngForOf"],[1,"container","pt-5",3,"hidden"],[1,"col-sm-12","text-center"],[1,"alert-danger"],[1,"col-sm-6","text-center"],[1,"col-sm-12","text-center","p-5"],[1,"container","messageWrapper"],[1,"col-sm-6","date"],[1,"col-sm-6","email"],[1,"col-sm-12","message"]],template:function(e,t){1&e&&(ga(0,"h1",0),Fa(1,"Forum"),ma(),ga(2,"div",1),ga(3,"div",2),ga(4,"div",3),ga(5,"button",4),wa("click",(function(){return t.reloadMessages()})),va(6,"img",5),ma(),ma(),ma(),ma(),ua(7,q_,11,10,"div",6),ga(8,"div",7),ga(9,"div",2),ga(10,"div",8),ga(11,"p",9),Fa(12,"Please login/create an account to view forum"),ma(),ma(),ma(),ga(13,"div",2),ga(14,"div",10),ga(15,"button",4),wa("click",(function(){return t.goTo("login")})),Fa(16,"Login"),ma(),ma(),ga(17,"div",10),ga(18,"button",4),wa("click",(function(){return t.goTo("register")})),Fa(19,"Register"),ma(),ma(),ma(),ma(),va(20,"router-outlet"),ga(21,"div",1),ga(22,"div",2),ga(23,"div",11),ga(24,"button",4),wa("click",(function(){return t.logout(),t.goTo("home")})),Fa(25,"Logout"),ma(),ma(),ma(),ma()),2&e&&(ni(7),fa("ngForOf",t.messages),ni(1),fa("hidden",t.loggedIn))},directives:[Tm,jl,lg],pipes:[Yl],styles:['label[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block;pointer-events:none}.body[_ngcontent-%COMP%]{min-height:100vh}a[_ngcontent-%COMP%]{position:relative}a[_ngcontent-%COMP%]:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a[_ngcontent-%COMP%]:focus{position:relative;outline:none}a[_ngcontent-%COMP%]:focus:after{width:100%}.sam-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6[_ngcontent-%COMP%]{padding:8px}@media screen and (max-width:575px){.card-link[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;margin:0}}.messageWrapper[_ngcontent-%COMP%]{margin:16px auto;width:90%;box-shadow:1px 1px 10px 1px hsla(0,0%,53.3%,.43);border:1px solid #aaa9a9;border-radius:10px}.date[_ngcontent-%COMP%]{border-right:1px solid #aaa9a9}.date[_ngcontent-%COMP%], .email[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;font-size:.75rem}.message[_ngcontent-%COMP%]{border-top:1px solid #aaa9a9;padding:8px}.reload[_ngcontent-%COMP%]{width:32px;height:32px;margin:0 auto;display:block}@media screen and (max-width:575.7px){.date[_ngcontent-%COMP%]{border-right:0}}']}),B_),H_=function(){function e(){_classCallCheck(this,e),this.board=[]}return _createClass(e,[{key:"deserialize",value:function(e){return Object.assign(this,e),this}}]),e}(),G_=((W_=function(){function e(t){_classCallCheck(this,e),this.httpClient=t}return _createClass(e,[{key:"getGames",value:function(){return this.httpClient.get("https://sam-merante.firebaseio.com/game.json",{observe:"body",responseType:"json"})}},{key:"hostGame",value:function(e){var t={hostName:e,id:new Date,playersTurn:"x"};return this.httpClient.post("https://sam-merante.firebaseio.com/game.json",t,{observe:"body",responseType:"json"})}},{key:"updateGameSession",value:function(e,t){return this.httpClient.patch("https://sam-merante.firebaseio.com/game/"+t+".json",{joinName:e},{observe:"body",responseType:"json"})}},{key:"updatePlayersTurn",value:function(e,t){return this.httpClient.patch("https://sam-merante.firebaseio.com/game/"+e+".json",{playersTurn:t},{observe:"body",responseType:"json"})}},{key:"updateBoard",value:function(e,t){return this.httpClient.patch("https://sam-merante.firebaseio.com/game/"+e+".json",{board:t},{observe:"body",responseType:"json"})}},{key:"getGameSession",value:function(e){return this.httpClient.get("https://sam-merante.firebaseio.com/game/"+e+".json").pipe(U((function(e){return(new H_).deserialize(e)})))}},{key:"updateHostSession",value:function(e){return this.httpClient.patch("https://sam-merante.firebaseio.com/game/"+e+".json",{sessionId:e},{observe:"body",responseType:"json"})}},{key:"leaveGame",value:function(e){if(e)return this.httpClient.delete("https://sam-merante.firebaseio.com/game/"+e+".json")}}]),e}()).\u0275fac=function(e){return new(e||W_)(Xe(C_))},W_.\u0275prov=de({token:W_,factory:W_.\u0275fac,providedIn:"root"}),W_),Q_=function(e){function t(e,n){var r;return _classCallCheck(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).scheduler=e,r.work=n,r.pending=!1,r}return _inherits(t,e),_createClass(t,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}},{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}},{key:"execute",value:function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}},{key:"_unsubscribe",value:function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}]),t}(function(e){function t(e,n){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))}return _inherits(t,e),_createClass(t,[{key:"schedule",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this}}]),t}(d)),K_=function(){var e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.now;_classCallCheck(this,e),this.SchedulerAction=t,this.now=n}return _createClass(e,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,e).schedule(n,t)}}]),e}();return e.now=function(){return Date.now()},e}(),Y_=new(function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:K_.now;return _classCallCheck(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,(function(){return t.delegate&&t.delegate!==_assertThisInitialized(n)?t.delegate.now():r()})))).actions=[],n.active=!1,n.scheduled=void 0,n}return _inherits(t,e),_createClass(t,[{key:"schedule",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return t.delegate&&t.delegate!==this?t.delegate.schedule(e,n,r):_get(_getPrototypeOf(t.prototype),"schedule",this).call(this,e,n,r)}},{key:"flush",value:function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}}]),t}(K_))(Q_);function X_(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}function J_(e,t){if(1&e){var n=ya();ga(0,"button",4),wa("click",(function(){Xt(n);var e=t.index;return Sa().pressButton(e)})),ga(1,"span",5),Fa(2),ma(),ma()}if(2&e){var r=t.$implicit,i=t.index,o=Sa();fa("id","square-"+i)("disabled",!(o.yourTurn&&!o.playerWon&&0!=r)||1==r),ni(1),sa("player2",0==r),ni(1),Va(" ",0==r?"O":1==r?"X":""," ")}}var Z_,$_=((Z_=function(){function e(t){_classCallCheck(this,e),this.gameService=t,this.board=[],this.yourTurn=!1,this.xName="Unknown",this.oName="Unknown",this.leave=new cu}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.board=[-1,-1,-1,-1,-1,-1,-1,-1,-1],this.hosting&&this.gameService.updateBoard(this.sessionId,this.board).subscribe((function(e){console.warn("Updated board: ",e)})),this.playerXTurn=!1,this.playerWon=!1,this.gameSessionSub=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y_;return(u(e=t)||!(e-parseFloat(e)+1>=0)||t<0)&&(t=0),n&&"function"==typeof n.schedule||(n=Y_),new C((function(e){return e.add(n.schedule(X_,t,{subscriber:e,counter:0,period:t})),e}))}(5e3).pipe(Sd(0),_d((function(){return e.gameService.getGameSession(e.sessionId)}))).subscribe((function(t){console.warn(t),null==t.hostName&&null==t.id&&null==t.joinName&&null==t.playersTurn&&null==t.sessionId&&e.leaveGame(),t.board.length>0&&(e.board=t.board,console.warn("geting updated board"),e.playerWon=0!=e.checkWinState(),e.playerWon&&(e.playersWinMessage=e.checkWinState(),setTimeout((function(){e.leaveGame()}),5e3))),e.hosting?(e.opponentsName=t.joinName,e.oName=e.opponentsName?e.opponentsName:"Unknown",e.xName=e.name?e.name:"Unknown"):(e.opponentsName=t.hostName,e.xName=e.opponentsName?e.opponentsName:"Unknown",e.oName=e.name?e.name:"Unknown"),e.hosting&&"x"===t.playersTurn?(e.yourTurn=!0,e.playerXTurn=!0):e.hosting&&"o"===t.playersTurn?(e.yourTurn=!1,e.playerXTurn=!1):e.hosting||"x"!==t.playersTurn?e.hosting||"o"!==t.playersTurn||(e.yourTurn=!0,e.playerXTurn=!1):(e.yourTurn=!1,e.playerXTurn=!0)}))}},{key:"pressButton",value:function(e){this.hosting?(this.yourTurn=!1,this.gameService.updatePlayersTurn(this.sessionId,"o").subscribe((function(e){console.warn("Next players turn: ",e)}))):(this.yourTurn=!1,this.gameService.updatePlayersTurn(this.sessionId,"x").subscribe((function(e){console.warn("Next players turn: ",e)})));var t=this.playerXTurn?1:0;this.playerXTurn=!this.playerXTurn,this.board[e]=t,this.playerWon=0!=this.checkWinState(),this.playerWon&&(this.playersWinMessage=this.checkWinState()),this.gameService.updateBoard(this.sessionId,this.board).subscribe((function(e){console.warn("Updated board: ",e)}))}},{key:"checkWinState",value:function(){return 0==this.state(0)&&0==this.state(1)&&0==this.state(2)?this.oName+" is the winner":0==this.state(3)&&0==this.state(4)&&0==this.state(5)?this.oName+" is the winner":0==this.state(6)&&0==this.state(7)&&0==this.state(8)?this.oName+" is the winner":0==this.state(0)&&0==this.state(4)&&0==this.state(8)?this.oName+" is the winner":0==this.state(2)&&0==this.state(4)&&0==this.state(6)?this.oName+" is the winner":0==this.state(0)&&0==this.state(3)&&0==this.state(6)?this.oName+" is the winner":0==this.state(1)&&0==this.state(4)&&0==this.state(7)?this.oName+" is the winner":0==this.state(2)&&0==this.state(5)&&0==this.state(8)?this.oName+" is the winner":1==this.state(0)&&1==this.state(1)&&1==this.state(2)?this.xName+" is the winner":1==this.state(3)&&1==this.state(4)&&1==this.state(5)?this.xName+" is the winner":1==this.state(6)&&1==this.state(7)&&1==this.state(8)?this.xName+" is the winner":1==this.state(0)&&1==this.state(4)&&1==this.state(8)?this.xName+" is the winner":1==this.state(2)&&1==this.state(4)&&1==this.state(6)?this.xName+" is the winner":1==this.state(0)&&1==this.state(3)&&1==this.state(6)?this.xName+" is the winner":1==this.state(1)&&1==this.state(4)&&1==this.state(7)?this.xName+" is the winner":1==this.state(2)&&1==this.state(5)&&1==this.state(8)&&this.xName+" is the winner"}},{key:"state",value:function(e){return this.board[e]}},{key:"leaveGame",value:function(){this.gameSessionSub.unsubscribe(),this.leave.emit()}},{key:"ngOnDestroy",value:function(){this.gameSessionSub.unsubscribe(),this.leave.emit()}}]),e}()).\u0275fac=function(e){return new(e||Z_)(la(G_))},Z_.\u0275cmp=ft({type:Z_,selectors:[["game-screen"]],inputs:{sessionId:["hostSession","sessionId"],name:["playersName","name"],player:"player",hosting:"hosting"},outputs:{leave:"leave"},decls:10,vars:5,consts:[[1,"playersTurn"],[1,"board"],["class","board--button",3,"id","disabled","click",4,"ngFor","ngForOf"],["sam-cta","",1,"playersTurn",3,"click"],[1,"board--button",3,"id","disabled","click"],[1,"board--button__label"]],template:function(e,t){1&e&&(ga(0,"span",0),Fa(1),ma(),ga(2,"div",0),Fa(3),va(4,"br"),Fa(5),ma(),ga(6,"div",1),ua(7,J_,3,4,"button",2),ma(),ga(8,"button",3),wa("click",(function(){return t.leaveGame()})),Fa(9,"Leave"),ma()),2&e&&(ni(1),Ua("",t.name," vs ",t.opponentsName,""),ni(2),Va(" ",t.playerXTurn?t.xName+"'s move":t.oName+"'s move"," "),ni(2),Va(" ",t.playerWon?""+t.playersWinMessage:"","\n"),ni(2),fa("ngForOf",t.board))},directives:[jl,Tm],styles:['label[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block;pointer-events:none}.body[_ngcontent-%COMP%]{min-height:100vh}a[_ngcontent-%COMP%]{position:relative}a[_ngcontent-%COMP%]:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a[_ngcontent-%COMP%]:focus{position:relative;outline:none}a[_ngcontent-%COMP%]:focus:after{width:100%}.sam-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6[_ngcontent-%COMP%]{padding:8px}@media screen and (max-width:575px){.card-link[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;margin:0}}.board[_ngcontent-%COMP%]{width:195px;height:200px;margin:0 auto}.board[_ngcontent-%COMP%], .board--button[_ngcontent-%COMP%]{border:1px solid #aaa9a9}.board--button[_ngcontent-%COMP%]{position:relative;padding:3px;margin:0;width:64px;height:64px;background:transparent;cursor:pointer}.board--button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:4px 4px 15px 0 hsla(0,0%,53.3%,.43)}.board--button[_ngcontent-%COMP%]:focus:before{left:0;width:100%;border-radius:.25rem}.board--button[_ngcontent-%COMP%]:focus:after{top:0;height:100%;border-radius:.25rem}.board--button[_ngcontent-%COMP%]:hover{outline:none;box-shadow:4px 4px 15px 0 hsla(0,0%,53.3%,.43)}.board--button[_ngcontent-%COMP%]:hover:before{left:0;width:100%;border-radius:.25rem}.board--button[_ngcontent-%COMP%]:hover:after{top:0;height:100%;border-radius:.25rem}.board--button[_ngcontent-%COMP%]:active{background:#027fe6;color:#fff}.board--button[_ngcontent-%COMP%]:disabled{background:#f1f1f1;cursor:not-allowed;border:#000}.board--button__label[_ngcontent-%COMP%]{color:#495057;font-weight:300;line-height:4rem;font-size:4rem;position:absolute;top:0;left:12px}.board--button__label[player2=true][_ngcontent-%COMP%]{left:9px}.playersTurn[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;display:block;margin:8px auto;width:194px;text-align:center}']}),Z_);function ew(e,t){if(1&e){var n=ya();ga(0,"div",5),ga(1,"div",6),ga(2,"div",7),ga(3,"sam-input-wrapper",8),ga(4,"input",9),wa("ngModelChange",(function(e){return Xt(n),Sa().userName=e})),ma(),ma(),ma(),ma(),ga(5,"div",6),ga(6,"div",10),ga(7,"button",11),wa("click",(function(){return Xt(n),Sa().joinGame()})),Fa(8,"Join game"),ma(),ma(),ma(),ma()}if(2&e){var r=Sa();ni(4),fa("ngModel",r.userName)}}function tw(e,t){if(1&e){var n=ya();ga(0,"game-screen",12),wa("leave",(function(){return Xt(n),Sa().leftGame()})),ma()}if(2&e){var r=Sa();fa("hosting",r.hosting)("playersName",r.userName)("player",r.player)("hostSession",r.hostSession)}}var nw,rw,iw=((rw=function(){function e(t){_classCallCheck(this,e),this.gameService=t,this.joinedGame=!1,this.userName="",this.player=""}return _createClass(e,[{key:"joinGame",value:function(){var e=this;""!=this.userName&&this.gameService.getGames().subscribe((function(t){if(null==t)console.warn("No Response when trying to join a game, instead will host a game"),e.gameService.hostGame(e.userName).subscribe((function(t){e.hostSession=t.name,e.joinedGame=!0,e.player="x",e.hosting=!0,console.warn("Creating game as host "+e.hostSession),e.gameService.updateHostSession(e.hostSession).subscribe((function(e){console.log("Updated host session: ",e)}))}));else{console.warn("Found sessions: ",t);var n=!1,r="";Object.keys(t).forEach((function(i){t[i].joinName||(n=!0,r=i,e.hostSession=r)})),n?e.gameService.updateGameSession(e.userName,r).subscribe((function(t){console.log("Updated game session: ",t),e.joinedGame=!0,e.hosting=!1,e.player="o"})):(console.warn("Cant find empty session, creating game"),e.gameService.hostGame(e.userName).subscribe((function(t){e.hostSession=t.name,e.joinedGame=!0,e.hosting=!0,console.warn("Creating game as host "+e.hostSession),e.player="x",e.gameService.updateHostSession(e.hostSession).subscribe((function(e){console.log("Updated host session: ",e)}))})))}}))}},{key:"ngOnDestroy",value:function(){}},{key:"leftGame",value:function(){this.joinedGame=!1,this.gameService.leaveGame(this.hostSession?this.hostSession:null).subscribe((function(e){console.warn("leave game")}))}}]),e}()).\u0275fac=function(e){return new(e||rw)(la(G_))},rw.\u0275cmp=ft({type:rw,selectors:[["sam-game"]],decls:7,vars:2,consts:[[1,"text-center"],[1,"sam-title"],[1,"lead"],["class","container-fluid",4,"ngIf"],[3,"hosting","playersName","player","hostSession","leave",4,"ngIf"],[1,"container-fluid"],[1,"row","text-center"],[1,"col-sm-3",2,"margin","0 auto"],["field_id","userName","label","User name"],["sam-input","","id","userName","aria-label","Please enter your user name to play",3,"ngModel","ngModelChange"],[1,"col-sm-12"],["sam-cta","",3,"click"],[3,"hosting","playersName","player","hostSession","leave"]],template:function(e,t){1&e&&(ga(0,"div",0),ga(1,"h1",1),Fa(2,"Tic Tac Toe"),ma(),ga(3,"p",2),Fa(4,"Simple online tic tac toe game"),ma(),ma(),ua(5,ew,9,1,"div",3),ua(6,tw,1,4,"game-screen",4)),2&e&&(ni(5),fa("ngIf",!t.joinedGame),ni(1),fa("ngIf",t.joinedGame))},directives:[Bl,Im,ey,Pm,cy,Db,Tm,$_],styles:[""]}),rw),ow=((nw=function(){function e(t){_classCallCheck(this,e),this.httpClient=t}return _createClass(e,[{key:"getStockDetails",value:function(e,t){var n="https://apidojo-yahoo-finance-v1.p.rapidapi.com/stock/get-detail?region=".concat(e,"&lang=en&symbol=").concat(t),r=(new Xb).append("x-rapidapi-host","apidojo-yahoo-finance-v1.p.rapidapi.com").append("x-rapidapi-key","9369ad4d98mshd948ad3e47e28fbp1f6518jsne4ce09bf881f");return this.httpClient.get(n,{observe:"body",responseType:"json",headers:r})}}]),e}()).\u0275fac=function(e){return new(e||nw)(Xe(C_))},nw.\u0275prov=de({token:nw,factory:nw.\u0275fac,providedIn:"root"}),nw),aw=function(e,t){return{down:e,up:t}};function sw(e,t){if(1&e&&(ga(0,"div",7),ga(1,"span",8),Fa(2),ma(),ga(3,"span",9),Fa(4),iu(5,"currency"),ma(),ga(6,"span",9),Fa(7),iu(8,"currency"),ma(),ga(9,"span",10),Fa(10),iu(11,"percent"),ma(),ma()),2&e){var n=t.$implicit;ni(2),La(n.symbol),ni(2),La(ou(5,5,n.prePrice)),ni(3),La(ou(8,7,n.postPrice)),ni(2),fa("ngClass",eu(11,aw,n.postPercent<0,n.postPercent>0)),ni(1),La(ou(11,9,n.postPercent))}}function uw(e,t){if(1&e&&(ga(0,"div",7),ga(1,"span",8),Fa(2),ma(),ga(3,"span",9),Fa(4),iu(5,"currency"),ma(),ga(6,"span",9),Fa(7),iu(8,"currency"),ma(),ga(9,"span",10),Fa(10),iu(11,"percent"),ma(),ma()),2&e){var n=t.$implicit;ni(2),La(n.symbol),ni(2),La(ou(5,5,n.prePrice)),ni(3),La(ou(8,7,n.postPrice)),ni(2),fa("ngClass",eu(11,aw,n.postPercent<0,n.postPercent>0)),ni(1),La(ou(11,9,n.postPercent))}}var cw,lw,hw,dw,fw,pw,gw,mw,vw,yw=[{path:"register",component:zb},{path:"login",component:Qb},{path:"components",component:Wv},{path:"forum",component:z_,children:[{path:"authenticated",component:U_,canActivate:[j_]}]},{path:"code",component:vm},{path:"projects",component:Yg},{path:"home",component:Qg},{path:"cv",component:Kg},{path:"game",component:iw},{path:"stocks",component:(cw=function(){function e(t){_classCallCheck(this,e),this.yahooFinanceAPI=t,this.symbolsUS=["AMZN","GOOG","MSFT","AMD","SNE"],this.preCovidPriceUS=[2200,1500,190,60,72],this.symbolsCA=["DOL.TO","RY.TO","TD.TO","BMO.TO"],this.preCovidPriceCA=[48,110,75,101],this.postCovidPercentage=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.stocksUS=[{symbol:"Refresh US",prePrice:0,postPrice:0,postPercent:0}],this.stocksCA=[{symbol:"Refresh CA",prePrice:0,postPrice:0,postPercent:0}]}},{key:"getPercentage",value:function(e,t){return(t-e)/e}},{key:"getUSStocks",value:function(){var e=this;this.stocksUS=[],this.symbolsUS.forEach((function(t,n){console.warn("getting symbol: ",t),e.yahooFinanceAPI.getStockDetails("US",t).subscribe((function(r){console.warn("got res for symbol: ",t," : ",r);var i=e.getPercentage(e.preCovidPriceUS[n],r.price.regularMarketPrice.raw);e.postCovidPercentage[n]=i,e.stocksUS.push({symbol:t,prePrice:e.preCovidPriceUS[n],postPrice:r.price.regularMarketPrice.raw,postPercent:i})}),(function(e){console.warn("ERROR: symbol: ",t," : ",e)}))}))}},{key:"getCAStocks",value:function(){var e=this;this.stocksCA=[],this.symbolsCA.forEach((function(t,n){console.warn("getting symbol: ",t),e.yahooFinanceAPI.getStockDetails("CA",t).subscribe((function(r){console.warn("got res for symbol: ",t," : ",r);var i=e.getPercentage(e.preCovidPriceCA[n],r.price.regularMarketPrice.raw);e.postCovidPercentage[n]=i,e.stocksCA.push({symbol:t,prePrice:e.preCovidPriceCA[n],postPrice:r.price.regularMarketPrice.raw,postPercent:i})}),(function(e){console.warn("ERROR: symbol: ",t," : ",e)}))}))}}]),e}(),cw.\u0275fac=function(e){return new(e||cw)(la(ow))},cw.\u0275cmp=ft({type:cw,selectors:[["app-stocks"]],decls:29,vars:2,consts:[[1,"sam-title"],[1,"button-container"],["sam-cta","",3,"click"],["role","table",1,"stocks"],["role","row",1,"stocks-row"],["role","columnheader",1,"stocks-col"],["row","row","class","stocks-row",4,"ngFor","ngForOf"],["row","row",1,"stocks-row"],["role","complementary",1,"stocks-col","symbol"],["role","complementary",1,"stocks-col"],["role","complementary",1,"stocks-col",3,"ngClass"]],template:function(e,t){1&e&&(ga(0,"h1",0),Fa(1,"COVID Stock checker"),ma(),ga(2,"div",1),ga(3,"button",2),wa("click",(function(){return t.getUSStocks()})),Fa(4,"Get US stocks"),ma(),ga(5,"button",2),wa("click",(function(){return t.getCAStocks()})),Fa(6,"Get CA stocks"),ma(),ma(),ga(7,"div",3),ga(8,"div",4),ga(9,"span",5),Fa(10,"Symbol"),ma(),ga(11,"span",5),Fa(12,"Pre Panic"),ma(),ga(13,"span",5),Fa(14,"Post Panic"),ma(),ga(15,"span",5),Fa(16,"Percentage"),ma(),ma(),ua(17,sw,12,14,"div",6),ma(),ga(18,"div",3),ga(19,"div",4),ga(20,"span",5),Fa(21,"Symbol"),ma(),ga(22,"span",5),Fa(23,"Pre Panic"),ma(),ga(24,"span",5),Fa(25,"Post Panic"),ma(),ga(26,"span",5),Fa(27,"Percentage"),ma(),ma(),ua(28,uw,12,14,"div",6),ma()),2&e&&(ni(17),fa("ngForOf",t.stocksUS),ni(11),fa("ngForOf",t.stocksCA))},directives:[Tm,jl,Vl],pipes:[Jl,Xl],styles:['label[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block;pointer-events:none}.body[_ngcontent-%COMP%]{min-height:100vh}a[_ngcontent-%COMP%]{position:relative}a[_ngcontent-%COMP%]:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a[_ngcontent-%COMP%]:focus{position:relative;outline:none}a[_ngcontent-%COMP%]:focus:after{width:100%}.sam-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6[_ngcontent-%COMP%]{padding:8px}@media screen and (max-width:575px){.card-link[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;margin:0}}.stocks[_ngcontent-%COMP%]{position:relative;display:table;width:calc(100% - 32px);font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;padding:8px;margin:16px;border:2px solid #027fe6}@media screen and (max-width:768px){.stocks[_ngcontent-%COMP%]{display:block;max-width:calc(100% - 32px);overflow-x:scroll}}.stocks-row[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.stocks-col[_ngcontent-%COMP%]{display:inline-block;min-width:100px;margin:0 auto}.stocks-col[role=columnheader][_ngcontent-%COMP%]{font-weight:700}.stocks-col.down[_ngcontent-%COMP%]{color:red}.stocks-col.up[_ngcontent-%COMP%]{color:#90ee90;font-weight:700}.button-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-evenly}']}),cw)},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"*",redirectTo:"/home"},{path:"404",redirectTo:"/home"},{path:"**",redirectTo:"/home"}],bw=((lw=function e(){_classCallCheck(this,e)}).\u0275mod=vt({type:lw}),lw.\u0275inj=fe({factory:function(e){return new(e||lw)},imports:[[wg.forRoot(yw)],wg]}),lw),_w=function(e){return{scrolled:e}},ww=function(e){return{expanded:e}},Cw=((vw=function(){function e(t){_classCallCheck(this,e),this.router=t,this.breakpointSize=768,this.scrollDown=!1,this.currentScrollOffset=0}return _createClass(e,[{key:"ngOnInit",value:function(){this.toggle=!1}},{key:"openNav",value:function(){window.innerWidth<this.breakpointSize&&(this.toggle=!this.toggle),this.router.events.subscribe((function(e){e instanceof Ld&&window.scrollTo(0,0)}))}},{key:"onScroll",value:function(){var e=document.body.offsetHeight-window.innerHeight;window.pageYOffset>0&&Math.abs(window.pageYOffset)<Math.abs(e)&&(this.scrollDown=!this.toggle&&this.currentScrollOffset<window.pageYOffset,this.currentScrollOffset=window.pageYOffset)}}]),e}()).\u0275fac=function(e){return new(e||vw)(la($p))},vw.\u0275cmp=ft({type:vw,selectors:[["app-header"]],hostBindings:function(e,t){1&e&&wa("scroll",(function(){return t.onScroll()}),!1,qn)},decls:31,vars:7,consts:[[1,"sam-navbar",3,"ngClass"],[1,"sam-navbar__brand"],["routerLink","/home",1,"sam-navbar__brand--link"],["src","assets/profile.png",1,"sam-navbar__brand--img"],[1,"sam-navbar__brand--link-label"],["type","button","data-toggle","collapse","data-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"sam-navbar__toggle-menu",3,"click"],[1,"sam-navbar__toggle-menu--chevron"],[1,"sam-navbar__menu",3,"ngClass"],[1,"sam-navbar__menu--items"],[1,"sam-navbar__menu--item"],["routerLink","/home","routerLinkActive","active",1,"sam-navbar--link",3,"click"],["routerLink","/cv","routerLinkActive","active",1,"sam-navbar--link",3,"click"],["routerLink","/projects","routerLinkActive","active",1,"sam-navbar--link",3,"click"],["routerLink","/code","routerLinkActive","active",1,"sam-navbar--link",3,"click"],["routerLink","/components","routerLinkActive","active",1,"sam-navbar--link",3,"click"],["routerLink","/game","routerLinkActive","active",1,"sam-navbar--link",3,"click"],["routerLink","/forum","routerLinkActive","active",1,"sam-navbar--link",3,"click"]],template:function(e,t){1&e&&(ga(0,"nav",0),ga(1,"div",1),ga(2,"a",2),va(3,"img",3),ga(4,"span",4),Fa(5,"Sam Merante"),ma(),ma(),ma(),ga(6,"button",5),wa("click",(function(){return t.openNav()})),va(7,"span",6),ma(),ga(8,"div",7),ga(9,"ul",8),ga(10,"li",9),ga(11,"a",10),wa("click",(function(){return t.openNav()})),Fa(12,"Home"),ma(),ma(),ga(13,"li",9),ga(14,"a",11),wa("click",(function(){return t.openNav()})),Fa(15,"CV"),ma(),ma(),ga(16,"li",9),ga(17,"a",12),wa("click",(function(){return t.openNav()})),Fa(18,"Projects"),ma(),ma(),ga(19,"li",9),ga(20,"a",13),wa("click",(function(){return t.openNav()})),Fa(21,"Code"),ma(),ma(),ga(22,"li",9),ga(23,"a",14),wa("click",(function(){return t.openNav()})),Fa(24,"Components"),ma(),ma(),ga(25,"li",9),ga(26,"a",15),wa("click",(function(){return t.openNav()})),Fa(27,"Game"),ma(),ma(),ga(28,"li",9),ga(29,"a",16),wa("click",(function(){return t.openNav()})),Fa(30,"Forum"),ma(),ma(),ma(),ma(),ma()),2&e&&(fa("ngClass",$s(3,_w,t.scrollDown)),ni(6),sa("toggle",t.toggle),ni(2),fa("ngClass",$s(5,ww,t.toggle)))},directives:[Vl,tg,sg],styles:['[_nghost-%COMP%]{display:block;margin-bottom:16px;width:100%;height:72px}label[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:block;pointer-events:none}.body[_ngcontent-%COMP%]{min-height:100vh}a[_ngcontent-%COMP%]{position:relative}a[_ngcontent-%COMP%]:after{transition:width .5s ease;-webkit-transition:width .5s ease;-moz-transition:width .5s ease;-o-transition:width .5s ease;position:absolute;display:block;content:"";width:0;height:2px;top:calc(100% + 2px);left:0;background-color:#0063b4}a[_ngcontent-%COMP%]:focus{position:relative;outline:none}a[_ngcontent-%COMP%]:focus:after{width:100%}.sam-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;line-height:1.5;font-weight:300;color:#495057;font-size:2rem;text-align:center}.col-sm-6[_ngcontent-%COMP%]{padding:8px}@media screen and (max-width:575px){.card-link[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;margin:0}}.sam-navbar[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;display:flex;max-width:100%;padding:4px 0;position:fixed;width:100%;top:0;left:0;z-index:99999;background:#fff;box-shadow:1px 1px 10px 1px hsla(0,0%,53.3%,.43);transition:all .3s ease;-webkit-transition:all .3s ease;-moz-transition:all .3s ease;-o-transition:all .3s ease}.sam-navbar.scrolled[_ngcontent-%COMP%]{transform:translateY(-100%)}.sam-navbar__brand[_ngcontent-%COMP%]{display:inline-flex;flex:1 1 auto;padding:0;margin:0 0 0 128px}@media screen and (max-width:1024px){.sam-navbar__brand[_ngcontent-%COMP%]{margin-left:16px}}.sam-navbar__brand--img[_ngcontent-%COMP%]{display:inline-block;height:64px;width:42px}.sam-navbar__brand--link[_ngcontent-%COMP%]{display:inline-table;color:#495057}.sam-navbar__brand--link[_ngcontent-%COMP%]:hover{text-decoration:none;color:#000}.sam-navbar__brand--link-label[_ngcontent-%COMP%]{font-size:1.5rem;padding:0 16px;display:table-cell;vertical-align:middle}.sam-navbar__toggle-menu[_ngcontent-%COMP%]{display:none}@media screen and (max-width:768px){.sam-navbar__toggle-menu[_ngcontent-%COMP%]{display:inline-block;position:fixed;right:0;height:64px;padding:0 16px;margin:0 12px;background:none;border:none}.sam-navbar__toggle-menu--chevron[_ngcontent-%COMP%]{display:block;width:30px;height:3px;background-color:#495057;margin:15px 0;transition:all .3s ease;-webkit-transition:all .3s ease;-moz-transition:all .3s ease;-o-transition:all .3s ease}.sam-navbar__toggle-menu--chevron[_ngcontent-%COMP%]:before{top:-8px}.sam-navbar__toggle-menu--chevron[_ngcontent-%COMP%]:after, .sam-navbar__toggle-menu--chevron[_ngcontent-%COMP%]:before{transition:all .3s ease;content:"";display:block;position:relative;width:30px;height:3px;background-color:#495057}.sam-navbar__toggle-menu--chevron[_ngcontent-%COMP%]:after{-webkit-transition:all .3s ease;-moz-transition:all .3s ease;-o-transition:all .3s ease;top:6px}}.sam-navbar__toggle-menu[toggle=true][_ngcontent-%COMP%]   .sam-navbar__toggle-menu--chevron[_ngcontent-%COMP%]{height:0}.sam-navbar__toggle-menu[toggle=true][_ngcontent-%COMP%]   .sam-navbar__toggle-menu--chevron[_ngcontent-%COMP%]:before{transform:rotate(45deg);top:-2px}.sam-navbar__toggle-menu[toggle=true][_ngcontent-%COMP%]   .sam-navbar__toggle-menu--chevron[_ngcontent-%COMP%]:after{transform:rotate(-45deg);top:-5px}.sam-navbar__menu[_ngcontent-%COMP%]{display:inline-flex;flex:0 0 auto;padding:0;margin:0;position:relative}.sam-navbar__menu--items[_ngcontent-%COMP%]{display:inline-block;padding:0;margin:0 128px 0 0;list-style:none}@media screen and (max-width:1024px){.sam-navbar__menu--items[_ngcontent-%COMP%]{margin-right:16px}}.sam-navbar__menu--item[_ngcontent-%COMP%]{display:inline-table;height:100%;margin:0;width:108px;text-align:center}@media screen and (max-width:1024px){.sam-navbar__menu--item[_ngcontent-%COMP%]{width:64px}}@media screen and (max-width:768px){.sam-navbar__menu[_ngcontent-%COMP%]{visibility:hidden;position:fixed;top:64px;left:0;width:calc(100% - 2px);height:calc(100% - 64px);transform:translateY(100vh);background-color:#fff;overflow:scroll;transition:all .3s ease;-webkit-transition:all .3s ease;-moz-transition:all .3s ease;-o-transition:all .3s ease}.sam-navbar__menu.expanded[_ngcontent-%COMP%]{visibility:visible;transform:translateY(0)}.sam-navbar__menu--items[_ngcontent-%COMP%]{width:100%;margin:0}.sam-navbar__menu--item[_ngcontent-%COMP%]{display:block;height:auto;width:100%}.sam-navbar__menu[_ngcontent-%COMP%]   .sam-navbar--link[_ngcontent-%COMP%]{display:block;text-align:left;font-size:1.5rem;padding:8px 16px}.sam-navbar__menu[_ngcontent-%COMP%]   .sam-navbar--link.active[_ngcontent-%COMP%]{font-weight:700}}.sam-navbar--link[_ngcontent-%COMP%]{position:relative;text-decoration:none;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;font-weight:300;padding:0 8px;display:table-cell;vertical-align:middle}.sam-navbar--link[_ngcontent-%COMP%]:hover{text-decoration:none;color:#000}.sam-navbar--link.active[_ngcontent-%COMP%]:before{position:absolute;display:block;content:"";width:100%;height:2px;top:calc(100% + 2px);left:0;background-color:#027fe6}']}),vw),kw=((mw=function e(){_classCallCheck(this,e),this.date=new Date}).\u0275fac=function(e){return new(e||mw)},mw.\u0275cmp=ft({type:mw,selectors:[["app-footer"]],decls:13,vars:4,consts:[[1,"card-footer","text-muted"],[1,"row"],[1,"col-sm-10"],["target","_blank","href","https://github.com/smerante/",1,"card-link"],["target","_blank","href","https://bitbucket.org/Sammer95/",1,"card-link"],["target","_blank","href","https://www.linkedin.com/in/sam-merante/",1,"card-link"],[1,"col-sm-2"],[1,"date"]],template:function(e,t){1&e&&(ga(0,"div",0),ga(1,"div",1),ga(2,"div",2),ga(3,"a",3),Fa(4,"GitHub"),ma(),ga(5,"a",4),Fa(6,"Bitbucket"),ma(),ga(7,"a",5),Fa(8,"Linked In"),ma(),ma(),ga(9,"div",6),ga(10,"span",7),Fa(11),iu(12,"date"),ma(),ma(),ma(),ma()),2&e&&(ni(11),La(au(12,1,t.date,"MM-dd-yyyy")))},pipes:[Yl],styles:[".card-footer[_ngcontent-%COMP%]{margin-top:128px}@media screen and (max-width:575px){.card-link[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;margin:0}}"]}),mw),Sw=((gw=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){Bb.initializeApp({apiKey:"AIzaSyBv7rMr86OmhTlT7q8Gj4a59lXutxFdAyE",authDomain:"sam-merante.firebaseapp.com"})}}]),e}()).\u0275fac=function(e){return new(e||gw)},gw.\u0275cmp=ft({type:gw,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"body"]],template:function(e,t){1&e&&(va(0,"app-header"),ga(1,"div",0),va(2,"router-outlet"),ma(),va(3,"app-footer"))},directives:[Cw,lg,kw],styles:[""]}),gw),Ew=((pw=function e(){_classCallCheck(this,e)}).\u0275mod=vt({type:pw}),pw.\u0275inj=fe({factory:function(e){return new(e||pw)},imports:[[]]}),pw),Tw=((fw=function e(){_classCallCheck(this,e)}).\u0275mod=vt({type:fw}),fw.\u0275inj=fe({factory:function(e){return new(e||fw)},imports:[[ah]]}),fw),xw=((dw=function e(){_classCallCheck(this,e)}).\u0275mod=vt({type:dw}),dw.\u0275inj=fe({factory:function(e){return new(e||dw)},providers:[],imports:[[Uh]]}),dw),Iw=((hw=function e(){_classCallCheck(this,e)}).\u0275mod=vt({type:hw,bootstrap:[Sw]}),hw.\u0275inj=fe({factory:function(e){return new(e||hw)},providers:[{provide:jc,useClass:Qc}],imports:[[Uh,bw,jb,qb,Ew,L_,xw,Tw]]}),hw);(function(){if(pr)throw new Error("Cannot enable prod mode after platform setup.");fr=!1})(),Lh().bootstrapModule(Iw).catch((function(e){return console.error(e)}))},zVF4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("+7AZ"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=(15&s)<<2|c>>6,h=63&c;u||(h=64,a||(l=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[l],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!=s&&(r.push(a<<4&240|s>>2),64!=u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},c=function(e){try{return u.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=l(e[n],t[n]));return e}var h=function(){function e(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}(),d=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""},f=Error.captureStackTrace,p=function(e,t){if(this.code=e,this.message=t,f)f(this,g.prototype.create);else try{throw Error.apply(this,arguments)}catch(n){this.name="FirebaseError",Object.defineProperty(this,"stack",{get:function(){return n.stack}})}};p.prototype=Object.create(Error.prototype),p.prototype.constructor=p,p.prototype.name="FirebaseError";var g=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n,this.pattern=/\{\$([^}]+)}/g}return e.prototype.create=function(e,t){void 0===t&&(t={});var n,r=this.errors[e],i=this.service+"/"+e;n=void 0===r?"Error":r.replace(this.pattern,(function(e,n){var r=t[n];return void 0!==r?r.toString():"<"+n+"?>"}));var o=new p(i,n=this.serviceName+": "+n+" ("+i+").");for(var a in t)t.hasOwnProperty(a)&&"_"!==a.slice(-1)&&(o[a]=t[a]);return o},e}();function m(e){return JSON.parse(e)}var v=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=m(c(o[0])||""),n=m(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:t,claims:n,data:r,signature:i}},y=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])},b=function(e,t){return y(t,(function(t,n){e[t]=n})),e},_=function(e,t,n){for(var r in e)if(t.call(n,e[r],r,e))return r},w=function(e){function t(){var t=e.call(this)||this;t.chain_=[],t.buf_=[],t.W_=[],t.pad_=[],t.inbuf_=0,t.total_=0,t.blockSize=64,t.pad_[0]=128;for(var n=1;n<t.blockSize;++n)t.pad_[n]=0;return t.reset(),t}return r.__extends(t,e),t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^s&(u^c),o=1518500249):(i=s^u^c,o=1859775393):r<60?(i=s&u|c&(s|u),o=2400959708):(i=s^u^c,o=3395469782);var h=(a<<5|a>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(s<<30|s>>>2),s=a,a=h}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0==o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o==this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o==this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},t.prototype.digest=function(){var e=[],t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},t}((function(){this.blockSize=-1})),C=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=k),void 0===r.error&&(r.error=k),void 0===r.complete&&(r.complete=k);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function k(){}function S(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return e+" failed: "+r+" argument "}t.assert=o,t.assertionError=a,t.base64=u,t.base64Decode=c,t.base64Encode=function(e){var t=s(e);return u.encodeByteArray(t,!0)},t.CONSTANTS=i,t.deepCopy=function(e){return l(void 0,e)},t.deepExtend=l,t.patchProperty=function(e,t,n){e[t]=n},t.Deferred=h,t.getUA=d,t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())},t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.ErrorFactory=g,t.FirebaseError=p,t.patchCapture=function(e){var t=f;return f=e,t},t.jsonEval=m,t.stringify=function(e){return JSON.stringify(e)},t.decode=v,t.isAdmin=function(e){var t=v(e).claims;return"object"==typeof t&&!0===t.admin},t.issuedAtTime=function(e){var t=v(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.isValidFormat=function(e){var t=v(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t,n,r=v(e).claims,i=Math.floor((new Date).getTime()/1e3);return"object"==typeof r&&(r.hasOwnProperty("nbf")?t=r.nbf:r.hasOwnProperty("iat")&&(t=r.iat),n=r.hasOwnProperty("exp")?r.exp:t+86400),i&&t&&n&&i>=t&&i<=n},t.clone=function(e){return b({},e)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.every=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!t(n,e[n]))return!1;return!0},t.extend=b,t.findKey=_,t.findValue=function(e,t,n){var r=_(e,t,n);return r&&e[r]},t.forEach=y,t.getAnyKey=function(e){for(var t in e)return t},t.getCount=function(e){var t=0;for(var n in e)t++;return t},t.getValues=function(e){var t=[],n=0;for(var r in e)t[n++]=e[r];return t},t.isEmpty=function(e){for(var t in e)return!1;return!0},t.isNonNullObject=function(e){return"object"==typeof e&&null!==e},t.map=function(e,t,n){var r={};for(var i in e)r[i]=t.call(n,e[i],i,e);return r},t.safeGet=function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},t.querystring=function(e){var t=[];return y(e,(function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})),t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.Sha1=w,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.createSubscribe=function(e,t){var n=new C(e,t);return n.subscribe.bind(n)},t.errorPrefix=S,t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(S(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(S(e,t,r)+"must be a valid context object.")},t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(S(e,t,r)+"must be a valid firebase namespace.")},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}}},[[0,0]]]);
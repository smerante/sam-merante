<span class="sam-date-wrapper">
  <input type="string" class="sam-date-input" [value]="selectedDate | date : 'EEE, MMM dd, yyyy'" (change)="onChange();"
    (click)="clicked();" />
  <img class="calendar-icon" src="assets/calendar.png" tabindex="0" role="button" (keydown.enter)="clicked();"
    (keydown.space)="clicked();" (click)="clicked();" />
</span>
<div class="sam-calendar" [attr.open]="open">
  <div class="sam-calendar--header">
    <button class="sam-calendar--header__left" tabindex="0" (click)="selectLeft();">
      &lt;
    </button>
    <button class="sam-calendar--header__date" (click)="changeView();">
      <span *ngIf="view == 0">{{ date | date: 'MMM' }}</span>
      <span *ngIf="view == 1">{{ date | date: 'yyyy' }}</span>
      <span *ngIf="view == 2">{{years[0] | date: 'yyyy'}} - {{years[11] | date: 'yyyy'}}</span>
    </button>
    <button class="sam-calendar--header__right" tabindex="0" (click)="selectRight();">
      &gt;
    </button>
  </div>
  <div *ngIf="view == 0" class="sam-calendar--header">
    <span class="sam-calendar--header__day">Sun</span>
    <span class="sam-calendar--header__day">Mon</span>
    <span class="sam-calendar--header__day">Tue</span>
    <span class="sam-calendar--header__day">Wed</span>
    <span class="sam-calendar--header__day">Thu</span>
    <span class="sam-calendar--header__day">Fri</span>
    <span class="sam-calendar--header__day">Sat</span>
  </div>
  <div *ngIf="view == 0" class="sam-calendar--body">
    <div *ngFor="let w of weeks; let i = index;" class="sam-calendar--week">
      <button *ngFor="let d of getDaysFromWeek(i);" class="sam-calendar--week__d" (click)="selectDate(d);"
        [attr.selectedDate]="d.getDate() === selectedDate.getDate() && d.getMonth() === selectedDate.getMonth()"
        [attr.notInMonth]="d.getMonth() !== date.getMonth()">{{d | date: 'dd'}}
      </button>
    </div>
  </div>
  <div *ngIf="view == 1" class="sam-calendar--body">
    <button *ngFor="let d of months" class="sam-calendar--week__m" (click)="selectDate(d);"
      [attr.selectedDate]="d.getMonth() === selectedDate.getMonth() && d.getFullYear() === selectedDate.getFullYear()">{{d | date: 'MMM'}}
    </button>
  </div>
  <div *ngIf="view == 2" class="sam-calendar--body">
    <button *ngFor="let d of years" class="sam-calendar--week__y" (click)="selectDate(d);"
      [attr.selectedDate]="d.getFullYear() === selectedDate.getFullYear()">{{d | date: 'yyyy'}}
    </button>
  </div>
</div>